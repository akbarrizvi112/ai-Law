"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/@langchain/core/chat_history.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/chat_history.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatMessageHistory: () => (/* reexport safe */ _dist_chat_history_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatMessageHistory),\n/* harmony export */   BaseListChatMessageHistory: () => (/* reexport safe */ _dist_chat_history_js__WEBPACK_IMPORTED_MODULE_0__.BaseListChatMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _dist_chat_history_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/chat_history.js */ \"(rsc)/./node_modules/@langchain/core/dist/chat_history.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2NoYXRfaGlzdG9yeS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvY2hhdF9oaXN0b3J5LmpzPzU0M2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2NoYXRfaGlzdG9yeS5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/chat_history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/caches.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * This cache key should be consistent across all versions of langchain.\n * It is currently NOT consistent across versions of langchain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * seperate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of langchain.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(getCacheKey(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(getCacheKey(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBK0M7QUFDc0I7QUFDckU7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUUsY0FBYyxDQUFDLEdBQUdDLFVBQVlILDREQUFZQSxDQUFDRyxRQUFRQyxJQUFJLENBQUMsTUFBTTtBQUNwRSxTQUFTQyw0QkFBNEJDLGdCQUFnQjtJQUN4RCxJQUFJQSxpQkFBaUJDLE9BQU8sS0FBS0MsV0FBVztRQUN4QyxPQUFPO1lBQ0hDLE1BQU1ILGlCQUFpQkcsSUFBSTtZQUMzQkYsU0FBU04saUZBQTZCQSxDQUFDSyxpQkFBaUJDLE9BQU87UUFDbkU7SUFDSixPQUNLO1FBQ0QsT0FBTztZQUFFRSxNQUFNSCxpQkFBaUJHLElBQUk7UUFBQztJQUN6QztBQUNKO0FBQ08sU0FBU0Msb0JBQW9CQyxVQUFVO0lBQzFDLE1BQU1DLGtCQUFrQjtRQUNwQkgsTUFBTUUsV0FBV0YsSUFBSTtJQUN6QjtJQUNBLElBQUlFLFdBQVdKLE9BQU8sS0FBS0MsV0FBVztRQUNsQ0ksZ0JBQWdCTCxPQUFPLEdBQUdJLFdBQVdKLE9BQU8sQ0FBQ00sTUFBTTtJQUN2RDtJQUNBLE9BQU9EO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLE1BQU1FO0FBQ2I7QUFDQSxNQUFNQyxhQUFhLElBQUlDO0FBQ3ZCOztDQUVDLEdBQ00sTUFBTUMsc0JBQXNCSDtJQUMvQkksWUFBWUMsR0FBRyxDQUFFO1FBQ2IsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHUCxPQUFPLElBQUlIO0lBQzVCO0lBQ0E7Ozs7OztLQU1DLEdBQ0RXLE9BQU9DLE1BQU0sRUFBRUMsTUFBTSxFQUFFO1FBQ25CLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDOUIsWUFBWTBCLFFBQVFDLFlBQVk7SUFDMUU7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9MLE1BQU0sRUFBRUMsTUFBTSxFQUFFSixLQUFLLEVBQUU7UUFDaEMsSUFBSSxDQUFDQyxLQUFLLENBQUNRLEdBQUcsQ0FBQ2hDLFlBQVkwQixRQUFRQyxTQUFTSjtJQUNoRDtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPVSxTQUFTO1FBQ1osT0FBTyxJQUFJbEIsY0FBY0Y7SUFDN0I7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhY2hlcy5qcz82NWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluc2VjdXJlSGFzaCB9IGZyb20gXCIuL3V0aWxzL2hhc2guanNcIjtcbmltcG9ydCB7IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlLCB9IGZyb20gXCIuL21lc3NhZ2VzL2luZGV4LmpzXCI7XG4vKipcbiAqIFRoaXMgY2FjaGUga2V5IHNob3VsZCBiZSBjb25zaXN0ZW50IGFjcm9zcyBhbGwgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICogSXQgaXMgY3VycmVudGx5IE5PVCBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKlxuICogQSBodWdlIGJlbmVmaXQgb2YgaGF2aW5nIGEgcmVtb3RlIGNhY2hlIChsaWtlIHJlZGlzKSBpcyB0aGF0IHlvdSBjYW5cbiAqIGFjY2VzcyB0aGUgY2FjaGUgZnJvbSBkaWZmZXJlbnQgcHJvY2Vzc2VzL21hY2hpbmVzLiBUaGUgYWxsb3dzIHlvdSB0b1xuICogc2VwZXJhdGUgY29uY2VybnMgYW5kIHNjYWxlIGhvcml6b250YWxseS5cbiAqXG4gKiBUT0RPOiBNYWtlIGNhY2hlIGtleSBjb25zaXN0ZW50IGFjcm9zcyB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYWNoZUtleSA9ICguLi5zdHJpbmdzKSA9PiBpbnNlY3VyZUhhc2goc3RyaW5ncy5qb2luKFwiX1wiKSk7XG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uKHN0b3JlZEdlbmVyYXRpb24pIHtcbiAgICBpZiAoc3RvcmVkR2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geyB0ZXh0OiBzdG9yZWRHZW5lcmF0aW9uLnRleHQgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplR2VuZXJhdGlvbihnZW5lcmF0aW9uKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFZhbHVlID0ge1xuICAgICAgICB0ZXh0OiBnZW5lcmF0aW9uLnRleHQsXG4gICAgfTtcbiAgICBpZiAoZ2VuZXJhdGlvbi5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2VyaWFsaXplZFZhbHVlLm1lc3NhZ2UgPSBnZW5lcmF0aW9uLm1lc3NhZ2UudG9EaWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkVmFsdWU7XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBjYWNoZXMuIEFsbCBjYWNoZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhY2hlIHtcbn1cbmNvbnN0IEdMT0JBTF9NQVAgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEEgY2FjaGUgZm9yIHN0b3JpbmcgTExNIGdlbmVyYXRpb25zIHRoYXQgc3RvcmVzIGRhdGEgaW4gbWVtb3J5LlxuICovXG5leHBvcnQgY2xhc3MgSW5NZW1vcnlDYWNoZSBleHRlbmRzIEJhc2VDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobWFwKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBtYXAgPz8gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgZGF0YSBmcm9tIHRoZSBjYWNoZSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS4gSWYgdGhlXG4gICAgICogZGF0YSBpcyBub3QgZm91bmQsIGl0IHJldHVybnMgbnVsbC5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBsbG1LZXkgVGhlIExMTSBrZXkgdXNlZCB0byBmaW5kIHRoZSBkYXRhLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb21wdCBhbmQgTExNIGtleSwgb3IgbnVsbCBpZiBub3QgZm91bmQuXG4gICAgICovXG4gICAgbG9va3VwKHByb21wdCwgbGxtS2V5KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5jYWNoZS5nZXQoZ2V0Q2FjaGVLZXkocHJvbXB0LCBsbG1LZXkpKSA/PyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2FjaGUgd2l0aCBuZXcgZGF0YSB1c2luZyBhIHByb21wdCBhbmQgYW4gTExNIGtleS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCB0byBzdG9yZSB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gbGxtS2V5IFRoZSBMTE0ga2V5IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSBkYXRhIHRvIGJlIHN0b3JlZC5cbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGUocHJvbXB0LCBsbG1LZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGdldENhY2hlS2V5KHByb21wdCwgbGxtS2V5KSwgdmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZ2xvYmFsIGluc3RhbmNlIG9mIEluTWVtb3J5Q2FjaGUgdXNpbmcgYSBwcmVkZWZpbmVkIGdsb2JhbFxuICAgICAqIG1hcCBhcyB0aGUgaW5pdGlhbCBjYWNoZS5cbiAgICAgKiBAcmV0dXJucyBBIGdsb2JhbCBpbnN0YW5jZSBvZiBJbk1lbW9yeUNhY2hlLlxuICAgICAqL1xuICAgIHN0YXRpYyBnbG9iYWwoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5NZW1vcnlDYWNoZShHTE9CQUxfTUFQKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJnZXRDYWNoZUtleSIsInN0cmluZ3MiLCJqb2luIiwiZGVzZXJpYWxpemVTdG9yZWRHZW5lcmF0aW9uIiwic3RvcmVkR2VuZXJhdGlvbiIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJ0ZXh0Iiwic2VyaWFsaXplR2VuZXJhdGlvbiIsImdlbmVyYXRpb24iLCJzZXJpYWxpemVkVmFsdWUiLCJ0b0RpY3QiLCJCYXNlQ2FjaGUiLCJHTE9CQUxfTUFQIiwiTWFwIiwiSW5NZW1vcnlDYWNoZSIsImNvbnN0cnVjdG9yIiwibWFwIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNhY2hlIiwibG9va3VwIiwicHJvbXB0IiwibGxtS2V5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXQiLCJ1cGRhdGUiLCJzZXQiLCJnbG9iYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/caches.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: typeof process !== \"undefined\" ? process.env?.LANGCHAIN_CALLBACKS_BACKGROUND !== \"true\" : true\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBQytDO0FBQzVFOzs7O0NBSUMsR0FDRCxNQUFNRztBQUNOO0FBQ0E7Ozs7O0NBS0MsR0FDTSxNQUFNQyw0QkFBNEJEO0lBQ3JDLElBQUlFLGVBQWU7UUFDZixPQUFPO1lBQUM7WUFBa0I7WUFBYSxJQUFJLENBQUNDLElBQUk7U0FBQztJQUNyRDtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPQztJQUNYO0lBQ0EsSUFBSUMsZ0JBQWdCO1FBQ2hCLE9BQU9EO0lBQ1g7SUFDQSxJQUFJRSxhQUFhO1FBQ2IsT0FBT0Y7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsT0FBT0csVUFBVTtRQUNiLE9BQU8sSUFBSSxDQUFDTCxJQUFJO0lBQ3BCO0lBQ0E7O0tBRUMsR0FDRCxJQUFJTSxRQUFRO1FBQ1IsT0FBTztlQUNBLElBQUksQ0FBQ1AsWUFBWTtZQUNwQkgseUVBQWtCQSxDQUFDLElBQUksQ0FBQ1csV0FBVztTQUN0QztJQUNMO0lBQ0FBLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLE9BQU9DLFlBQVksY0FFbEJBLFFBQVFDLEdBQUcsRUFBRUMsbUNBQW1DLFNBQ2xEO1FBQ1Y7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1YsU0FBUyxDQUFDO1FBQzNCLElBQUlBLE9BQU87WUFDUCxJQUFJLENBQUNXLFNBQVMsR0FBR1gsTUFBTVcsU0FBUyxJQUFJLElBQUksQ0FBQ0EsU0FBUztZQUNsRCxJQUFJLENBQUNDLFdBQVcsR0FBR1osTUFBTVksV0FBVyxJQUFJLElBQUksQ0FBQ0EsV0FBVztZQUN4RCxJQUFJLENBQUNDLFdBQVcsR0FBR2IsTUFBTWEsV0FBVyxJQUFJLElBQUksQ0FBQ0EsV0FBVztZQUN4RCxJQUFJLENBQUNDLGVBQWUsR0FBR2QsTUFBTWMsZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZTtRQUN4RTtJQUNKO0lBQ0FDLE9BQU87UUFDSCxPQUFPLElBQUksSUFBSSxDQUFDaEIsV0FBVyxDQUFDLElBQUk7SUFDcEM7SUFDQWlCLFNBQVM7UUFDTCxPQUFPN0IsK0RBQVlBLENBQUM4QixTQUFTLENBQUNELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLElBQUk7SUFDbEQ7SUFDQUMsdUJBQXVCO1FBQ25CLE9BQU9oQywrREFBWUEsQ0FBQzhCLFNBQVMsQ0FBQ0Usb0JBQW9CLENBQUNELElBQUksQ0FBQyxJQUFJO0lBQ2hFO0lBQ0EsT0FBT0UsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLE1BQU1DLGdCQUFnQmhDO1lBQ2xCUyxhQUFjO2dCQUNWLEtBQUs7Z0JBQ0xFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtvQkFDaENDLFlBQVk7b0JBQ1pDLGNBQWM7b0JBQ2RDLFVBQVU7b0JBQ1ZDLE9BQU9wQiw0Q0FBTztnQkFDbEI7Z0JBQ0FlLE9BQU91QixNQUFNLENBQUMsSUFBSSxFQUFFSDtZQUN4QjtRQUNKO1FBQ0EsT0FBTyxJQUFJQztJQUNmO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcz81MTg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgZ2V0X2xjX3VuaXF1ZV9uYW1lLCB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmVcbiAqIG92ZXJyaWRkZW4gaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlXG4gKiBleGVjdXRpb24gb2YgYSBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xufVxuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBjcmVhdGluZyBjYWxsYmFjayBoYW5kbGVycyBpbiB0aGUgTGFuZ0NoYWluXG4gKiBmcmFtZXdvcmsuIEl0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmUgb3ZlcnJpZGRlblxuICogaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gKiBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiY2FsbGJhY2tzXCIsIHRoaXMubmFtZV07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBzZXJpYWxpemFibGUuIE92ZXJyaWRlIHRvIHByb3ZpZGUgYW4gYWxpYXMgb3JcbiAgICAgKiB0byBwcmVzZXJ2ZSB0aGUgc2VyaWFsaXplZCBtb2R1bGUgbmFtZSBpbiBtaW5pZmllZCBlbnZpcm9ubWVudHMuXG4gICAgICpcbiAgICAgKiBJbXBsZW1lbnRlZCBhcyBhIHN0YXRpYyBtZXRob2QgdG8gc3VwcG9ydCBsb2FkaW5nIGxvZ2ljLlxuICAgICAqL1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgc2VyaWFsaXplZCBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlLlxuICAgICAqL1xuICAgIGdldCBsY19pZCgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnRoaXMubGNfbmFtZXNwYWNlLFxuICAgICAgICAgICAgZ2V0X2xjX3VuaXF1ZV9uYW1lKHRoaXMuY29uc3RydWN0b3IpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlTExNXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQ2hhaW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVBZ2VudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZVJldHJpZXZlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF3YWl0SGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvY2Vzcy1lbnZcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORCAhPT0gXCJ0cnVlXCJcbiAgICAgICAgICAgICAgICA6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGNfa3dhcmdzID0gaW5wdXQgfHwge307XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVMTE0gPSBpbnB1dC5pZ25vcmVMTE0gPz8gdGhpcy5pZ25vcmVMTE07XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUNoYWluID0gaW5wdXQuaWdub3JlQ2hhaW4gPz8gdGhpcy5pZ25vcmVDaGFpbjtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQWdlbnQgPSBpbnB1dC5pZ25vcmVBZ2VudCA/PyB0aGlzLmlnbm9yZUFnZW50O1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVSZXRyaWV2ZXIgPSBpbnB1dC5pZ25vcmVSZXRyaWV2ZXIgPz8gdGhpcy5pZ25vcmVSZXRyaWV2ZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OTm90SW1wbGVtZW50ZWQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21NZXRob2RzKG1ldGhvZHMpIHtcbiAgICAgICAgY2xhc3MgSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV1aWQudjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgbWV0aG9kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIYW5kbGVyKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInV1aWQiLCJTZXJpYWxpemFibGUiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIiwiQmFzZUNhbGxiYWNrSGFuZGxlciIsImxjX25hbWVzcGFjZSIsIm5hbWUiLCJsY19zZWNyZXRzIiwidW5kZWZpbmVkIiwibGNfYXR0cmlidXRlcyIsImxjX2FsaWFzZXMiLCJsY19uYW1lIiwibGNfaWQiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJMQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkQiLCJsY19rd2FyZ3MiLCJpZ25vcmVMTE0iLCJpZ25vcmVDaGFpbiIsImlnbm9yZUFnZW50IiwiaWdub3JlUmV0cmlldmVyIiwiY29weSIsInRvSlNPTiIsInByb3RvdHlwZSIsImNhbGwiLCJ0b0pTT05Ob3RJbXBsZW1lbnRlZCIsImZyb21NZXRob2RzIiwibWV0aG9kcyIsIkhhbmRsZXIiLCJ2NCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/initialize.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n\n\n\n\n\n\n\n\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, _runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt)=>{\n            const runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            await handler.handleLLMStart?.(llm, [\n                                prompt\n                            ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, _runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup)=>{\n            const runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            if (handler.handleChatModelStart) {\n                                await handler.handleChatModelStart?.(llm, [\n                                    messageGroup\n                                ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            } else if (handler.handleLLMStart) {\n                                const messageString = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(messageGroup);\n                                await handler.handleLLMStart?.(llm, [\n                                    messageString\n                                ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            }\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\";\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    callbackManager.addHandler(await (0,_tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__.getTracingV2CallbackHandler)(), true);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\n * processQuestions(questions).catch(console.error);\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ2E7QUFDYztBQUNRO0FBQ2hCO0FBQ0U7QUFDUztBQUNsQjtBQUN6QyxTQUFTUyx1QkFBdUJDLEdBQUc7SUFDdEMsSUFBSSxDQUFDQSxLQUFLO1FBQ04sT0FBTyxDQUFDO0lBQ1osT0FDSyxJQUFJQyxNQUFNQyxPQUFPLENBQUNGLFFBQVEsVUFBVUEsS0FBSztRQUMxQyxPQUFPO1lBQUVHLFdBQVdIO1FBQUk7SUFDNUIsT0FDSztRQUNELE9BQU9BO0lBQ1g7QUFDSjtBQUNBOztDQUVDLEdBQ00sTUFBTUk7SUFDVEMsV0FBV0MsT0FBTyxFQUFFO1FBQ2hCLE9BQU8sSUFBSSxDQUFDQyxXQUFXLENBQUM7WUFBQ0Q7U0FBUTtJQUNyQztBQUNKO0FBQ0E7O0NBRUMsR0FDRCxNQUFNRTtJQUNGQyxZQUFZQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLElBQUksRUFBRUMsZUFBZSxFQUFFQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxZQUFZLENBQUU7UUFDbEhDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2I7UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9aO1FBQ1g7UUFDQU8sT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx1QkFBdUI7WUFDL0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9YO1FBQ1g7UUFDQU0sT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxP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QUksQ0FBQzJFLFVBQVUsR0FBR3hEO1FBQ3RCO0lBQ0o7QUFDSjtBQUNBLDhEQUE4RDtBQUM5RCxTQUFTK0QsY0FBY3BILEtBQUssRUFBRXFILFVBQVU7SUFDcEMsT0FBT3JILFNBQVMsQ0FBQ3RCLE1BQU1DLE9BQU8sQ0FBQ3FCLFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUNxSCxXQUFXLEVBQUVySDtJQUFNO0FBQ2hDO0FBQ0EsOERBQThEO0FBQ3ZELGVBQWVzSCxhQUFhQyxZQUFZLEVBQUVDLFlBQVksRUFBRSxHQUFHQyxJQUFJO0lBQ2xFLE1BQU1DLGFBQWEsSUFBSW5CLFdBQVdnQixhQUFhOUcsSUFBSSxFQUFFOEc7SUFDckQsTUFBTXpCLGtCQUFrQixNQUFNNEIsV0FBV1IsS0FBSyxDQUFDO1FBQUUsR0FBR08sSUFBSTtJQUFDO0lBQ3pELElBQUk7UUFDQSxNQUFNRSxTQUFTLE1BQU1ILGFBQWExQixvQkFBb0IyQjtRQUN0RCxNQUFNQyxXQUFXUCxHQUFHLENBQUNDLGNBQWNPLFFBQVE7UUFDM0MsT0FBT0E7SUFDWCxFQUNBLE9BQU9ySCxLQUFLO1FBQ1IsTUFBTW9ILFdBQVdsSCxLQUFLLENBQUNGO1FBQ3ZCLE1BQU1BO0lBQ1Y7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9tYW5hZ2VyLmpzPzA5ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2luaXRpYWxpemUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5jbGFzcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocnVuSWQsIGhhbmRsZXJzLCBpbmhlcml0YWJsZUhhbmRsZXJzLCB0YWdzLCBpbmhlcml0YWJsZVRhZ3MsIG1ldGFkYXRhLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBfcGFyZW50UnVuSWQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHJ1bklkXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlSGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRhZ3NcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5oZXJpdGFibGVUYWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlTWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogX3BhcmVudFJ1bklkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVGV4dD8uKHRleHQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUZXh0OiAke2Vycn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlcyBjYWxsYmFja3MgZm9yIHJldHJpZXZlciBydW5zLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVuZChkb2N1bWVudHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFbmQ/Lihkb2N1bWVudHMsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlckVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1OZXdUb2tlbj8uKHRva2VuLCBpZHggPz8geyBwcm9tcHQ6IDAsIGNvbXBsZXRpb246IDAgfSwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNTmV3VG9rZW46ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyLCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRBY3Rpb24/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRFbmQ/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbEVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB3aXRoIE9wZW5BSSBhbmQgYSBzaW1wbGUgcHJvbXB0XG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBSdW5uaW5nIHRoZSBjaGFpbiB3aXRoIGEgc2luZ2xlIHF1ZXN0aW9uXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiAqICAgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGUgYWlyc3BlZWQgdmVsb2NpdHkgb2YgYW4gdW5sYWRlbiBzd2FsbG93P1wiLFxuICogfSk7XG4gKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlciBleHRlbmRzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFJ1bklkLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBvcHRpb25zPy5oYW5kbGVycyA/PyB0aGlzLmhhbmRsZXJzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgIHRoaXMudGFncyA9IG9wdGlvbnM/LnRhZ3MgPz8gdGhpcy50YWdzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IG9wdGlvbnM/LmluaGVyaXRhYmxlVGFncyA/PyB0aGlzLmluaGVyaXRhYmxlVGFncztcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZU1ldGFkYXRhID8/IHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGFyZW50IHJ1biBJRCwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBhcmVudCBydW4gSUQuXG4gICAgICovXG4gICAgZ2V0UGFyZW50UnVuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBfcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbcHJvbXB0XSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgX3J1bklkID0gdW5kZWZpbmVkLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChtZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2VHcm91cCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVuSWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydD8uKGxsbSwgW21lc3NhZ2VHcm91cF0sIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFttZXNzYWdlU3RyaW5nXSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCA9IHV1aWR2NCgpLCBydW5UeXBlID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpblN0YXJ0Py4oY2hhaW4sIGlucHV0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1blR5cGUsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpblN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xTdGFydD8uKHRvb2wsIGlucHV0LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyU3RhcnQ/LihyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlclN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICB9XG4gICAgc2V0SGFuZGxlcnMoaGFuZGxlcnMsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRhZ3ModGFncywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWdzKHRhZ3MpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICB0aGlzLnRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzLnB1c2goLi4udGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVGFncyh0YWdzKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgIH1cbiAgICBhZGRNZXRhZGF0YShtZXRhZGF0YSwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHsgLi4udGhpcy5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9IHsgLi4udGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KGFkZGl0aW9uYWxIYW5kbGVycyA9IFtdLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVUYWdzLmluY2x1ZGVzKHRhZyk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLm1ldGFkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSBPYmplY3Qua2V5cyh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpLmluY2x1ZGVzKGtleSk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHsgW2tleV06IHRoaXMubWV0YWRhdGFba2V5XSB9LCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjb3BpZXMgb2YgY29uc29sZV9jYWxsYmFja19oYW5kbGVyXG4gICAgICAgICAgICBtYW5hZ2VyLmhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5uYW1lID09PSBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiKVxuICAgICAgICAgICAgICAgIC5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21IYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZHY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IHRoaXMoKTtcbiAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNvbmZpZ3VyZShpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucykge1xuICAgICAgICBsZXQgY2FsbGJhY2tNYW5hZ2VyO1xuICAgICAgICBpZiAoaW5oZXJpdGFibGVIYW5kbGVycyB8fCBsb2NhbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmhlcml0YWJsZUhhbmRsZXJzKSB8fCAhaW5oZXJpdGFibGVIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuc2V0SGFuZGxlcnMoaW5oZXJpdGFibGVIYW5kbGVycz8ubWFwKGVuc3VyZUhhbmRsZXIpID8/IFtdLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBjYWxsYmFja01hbmFnZXIuY29weShBcnJheS5pc0FycmF5KGxvY2FsSGFuZGxlcnMpXG4gICAgICAgICAgICAgICAgPyBsb2NhbEhhbmRsZXJzLm1hcChlbnN1cmVIYW5kbGVyKVxuICAgICAgICAgICAgICAgIDogbG9jYWxIYW5kbGVycz8uaGFuZGxlcnMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJib3NlRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVkVSQk9TRVwiKSA9PT0gXCJ0cnVlXCIgfHxcbiAgICAgICAgICAgIG9wdGlvbnM/LnZlcmJvc2U7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdWMkVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdfVjJcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCB0cmFjaW5nRW5hYmxlZCA9IHRyYWNpbmdWMkVuYWJsZWQgfHxcbiAgICAgICAgICAgIChnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdcIikgPz8gZmFsc2UpO1xuICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgfHwgdHJhY2luZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IENvbnNvbGVDYWxsYmFja0hhbmRsZXIucHJvdG90eXBlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc29sZUhhbmRsZXIgPSBuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGNvbnNvbGVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFjaW5nRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2luZ1YyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihhd2FpdCBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZVRhZ3MgfHwgbG9jYWxUYWdzKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MoaW5oZXJpdGFibGVUYWdzID8/IFtdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVNZXRhZGF0YSB8fCBsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGluaGVyaXRhYmxlTWV0YWRhdGEgPz8ge30pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFuYWdlcjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9gKTtcbiAqXG4gKiAvLyBFeGFtcGxlIG9mIHVzaW5nIExMTUNoYWluIHRvIHByb2Nlc3MgYSBzZXJpZXMgb2YgcXVlc3Rpb25zXG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBQcm9jZXNzIHF1ZXN0aW9ucyB1c2luZyB0aGUgY2hhaW5cbiAqIGNvbnN0IHByb2Nlc3NRdWVzdGlvbnMgPSBhc3luYyAocXVlc3Rpb25zKSA9PiB7XG4gKiAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25zKSB7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7IHF1ZXN0aW9uIH0pO1xuICogICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiAgIH1cbiAqIH07XG4gKlxuICogLy8gRXhhbXBsZSBxdWVzdGlvbnNcbiAqIGNvbnN0IHF1ZXN0aW9ucyA9IFtcbiAqICAgXCJXaGF0IGlzIHlvdXIgbmFtZT9cIixcbiAqICAgXCJXaGF0IGlzIHlvdXIgcXVlc3Q/XCIsXG4gKiAgIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIGNvbG9yP1wiLFxuICogXTtcbiAqXG4gKiAvLyBSdW4gdGhlIGV4YW1wbGVcbiAqIHByb2Nlc3NRdWVzdGlvbnMocXVlc3Rpb25zKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYWNlR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJncm91cE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdyb3VwTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFuYWdlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKGdyb3VwX25hbWUsIGlucHV0cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYiA9IG5ldyBMYW5nQ2hhaW5UcmFjZXIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNtID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShbY2JdKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNtPy5oYW5kbGVDaGFpblN0YXJ0KHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiBbXCJsYW5nY2hhaW5cIiwgXCJjYWxsYmFja3NcIiwgXCJncm91cHNcIiwgZ3JvdXBfbmFtZV0sXG4gICAgICAgIH0sIGlucHV0cyA/PyB7fSk7XG4gICAgICAgIGlmICghcnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBydW4gZ3JvdXAgY2FsbGJhY2sgbWFuYWdlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KGlucHV0cykge1xuICAgICAgICBpZiAoIXRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuZ3JvdXBOYW1lLCBpbnB1dHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFuYWdlci5nZXRDaGlsZCgpO1xuICAgIH1cbiAgICBhc3luYyBlcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlbmQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVuZChvdXRwdXQgPz8ge30pO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYWNlQXNHcm91cChncm91cE9wdGlvbnMsIGVuY2xvc2VkQ29kZSwgLi4uYXJncykge1xuICAgIGNvbnN0IHRyYWNlR3JvdXAgPSBuZXcgVHJhY2VHcm91cChncm91cE9wdGlvbnMubmFtZSwgZ3JvdXBPcHRpb25zKTtcbiAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBhd2FpdCB0cmFjZUdyb3VwLnN0YXJ0KHsgLi4uYXJncyB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmNsb3NlZENvZGUoY2FsbGJhY2tNYW5hZ2VyLCAuLi5hcmdzKTtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lbmQoX2NvZXJjZVRvRGljdChyZXN1bHQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciIsImdldEJ1ZmZlclN0cmluZyIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdW1lQ2FsbGJhY2siLCJwYXJzZUNhbGxiYWNrQ29uZmlnQXJnIiwiYXJnIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbGJhY2tzIiwiQmFzZUNhbGxiYWNrTWFuYWdlciIsInNldEhhbmRsZXIiLCJoYW5kbGVyIiwic2V0SGFuZGxlcnMiLCJCYXNlUnVuTWFuYWdlciIsImNvbnN0cnVjdG9yIiwicnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJ0YWdzIiwiaW5oZXJpdGFibGVUYWdzIiwibWV0YWRhdGEiLCJpbmhlcml0YWJsZU1ldGFkYXRhIiwiX3BhcmVudFJ1bklkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImhhbmRsZVRleHQiLCJ0ZXh0IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm5hbWUiLCJhd2FpdEhhbmRsZXJzIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuIiwiZ2V0Q2hpbGQiLCJ0YWciLCJtYW5hZ2VyIiwiQ2FsbGJhY2tNYW5hZ2VyIiwiYWRkVGFncyIsImFkZE1ldGFkYXRhIiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwiaWdub3JlUmV0cmlldmVyIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4iLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiX3J1bklkIiwiX3RhZ3MiLCJmaWVsZHMiLCJpZ25vcmVMTE0iLCJwcm9tcHQiLCJjb21wbGV0aW9uIiwiaGFuZGxlTExNRXJyb3IiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biIsImhhbmRsZUNoYWluRXJyb3IiLCJrd2FyZ3MiLCJpZ25vcmVDaGFpbiIsImhhbmRsZUNoYWluRW5kIiwiaGFuZGxlQWdlbnRBY3Rpb24iLCJhY3Rpb24iLCJpZ25vcmVBZ2VudCIsImhhbmRsZUFnZW50RW5kIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biIsImhhbmRsZVRvb2xFcnJvciIsImhhbmRsZVRvb2xFbmQiLCJwYXJlbnRSdW5JZCIsIm9wdGlvbnMiLCJnZXRQYXJlbnRSdW5JZCIsImhhbmRsZUxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsInVuZGVmaW5lZCIsImV4dHJhUGFyYW1zIiwiX21ldGFkYXRhIiwicnVuTmFtZSIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJtZXNzYWdlR3JvdXAiLCJtZXNzYWdlU3RyaW5nIiwiaGFuZGxlQ2hhaW5TdGFydCIsImNoYWluIiwiaW5wdXRzIiwicnVuVHlwZSIsImhhbmRsZVRvb2xTdGFydCIsInRvb2wiLCJpbnB1dCIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwicmV0cmlldmVyIiwicXVlcnkiLCJhZGRIYW5kbGVyIiwiaW5oZXJpdCIsInB1c2giLCJyZW1vdmVIYW5kbGVyIiwiZmlsdGVyIiwiX2hhbmRsZXIiLCJyZW1vdmVUYWdzIiwiaW5jbHVkZXMiLCJyZW1vdmVNZXRhZGF0YSIsImtleSIsImtleXMiLCJjb3B5IiwiYWRkaXRpb25hbEhhbmRsZXJzIiwiaW5oZXJpdGFibGUiLCJoIiwic29tZSIsImZyb21IYW5kbGVycyIsIkhhbmRsZXIiLCJhc3NpZ24iLCJjb25maWd1cmUiLCJsb2NhbEhhbmRsZXJzIiwibG9jYWxUYWdzIiwibG9jYWxNZXRhZGF0YSIsImNhbGxiYWNrTWFuYWdlciIsImVuc3VyZUhhbmRsZXIiLCJ2ZXJib3NlRW5hYmxlZCIsInZlcmJvc2UiLCJ0cmFjaW5nVjJFbmFibGVkIiwidHJhY2luZ0VuYWJsZWQiLCJwcm90b3R5cGUiLCJjb25zb2xlSGFuZGxlciIsImZyb21NZXRob2RzIiwiVHJhY2VHcm91cCIsImdyb3VwTmFtZSIsImdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIiLCJncm91cF9uYW1lIiwiY2IiLCJjbSIsInJ1bk1hbmFnZXIiLCJsYyIsInR5cGUiLCJpZCIsIkVycm9yIiwic3RhcnQiLCJlbmQiLCJfY29lcmNlVG9EaWN0IiwiZGVmYXVsdEtleSIsInRyYWNlQXNHcm91cCIsImdyb3VwT3B0aW9ucyIsImVuY2xvc2VkQ29kZSIsImFyZ3MiLCJ0cmFjZUdyb3VwIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNoQyxJQUFJQztBQUNKOzs7O0NBSUMsR0FDRCxTQUFTQztJQUNMLE1BQU1DLFNBQVMsS0FBc0JILEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7SUFDckUsT0FBTyxJQUFJRyxPQUFPO1FBQ2RFLFdBQVc7UUFDWEMsYUFBYTtJQUNqQjtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLGVBQWVDLGdCQUFnQkMsU0FBUyxFQUFFQyxJQUFJO0lBQ2pELElBQUlBLFNBQVMsTUFBTTtRQUNmLE1BQU1EO0lBQ1YsT0FDSztRQUNELElBQUksT0FBT1AsVUFBVSxhQUFhO1lBQzlCQSxRQUFRQztRQUNaO1FBQ0EsS0FBS0QsTUFBTVMsR0FBRyxDQUFDRjtJQUNuQjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sU0FBU0c7SUFDWixPQUFPLE9BQU9WLFVBQVUsY0FBY0EsTUFBTVcsTUFBTSxLQUFLQyxRQUFRQyxPQUFPO0FBQzFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzP2VjMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBRdWV1ZU1vZCBmcm9tIFwicC1xdWV1ZVwiO1xubGV0IHF1ZXVlO1xuLyoqXG4gKiBDcmVhdGVzIGEgcXVldWUgdXNpbmcgdGhlIHAtcXVldWUgbGlicmFyeS4gVGhlIHF1ZXVlIGlzIGNvbmZpZ3VyZWQgdG9cbiAqIGF1dG8tc3RhcnQgYW5kIGhhcyBhIGNvbmN1cnJlbmN5IG9mIDEsIG1lYW5pbmcgaXQgd2lsbCBwcm9jZXNzIHRhc2tzXG4gKiBvbmUgYXQgYSB0aW1lLlxuICovXG5mdW5jdGlvbiBjcmVhdGVRdWV1ZSgpIHtcbiAgICBjb25zdCBQUXVldWUgPSBcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZDtcbiAgICByZXR1cm4gbmV3IFBRdWV1ZSh7XG4gICAgICAgIGF1dG9TdGFydDogdHJ1ZSxcbiAgICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgfSk7XG59XG4vKipcbiAqIENvbnN1bWUgYSBwcm9taXNlLCBlaXRoZXIgYWRkaW5nIGl0IHRvIHRoZSBxdWV1ZSBvciB3YWl0aW5nIGZvciBpdCB0byByZXNvbHZlXG4gKiBAcGFyYW0gcHJvbWlzZSBQcm9taXNlIHRvIGNvbnN1bWVcbiAqIEBwYXJhbSB3YWl0IFdoZXRoZXIgdG8gd2FpdCBmb3IgdGhlIHByb21pc2UgdG8gcmVzb2x2ZSBvciByZXNvbHZlIGltbWVkaWF0ZWx5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdW1lQ2FsbGJhY2socHJvbWlzZUZuLCB3YWl0KSB7XG4gICAgaWYgKHdhaXQgPT09IHRydWUpIHtcbiAgICAgICAgYXdhaXQgcHJvbWlzZUZuKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHF1ZXVlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBxdWV1ZSA9IGNyZWF0ZVF1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdm9pZCBxdWV1ZS5hZGQocHJvbWlzZUZuKTtcbiAgICB9XG59XG4vKipcbiAqIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgaW4gdGhlIHF1ZXVlIHRvIHJlc29sdmUuIElmIHRoZSBxdWV1ZSBpc1xuICogdW5kZWZpbmVkLCBpdCBpbW1lZGlhdGVseSByZXNvbHZlcyBhIHByb21pc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhd2FpdEFsbENhbGxiYWNrcygpIHtcbiAgICByZXR1cm4gdHlwZW9mIHF1ZXVlICE9PSBcInVuZGVmaW5lZFwiID8gcXVldWUub25JZGxlKCkgOiBQcm9taXNlLnJlc29sdmUoKTtcbn1cbiJdLCJuYW1lcyI6WyJQUXVldWVNb2QiLCJxdWV1ZSIsImNyZWF0ZVF1ZXVlIiwiUFF1ZXVlIiwiZGVmYXVsdCIsImF1dG9TdGFydCIsImNvbmN1cnJlbmN5IiwiY29uc3VtZUNhbGxiYWNrIiwicHJvbWlzZUZuIiwid2FpdCIsImFkZCIsImF3YWl0QWxsQ2FsbGJhY2tzIiwib25JZGxlIiwiUHJvbWlzZSIsInJlc29sdmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/chat_history.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/chat_history.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatMessageHistory: () => (/* binding */ BaseChatMessageHistory),\n/* harmony export */   BaseListChatMessageHistory: () => (/* binding */ BaseListChatMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * Base class for all chat message histories. All chat message histories\n * should extend this class.\n */ class BaseChatMessageHistory extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Base class for all list chat message histories. All list chat message\n * histories should extend this class.\n */ class BaseListChatMessageHistory extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    /**\n     * This is a convenience method for adding a human message string to the store.\n     * Please note that this is a convenience method. Code should favor the\n     * bulk addMessages interface instead to save on round-trips to the underlying\n     * persistence layer.\n     * This method may be deprecated in a future release.\n     */ addUserMessage(message) {\n        return this.addMessage(new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(message));\n    }\n    /** @deprecated Use addAIMessage instead */ addAIChatMessage(message) {\n        return this.addMessage(new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(message));\n    }\n    /**\n     * This is a convenience method for adding an AI message string to the store.\n     * Please note that this is a convenience method. Code should favor the bulk\n     * addMessages interface instead to save on round-trips to the underlying\n     * persistence layer.\n     * This method may be deprecated in a future release.\n     */ addAIMessage(message) {\n        return this.addMessage(new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.AIMessage(message));\n    }\n    /**\n     * Add a list of messages.\n     *\n     * Implementations should override this method to handle bulk addition of messages\n     * in an efficient manner to avoid unnecessary round-trips to the underlying store.\n     *\n     * @param messages - A list of BaseMessage objects to store.\n     */ async addMessages(messages) {\n        for (const message of messages){\n            await this.addMessage(message);\n        }\n    }\n    /**\n     * Remove all messages from the store.\n     */ clear() {\n        throw new Error(\"Not implemented.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2hhdF9oaXN0b3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBc0Q7QUFDUTtBQUM5RDs7O0NBR0MsR0FDTSxNQUFNRywrQkFBK0JILCtEQUFZQTtBQUN4RDtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1JLG1DQUFtQ0osK0RBQVlBO0lBQ3hEOzs7Ozs7S0FNQyxHQUNESyxlQUFlQyxPQUFPLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxJQUFJTiw0REFBWUEsQ0FBQ0s7SUFDNUM7SUFDQSx5Q0FBeUMsR0FDekNFLGlCQUFpQkYsT0FBTyxFQUFFO1FBQ3RCLE9BQU8sSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSUwseURBQVNBLENBQUNJO0lBQ3pDO0lBQ0E7Ozs7OztLQU1DLEdBQ0RHLGFBQWFILE9BQU8sRUFBRTtRQUNsQixPQUFPLElBQUksQ0FBQ0MsVUFBVSxDQUFDLElBQUlMLHlEQUFTQSxDQUFDSTtJQUN6QztJQUNBOzs7Ozs7O0tBT0MsR0FDRCxNQUFNSSxZQUFZQyxRQUFRLEVBQUU7UUFDeEIsS0FBSyxNQUFNTCxXQUFXSyxTQUFVO1lBQzVCLE1BQU0sSUFBSSxDQUFDSixVQUFVLENBQUNEO1FBQzFCO0lBQ0o7SUFDQTs7S0FFQyxHQUNETSxRQUFRO1FBQ0osTUFBTSxJQUFJQyxNQUFNO0lBQ3BCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jaGF0X2hpc3RvcnkuanM/Yzc5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlLCBBSU1lc3NhZ2UgfSBmcm9tIFwiLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgY2hhdCBtZXNzYWdlIGhpc3Rvcmllcy4gQWxsIGNoYXQgbWVzc2FnZSBoaXN0b3JpZXNcbiAqIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDaGF0TWVzc2FnZUhpc3RvcnkgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgbGlzdCBjaGF0IG1lc3NhZ2UgaGlzdG9yaWVzLiBBbGwgbGlzdCBjaGF0IG1lc3NhZ2VcbiAqIGhpc3RvcmllcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGlzdENoYXRNZXNzYWdlSGlzdG9yeSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgYWRkaW5nIGEgaHVtYW4gbWVzc2FnZSBzdHJpbmcgdG8gdGhlIHN0b3JlLlxuICAgICAqIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZC4gQ29kZSBzaG91bGQgZmF2b3IgdGhlXG4gICAgICogYnVsayBhZGRNZXNzYWdlcyBpbnRlcmZhY2UgaW5zdGVhZCB0byBzYXZlIG9uIHJvdW5kLXRyaXBzIHRvIHRoZSB1bmRlcmx5aW5nXG4gICAgICogcGVyc2lzdGVuY2UgbGF5ZXIuXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgcmVsZWFzZS5cbiAgICAgKi9cbiAgICBhZGRVc2VyTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZE1lc3NhZ2UobmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgYWRkQUlNZXNzYWdlIGluc3RlYWQgKi9cbiAgICBhZGRBSUNoYXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTWVzc2FnZShuZXcgQUlNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGNvbnZlbmllbmNlIG1ldGhvZCBmb3IgYWRkaW5nIGFuIEFJIG1lc3NhZ2Ugc3RyaW5nIHRvIHRoZSBzdG9yZS5cbiAgICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QuIENvZGUgc2hvdWxkIGZhdm9yIHRoZSBidWxrXG4gICAgICogYWRkTWVzc2FnZXMgaW50ZXJmYWNlIGluc3RlYWQgdG8gc2F2ZSBvbiByb3VuZC10cmlwcyB0byB0aGUgdW5kZXJseWluZ1xuICAgICAqIHBlcnNpc3RlbmNlIGxheWVyLlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHJlbGVhc2UuXG4gICAgICovXG4gICAgYWRkQUlNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkTWVzc2FnZShuZXcgQUlNZXNzYWdlKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgbGlzdCBvZiBtZXNzYWdlcy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGF0aW9ucyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gaGFuZGxlIGJ1bGsgYWRkaXRpb24gb2YgbWVzc2FnZXNcbiAgICAgKiBpbiBhbiBlZmZpY2llbnQgbWFubmVyIHRvIGF2b2lkIHVubmVjZXNzYXJ5IHJvdW5kLXRyaXBzIHRvIHRoZSB1bmRlcmx5aW5nIHN0b3JlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gQSBsaXN0IG9mIEJhc2VNZXNzYWdlIG9iamVjdHMgdG8gc3RvcmUuXG4gICAgICovXG4gICAgYXN5bmMgYWRkTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBtZXNzYWdlcyBmcm9tIHRoZSBzdG9yZS5cbiAgICAgKi9cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwiSHVtYW5NZXNzYWdlIiwiQUlNZXNzYWdlIiwiQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSIsIkJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5IiwiYWRkVXNlck1lc3NhZ2UiLCJtZXNzYWdlIiwiYWRkTWVzc2FnZSIsImFkZEFJQ2hhdE1lc3NhZ2UiLCJhZGRBSU1lc3NhZ2UiLCJhZGRNZXNzYWdlcyIsIm1lc3NhZ2VzIiwiY2xlYXIiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/chat_history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/document.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/document.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent ? fields.pageContent.toString() : this.pageContent;\n        this.metadata = fields.metadata ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Q0FFQyxHQUNNLE1BQU1BO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFdBQVcsR0FBR1AsT0FBT08sV0FBVyxHQUMvQlAsT0FBT08sV0FBVyxDQUFDQyxRQUFRLEtBQzNCLElBQUksQ0FBQ0QsV0FBVztRQUN0QixJQUFJLENBQUNFLFFBQVEsR0FBR1QsT0FBT1MsUUFBUSxJQUFJLENBQUM7SUFDeEM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy9kb2N1bWVudC5qcz9iNGZhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZXJmYWNlIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhZ2VDb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFnZUNvbnRlbnQgPSBmaWVsZHMucGFnZUNvbnRlbnRcbiAgICAgICAgICAgID8gZmllbGRzLnBhZ2VDb250ZW50LnRvU3RyaW5nKClcbiAgICAgICAgICAgIDogdGhpcy5wYWdlQ29udGVudDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IGZpZWxkcy5tZXRhZGF0YSA/PyB7fTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRG9jdW1lbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwYWdlQ29udGVudCIsInRvU3RyaW5nIiwibWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThCO0FBQ0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvaW5kZXguanM/MjYyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9kb2N1bWVudC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHJhbnNmb3JtZXJzLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/transformers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFDaEQ7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUMsZ0NBQWdDRCx3REFBUUE7SUFDakRFLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBYTthQUFlO1FBQzFEO0lBQ0o7SUFDQTs7Ozs7O0tBTUMsR0FDREMsT0FBT0MsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNDLGtCQUFrQixDQUFDRjtJQUNuQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsbUNBQW1DYjtJQUM1QyxNQUFNWSxtQkFBbUJFLFNBQVMsRUFBRTtRQUNoQyxNQUFNQyxlQUFlLEVBQUU7UUFDdkIsS0FBSyxNQUFNQyxZQUFZRixVQUFXO1lBQzlCLE1BQU1HLHNCQUFzQixNQUFNLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO1lBQzFERCxhQUFhSSxJQUFJLENBQUNGO1FBQ3RCO1FBQ0EsT0FBT0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcz81MDAzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uIHN5c3RlbXMuXG4gKlxuICogQSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW0gdGFrZXMgYW4gYXJyYXkgb2YgRG9jdW1lbnRzIGFuZCByZXR1cm5zIGFuXG4gKiBhcnJheSBvZiB0cmFuc2Zvcm1lZCBEb2N1bWVudHMuIFRoZXNlIGFycmF5cyBkbyBub3QgbmVjZXNzYXJpbHkgaGF2ZSB0byBoYXZlXG4gKiB0aGUgc2FtZSBsZW5ndGguXG4gKlxuICogT25lIGV4YW1wbGUgb2YgdGhpcyBpcyBhIHRleHQgc3BsaXR0ZXIgdGhhdCBzcGxpdHMgYSBsYXJnZSBkb2N1bWVudCBpbnRvXG4gKiBtYW55IHNtYWxsZXIgZG9jdW1lbnRzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJkb2N1bWVudHNcIiwgXCJ0cmFuc2Zvcm1lcnNcIl1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBpbnZva2UgdGhlIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uLiBUaGlzIG1ldGhvZCBjYWxscyB0aGVcbiAgICAgKiB0cmFuc2Zvcm1Eb2N1bWVudHMgbWV0aG9kIHdpdGggdGhlIHByb3ZpZGVkIGlucHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZG9jdW1lbnRzIHRvIGJlIHRyYW5zZm9ybWVkLlxuICAgICAqIEBwYXJhbSBfb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdCB0byBjdXN0b21pemUgdGhlIGJlaGF2aW9yIG9mIGNhbGxiYWNrcy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgdHJhbnNmb3JtZWQgZG9jdW1lbnRzLlxuICAgICAqL1xuICAgIGludm9rZShpbnB1dCwgX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRG9jdW1lbnRzKGlucHV0KTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1lcnMgdGhhdCByZXR1cm4gZXhhY3RseSBvbmUgdHJhbnNmb3JtZWQgZG9jdW1lbnRcbiAqIGZvciBlYWNoIGlucHV0IGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgTWFwcGluZ0RvY3VtZW50VHJhbnNmb3JtZXIgZXh0ZW5kcyBCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciB7XG4gICAgYXN5bmMgdHJhbnNmb3JtRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICBjb25zdCBuZXdEb2N1bWVudHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBkb2N1bWVudCBvZiBkb2N1bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkRG9jdW1lbnQgPSBhd2FpdCB0aGlzLl90cmFuc2Zvcm1Eb2N1bWVudChkb2N1bWVudCk7XG4gICAgICAgICAgICBuZXdEb2N1bWVudHMucHVzaCh0cmFuc2Zvcm1lZERvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3RG9jdW1lbnRzO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsIkJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW52b2tlIiwiaW5wdXQiLCJfb3B0aW9ucyIsInRyYW5zZm9ybURvY3VtZW50cyIsIk1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIiwiZG9jdW1lbnRzIiwibmV3RG9jdW1lbnRzIiwiZG9jdW1lbnQiLCJ0cmFuc2Zvcm1lZERvY3VtZW50IiwiX3RyYW5zZm9ybURvY3VtZW50IiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken)\n/* harmony export */ });\n/* harmony import */ var _caches_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches.js */ \"(rsc)/./node_modules/@langchain/core/dist/caches.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...params\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof params.cache === \"object\") {\n            this.cache = params.cache;\n        } else if (params.cache) {\n            this.cache = _caches_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    async getNumTokens(content) {\n        // TODO: Figure out correct value.\n        if (typeof content !== \"string\") {\n            return 0;\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(content.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(content).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(callOptions) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQzZCO0FBQ1A7QUFDWjtBQUNDO0FBQ1I7QUFDaEQsNENBQTRDO0FBQ3JDLE1BQU1PLDBCQUEwQixDQUFDQztJQUNwQyxJQUFJQSxVQUFVQyxVQUFVLENBQUMsc0JBQXNCO1FBQzNDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxtQkFBbUI7UUFDeEMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLGNBQWM7UUFDbkMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLFdBQVc7UUFDaEMsT0FBTztJQUNYO0lBQ0EsT0FBT0Q7QUFDWCxFQUFFO0FBQ0ssTUFBTUUsMEJBQTBCLENBQUNGO0lBQ3BDLE9BQVFBO1FBQ0osS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDSyxNQUFNRyxzQkFBc0IsQ0FBQ0g7SUFDaEMsT0FBUUQsd0JBQXdCQztRQUM1QixLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYO1lBQ0ksT0FBTztJQUNmO0FBQ0osRUFBRTtBQUNLLE1BQU1JLHFCQUFxQixPQUFPLEVBQUVDLE1BQU0sRUFBRUwsU0FBUyxFQUFHO0lBQzNELElBQUlNO0lBQ0osSUFBSTtRQUNBQSxZQUFZLENBQUMsTUFBTVQsb0VBQWdCQSxDQUFDRSx3QkFBd0JDLFdBQVUsRUFBR08sTUFBTSxDQUFD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QUNBLE1BQU1DLGtCQUFrQjdCLE9BQU84QixPQUFPLENBQUMvQixRQUFRZ0MsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsR0FBRzNCLE1BQU0sR0FBS0EsVUFBVVQ7UUFDaEYsTUFBTXFDLG9CQUFvQkosZ0JBQ3JCUixHQUFHLENBQUMsQ0FBQyxDQUFDYSxLQUFLN0IsTUFBTSxHQUFLLENBQUMsRUFBRTZCLElBQUksQ0FBQyxFQUFFQyxLQUFLQyxTQUFTLENBQUMvQixPQUFPLENBQUMsRUFDdkRnQyxJQUFJLEdBQ0pDLElBQUksQ0FBQztRQUNWLE9BQU9MO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRE0sWUFBWTtRQUNSLE9BQU87WUFDSCxHQUFHLElBQUksQ0FBQ2pCLGtCQUFrQixFQUFFO1lBQzVCRyxPQUFPLElBQUksQ0FBQ0MsUUFBUTtZQUNwQkMsUUFBUSxJQUFJLENBQUNDLFVBQVU7UUFDM0I7SUFDSjtJQUNBOzs7S0FHQyxHQUNELGFBQWFZLFlBQVlDLEtBQUssRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzPzliZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuLi9jYWNoZXMuanNcIjtcbmltcG9ydCB7IFN0cmluZ1Byb21wdFZhbHVlLCBDaGF0UHJvbXB0VmFsdWUsIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGluZ0Zvck1vZGVsIH0gZnJvbSBcIi4uL3V0aWxzL3Rpa3Rva2VuLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvanMtdGlrdG9rZW5cbmV4cG9ydCBjb25zdCBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbiA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvLTE2a1wiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtMy41LXR1cmJvLTE2a1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvLVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtMy41LXR1cmJvXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LTMya1wiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNC0zMmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTQtXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC00XCI7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbE5hbWU7XG59O1xuZXhwb3J0IGNvbnN0IGdldEVtYmVkZGluZ0NvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAobW9kZWxOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAyMDQ2O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0TW9kZWxDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpIHtcbiAgICAgICAgY2FzZSBcImdwdC0zLjUtdHVyYm8tMTZrXCI6XG4gICAgICAgICAgICByZXR1cm4gMTYzODQ7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NjtcbiAgICAgICAgY2FzZSBcImdwdC00LTMya1wiOlxuICAgICAgICAgICAgcmV0dXJuIDMyNzY4O1xuICAgICAgICBjYXNlIFwiZ3B0LTRcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkyO1xuICAgICAgICBjYXNlIFwidGV4dC1kYXZpbmNpLTAwM1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWN1cmllLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWJhYmJhZ2UtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYWRhLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJjb2RlLWRhdmluY2ktMDAyXCI6XG4gICAgICAgICAgICByZXR1cm4gODAwMDtcbiAgICAgICAgY2FzZSBcImNvZGUtY3VzaG1hbi0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDQwOTc7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVNYXhUb2tlbnMgPSBhc3luYyAoeyBwcm9tcHQsIG1vZGVsTmFtZSwgfSkgPT4ge1xuICAgIGxldCBudW1Ub2tlbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgbnVtVG9rZW5zID0gKGF3YWl0IGVuY29kaW5nRm9yTW9kZWwoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4obW9kZWxOYW1lKSkpLmVuY29kZShwcm9tcHQpLmxlbmd0aDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIpO1xuICAgICAgICAvLyBmYWxsYmFjayB0byBhcHByb3hpbWF0ZSBjYWxjdWxhdGlvbiBpZiB0aWt0b2tlbiBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgIC8vIGVhY2ggdG9rZW4gaXMgfjQgY2hhcmFjdGVyczogaHR0cHM6Ly9oZWxwLm9wZW5haS5jb20vZW4vYXJ0aWNsZXMvNDkzNjg1Ni13aGF0LWFyZS10b2tlbnMtYW5kLWhvdy10by1jb3VudC10aGVtI1xuICAgICAgICBudW1Ub2tlbnMgPSBNYXRoLmNlaWwocHJvbXB0Lmxlbmd0aCAvIDQpO1xuICAgIH1cbiAgICBjb25zdCBtYXhUb2tlbnMgPSBnZXRNb2RlbENvbnRleHRTaXplKG1vZGVsTmFtZSk7XG4gICAgcmV0dXJuIG1heFRva2VucyAtIG51bVRva2Vucztcbn07XG5jb25zdCBnZXRWZXJib3NpdHkgPSAoKSA9PiBmYWxzZTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLCBjaGFpbnMsIHRvb2xzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmdDaGFpbiBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmVyYm9zZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIocGFyYW1zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdG8gcHJpbnQgb3V0IHJlc3BvbnNlIHRleHQuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJib3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmVyYm9zZSA9IHBhcmFtcy52ZXJib3NlID8/IGdldFZlcmJvc2l0eSgpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IHBhcmFtcy5jYWxsYmFja3M7XG4gICAgICAgIHRoaXMudGFncyA9IHBhcmFtcy50YWdzID8/IFtdO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gcGFyYW1zLm1ldGFkYXRhID8/IHt9O1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbGFuZ3VhZ2UgbW9kZWxzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUxhbmd1YWdlTW9kZWwgZXh0ZW5kcyBCYXNlTGFuZ0NoYWluIHtcbiAgICAvKipcbiAgICAgKiBLZXlzIHRoYXQgdGhlIGxhbmd1YWdlIG1vZGVsIGFjY2VwdHMgYXMgY2FsbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtcInN0b3BcIiwgXCJ0aW1lb3V0XCIsIFwic2lnbmFsXCIsIFwidGFnc1wiLCBcIm1ldGFkYXRhXCIsIFwiY2FsbGJhY2tzXCJdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih7IGNhbGxiYWNrcywgY2FsbGJhY2tNYW5hZ2VyLCAuLi5wYXJhbXMgfSkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBjYWxsYmFja3M6IGNhbGxiYWNrcyA/PyBjYWxsYmFja01hbmFnZXIsXG4gICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIH0pO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuICAgICAgICAgKiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FjaGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX2VuY29kaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLmNhY2hlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gcGFyYW1zLmNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBhcmFtcy5jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IEluTWVtb3J5Q2FjaGUuZ2xvYmFsKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHBhcmFtcyA/PyB7fSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE51bVRva2Vucyhjb250ZW50KSB7XG4gICAgICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgY29ycmVjdCB2YWx1ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBmYWxsYmFjayB0byBhcHByb3hpbWF0ZSBjYWxjdWxhdGlvbiBpZiB0aWt0b2tlbiBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgIGxldCBudW1Ub2tlbnMgPSBNYXRoLmNlaWwoY29udGVudC5sZW5ndGggLyA0KTtcbiAgICAgICAgaWYgKCF0aGlzLl9lbmNvZGluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbmNvZGluZyA9IGF3YWl0IGVuY29kaW5nRm9yTW9kZWwoXCJtb2RlbE5hbWVcIiBpbiB0aGlzXG4gICAgICAgICAgICAgICAgICAgID8gZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4odGhpcy5tb2RlbE5hbWUpXG4gICAgICAgICAgICAgICAgICAgIDogXCJncHQyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9lbmNvZGluZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBudW1Ub2tlbnMgPSB0aGlzLl9lbmNvZGluZy5lbmNvZGUoY29udGVudCkubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudW1Ub2tlbnM7XG4gICAgfVxuICAgIHN0YXRpYyBfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VmFsdWUoaW5wdXQubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIG9mIHRoZSBMTE0uXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdW5pcXVlIGNhY2hlIGtleSBmb3IgYSBzcGVjaWZpYyBjYWxsIHRvIGEgc3BlY2lmaWMgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHBhcmFtIGNhbGxPcHRpb25zIENhbGwgb3B0aW9ucyBmb3IgdGhlIG1vZGVsXG4gICAgICogQHJldHVybnMgQSB1bmlxdWUgY2FjaGUga2V5LlxuICAgICAqL1xuICAgIF9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgLi4uY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkRW50cmllcyA9IGZpbHRlcmVkRW50cmllc1xuICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9OiR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApXG4gICAgICAgICAgICAuc29ydCgpXG4gICAgICAgICAgICAuam9pbihcIixcIik7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkRW50cmllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogTG9hZCBhbiBMTE0gZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX2RhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlIC50b0pTT04oKSBpbnN0ZWFkXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJJbk1lbW9yeUNhY2hlIiwiU3RyaW5nUHJvbXB0VmFsdWUiLCJDaGF0UHJvbXB0VmFsdWUiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIkFzeW5jQ2FsbGVyIiwiZW5jb2RpbmdGb3JNb2RlbCIsIlJ1bm5hYmxlIiwiZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4iLCJtb2RlbE5hbWUiLCJzdGFydHNXaXRoIiwiZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUiLCJnZXRNb2RlbENvbnRleHRTaXplIiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwicHJvbXB0IiwibnVtVG9rZW5zIiwiZW5jb2RlIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJjZWlsIiwibWF4VG9rZW5zIiwiZ2V0VmVyYm9zaXR5IiwiQmFzZUxhbmdDaGFpbiIsImxjX2F0dHJpYnV0ZXMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ2ZXJib3NlIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsIm1ldGFkYXRhIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJjYWxsS2V5cyIsImNhbGxiYWNrTWFuYWdlciIsImNhY2hlIiwiZ2xvYmFsIiwiY2FsbGVyIiwiZ2V0TnVtVG9rZW5zIiwiY29udGVudCIsIl9lbmNvZGluZyIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwiaW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJjYWxsT3B0aW9ucyIsIl90eXBlIiwiX2xsbVR5cGUiLCJfbW9kZWwiLCJfbW9kZWxUeXBlIiwiZmlsdGVyZWRFbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsIl8iLCJzZXJpYWxpemVkRW50cmllcyIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3J0Iiwiam9pbiIsInNlcmlhbGl6ZSIsImRlc2VyaWFsaXplIiwiX2RhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEO0FBQzNCLFNBQVNFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRztJQUM5QixPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUgsdUNBQVNBLENBQUNHO0FBQ25DO0FBQ08sU0FBU0UsWUFBWUYsR0FBRyxFQUFFQyxHQUFHO0lBQ2hDLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJRixzQ0FBU0EsQ0FBQ0U7QUFDbkM7QUFDTyxTQUFTRyxRQUFRQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUosR0FBRztJQUN2QyxNQUFNSyxTQUFTLENBQUM7SUFDaEIsSUFBSyxNQUFNTixPQUFPSSxPQUFRO1FBQ3RCLElBQUlHLE9BQU9DLE1BQU0sQ0FBQ0osUUFBUUosTUFBTTtZQUM1Qk0sTUFBTSxDQUFDRCxPQUFPTCxLQUFLQyxLQUFLLEdBQUdHLE1BQU0sQ0FBQ0osSUFBSTtRQUMxQztJQUNKO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvbWFwX2tleXMuanM/MGY0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc25ha2VDYXNlIGZyb20gXCJkZWNhbWVsaXplXCI7XG5pbXBvcnQgY2FtZWxDYXNlIGZyb20gXCJjYW1lbGNhc2VcIjtcbmV4cG9ydCBmdW5jdGlvbiBrZXlUb0pzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBzbmFrZUNhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBrZXlGcm9tSnNvbihrZXksIG1hcCkge1xuICAgIHJldHVybiBtYXA/LltrZXldIHx8IGNhbWVsQ2FzZShrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcEtleXMoZmllbGRzLCBtYXBwZXIsIG1hcCkge1xuICAgIGNvbnN0IG1hcHBlZCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuICAgICAgICBpZiAoT2JqZWN0Lmhhc093bihmaWVsZHMsIGtleSkpIHtcbiAgICAgICAgICAgIG1hcHBlZFttYXBwZXIoa2V5LCBtYXApXSA9IGZpZWxkc1trZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXBwZWQ7XG59XG4iXSwibmFtZXMiOlsic25ha2VDYXNlIiwiY2FtZWxDYXNlIiwia2V5VG9Kc29uIiwia2V5IiwibWFwIiwia2V5RnJvbUpzb24iLCJtYXBLZXlzIiwiZmllbGRzIiwibWFwcGVyIiwibWFwcGVkIiwiT2JqZWN0IiwiaGFzT3duIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ25ELFNBQVNFLFlBQVlDLEdBQUc7SUFDcEIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1dBQUlBO0tBQUksR0FBRztRQUFFLEdBQUdBLEdBQUc7SUFBQztBQUNwRDtBQUNBLFNBQVNHLGVBQWVDLElBQUksRUFBRUMsVUFBVTtJQUNwQyxNQUFNQyxTQUFTUCxZQUFZSztJQUMzQixLQUFLLE1BQU0sQ0FBQ0csTUFBTUMsU0FBUyxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDdkQsTUFBTSxDQUFDTSxNQUFNLEdBQUdDLGFBQWEsR0FBR0wsS0FBS00sS0FBSyxDQUFDLEtBQUtDLE9BQU87UUFDdkQsOERBQThEO1FBQzlELElBQUlDLFVBQVVUO1FBQ2QsS0FBSyxNQUFNVSxRQUFRSixhQUFhRSxPQUFPLEdBQUk7WUFDdkMsSUFBSUMsT0FBTyxDQUFDQyxLQUFLLEtBQUtDLFdBQVc7Z0JBQzdCO1lBQ0o7WUFDQUYsT0FBTyxDQUFDQyxLQUFLLEdBQUdqQixZQUFZZ0IsT0FBTyxDQUFDQyxLQUFLO1lBQ3pDRCxVQUFVQSxPQUFPLENBQUNDLEtBQUs7UUFDM0I7UUFDQSxJQUFJRCxPQUFPLENBQUNKLEtBQUssS0FBS00sV0FBVztZQUM3QkYsT0FBTyxDQUFDSixLQUFLLEdBQUc7Z0JBQ1pPLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLElBQUk7b0JBQUNaO2lCQUFTO1lBQ2xCO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7O0NBR0MsR0FDTSxTQUFTZSxtQkFDaEIsbUVBQW1FO0FBQ25FQyxpQkFBaUI7SUFDYixnRUFBZ0U7SUFDaEUsNEVBQTRFO0lBQzVFLE1BQU1DLGNBQWNkLE9BQU9lLGNBQWMsQ0FBQ0Y7SUFDMUMsTUFBTUcscUJBQXFCLE9BQU9ILGtCQUFrQkksT0FBTyxLQUFL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YUUsT0FBTyxHQUFJO2dCQUN0QyxJQUFJLENBQUVxQyxDQUFBQSxPQUFPTSxJQUFHLEtBQU1BLElBQUksQ0FBQ04sSUFBSSxLQUFLbEMsV0FDaEM7Z0JBQ0osSUFBSSxDQUFFa0MsQ0FBQUEsT0FBT08sS0FBSSxLQUFNQSxLQUFLLENBQUNQLElBQUksS0FBS2xDLFdBQVc7b0JBQzdDLElBQUksT0FBT3dDLElBQUksQ0FBQ04sSUFBSSxLQUFLLFlBQVlNLElBQUksQ0FBQ04sSUFBSSxJQUFJLE1BQU07d0JBQ3BETyxLQUFLLENBQUNQLElBQUksR0FBRyxDQUFDO29CQUNsQixPQUNLLElBQUlsRCxNQUFNQyxPQUFPLENBQUN1RCxJQUFJLENBQUNOLElBQUksR0FBRzt3QkFDL0JPLEtBQUssQ0FBQ1AsSUFBSSxHQUFHLEVBQUU7b0JBQ25CO2dCQUNKO2dCQUNBTSxPQUFPQSxJQUFJLENBQUNOLElBQUk7Z0JBQ2hCTyxRQUFRQSxLQUFLLENBQUNQLElBQUk7WUFDdEI7WUFDQSxJQUFJeEMsUUFBUThDLFFBQVFBLElBQUksQ0FBQzlDLEtBQUssS0FBS00sV0FBVztnQkFDMUN5QyxLQUFLLENBQUMvQyxLQUFLLEdBQUcrQyxLQUFLLENBQUMvQyxLQUFLLElBQUk4QyxJQUFJLENBQUM5QyxLQUFLO1lBQzNDO1FBQ0o7UUFDQSxPQUFPO1lBQ0hPLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxJQUFJLElBQUksQ0FBQ1MsS0FBSztZQUNkTSxRQUFRckMscURBQU9BLENBQUNXLE9BQU91QyxJQUFJLENBQUNELFNBQVNZLE1BQU0sR0FBR3hELGVBQWVnQyxRQUFRWSxXQUFXWixRQUFRdEMsbURBQVNBLEVBQUVpRDtRQUN2RztJQUNKO0lBQ0FELHVCQUF1QjtRQUNuQixPQUFPO1lBQ0gzQixJQUFJO1lBQ0pDLE1BQU07WUFDTkMsSUFBSSxJQUFJLENBQUNTLEtBQUs7UUFDbEI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanM/ZWUyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBrZXlUb0pzb24sIG1hcEtleXMgfSBmcm9tIFwiLi9tYXBfa2V5cy5qc1wiO1xuZnVuY3Rpb24gc2hhbGxvd0NvcHkob2JqKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKSA/IFsuLi5vYmpdIDogeyAuLi5vYmogfTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VTZWNyZXRzKHJvb3QsIHNlY3JldHNNYXApIHtcbiAgICBjb25zdCByZXN1bHQgPSBzaGFsbG93Q29weShyb290KTtcbiAgICBmb3IgKGNvbnN0IFtwYXRoLCBzZWNyZXRJZF0gb2YgT2JqZWN0LmVudHJpZXMoc2VjcmV0c01hcCkpIHtcbiAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBwYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBjdXJyZW50ID0gcmVzdWx0O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHNSZXZlcnNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRbcGFydF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHNoYWxsb3dDb3B5KGN1cnJlbnRbcGFydF0pO1xuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRbcGFydF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRbbGFzdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY3VycmVudFtsYXN0XSA9IHtcbiAgICAgICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInNlY3JldFwiLFxuICAgICAgICAgICAgICAgIGlkOiBbc2VjcmV0SWRdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBHZXQgYSB1bmlxdWUgbmFtZSBmb3IgdGhlIG1vZHVsZSwgcmF0aGVyIHRoYW4gcGFyZW50IGNsYXNzIGltcGxlbWVudGF0aW9ucy5cbiAqIFNob3VsZCBub3QgYmUgc3ViY2xhc3NlZCwgc3ViY2xhc3MgbGNfbmFtZSBhYm92ZSBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0X2xjX3VuaXF1ZV9uYW1lKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuc2VyaWFsaXphYmxlQ2xhc3MpIHtcbiAgICAvLyBcInN1cGVyXCIgaGVyZSB3b3VsZCByZWZlciB0byB0aGUgcGFyZW50IGNsYXNzIG9mIFNlcmlhbGl6YWJsZSxcbiAgICAvLyB3aGVuIHdlIHdhbnQgdGhlIHBhcmVudCBjbGFzcyBvZiB0aGUgbW9kdWxlIGFjdHVhbGx5IGNhbGxpbmcgdGhpcyBtZXRob2QuXG4gICAgY29uc3QgcGFyZW50Q2xhc3MgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yoc2VyaWFsaXphYmxlQ2xhc3MpO1xuICAgIGNvbnN0IGxjTmFtZUlzU3ViY2xhc3NlZCA9IHR5cGVvZiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgKHR5cGVvZiBwYXJlbnRDbGFzcy5sY19uYW1lICE9PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgICAgIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUoKSAhPT0gcGFyZW50Q2xhc3MubGNfbmFtZSgpKTtcbiAgICBpZiAobGNOYW1lSXNTdWJjbGFzc2VkKSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubmFtZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2VyaWFsaXphYmxlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2Ygc2VjcmV0cywgd2hpY2ggd2lsbCBiZSBvbWl0dGVkIGZyb20gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBLZXlzIGFyZSBwYXRocyB0byB0aGUgc2VjcmV0IGluIGNvbnN0cnVjdG9yIGFyZ3MsIGUuZy4gXCJmb28uYmFyLmJhelwiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIHNlY3JldCBpZHMsIHdoaWNoIHdpbGwgYmUgdXNlZCB3aGVuIGRlc2VyaWFsaXppbmcuXG4gICAgICovXG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFkZGl0aW9uYWwgYXR0cmlidXRlcyB0byBtZXJnZSB3aXRoIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGF0dHJpYnV0ZSB2YWx1ZXMsIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZC5cbiAgICAgKiBUaGVzZSBhdHRyaWJ1dGVzIG5lZWQgdG8gYmUgYWNjZXB0ZWQgYnkgdGhlIGNvbnN0cnVjdG9yIGFzIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgYWxpYXNlcyBmb3IgY29uc3RydWN0b3IgYXJncy5cbiAgICAgKiBLZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLCBlLmcuIFwiZm9vXCIuXG4gICAgICogVmFsdWVzIGFyZSB0aGUgYWxpYXMgdGhhdCB3aWxsIHJlcGxhY2UgdGhlIGtleSBpbiBzZXJpYWxpemF0aW9uLlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byBlZy4gbWFrZSBhcmd1bWVudCBuYW1lcyBtYXRjaCBQeXRob24uXG4gICAgICovXG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGt3YXJncywgLi4uX2FyZ3MpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGNfa3dhcmdzID0ga3dhcmdzIHx8IHt9O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmICghdGhpcy5sY19zZXJpYWxpemFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHRoaXMubGNfa3dhcmdzIGluc3RhbmNlb2YgU2VyaWFsaXphYmxlIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5sY19rd2FyZ3MgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodGhpcy5sY19rd2FyZ3MpKSB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgc3VwcG9ydCBzZXJpYWxpemF0aW9uIG9mIGNsYXNzZXMgd2l0aCBhcmcgbm90IGEgUE9KT1xuICAgICAgICAgICAgLy8gSSdtIGF3YXJlIHRoZSBjaGVjayBhYm92ZSBpc24ndCBhcyBzdHJpY3QgYXMgaXQgY291bGQgYmVcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPTk5vdEltcGxlbWVudGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IHt9O1xuICAgICAgICBjb25zdCBzZWNyZXRzID0ge307XG4gICAgICAgIGNvbnN0IGt3YXJncyA9IE9iamVjdC5rZXlzKHRoaXMubGNfa3dhcmdzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IGtleSBpbiB0aGlzID8gdGhpc1trZXldIDogdGhpcy5sY19rd2FyZ3Nba2V5XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgLy8gZ2V0IHNlY3JldHMsIGF0dHJpYnV0ZXMgYW5kIGFsaWFzZXMgZnJvbSBhbGwgc3VwZXJjbGFzc2VzXG4gICAgICAgIGZvciAoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICBsZXQgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTsgY3VycmVudDsgY3VycmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdXJyZW50KSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihhbGlhc2VzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2FsaWFzZXNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzZWNyZXRzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX3NlY3JldHNcIiwgdGhpcykpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihrd2FyZ3MsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYXR0cmlidXRlc1wiLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5jbHVkZSBhbGwgc2VjcmV0cyB1c2VkLCBldmVuIGlmIG5vdCBpbiBrd2FyZ3MsXG4gICAgICAgIC8vIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBzZW50aW5lbCB2YWx1ZSBpbiByZXBsYWNlU2VjcmV0c1xuICAgICAgICBPYmplY3Qua2V5cyhzZWNyZXRzKS5mb3JFYWNoKChrZXlQYXRoKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGxldCByZWFkID0gdGhpcztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgd3JpdGUgPSBrd2FyZ3M7XG4gICAgICAgICAgICBjb25zdCBbbGFzdCwgLi4ucGFydHNSZXZlcnNlXSA9IGtleVBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gcmVhZCkgfHwgcmVhZFtrZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gd3JpdGUpIHx8IHdyaXRlW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlYWRba2V5XSA9PT0gXCJvYmplY3RcIiAmJiByZWFkW2tleV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmVhZFtrZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVba2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlYWQgPSByZWFkW2tleV07XG4gICAgICAgICAgICAgICAgd3JpdGUgPSB3cml0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhc3QgaW4gcmVhZCAmJiByZWFkW2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3cml0ZVtsYXN0XSA9IHdyaXRlW2xhc3RdIHx8IHJlYWRbbGFzdF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcImNvbnN0cnVjdG9yXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgICAgIGt3YXJnczogbWFwS2V5cyhPYmplY3Qua2V5cyhzZWNyZXRzKS5sZW5ndGggPyByZXBsYWNlU2VjcmV0cyhrd2FyZ3MsIHNlY3JldHMpIDoga3dhcmdzLCBrZXlUb0pzb24sIGFsaWFzZXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmxjX2lkLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJrZXlUb0pzb24iLCJtYXBLZXlzIiwic2hhbGxvd0NvcHkiLCJvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsYWNlU2VjcmV0cyIsInJvb3QiLCJzZWNyZXRzTWFwIiwicmVzdWx0IiwicGF0aCIsInNlY3JldElkIiwiT2JqZWN0IiwiZW50cmllcyIsImxhc3QiLCJwYXJ0c1JldmVyc2UiLCJzcGxpdCIsInJldmVyc2UiLCJjdXJyZW50IiwicGFydCIsInVuZGVmaW5lZCIsImxjIiwidHlwZSIsImlkIiwiZ2V0X2xjX3VuaXF1ZV9uYW1lIiwic2VyaWFsaXphYmxlQ2xhc3MiLCJwYXJlbnRDbGFzcyIsImdldFByb3RvdHlwZU9mIiwibGNOYW1lSXNTdWJjbGFzc2VkIiwibGNfbmFtZSIsIm5hbWUiLCJTZXJpYWxpemFibGUiLCJsY19pZCIsImxjX25hbWVzcGFjZSIsImNvbnN0cnVjdG9yIiwibGNfc2VjcmV0cyIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwia3dhcmdzIiwiX2FyZ3MiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfa3dhcmdzIiwidG9KU09OIiwibGNfc2VyaWFsaXphYmxlIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJhbGlhc2VzIiwic2VjcmV0cyIsImtleXMiLCJyZWR1Y2UiLCJhY2MiLCJrZXkiLCJhc3NpZ24iLCJSZWZsZWN0IiwiZ2V0IiwiZm9yRWFjaCIsImtleVBhdGgiLCJyZWFkIiwid3JpdGUiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return [\n            ...firstContent,\n            ...secondContent\n        ];\n    // If the first content is a list and second is a string\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n    toChunk() {\n        const type = this._getType();\n        if (type === \"human\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new HumanMessageChunk({\n                ...this\n            });\n        } else if (type === \"ai\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new AIMessageChunk({\n                ...this\n            });\n        } else if (type === \"system\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new SystemMessageChunk({\n                ...this\n            });\n        } else if (type === \"function\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new FunctionMessageChunk({\n                ...this\n            });\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        } else if (ChatMessage.isInstance(this)) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new ChatMessageChunk({\n                ...this\n            });\n        } else {\n            throw new Error(\"Unknown message type.\");\n        }\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n    static _mergeAdditionalKwargs(left, right) {\n        const merged = {\n            ...left\n        };\n        for (const [key, value] of Object.entries(right)){\n            if (merged[key] === undefined) {\n                merged[key] = value;\n            } else if (typeof merged[key] !== typeof value) {\n                throw new Error(`additional_kwargs[${key}] already exists in the message chunk, but with a different type.`);\n            } else if (typeof merged[key] === \"string\") {\n                merged[key] = merged[key] + value;\n            } else if (!Array.isArray(merged[key]) && typeof merged[key] === \"object\") {\n                merged[key] = this._mergeAdditionalKwargs(merged[key], value);\n            } else if (key === \"tool_calls\" && isOpenAIToolCallArray(merged[key]) && isOpenAIToolCallArray(value)) {\n                for (const toolCall of value){\n                    if (merged[key]?.[toolCall.index] !== undefined) {\n                        merged[key] = merged[key]?.map((value, i)=>{\n                            if (i !== toolCall.index) {\n                                return value;\n                            }\n                            return {\n                                ...value,\n                                ...toolCall,\n                                function: {\n                                    name: toolCall.function.name ?? value.function.name,\n                                    arguments: (value.function.arguments ?? \"\") + (toolCall.function.arguments ?? \"\")\n                                }\n                            };\n                        });\n                    } else {\n                        merged[key][toolCall.index] = toolCall;\n                    }\n                }\n            } else {\n                throw new Error(`additional_kwargs[${key}] already exists in this message chunk.`);\n            }\n        }\n        return merged;\n    }\n}\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: HumanMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs)\n        });\n    }\n}\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends BaseMessage {\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    concat(chunk) {\n        return new AIMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: AIMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs)\n        });\n    }\n}\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: SystemMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs)\n        });\n    }\n}\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: FunctionMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs),\n            name: this.name ?? \"\"\n        });\n    }\n}\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: ToolMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs),\n            tool_call_id: this.tool_call_id\n        });\n    }\n}\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new HumanMessage(messageLike);\n    } else if (isBaseMessage(messageLike)) {\n        return messageLike;\n    }\n    const [type, content] = messageLike;\n    if (type === \"human\" || type === \"user\") {\n        return new HumanMessage({\n            content\n        });\n    } else if (type === \"ai\" || type === \"assistant\") {\n        return new AIMessage({\n            content\n        });\n    } else if (type === \"system\") {\n        return new SystemMessage({\n            content\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: ChatMessageChunk._mergeAdditionalKwargs(this.additional_kwargs, chunk.additional_kwargs),\n            role: this.role\n        });\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        string_messages.push(`${role}: ${nameStr}${m.content}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new AIMessage(storedMessage.data);\n        case \"system\":\n            return new SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new ToolMessage(storedMessage.data);\n        case \"chat\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUN2RCxTQUFTQyxhQUFhQyxZQUFZLEVBQUVDLGFBQWE7SUFDN0MsK0JBQStCO0lBQy9CLElBQUksT0FBT0QsaUJBQWlCLFVBQVU7UUFDbEMsSUFBSSxPQUFPQyxrQkFBa0IsVUFBVTtZQUNuQyxPQUFPRCxlQUFlQztRQUMxQixPQUNLO1lBQ0QsT0FBTztnQkFBQztvQkFBRUMsTUFBTTtvQkFBUUMsTUFBTUg7Z0JBQWE7bUJBQU1DO2FBQWM7UUFDbkU7SUFDQSxxQkFBcUI7SUFDekIsT0FDSyxJQUFJRyxNQUFNQyxPQUFPLENBQUNKLGdCQUFnQjtRQUNuQyxPQUFPO2VBQUlEO2VBQWlCQztTQUFjO0lBQzFDLHdEQUF3RDtJQUM1RCxPQUNLO1FBQ0QsaUVBQWlFO1FBQ2pFLE9BQU87ZUFBSUQ7WUFBYztnQkFBRUUsTUFBTTtnQkFBUUMsTUFBTUY7WUFBYztTQUFFO0lBQ25FO0FBQ0o7QUFDQTs7OztDQUlDLEdBQ00sTUFBTUssb0JBQW9CUiwrREFBWUE7SUFDekMsSUFBSVMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQUVDLG1CQUFtQjtRQUFvQjtJQUNwRDtJQUNBOzs7S0FHQyxHQUNELElBQUlMLE9BQU87UUFDUCxPQUFPLE9BQU8sSUFBSSxDQUFDTSxPQUFPLEtBQUssV0FBVyxJQUFJLENBQUNBLE9BQU8sR0FBRztJQUM3RDtJQUNBQyxZQUFZQyxNQUFNLEVBQ2xCLGdCQUFnQixHQUNoQkMsTUFBTSxDQUFFO1FBQ0osSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsNkNBQTZDO1lBQzdDQSxTQUFTO2dCQUFFRixTQUFTRTtnQkFBUUgsbUJBQW1CSTtZQUFPO1FBQzFEO1FBQ0EsNkZBQTZGO1FBQzdGLElBQUksQ0FBQ0QsT0FBT0gsaUJBQWlCLEVBQUU7WUFDM0Is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LFNBQVN0QixHQUFHLENBQUMsQ0FBQ2EsVUFBWUEsUUFBUXZDLE1BQU07QUFDbkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9pbmRleC5qcz9iMWM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuZnVuY3Rpb24gbWVyZ2VDb250ZW50KGZpcnN0Q29udGVudCwgc2Vjb25kQ29udGVudCkge1xuICAgIC8vIElmIGZpcnN0IGNvbnRlbnQgaXMgYSBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGZpcnN0Q29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAodHlwZW9mIHNlY29uZENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdENvbnRlbnQgKyBzZWNvbmRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBmaXJzdENvbnRlbnQgfSwgLi4uc2Vjb25kQ29udGVudF07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYm90aCBhcmUgYXJyYXlzXG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2Vjb25kQ29udGVudCkpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIC4uLnNlY29uZENvbnRlbnRdO1xuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgY29udGVudCBpcyBhIGxpc3QgYW5kIHNlY29uZCBpcyBhIHN0cmluZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBhZGQgdGhlIHNlY29uZCBjb250ZW50IGFzIGEgbmV3IGVsZW1lbnQgb2YgdGhlIGxpc3RcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHNlY29uZENvbnRlbnQgfV07XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgdHlwZXMgb2YgbWVzc2FnZXMgaW4gYSBjb252ZXJzYXRpb24uIEl0IGluY2x1ZGVzXG4gKiBwcm9wZXJ0aWVzIGxpa2UgYGNvbnRlbnRgLCBgbmFtZWAsIGFuZCBgYWRkaXRpb25hbF9rd2FyZ3NgLiBJdCBhbHNvXG4gKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4geyBhZGRpdGlvbmFsX2t3YXJnczogXCJhZGRpdGlvbmFsX2t3YXJnc1wiIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogVXNlIHtAbGluayBCYXNlTWVzc2FnZS5jb250ZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IHRoaXMuY29udGVudCA6IFwiXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBhZGRpdGlvbmFsX2t3YXJnczoga3dhcmdzIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBkZWZhdWx0IHZhbHVlIGZvciBhZGRpdGlvbmFsX2t3YXJncyBpcyBwYXNzZWQgaW50byBzdXBlcigpIGZvciBzZXJpYWxpemF0aW9uXG4gICAgICAgIGlmICghZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJtZXNzYWdlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbnRlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIHNlbmRlciBpbiBhIG11bHRpLXVzZXIgY2hhdC4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQWRkaXRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGRpdGlvbmFsX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gZmllbGRzLmNvbnRlbnQ7XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MgPSBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3M7XG4gICAgfVxuICAgIHRvRGljdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMuX2dldFR5cGUoKSxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMudG9KU09OKClcbiAgICAgICAgICAgICAgICAua3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0NodW5rKCkge1xuICAgICAgICBjb25zdCB0eXBlID0gdGhpcy5fZ2V0VHlwZSgpO1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHsgLi4udGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoeyAuLi50aGlzIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHsgLi4udGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoeyAuLi50aGlzIH0pO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UodGhpcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7IC4uLnRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG1lc3NhZ2UgdHlwZS5cIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc09wZW5BSVRvb2xDYWxsQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIHZhbHVlLmV2ZXJ5KCh2KSA9PiB0eXBlb2Ygdi5pbmRleCA9PT0gXCJudW1iZXJcIikpO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbiAqIG1lc3NhZ2UgY2h1bmtzLiBJdCBpbmNsdWRlcyBhIG1ldGhvZCBgX21lcmdlX2t3YXJnc19kaWN0KClgIGZvciBtZXJnaW5nXG4gKiBhZGRpdGlvbmFsIGtleXdvcmQgYXJndW1lbnRzIGZyb20gYW5vdGhlciBgQmFzZU1lc3NhZ2VDaHVua2AgaW50byB0aGlzXG4gKiBvbmUuIEl0IGFsc28gb3ZlcnJpZGVzIHRoZSBgX19hZGRfXygpYCBtZXRob2QgdG8gc3VwcG9ydCBjb25jYXRlbmF0aW9uXG4gKiBvZiBgQmFzZU1lc3NhZ2VDaHVua2AgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgX21lcmdlQWRkaXRpb25hbEt3YXJncyhsZWZ0LCByaWdodCkge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSB7IC4uLmxlZnQgfTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmlnaHQpKSB7XG4gICAgICAgICAgICBpZiAobWVyZ2VkW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gIT09IHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgYWRkaXRpb25hbF9rd2FyZ3NbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbWVzc2FnZSBjaHVuaywgYnV0IHdpdGggYSBkaWZmZXJlbnQgdHlwZS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VkW2tleV0gKyB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIG1lcmdlZFtrZXldID0gdGhpcy5fbWVyZ2VBZGRpdGlvbmFsS3dhcmdzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwidG9vbF9jYWxsc1wiICYmXG4gICAgICAgICAgICAgICAgaXNPcGVuQUlUb29sQ2FsbEFycmF5KG1lcmdlZFtrZXldKSAmJlxuICAgICAgICAgICAgICAgIGlzT3BlbkFJVG9vbENhbGxBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXJnZWRba2V5XT8uW3Rvb2xDYWxsLmluZGV4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRba2V5XSA9IG1lcmdlZFtrZXldPy5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IHRvb2xDYWxsLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSA/PyB2YWx1ZS5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiAodmFsdWUuZnVuY3Rpb24uYXJndW1lbnRzID8/IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzID8/IFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFtrZXldW3Rvb2xDYWxsLmluZGV4XSA9IHRvb2xDYWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBhZGRpdGlvbmFsX2t3YXJnc1ske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuay5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGh1bWFuIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgaHVtYW4gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJIdW1hbk1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogSHVtYW5NZXNzYWdlQ2h1bmsuX21lcmdlQWRkaXRpb25hbEt3YXJncyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYW4gQUkgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkFJTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBBSU1lc3NhZ2VDaHVuay5fbWVyZ2VBZGRpdGlvbmFsS3dhcmdzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgc3lzdGVtIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHN5c3RlbSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIHN5c3RlbSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogU3lzdGVtTWVzc2FnZUNodW5rLl9tZXJnZUFkZGl0aW9uYWxLd2FyZ3ModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBmdW5jdGlvbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lOiBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBmdW5jdGlvbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkXG4gKiB3aXRoIG90aGVyIGZ1bmN0aW9uIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IEZ1bmN0aW9uTWVzc2FnZUNodW5rLl9tZXJnZUFkZGl0aW9uYWxLd2FyZ3ModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IFwiXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIHRvb2wgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZVwiO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9jYWxsX2lkOiBcInRvb2xfY2FsbF9pZFwiIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgdG9vbF9jYWxsX2lkLCBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lLCB0b29sX2NhbGxfaWQ6IHRvb2xfY2FsbF9pZCB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9pZCA9IGZpZWxkcy50b29sX2NhbGxfaWQ7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSB0b29sIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiAqIHdpdGggb3RoZXIgdG9vbCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInRvb2xcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBUb29sTWVzc2FnZUNodW5rLl9tZXJnZUFkZGl0aW9uYWxLd2FyZ3ModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY2hhdE1lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIENoYXRNZXNzYWdlO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIHJvbGU6IHJvbGUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb2xlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucm9sZSA9IGZpZWxkcy5yb2xlO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ2VuZXJpY1wiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbnN0YW5jZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlTGlrZT8uX2dldFR5cGUgPT09IFwiZnVuY3Rpb25cIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VNZXNzYWdlQ2h1bmsobWVzc2FnZUxpa2UpIHtcbiAgICByZXR1cm4gKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpICYmXG4gICAgICAgIHR5cGVvZiBtZXNzYWdlTGlrZS5jb25jYXQgPT09IFwiZnVuY3Rpb25cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UobWVzc2FnZUxpa2UpIHtcbiAgICBpZiAodHlwZW9mIG1lc3NhZ2VMaWtlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKG1lc3NhZ2VMaWtlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VMaWtlO1xuICAgIH1cbiAgICBjb25zdCBbdHlwZSwgY29udGVudF0gPSBtZXNzYWdlTGlrZTtcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiIHx8IHR5cGUgPT09IFwidXNlclwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJhaVwiIHx8IHR5cGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2UoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZSh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBjb2VyY2UgbWVzc2FnZSBmcm9tIGFycmF5OiBvbmx5IGh1bWFuLCBBSSwgb3Igc3lzdGVtIG1lc3NhZ2UgY29lcmNpb24gaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGNoYXQgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogQ2hhdE1lc3NhZ2VDaHVuay5fbWVyZ2VBZGRpdGlvbmFsS3dhcmdzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJvbGU6IHRoaXMucm9sZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gKiBvZiB0aGUgY2hhdCBtZXNzYWdlIGhpc3RvcnksIGJhc2VkIG9uIHRoZSBtZXNzYWdlIGNvbnRlbnQgYW5kIHJvbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMsIGh1bWFuUHJlZml4ID0gXCJIdW1hblwiLCBhaVByZWZpeCA9IFwiQUlcIikge1xuICAgIGNvbnN0IHN0cmluZ19tZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbSBvZiBtZXNzYWdlcykge1xuICAgICAgICBsZXQgcm9sZTtcbiAgICAgICAgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICByb2xlID0gaHVtYW5QcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBhaVByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlN5c3RlbVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJGdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlRvb2xcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiKSB7XG4gICAgICAgICAgICByb2xlID0gbS5yb2xlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5zdXBwb3J0ZWQgbWVzc2FnZSB0eXBlOiAke20uX2dldFR5cGUoKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lU3RyID0gbS5uYW1lID8gYCR7bS5uYW1lfSwgYCA6IFwiXCI7XG4gICAgICAgIHN0cmluZ19tZXNzYWdlcy5wdXNoKGAke3JvbGV9OiAke25hbWVTdHJ9JHttLmNvbnRlbnR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdfbWVzc2FnZXMuam9pbihcIlxcblwiKTtcbn1cbi8qKlxuICogTWFwcyBtZXNzYWdlcyBmcm9tIGFuIG9sZGVyIGZvcm1hdCAoVjEpIHRvIHRoZSBjdXJyZW50IGBTdG9yZWRNZXNzYWdlYFxuICogZm9ybWF0LiBJZiB0aGUgbWVzc2FnZSBpcyBhbHJlYWR5IGluIHRoZSBgU3RvcmVkTWVzc2FnZWAgZm9ybWF0LCBpdCBpc1xuICogcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgaXQgdHJhbnNmb3JtcyB0aGUgVjEgbWVzc2FnZSBpbnRvIGFcbiAqIGBTdG9yZWRNZXNzYWdlYC4gVGhpcyBmdW5jdGlvbiBpcyBpbXBvcnRhbnQgZm9yIG1haW50YWluaW5nXG4gKiBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgbWVzc2FnZSBmb3JtYXRzLlxuICovXG5mdW5jdGlvbiBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIG1hcHBlciB3aGVuIHdlIGRlcHJlY2F0ZSB0aGUgb2xkIG1lc3NhZ2UgZm9ybWF0LlxuICAgIGlmIChtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHYxTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB2MU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiB2MU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICAgICAgICByb2xlOiB2MU1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3Qgc3RvcmVkTWVzc2FnZSA9IG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZShtZXNzYWdlKTtcbiAgICBzd2l0Y2ggKHN0b3JlZE1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOYW1lIG11c3QgYmUgZGVmaW5lZCBmb3IgZnVuY3Rpb24gbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS50b29sX2NhbGxfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvb2wgY2FsbCBJRCBtdXN0IGJlIGRlZmluZWQgZm9yIHRvb2wgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJjaGF0XCI6IHtcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEucm9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9sZSBtdXN0IGJlIGRlZmluZWQgZm9yIGNoYXQgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuZXhwZWN0ZWQgdHlwZTogJHtzdG9yZWRNZXNzYWdlLnR5cGV9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMuIEl0IHVzZXMgdGhlIGBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2VgXG4gKiBmdW5jdGlvbiB0byBlbnN1cmUgYWxsIG1lc3NhZ2VzIGFyZSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgdGhlblxuICogY3JlYXRlcyBuZXcgaW5zdGFuY2VzIG9mIHRoZSBhcHByb3ByaWF0ZSBgQmFzZU1lc3NhZ2VgIHN1YmNsYXNzIGJhc2VkXG4gKiBvbiB0aGUgdHlwZSBvZiBlYWNoIG1lc3NhZ2UuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBwcmVwYXJlIHN0b3JlZFxuICogbWVzc2FnZXMgZm9yIHVzZSBpbiBhIGNoYXQgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcyBpbnRvIGFuIGFycmF5IG9mXG4gKiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCBkb2VzIHRoaXMgYnkgY2FsbGluZyB0aGUgYHRvRGljdGAgbWV0aG9kXG4gKiBvbiBlYWNoIGBCYXNlTWVzc2FnZWAsIHdoaWNoIHJldHVybnMgYSBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb25cbiAqIGlzIHVzZWQgdG8gcHJlcGFyZSBjaGF0IG1lc3NhZ2VzIGZvciBzdG9yYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyhtZXNzYWdlcykge1xuICAgIHJldHVybiBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UudG9EaWN0KCkpO1xufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIm1lcmdlQ29udGVudCIsImZpcnN0Q29udGVudCIsInNlY29uZENvbnRlbnQiLCJ0eXBlIiwidGV4dCIsIkFycmF5IiwiaXNBcnJheSIsIkJhc2VNZXNzYWdlIiwibGNfYWxpYXNlcyIsImFkZGl0aW9uYWxfa3dhcmdzIiwiY29udGVudCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm5hbWUiLCJ0b0RpY3QiLCJfZ2V0VHlwZSIsImRhdGEiLCJ0b0pTT04iLCJ0b0NodW5rIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJBSU1lc3NhZ2VDaHVuayIsIlN5c3RlbU1lc3NhZ2VDaHVuayIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiQ2hhdE1lc3NhZ2UiLCJpc0luc3RhbmNlIiwiQ2hhdE1lc3NhZ2VDaHVuayIsIkVycm9yIiwiaXNPcGVuQUlUb29sQ2FsbEFycmF5IiwiZXZlcnkiLCJ2IiwiaW5kZXgiLCJCYXNlTWVzc2FnZUNodW5rIiwiX21lcmdlQWRkaXRpb25hbEt3YXJncyIsImxlZnQiLCJyaWdodCIsIm1lcmdlZCIsImtleSIsImVudHJpZXMiLCJ1bmRlZmluZWQiLCJ0b29sQ2FsbCIsIm1hcCIsImkiLCJmdW5jdGlvbiIsImFyZ3VtZW50cyIsIkh1bWFuTWVzc2FnZSIsImxjX25hbWUiLCJjb25jYXQiLCJjaHVuayIsIkFJTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2UiLCJGdW5jdGlvbk1lc3NhZ2UiLCJUb29sTWVzc2FnZSIsInRvb2xfY2FsbF9pZCIsIm1lc3NhZ2UiLCJUb29sTWVzc2FnZUNodW5rIiwiX2NoYXRNZXNzYWdlQ2xhc3MiLCJyb2xlIiwiaXNCYXNlTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwiaXNCYXNlTWVzc2FnZUNodW5rIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJnZXRCdWZmZXJTdHJpbmciLCJtZXNzYWdlcyIsImh1bWFuUHJlZml4IiwiYWlQcmVmaXgiLCJzdHJpbmdfbWVzc2FnZXMiLCJtIiwibmFtZVN0ciIsInB1c2giLCJqb2luIiwibWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlIiwidjFNZXNzYWdlIiwibWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UiLCJzdG9yZWRNZXNzYWdlIiwibWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyIsIm1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0Q7QUFDZTtBQUNyRTs7Q0FFQyxHQUNNLE1BQU1HLHdCQUF3QkgsK0RBQVlBO0FBQ2pEO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUksMEJBQTBCRDtJQUNuQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQztZQUFFQTtRQUFNO1FBQ2RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0FNLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ04sS0FBSztJQUNyQjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO1lBQUMsSUFBSWIsNERBQVlBLENBQUMsSUFBSSxDQUFDTSxLQUFLO1NBQUU7SUFDekM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1RLHdCQUF3Qlo7SUFDakMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixTQUFTO1lBQ3ZCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRUcsVUFBVUg7WUFBTztRQUNoQztRQUNBLEtBQUssQ0FBQ0E7UUFDTlIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWdCO1FBQzlDO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNZLFFBQVEsR0FBR0gsT0FBT0csUUFBUTtJQUNuQztJQUNBTixXQUFXO1FBQ1AsT0FBT1gsbUVBQWVBLENBQUMsSUFBSSxDQUFDaUIsUUFBUTtJQUN4QztJQUNBTCxpQkFBaUI7UUFDYixPQUFPLElBQUksQ0FBQ0ssUUFBUTtJQUN4QjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMseUJBQXlCakI7SUFDbEMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFFLGVBQWNBLE1BQUssR0FBSTtZQUN6Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVLLFVBQVVMO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsWUFBWSxHQUNaQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2MsUUFBUSxHQUFHTCxPQUFPSyxRQUFRO0lBQ25DO0lBQ0FSLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxHQUFHO0lBQzVCO0lBQ0FSLGlCQUFpQjtRQUNiLE9BQU87WUFDSCxJQUFJYiw0REFBWUEsQ0FBQztnQkFDYnNCLFNBQVM7b0JBQ0w7d0JBQ0lDLE1BQU07d0JBQ05DLFdBQVc7NEJBQ1BDLFFBQVEsSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU07NEJBQzVCSixLQUFLLElBQUksQ0FBQ0QsUUFBUSxDQUFDQyxHQUFHO3dCQUMxQjtvQkFDSjtpQkFDSDtZQUNMO1NBQ0g7SUFDTDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcz8wMzIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIGdldEJ1ZmZlclN0cmluZywgfSBmcm9tIFwiLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBCYXNlIFByb21wdFZhbHVlIGNsYXNzLiBBbGwgcHJvbXB0IHZhbHVlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VmFsdWUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHJvbXB0IHZhbHVlIGFzIGEgc3RyaW5nLiBJdCBleHRlbmRzIHRoZSBCYXNlUHJvbXB0VmFsdWVcbiAqIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIHRvU3RyaW5nIGFuZCB0b0NoYXRNZXNzYWdlcyBtZXRob2RzLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJpbmdQcm9tcHRWYWx1ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICBzdXBlcih7IHZhbHVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG4gICAgdG9DaGF0TWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBbbmV3IEh1bWFuTWVzc2FnZSh0aGlzLnZhbHVlKV07XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IHByb21wdCB2YWx1ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VQcm9tcHRWYWx1ZSBhbmQgaW5jbHVkZXMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2UgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdFByb21wdFZhbHVlIGV4dGVuZHMgQmFzZVByb21wdFZhbHVlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdFByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgbWVzc2FnZXM6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVzc2FnZXMgPSBmaWVsZHMubWVzc2FnZXM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gZ2V0QnVmZmVyU3RyaW5nKHRoaXMubWVzc2FnZXMpO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gaW1hZ2UgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBJbWFnZVVSTCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEltYWdlUHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJJbWFnZVByb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAoIShcImltYWdlVXJsXCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGltYWdlVXJsOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbWFnZVVybFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmltYWdlVXJsID0gZmllbGRzLmltYWdlVXJsO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VVcmwudXJsO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG5ldyBIdW1hbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDogdGhpcy5pbWFnZVVybC5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLmltYWdlVXJsLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJTZXJpYWxpemFibGUiLCJIdW1hbk1lc3NhZ2UiLCJnZXRCdWZmZXJTdHJpbmciLCJCYXNlUHJvbXB0VmFsdWUiLCJTdHJpbmdQcm9tcHRWYWx1ZSIsImxjX25hbWUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ0b1N0cmluZyIsInRvQ2hhdE1lc3NhZ2VzIiwiQ2hhdFByb21wdFZhbHVlIiwiZmllbGRzIiwiQXJyYXkiLCJpc0FycmF5IiwibWVzc2FnZXMiLCJJbWFnZVByb21wdFZhbHVlIiwiaW1hZ2VVcmwiLCJ1cmwiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsImRldGFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/retrievers.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/retrievers.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseRetriever: () => (/* binding */ BaseRetriever)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * Abstract base class for a Document retrieval system. A retrieval system\n * is defined as something that can take string queries and return the\n * most 'relevant' Documents from some source.\n */ class BaseRetriever extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callbacks = fields?.callbacks;\n        this.tags = fields?.tags ?? [];\n        this.metadata = fields?.metadata ?? {};\n        this.verbose = fields?.verbose ?? false;\n    }\n    /**\n     * TODO: This should be an abstract method, but we'd like to avoid breaking\n     * changes to people currently using subclassed custom retrievers.\n     * Change it on next major release.\n     */ _getRelevantDocuments(_query, _callbacks) {\n        throw new Error(\"Not implemented!\");\n    }\n    async invoke(input, options) {\n        return this.getRelevantDocuments(input, (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options));\n    }\n    /**\n     * Main method used to retrieve relevant documents. It takes a query\n     * string and an optional configuration object, and returns a promise that\n     * resolves to an array of `Document` objects. This method handles the\n     * retrieval process, including starting and ending callbacks, and error\n     * handling.\n     * @param query The query string to retrieve relevant documents for.\n     * @param config Optional configuration object for the retrieval process.\n     * @returns A promise that resolves to an array of `Document` objects.\n     */ async getRelevantDocuments(query, config) {\n        const parsedConfig = (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(config));\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(parsedConfig.callbacks, this.callbacks, parsedConfig.tags, this.tags, parsedConfig.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const runManager = await callbackManager_?.handleRetrieverStart(this.toJSON(), query, undefined, undefined, undefined, undefined, parsedConfig.runName);\n        try {\n            const results = await this._getRelevantDocuments(query, runManager);\n            await runManager?.handleRetrieverEnd(results);\n            return results;\n        } catch (error) {\n            await runManager?.handleRetrieverError(error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcmV0cmlldmVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtGO0FBQ25DO0FBQ007QUFDckQ7Ozs7Q0FJQyxHQUNNLE1BQU1JLHNCQUFzQkYsd0RBQVFBO0lBQ3ZDRyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsU0FBUyxHQUFHUCxRQUFRTztRQUN6QixJQUFJLENBQUNDLElBQUksR0FBR1IsUUFBUVEsUUFBUSxFQUFFO1FBQzlCLElBQUksQ0FBQ0MsUUFBUSxHQUFHVCxRQUFRUyxZQUFZLENBQUM7UUFDckMsSUFBSSxDQUFDQyxPQUFPLEdBQUdWLFFBQVFVLFdBQVc7SUFDdEM7SUFDQTs7OztLQUlDLEdBQ0RDLHNCQUFzQkMsTUFBTSxFQUFFQyxVQUFVLEVBQUU7UUFDdEMsTUFBTSxJQUFJQyxNQUFNO0lBQ3BCO0lBQ0EsTUFBTUMsT0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUNDLG9CQUFvQixDQUFDRixPQUFPbkIsa0VBQVlBLENBQUNvQjtJQUN6RDtJQUNBOzs7Ozs7Ozs7S0FTQyxHQUNELE1BQU1DLHFCQUFxQkMsS0FBSyxFQUFFQyxNQUFNLEVBQUU7UUFDdEMsTUFBTUMsZUFBZXhCLGtFQUFZQSxDQUFDRiw2RUFBc0JBLENBQUN5QjtRQUN6RCxNQUFNRSxtQkFBbUIsTUFBTTVCLGtFQUFlQSxDQUFDNkIsU0FBUyxDQUFDRixhQUFhZCxTQUFTLEVBQUUsSUFBSSxDQUFDQSxTQUFTLEVBQUVjLGFBQWFiLElBQUksRUFBRSxJQUFJLENBQUNBLElBQUksRUFBRWEsYUFBYVosUUFBUSxFQUFFLElBQUksQ0FBQ0EsUUFBUSxFQUFFO1lBQUVDLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1FBQUM7UUFDN0wsTUFBTWMsYUFBYSxNQUFNRixrQkFBa0JHLHFCQUFxQixJQUFJLENBQUNDLE1BQU0sSUFBSVAsT0FBT1EsV0FBV0EsV0FBV0EsV0FBV0EsV0FBV04sYUFBYU8sT0FBTztRQUN0SixJQUFJO1lBQ0EsTUFBTUMsVUFBVSxNQUFNLElBQUksQ0FBQ2xCLHFCQUFxQixDQUFDUSxPQUFPSztZQUN4RCxNQUFNQSxZQUFZTSxtQkFBbUJEO1lBQ3JDLE9BQU9BO1FBQ1gsRUFDQSxPQUFPRSxPQUFPO1lBQ1YsTUFBTVAsWUFBWVEscUJBQXFCRDtZQUN2QyxNQUFNQTtRQUNWO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3JldHJpZXZlcnMuanM/MzIyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcsIH0gZnJvbSBcIi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL3J1bm5hYmxlcy9jb25maWcuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYSBEb2N1bWVudCByZXRyaWV2YWwgc3lzdGVtLiBBIHJldHJpZXZhbCBzeXN0ZW1cbiAqIGlzIGRlZmluZWQgYXMgc29tZXRoaW5nIHRoYXQgY2FuIHRha2Ugc3RyaW5nIHF1ZXJpZXMgYW5kIHJldHVybiB0aGVcbiAqIG1vc3QgJ3JlbGV2YW50JyBEb2N1bWVudHMgZnJvbSBzb21lIHNvdXJjZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VSZXRyaWV2ZXIgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcmJvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBmaWVsZHM/LmNhbGxiYWNrcztcbiAgICAgICAgdGhpcy50YWdzID0gZmllbGRzPy50YWdzID8/IFtdO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gZmllbGRzPy5tZXRhZGF0YSA/PyB7fTtcbiAgICAgICAgdGhpcy52ZXJib3NlID0gZmllbGRzPy52ZXJib3NlID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUT0RPOiBUaGlzIHNob3VsZCBiZSBhbiBhYnN0cmFjdCBtZXRob2QsIGJ1dCB3ZSdkIGxpa2UgdG8gYXZvaWQgYnJlYWtpbmdcbiAgICAgKiBjaGFuZ2VzIHRvIHBlb3BsZSBjdXJyZW50bHkgdXNpbmcgc3ViY2xhc3NlZCBjdXN0b20gcmV0cmlldmVycy5cbiAgICAgKiBDaGFuZ2UgaXQgb24gbmV4dCBtYWpvciByZWxlYXNlLlxuICAgICAqL1xuICAgIF9nZXRSZWxldmFudERvY3VtZW50cyhfcXVlcnksIF9jYWxsYmFja3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkIVwiKTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlbGV2YW50RG9jdW1lbnRzKGlucHV0LCBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWluIG1ldGhvZCB1c2VkIHRvIHJldHJpZXZlIHJlbGV2YW50IGRvY3VtZW50cy4gSXQgdGFrZXMgYSBxdWVyeVxuICAgICAqIHN0cmluZyBhbmQgYW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QsIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0XG4gICAgICogcmVzb2x2ZXMgdG8gYW4gYXJyYXkgb2YgYERvY3VtZW50YCBvYmplY3RzLiBUaGlzIG1ldGhvZCBoYW5kbGVzIHRoZVxuICAgICAqIHJldHJpZXZhbCBwcm9jZXNzLCBpbmNsdWRpbmcgc3RhcnRpbmcgYW5kIGVuZGluZyBjYWxsYmFja3MsIGFuZCBlcnJvclxuICAgICAqIGhhbmRsaW5nLlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgc3RyaW5nIHRvIHJldHJpZXZlIHJlbGV2YW50IGRvY3VtZW50cyBmb3IuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIHJldHJpZXZhbCBwcm9jZXNzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGBEb2N1bWVudGAgb2JqZWN0cy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IGVuc3VyZUNvbmZpZyhwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGNvbmZpZykpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShwYXJzZWRDb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgcGFyc2VkQ29uZmlnLnRhZ3MsIHRoaXMudGFncywgcGFyc2VkQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZVJldHJpZXZlclN0YXJ0KHRoaXMudG9KU09OKCksIHF1ZXJ5LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHBhcnNlZENvbmZpZy5ydW5OYW1lKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9nZXRSZWxldmFudERvY3VtZW50cyhxdWVyeSwgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVSZXRyaWV2ZXJFbmQocmVzdWx0cyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkNhbGxiYWNrTWFuYWdlciIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJSdW5uYWJsZSIsImVuc3VyZUNvbmZpZyIsIkJhc2VSZXRyaWV2ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwiX2dldFJlbGV2YW50RG9jdW1lbnRzIiwiX3F1ZXJ5IiwiX2NhbGxiYWNrcyIsIkVycm9yIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwiZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJxdWVyeSIsImNvbmZpZyIsInBhcnNlZENvbmZpZyIsImNhbGxiYWNrTWFuYWdlcl8iLCJjb25maWd1cmUiLCJydW5NYW5hZ2VyIiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJ0b0pTT04iLCJ1bmRlZmluZWQiLCJydW5OYW1lIiwicmVzdWx0cyIsImhhbmRsZVJldHJpZXZlckVuZCIsImVycm9yIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/retrievers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks: fields.fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options)) {\n            if (options.length !== length) {\n                throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n            }\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig);\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this._streamIterator(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options)));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options = {}) {\n        const runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)({\n            callbacks: options.callbacks,\n            tags: options.tags,\n            metadata: options.metadata,\n            runName: options.runName,\n            configurable: options.configurable,\n            recursionLimit: options.recursionLimit,\n            maxConcurrency: options.maxConcurrency\n        });\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        let output;\n        try {\n            output = await func.call(this, input, config, runManager);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName())));\n        let outputs;\n        try {\n            outputs = await func.call(this, inputs, optionsList, runManagers, batchOptions);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, undefined, config?.runType, undefined, undefined, config?.runName ?? this.getName()), config);\n            runManager = pipe.setup;\n            const isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n            const streamLogHandler = runManager?.handlers.find(isLogStreamHandler);\n            let iterator = pipe.output;\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = await streamLogHandler.tapOutputIterable(runManager.runId, pipe.output);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.inheritableHandlers.push(logStreamCallbackHandler);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    /**\n     * Generate a stream of events emitted by the internal steps of the runnable.\n     *\n     * Use to create an iterator over StreamEvents that provide real-time information\n     * about the progress of the runnable, including StreamEvents from intermediate\n     * results.\n     *\n     * A StreamEvent is a dictionary with the following schema:\n     *\n     * - `event`: string - Event names are of the format: on_[runnable_type]_(start|stream|end).\n     * - `name`: string - The name of the runnable that generated the event.\n     * - `run_id`: string - Randomly generated ID associated with the given execution of\n     *   the runnable that emitted the event. A child runnable that gets invoked as part of the execution of a\n     *   parent runnable is assigned its own unique ID.\n     * - `tags`: string[] - The tags of the runnable that generated the event.\n     * - `metadata`: Record<string, any> - The metadata of the runnable that generated the event.\n     * - `data`: Record<string, any>\n     *\n     * Below is a table that illustrates some events that might be emitted by various\n     * chains. Metadata fields have been omitted from the table for brevity.\n     * Chain definitions have been included after the table.\n     *\n     * | event                | name             | chunk                              | input                                         | output                                          |\n     * |----------------------|------------------|------------------------------------|-----------------------------------------------|-------------------------------------------------|\n     * | on_llm_start         | [model name]     |                                    | {'input': 'hello'}                            |                                                 |\n     * | on_llm_stream        | [model name]     | 'Hello' OR AIMessageChunk(\"hello\") |                                               |                                                 |\n     * | on_llm_end           | [model name]     |                                    | 'Hello human!'                                |\n     * | on_chain_start       | format_docs      |                                    |                                               |                                                 |\n     * | on_chain_stream      | format_docs      | \"hello world!, goodbye world!\"     |                                               |                                                 |\n     * | on_chain_end         | format_docs      |                                    | [Document(...)]                               | \"hello world!, goodbye world!\"                  |\n     * | on_tool_start        | some_tool        |                                    | {\"x\": 1, \"y\": \"2\"}                            |                                                 |\n     * | on_tool_stream       | some_tool        |   {\"x\": 1, \"y\": \"2\"}               |                                               |                                                 |\n     * | on_tool_end          | some_tool        |                                    |                                               | {\"x\": 1, \"y\": \"2\"}                              |\n     * | on_retriever_start   | [retriever name] |                                    | {\"query\": \"hello\"}                            |                                                 |\n     * | on_retriever_chunk   | [retriever name] |  {documents: [...]}                |                                               |                                                 |\n     * | on_retriever_end     | [retriever name] |                                    | {\"query\": \"hello\"}                            | {documents: [...]}                              |\n     * | on_prompt_start      | [template_name]  |                                    | {\"question\": \"hello\"}                         |                                                 |\n     * | on_prompt_end        | [template_name]  |                                    | {\"question\": \"hello\"}                         | ChatPromptValue(messages: [SystemMessage, ...]) |\n     */ async *streamEvents(input, options, streamOptions) {\n        if (options.version !== \"v1\") {\n            throw new Error(`Only version \"v1\" of the events schema is currently supported.`);\n        }\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_8__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return thing ? thing.lc_runnable : false;\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig(individualOption, this.kwargs))) : await this._mergeConfig(options, this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async *transform(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig(options, this.kwargs));\n    }\n    async *streamEvents(input, options, streamOptions) {\n        yield* this.bound.streamEvents(input, {\n            ...await this._mergeConfig(options, this.kwargs),\n            version: options.version\n        }, streamOptions);\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            onFailedAttempt: this.onFailedAttempt,\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, config?.runName);\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                nextStepInput = await step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, undefined, undefined, undefined, configList[i].runName)));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                nextStepInputs = await step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(options);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, options?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, undefined, undefined, undefined, undefined, config?.runName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            await Promise.all(Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const { key, result, gen } = await Promise.race(tasks.values());\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(config, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...config,\n                        config\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            }));\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(options?.callbacks, undefined, options?.tags, undefined, options?.metadata);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, options?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata)));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, undefined, undefined, undefined, configList[i].runName)));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkI7QUFDOEI7QUFDK0I7QUFDbkM7QUFDcUU7QUFDQztBQUN0RTtBQUNXO0FBQ3BCO0FBQzhCO0FBQzVFLDhEQUE4RDtBQUN2RCxTQUFTb0IsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQzNDLE9BQU9ELFNBQ0gsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUNmLHVEQUF1RDtJQUN2RCxDQUFFQSxDQUFBQSxpQkFBaUJJLElBQUcsS0FDdEIsT0FBT0osVUFBVSxXQUNmQSxRQUNBO1FBQUUsQ0FBQ0MsV0FBVyxFQUFFRDtJQUFNO0FBQ2hDO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUssaUJBQWlCckIsK0RBQVlBO0lBQ3RDc0IsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBYSxRQUFRQyxNQUFNLEVBQUU7UUFDWixNQUFNQyxPQUNOLDhEQUE4RDtRQUM5RCxJQUFJLENBQUNBLElBQUksSUFBSSxJQUFJLENBQUNULFdBQVcsQ0FBQ1UsT0FBTyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDUyxJQUFJO1FBQ2hFLE9BQU9ELFNBQVMsQ0FBQyxFQUFFQyxLQUFLLEVBQUVELE9BQU8sQ0FBQyxHQUFHQztJQUN6QztJQUNBOzs7O0tBSUMsR0FDREUsS0FBS0MsTUFBTSxFQUFFO1FBQ1QsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSUMsZ0JBQWdCO1lBQUVDLE9BQU8sSUFB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QU8sRUFBRTtRQUN6QixnQkFBZ0JtRjtZQUNaLE1BQU10RTtRQUNWO1FBQ0EsTUFBTVUsbUJBQW1CLElBQUlyRSxxRUFBdUJBLENBQUMsSUFBSSxDQUFDZ0ksU0FBUyxDQUFDQyxhQUFhbkY7UUFDakYsTUFBTXVCLGlCQUFpQkMsS0FBSztRQUM1QixPQUFPMUUsb0VBQXNCQSxDQUFDMkUsa0JBQWtCLENBQUNGO0lBQ3JEO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvYmFzZS5qcz80NTYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgUnVuTG9nLCBSdW5Mb2dQYXRjaCwgfSBmcm9tIFwiLi4vdHJhY2Vycy9sb2dfc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sIGNvbmNhdCwgYXRlZSwgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCwgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9SRUNVUlNJT05fTElNSVQsIGVuc3VyZUNvbmZpZywgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnLCB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBSb290TGlzdGVuZXJzVHJhY2VyIH0gZnJvbSBcIi4uL3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qc1wiO1xuaW1wb3J0IHsgX1Jvb3RFdmVudEZpbHRlciB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJlxuICAgICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSBpcyBhIGdlbmVyaWMgdW5pdCBvZiB3b3JrIHRoYXQgY2FuIGJlIGludm9rZWQsIGJhdGNoZWQsIHN0cmVhbWVkLCBhbmQvb3JcbiAqIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19ydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICBjb25zdCBuYW1lID0gXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHRoaXMubmFtZSA/PyB0aGlzLmNvbnN0cnVjdG9yLmxjX25hbWUoKSA/PyB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHJldHVybiBzdWZmaXggPyBgJHtuYW1lfSR7c3VmZml4fWAgOiBuYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGFyZ3VtZW50cyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogQHBhcmFtIGt3YXJnc1xuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlQmluZGluZyB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgYXBwbHkgdGhlIGJvdW5kIGFyZ3MuXG4gICAgICovXG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7IGJvdW5kOiB0aGlzLCBrd2FyZ3MsIGNvbmZpZzoge30gfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIG5ldyBSdW5uYWJsZSB0aGF0IG1hcHMgYSBsaXN0IG9mIGlucHV0cyB0byBhIGxpc3Qgb2Ygb3V0cHV0cyxcbiAgICAgKiBieSBjYWxsaW5nIGludm9rZSgpIHdpdGggZWFjaCBpbnB1dC5cbiAgICAgKi9cbiAgICBtYXAoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goeyBib3VuZDogdGhpcyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIHJldHJ5IGxvZ2ljIHRvIGFuIGV4aXN0aW5nIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZVJldHJ5IHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCByZXRyeSBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlcnMuXG4gICAgICovXG4gICAgd2l0aFJldHJ5KGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVSZXRyeSh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGt3YXJnczoge30sXG4gICAgICAgICAgICBjb25maWc6IHt9LFxuICAgICAgICAgICAgbWF4QXR0ZW1wdE51bWJlcjogZmllbGRzPy5zdG9wQWZ0ZXJBdHRlbXB0LFxuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBjb25maWcgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBjb25maWcgTmV3IGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyB0byBhdHRhY2ggdG8gdGhlIG5ldyBydW5uYWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgd2l0aCBhIGNvbmZpZyBtYXRjaGluZyB3aGF0J3MgcGFzc2VkLlxuICAgICAqL1xuICAgIHdpdGhDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHJ1bm5hYmxlIGZyb20gdGhlIGN1cnJlbnQgb25lIHRoYXQgd2lsbCB0cnkgaW52b2tpbmdcbiAgICAgKiBvdGhlciBwYXNzZWQgZmFsbGJhY2sgcnVubmFibGVzIGlmIHRoZSBpbml0aWFsIGludm9jYXRpb24gZmFpbHMuXG4gICAgICogQHBhcmFtIGZpZWxkcy5mYWxsYmFja3MgT3RoZXIgcnVubmFibGVzIHRvIGNhbGwgaWYgdGhlIHJ1bm5hYmxlIGVycm9ycy5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3MuXG4gICAgICovXG4gICAgd2l0aEZhbGxiYWNrcyhmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlV2l0aEZhbGxiYWNrcyh7XG4gICAgICAgICAgICBydW5uYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGZhbGxiYWNrczogZmllbGRzLmZhbGxiYWNrcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRPcHRpb25zTGlzdChvcHRpb25zLCBsZW5ndGggPSAwKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUGFzc2VkIFwib3B0aW9uc1wiIG11c3QgYmUgYW4gYXJyYXkgd2l0aCB0aGUgc2FtZSBsZW5ndGggYXMgdGhlIGlucHV0cywgYnV0IGdvdCAke29wdGlvbnMubGVuZ3RofSBvcHRpb25zIGZvciAke2xlbmd0aH0gaW5wdXRzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoKSA9PiBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG1heENvbmN1cnJlbmN5ID0gY29uZmlnTGlzdFswXT8ubWF4Q29uY3VycmVuY3kgPz8gYmF0Y2hPcHRpb25zPy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgY29uc3QgY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHtcbiAgICAgICAgICAgIG1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmF0Y2hDYWxscyA9IGlucHV0cy5tYXAoKGlucHV0LCBpKSA9PiBjYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW52b2tlKGlucHV0LCBjb25maWdMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChiYXRjaENhbGxzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmYXVsdCBzdHJlYW1pbmcgaW1wbGVtZW50YXRpb24uXG4gICAgICogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgdGhleSBzdXBwb3J0IHN0cmVhbWluZyBvdXRwdXQuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkIHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RyZWFtIG91dHB1dCBpbiBjaHVua3MuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyBBIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGlzIGFsc28gYW4gaXRlcmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEJ1ZmZlciB0aGUgZmlyc3Qgc3RyZWFtZWQgY2h1bmsgdG8gYWxsb3cgZm9yIGluaXRpYWwgZXJyb3JzXG4gICAgICAgIC8vIHRvIHN1cmZhY2UgaW1tZWRpYXRlbHkuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGVuc3VyZUNvbmZpZyhvcHRpb25zKSkpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxuICAgIF9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyh7XG4gICAgICAgICAgICBjYWxsYmFja3M6IG9wdGlvbnMuY2FsbGJhY2tzLFxuICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG9wdGlvbnMubWV0YWRhdGEsXG4gICAgICAgICAgICBydW5OYW1lOiBvcHRpb25zLnJ1bk5hbWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IG9wdGlvbnMuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IG9wdGlvbnMucmVjdXJzaW9uTGltaXQsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeTogb3B0aW9ucy5tYXhDb25jdXJyZW5jeSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNhbGxPcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy50YWdzO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMubWV0YWRhdGE7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5ydW5OYW1lO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuY29uZmlndXJhYmxlO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucmVjdXJzaW9uTGltaXQ7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICBhc3luYyBfY2FsbFdpdGhDb25maWcoZnVuYywgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgaGFuZGxlcyBiYXRjaGluZyBhbmQgY29uZmlndXJhdGlvbiBmb3IgYSBydW5uYWJsZVxuICAgICAqIEl0IHRha2VzIGEgZnVuY3Rpb24sIGlucHV0IHZhbHVlcywgYW5kIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24sIGFuZFxuICAgICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGlucHV0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdmFsdWVzIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgX2JhdGNoV2l0aENvbmZpZyhmdW5jLCBpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9uc0xpc3QubWFwKGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZykpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKChjYWxsYmFja01hbmFnZXIsIGkpID0+IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgdW5kZWZpbmVkLCBvcHRpb25zTGlzdFtpXS5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9uc0xpc3RbaV0ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSkpKTtcbiAgICAgICAgbGV0IG91dHB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXRzID0gYXdhaXQgZnVuYy5jYWxsKHRoaXMsIGlucHV0cywgb3B0aW9uc0xpc3QsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSkpKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHMsIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCB0byB0cmFuc2Zvcm0gYW4gSXRlcmF0b3Igb2YgSW5wdXQgdmFsdWVzIGludG8gYW4gSXRlcmF0b3Igb2ZcbiAgICAgKiBPdXRwdXQgdmFsdWVzLCB3aXRoIGNhbGxiYWNrcy5cbiAgICAgKiBVc2UgdGhpcyB0byBpbXBsZW1lbnQgYHN0cmVhbSgpYCBvciBgdHJhbnNmb3JtKClgIGluIFJ1bm5hYmxlIHN1YmNsYXNzZXMuXG4gICAgICovXG4gICAgYXN5bmMgKl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGlucHV0R2VuZXJhdG9yLCB0cmFuc2Zvcm1lciwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZmluYWxJbnB1dDtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogd3JhcElucHV0Rm9yVHJhY2luZygpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxJbnB1dFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxJbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNvbmNhdChmaW5hbElucHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJ1bk1hbmFnZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwaXBlID0gYXdhaXQgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCh0cmFuc2Zvcm1lci5iaW5kKHRoaXMpLCB3cmFwSW5wdXRGb3JUcmFjaW5nKCksIGFzeW5jICgpID0+IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgeyBpbnB1dDogXCJcIiB9LCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSksIGNvbmZpZyk7XG4gICAgICAgICAgICBydW5NYW5hZ2VyID0gcGlwZS5zZXR1cDtcbiAgICAgICAgICAgIGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvZ0hhbmRsZXIgPSBydW5NYW5hZ2VyPy5oYW5kbGVycy5maW5kKGlzTG9nU3RyZWFtSGFuZGxlcik7XG4gICAgICAgICAgICBsZXQgaXRlcmF0b3IgPSBwaXBlLm91dHB1dDtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBhd2FpdCBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIHBpcGUub3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlIHRoYXQgcnVucyBlYWNoIGluZGl2aWR1YWwgcnVubmFibGUgaW4gc2VyaWVzLFxuICAgICAqIHBpcGluZyB0aGUgb3V0cHV0IG9mIG9uZSBydW5uYWJsZSBpbnRvIGFub3RoZXIgcnVubmFibGUgb3IgcnVubmFibGUtbGlrZS5cbiAgICAgKiBAcGFyYW0gY29lcmNlYWJsZSBBIHJ1bm5hYmxlLCBmdW5jdGlvbiwgb3Igb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZnVuY3Rpb25zIG9yIHJ1bm5hYmxlcy5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBydW5uYWJsZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgZmlyc3Q6IHRoaXMsXG4gICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBpY2sga2V5cyBmcm9tIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIHBpY2soa2V5cykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUobmV3IFJ1bm5hYmxlUGljayhrZXlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgbmV3IGZpZWxkcyB0byB0aGUgZGljdCBvdXRwdXQgb2YgdGhpcyBydW5uYWJsZS4gUmV0dXJucyBhIG5ldyBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3NpZ24obWFwcGluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5waXBlKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZUFzc2lnbihcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBuZXcgUnVubmFibGVNYXAoeyBzdGVwczogbWFwcGluZyB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRyYW5zZm9ybSwgd2hpY2ggYnVmZmVycyBpbnB1dCBhbmQgdGhlbiBjYWxscyBzdHJlYW0uXG4gICAgICogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgdGhleSBjYW4gc3RhcnQgcHJvZHVjaW5nIG91dHB1dCB3aGlsZVxuICAgICAqIGlucHV0IGlzIHN0aWxsIGJlaW5nIGdlbmVyYXRlZC5cbiAgICAgKiBAcGFyYW0gZ2VuZXJhdG9yXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGdhdGhlcmluZyBmYWlscy5cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHlpZWxkKiB0aGlzLl9zdHJlYW1JdGVyYXRvcihmaW5hbENodW5rLCBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gYWxsIG91dHB1dCBmcm9tIGEgcnVubmFibGUsIGFzIHJlcG9ydGVkIHRvIHRoZSBjYWxsYmFjayBzeXN0ZW0uXG4gICAgICogVGhpcyBpbmNsdWRlcyBhbGwgaW5uZXIgcnVucyBvZiBMTE1zLCBSZXRyaWV2ZXJzLCBUb29scywgZXRjLlxuICAgICAqIE91dHB1dCBpcyBzdHJlYW1lZCBhcyBMb2cgb2JqZWN0cywgd2hpY2ggaW5jbHVkZSBhIGxpc3Qgb2ZcbiAgICAgKiBqc29ucGF0Y2ggb3BzIHRoYXQgZGVzY3JpYmUgaG93IHRoZSBzdGF0ZSBvZiB0aGUgcnVuIGhhcyBjaGFuZ2VkIGluIGVhY2hcbiAgICAgKiBzdGVwLCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBydW4uXG4gICAgICogVGhlIGpzb25wYXRjaCBvcHMgY2FuIGJlIGFwcGxpZWQgaW4gb3JkZXIgdG8gY29uc3RydWN0IHN0YXRlLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHBhcmFtIHN0cmVhbU9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqc3RyZWFtTG9nKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciA9IG5ldyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIoe1xuICAgICAgICAgICAgLi4uc3RyZWFtT3B0aW9ucyxcbiAgICAgICAgICAgIGF1dG9DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICBfc2NoZW1hRm9ybWF0OiBcIm9yaWdpbmFsXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIHlpZWxkKiB0aGlzLl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHsgY2FsbGJhY2tzIH0gPSBjb25maWc7XG4gICAgICAgIGlmIChjYWxsYmFja3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KFtsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXJdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcGllZENhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICBjb3BpZWRDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycy5wdXNoKGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcik7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjb3BpZWRDYWxsYmFja3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Qcm9taXNlID0gdGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW0gPSBhd2FpdCBydW5uYWJsZVN0cmVhbVByb21pc2U7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBydW5uYWJsZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9zdHJlYW1lZF9vdXRwdXQvLVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbG9nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgYXdhaXQgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHN0cmVhbSBvZiBldmVudHMgZW1pdHRlZCBieSB0aGUgaW50ZXJuYWwgc3RlcHMgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqXG4gICAgICogVXNlIHRvIGNyZWF0ZSBhbiBpdGVyYXRvciBvdmVyIFN0cmVhbUV2ZW50cyB0aGF0IHByb3ZpZGUgcmVhbC10aW1lIGluZm9ybWF0aW9uXG4gICAgICogYWJvdXQgdGhlIHByb2dyZXNzIG9mIHRoZSBydW5uYWJsZSwgaW5jbHVkaW5nIFN0cmVhbUV2ZW50cyBmcm9tIGludGVybWVkaWF0ZVxuICAgICAqIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBBIFN0cmVhbUV2ZW50IGlzIGEgZGljdGlvbmFyeSB3aXRoIHRoZSBmb2xsb3dpbmcgc2NoZW1hOlxuICAgICAqXG4gICAgICogLSBgZXZlbnRgOiBzdHJpbmcgLSBFdmVudCBuYW1lcyBhcmUgb2YgdGhlIGZvcm1hdDogb25fW3J1bm5hYmxlX3R5cGVdXyhzdGFydHxzdHJlYW18ZW5kKS5cbiAgICAgKiAtIGBuYW1lYDogc3RyaW5nIC0gVGhlIG5hbWUgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBydW5faWRgOiBzdHJpbmcgLSBSYW5kb21seSBnZW5lcmF0ZWQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBleGVjdXRpb24gb2ZcbiAgICAgKiAgIHRoZSBydW5uYWJsZSB0aGF0IGVtaXR0ZWQgdGhlIGV2ZW50LiBBIGNoaWxkIHJ1bm5hYmxlIHRoYXQgZ2V0cyBpbnZva2VkIGFzIHBhcnQgb2YgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gICAgICogICBwYXJlbnQgcnVubmFibGUgaXMgYXNzaWduZWQgaXRzIG93biB1bmlxdWUgSUQuXG4gICAgICogLSBgdGFnc2A6IHN0cmluZ1tdIC0gVGhlIHRhZ3Mgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBtZXRhZGF0YWA6IFJlY29yZDxzdHJpbmcsIGFueT4gLSBUaGUgbWV0YWRhdGEgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBkYXRhYDogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAqXG4gICAgICogQmVsb3cgaXMgYSB0YWJsZSB0aGF0IGlsbHVzdHJhdGVzIHNvbWUgZXZlbnRzIHRoYXQgbWlnaHQgYmUgZW1pdHRlZCBieSB2YXJpb3VzXG4gICAgICogY2hhaW5zLiBNZXRhZGF0YSBmaWVsZHMgaGF2ZSBiZWVuIG9taXR0ZWQgZnJvbSB0aGUgdGFibGUgZm9yIGJyZXZpdHkuXG4gICAgICogQ2hhaW4gZGVmaW5pdGlvbnMgaGF2ZSBiZWVuIGluY2x1ZGVkIGFmdGVyIHRoZSB0YWJsZS5cbiAgICAgKlxuICAgICAqIHwgZXZlbnQgICAgICAgICAgICAgICAgfCBuYW1lICAgICAgICAgICAgIHwgY2h1bmsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlucHV0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG91dHB1dCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICogfCBvbl9sbG1fc3RhcnQgICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeydpbnB1dCc6ICdoZWxsbyd9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fbGxtX3N0cmVhbSAgICAgICAgfCBbbW9kZWwgbmFtZV0gICAgIHwgJ0hlbGxvJyBPUiBBSU1lc3NhZ2VDaHVuayhcImhlbGxvXCIpIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fbGxtX2VuZCAgICAgICAgICAgfCBbbW9kZWwgbmFtZV0gICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICdIZWxsbyBodW1hbiEnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9zdGFydCAgICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fY2hhaW5fc3RyZWFtICAgICAgfCBmb3JtYXRfZG9jcyAgICAgIHwgXCJoZWxsbyB3b3JsZCEsIGdvb2RieWUgd29ybGQhXCIgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fY2hhaW5fZW5kICAgICAgICAgfCBmb3JtYXRfZG9jcyAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFtEb2N1bWVudCguLi4pXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFwiaGVsbG8gd29ybGQhLCBnb29kYnllIHdvcmxkIVwiICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fdG9vbF9zdGFydCAgICAgICAgfCBzb21lX3Rvb2wgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInhcIjogMSwgXCJ5XCI6IFwiMlwifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Rvb2xfc3RyZWFtICAgICAgIHwgc29tZV90b29sICAgICAgICB8ICAge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl90b29sX2VuZCAgICAgICAgICB8IHNvbWVfdG9vbCAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcmV0cmlldmVyX3N0YXJ0ICAgfCBbcmV0cmlldmVyIG5hbWVdIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXJ5XCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfY2h1bmsgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAge2RvY3VtZW50czogWy4uLl19ICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcmV0cmlldmVyX2VuZCAgICAgfCBbcmV0cmlldmVyIG5hbWVdIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXJ5XCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7ZG9jdW1lbnRzOiBbLi4uXX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9wcm9tcHRfc3RhcnQgICAgICB8IFt0ZW1wbGF0ZV9uYW1lXSAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlc3Rpb25cIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Byb21wdF9lbmQgICAgICAgIHwgW3RlbXBsYXRlX25hbWVdICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJxdWVzdGlvblwiOiBcImhlbGxvXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgIHwgQ2hhdFByb21wdFZhbHVlKG1lc3NhZ2VzOiBbU3lzdGVtTWVzc2FnZSwgLi4uXSkgfFxuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMudmVyc2lvbiAhPT0gXCJ2MVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9ubHkgdmVyc2lvbiBcInYxXCIgb2YgdGhlIGV2ZW50cyBzY2hlbWEgaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcnVuTG9nO1xuICAgICAgICBsZXQgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcbiAgICAgICAgY29uc3Qgcm9vdE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBjb25zdCByb290TmFtZSA9IGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbG9nIG9mIGxvZ1N0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFydW5Mb2cpIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBSdW5Mb2cuZnJvbVJ1bkxvZ1BhdGNoKGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVuTG9nLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIGVycm9yOiBcInN0cmVhbUV2ZW50c1wiIHN0YXRlIGlzIG1pc3NpbmcuIFBsZWFzZSBvcGVuIGEgYnVnIHJlcG9ydC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFlpZWxkIHRoZSBzdGFydCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUgaWYgaXQgaGFzbid0IGJlZW4gc2Vlbi5cbiAgICAgICAgICAgIC8vIFRoZSByb290IHJ1biBpcyBuZXZlciBmaWx0ZXJlZCBvdXRcbiAgICAgICAgICAgIGlmICghaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdGFydGAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0aHMgPSBsb2cub3BzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSlcbiAgICAgICAgICAgICAgICAubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuICAgICAgICAgICAgY29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUeXBlO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuZW5kX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RyZWFtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBpbnB1dHMgd2l0aCB0aGUgc3RhcnQgZXZlbnQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IHRoZXkgd2lsbCBOT1QgYmUgYXZhaWxhYmxlIGZvciBjb21wb25lbnRzIHRoYXQgb3BlcmF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBzdHJlYW1zLCBzaW5jZSB0aG9zZSBjb21wb25lbnRzIHN0cmVhbSB0aGUgaW5wdXQgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtub3cgaXRzIGZpbmFsIHZhbHVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5vdXRwdXQgPSBsb2dFbnRyeS5maW5hbF9vdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke2xvZ0VudHJ5Lm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geyBjaHVuazogbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHRoaXMgYXZvaWRzIGR1cGxpY2F0ZXMgYXMgd2VsbCFcbiAgICAgICAgICAgICAgICAgICAgbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ0VudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogbG9nRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBsb2dFbnRyeS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgd2UgdGFrZSBjYXJlIG9mIHRoZSBzdHJlYW1pbmcgb3V0cHV0IGZyb20gdGhlIHJvb3QgY2hhaW5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueS5cbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IHJ1bkxvZztcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke3N0YXRlLm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlLnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0cmVhbWAsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBydW5Mb2c/LnN0YXRlO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgeWllbGQgdGhlIGVuZCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fZW5kYCxcbiAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHN0YXRlLmZpbmFsX291dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSlcbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGluZyA/IHRoaW5nLmxjX3J1bm5hYmxlIDogZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBjb25maWc6IHt9LFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGUgd2l0aCBhIHNldCBvZiBrd2FyZ3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUJpbmRpbmcgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQmluZGluZ1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ0ZhY3Rvcmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJvdW5kID0gZmllbGRzLmJvdW5kO1xuICAgICAgICB0aGlzLmt3YXJncyA9IGZpZWxkcy5rd2FyZ3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0gZmllbGRzLmNvbmZpZztcbiAgICAgICAgdGhpcy5jb25maWdGYWN0b3JpZXMgPSBmaWVsZHMuY29uZmlnRmFjdG9yaWVzO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5nZXROYW1lKHN1ZmZpeCk7XG4gICAgfVxuICAgIGFzeW5jIF9tZXJnZUNvbmZpZyguLi5vcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlncyh0aGlzLmNvbmZpZywgLi4ub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBtZXJnZUNvbmZpZ3MoY29uZmlnLCAuLi4odGhpcy5jb25maWdGYWN0b3JpZXNcbiAgICAgICAgICAgID8gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jb25maWdGYWN0b3JpZXMubWFwKGFzeW5jIChjb25maWdGYWN0b3J5KSA9PiBhd2FpdCBjb25maWdGYWN0b3J5KGNvbmZpZykpKVxuICAgICAgICAgICAgOiBbXSkpO1xuICAgIH1cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHsgLi4udGhpcy5rd2FyZ3MsIC4uLmt3YXJncyB9LFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aFJldHJ5KGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQud2l0aFJldHJ5KGZpZWxkcyksXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5pbnZva2UoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKG9wdGlvbnMsIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpXG4gICAgICAgICAgICA/IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChpbmRpdmlkdWFsT3B0aW9uKSA9PiB0aGlzLl9tZXJnZUNvbmZpZyhpbmRpdmlkdWFsT3B0aW9uLCB0aGlzLmt3YXJncykpKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhvcHRpb25zLCB0aGlzLmt3YXJncyk7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgbWVyZ2VkT3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKG9wdGlvbnMsIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5zdHJlYW0oaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKG9wdGlvbnMsIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jICp0cmFuc2Zvcm0oXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQudHJhbnNmb3JtKGdlbmVyYXRvciwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcob3B0aW9ucywgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgKnN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC5zdHJlYW1FdmVudHMoaW5wdXQsIHtcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhvcHRpb25zLCB0aGlzLmt3YXJncykpLFxuICAgICAgICAgICAgdmVyc2lvbjogb3B0aW9ucy52ZXJzaW9uLFxuICAgICAgICB9LCBzdHJlYW1PcHRpb25zKTtcbiAgICB9XG4gICAgc3RhdGljIGlzUnVubmFibGVCaW5kaW5nKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdGhpbmdcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpbmcuYm91bmQgJiYgUnVubmFibGUuaXNSdW5uYWJsZSh0aGluZy5ib3VuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZVxuICogd2l0aCBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVFYWNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUVhY2hcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZHMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIGt3YXJncyBUaGUgYXJndW1lbnRzIHRvIGJpbmQgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBSdW5uYWJsZUVhY2hgIGNsYXNzIHRoYXQgaXMgYm91bmQgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC5iaW5kKGt3YXJncyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0cywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0cywgY29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCBhbmQgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWd1cmF0aW9uIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaW52b2tlKGlucHV0cywgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLndpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBydW5uYWJsZXMgdGhhdCBjYW4gYmUgcmV0cmllZCBhXG4gKiBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVSZXRyeSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUmV0cnlcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEF0dGVtcHROdW1iZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogKCkgPT4geyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heEF0dGVtcHROdW1iZXIgPSBmaWVsZHMubWF4QXR0ZW1wdE51bWJlciA/PyB0aGlzLm1heEF0dGVtcHROdW1iZXI7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID0gZmllbGRzLm9uRmFpbGVkQXR0ZW1wdCA/PyB0aGlzLm9uRmFpbGVkQXR0ZW1wdDtcbiAgICB9XG4gICAgX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9IGF0dGVtcHQgPiAxID8gYHJldHJ5OmF0dGVtcHQ6JHthdHRlbXB0fWAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0YWcpIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHBSZXRyeSgoYXR0ZW1wdE51bWJlcikgPT4gc3VwZXIuaW52b2tlKGlucHV0LCB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZywgcnVuTWFuYWdlcikpLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdGhhdCBpbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQsIHJ1biBtYW5hZ2VyLFxuICAgICAqIGFuZCBjb25maWcuIEl0IGhhbmRsZXMgdGhlIHJldHJ5IGxvZ2ljIGJ5IGNhdGNoaW5nIGFueSBlcnJvcnMgYW5kXG4gICAgICogcmVjdXJzaXZlbHkgaW52b2tpbmcgaXRzZWxmIHdpdGggdGhlIHVwZGF0ZWQgY29uZmlnIGZvciB0aGUgbmV4dCByZXRyeVxuICAgICAqIGF0dGVtcHQuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBydW5NYW5hZ2VyIFRoZSBydW4gbWFuYWdlciBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZyBmb3IgdGhlIHJ1bm5hYmxlLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0LCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyBfYmF0Y2goaW5wdXRzLCBjb25maWdzLCBydW5NYW5hZ2VycywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHNNYXAgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHBSZXRyeShhc3luYyAoYXR0ZW1wdE51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0luZGV4ZXMgPSBpbnB1dHNcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoXywgaSkgPT4gaSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoaSkgPT4gcmVzdWx0c01hcFtpLnRvU3RyaW5nKCldID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gaW5zdGFuY2VvZiBFcnJvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nSW5wdXRzID0gcmVtYWluaW5nSW5kZXhlcy5tYXAoKGkpID0+IGlucHV0c1tpXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2hlZENvbmZpZ3MgPSByZW1haW5pbmdJbmRleGVzLm1hcCgoaSkgPT4gdGhpcy5fcGF0Y2hDb25maWdGb3JSZXRyeShhdHRlbXB0TnVtYmVyLCBjb25maWdzPy5baV0sIHJ1bk1hbmFnZXJzPy5baV0pKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc3VwZXIuYmF0Y2gocmVtYWluaW5nSW5wdXRzLCBwYXRjaGVkQ29uZmlncywge1xuICAgICAgICAgICAgICAgICAgICAuLi5iYXRjaE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHJldHVybkV4Y2VwdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0RXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSByZXN1bHRzW2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRNYXBJbmRleCA9IHJlbWFpbmluZ0luZGV4ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RXhjZXB0aW9uID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbcmVzdWx0TWFwSW5kZXgudG9TdHJpbmcoKV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiB0aGlzLm9uRmFpbGVkQXR0ZW1wdCxcbiAgICAgICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJlc3VsdHNNYXApXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gcGFyc2VJbnQoYSwgMTApIC0gcGFyc2VJbnQoYiwgMTApKVxuICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiByZXN1bHRzTWFwW3BhcnNlSW50KGtleSwgMTApXSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYXRjaFdpdGhDb25maWcodGhpcy5fYmF0Y2guYmluZCh0aGlzKSwgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzZXF1ZW5jZSBvZiBydW5uYWJsZXMsIHdoZXJlIHRoZSBvdXRwdXQgb2YgZWFjaCBpcyB0aGUgaW5wdXQgb2YgdGhlIG5leHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0VGVtcGxhdGUgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgIFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiLFxuICogKTtcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtwcm9tcHRUZW1wbGF0ZSwgbmV3IENoYXRPcGVuQUkoe30pXSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyc1wiIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVNlcXVlbmNlIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVNlcXVlbmNlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtaWRkbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXN0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5maXJzdCA9IGZpZWxkcy5maXJzdDtcbiAgICAgICAgdGhpcy5taWRkbGUgPSBmaWVsZHMubWlkZGxlID8/IHRoaXMubWlkZGxlO1xuICAgICAgICB0aGlzLmxhc3QgPSBmaWVsZHMubGFzdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgfVxuICAgIGdldCBzdGVwcygpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGxldCBuZXh0U3RlcElucHV0ID0gaW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxTdGVwcyA9IFt0aGlzLmZpcnN0LCAuLi50aGlzLm1pZGRsZV07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxTdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBpbml0aWFsU3RlcHNbaV07XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dCA9IGF3YWl0IHN0ZXAuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFR5cGVTY3JpcHQgY2FuJ3QgZGV0ZWN0IHRoYXQgdGhlIGxhc3Qgb3V0cHV0IG9mIHRoZSBzZXF1ZW5jZSByZXR1cm5zIFJ1bk91dHB1dCwgc28gY2FsbCBpdCBvdXQgb2YgdGhlIGxvb3AgaGVyZVxuICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBhd2FpdCB0aGlzLmxhc3QuaW52b2tlKG5leHRTdGVwSW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOiR7dGhpcy5zdGVwcy5sZW5ndGh9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QoZmluYWxPdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIGZpbmFsT3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcCgoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnTGlzdFtpXS5ydW5OYW1lKSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dHMgPSBpbnB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gdGhpcy5zdGVwc1tpXTtcbiAgICAgICAgICAgICAgICBuZXh0U3RlcElucHV0cyA9IGF3YWl0IHN0ZXAuYmF0Y2gobmV4dFN0ZXBJbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFJ1bk1hbmFnZXIgPSBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBjaGlsZFJ1bk1hbmFnZXIgfSk7XG4gICAgICAgICAgICAgICAgfSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QobmV4dFN0ZXBJbnB1dHMsIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICByZXR1cm4gbmV4dFN0ZXBJbnB1dHM7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgY29uc3Qgc3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgICAgIGxldCBjb25jYXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBpbnB1dEdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZmluYWxHZW5lcmF0b3IgPSBzdGVwc1swXS50cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IoKSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOjFgKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gc3RlcHNbaV07XG4gICAgICAgICAgICAgICAgZmluYWxHZW5lcmF0b3IgPSBhd2FpdCBzdGVwLnRyYW5zZm9ybShmaW5hbEdlbmVyYXRvciwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZmluYWxHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoY29uY2F0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmNhdFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgfVxuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICBpZiAoUnVubmFibGVTZXF1ZW5jZS5pc1J1bm5hYmxlU2VxdWVuY2UoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICAgICAgZmlyc3Q6IHRoaXMuZmlyc3QsXG4gICAgICAgICAgICAgICAgbWlkZGxlOiB0aGlzLm1pZGRsZS5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3QsXG4gICAgICAgICAgICAgICAgICAgIGNvZXJjZWFibGUuZmlyc3QsXG4gICAgICAgICAgICAgICAgICAgIC4uLmNvZXJjZWFibGUubWlkZGxlLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIGxhc3Q6IGNvZXJjZWFibGUubGFzdCxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgPz8gY29lcmNlYWJsZS5uYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogWy4uLnRoaXMubWlkZGxlLCB0aGlzLmxhc3RdLFxuICAgICAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGlzUnVubmFibGVTZXF1ZW5jZSh0aGluZykge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGluZy5taWRkbGUpICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBmcm9tKFtmaXJzdCwgLi4ucnVubmFibGVzXSwgbmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgZmlyc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGZpcnN0KSxcbiAgICAgICAgICAgIG1pZGRsZTogcnVubmFibGVzLnNsaWNlKDAsIC0xKS5tYXAoX2NvZXJjZVRvUnVubmFibGUpLFxuICAgICAgICAgICAgbGFzdDogX2NvZXJjZVRvUnVubmFibGUocnVubmFibGVzW3J1bm5hYmxlcy5sZW5ndGggLSAxXSksXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgbWFwcGluZyBvZiBydW5uYWJsZXMgaW4gcGFyYWxsZWwsXG4gKiBhbmQgcmV0dXJucyBhIG1hcHBpbmcgb2YgdGhlaXIgb3V0cHV0cy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtYXBDaGFpbiA9IFJ1bm5hYmxlTWFwLmZyb20oe1xuICogICBqb2tlOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogICBwb2VtOiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ3cml0ZSBhIDItbGluZSBwb2VtIGFib3V0IHt0b3BpY31cIikucGlwZShcbiAqICAgICBuZXcgQ2hhdEFudGhyb3BpYyh7fSksXG4gKiAgICksXG4gKiB9KTtcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1hcENoYWluLmludm9rZSh7IHRvcGljOiBcImJlYXJcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVNYXAgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlTWFwXCI7XG4gICAgfVxuICAgIGdldFN0ZXBzS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RlcHMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGVwc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0ZXBzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcy5zdGVwcykpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcHNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbShzdGVwcykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHsgc3RlcHMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwge1xuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgIH0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyh0aGlzLnN0ZXBzKS5tYXAoYXN5bmMgKFtrZXksIHJ1bm5hYmxlXSkgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKG91dHB1dCk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBzaGFsbG93IGNvcHkgc3RlcHMgdG8gaWdub3JlIGNoYW5nZXMgd2hpbGUgaXRlcmF0aW5nXG4gICAgICAgIGNvbnN0IHN0ZXBzID0geyAuLi50aGlzLnN0ZXBzIH07XG4gICAgICAgIC8vIGVhY2ggc3RlcCBnZXRzIGEgY29weSBvZiB0aGUgaW5wdXQgaXRlcmF0b3JcbiAgICAgICAgY29uc3QgaW5wdXRDb3BpZXMgPSBhdGVlKGdlbmVyYXRvciwgT2JqZWN0LmtleXMoc3RlcHMpLmxlbmd0aCk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgZWFjaCBvdXRwdXQgaXRlcmF0b3JcbiAgICAgICAgY29uc3QgdGFza3MgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHN0ZXBzKS5tYXAoKFtrZXksIHJ1bm5hYmxlXSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ2VuID0gcnVubmFibGUudHJhbnNmb3JtKGlucHV0Q29waWVzW2ldLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgbWFwOmtleToke2tleX1gKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBba2V5LCBnZW4ubmV4dCgpLnRoZW4oKHJlc3VsdCkgPT4gKHsga2V5LCBnZW4sIHJlc3VsdCB9KSldO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIHlpZWxkIGNodW5rcyBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsXG4gICAgICAgIC8vIHN0YXJ0aW5nIG5ldyBpdGVyYXRpb25zIGFzIG5lZWRlZCxcbiAgICAgICAgLy8gdW50aWwgYWxsIGl0ZXJhdG9ycyBhcmUgZG9uZVxuICAgICAgICB3aGlsZSAodGFza3Muc2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHJlc3VsdCwgZ2VuIH0gPSBhd2FpdCBQcm9taXNlLnJhY2UodGFza3MudmFsdWVzKCkpO1xuICAgICAgICAgICAgdGFza3MuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgeyBba2V5XTogcmVzdWx0LnZhbHVlIH07XG4gICAgICAgICAgICAgICAgdGFza3Muc2V0KGtleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IHJ1bnMgYSBjYWxsYWJsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTGFtYmRhIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUxhbWJkYVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnVuY1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICB9XG4gICAgc3RhdGljIGZyb20oZnVuYykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHtcbiAgICAgICAgICAgIGZ1bmMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29uZmlnID0gcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2b2lkIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKS5ydW4oY2hpbGRDb25maWcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0cHV0ID0gYXdhaXQgdGhpcy5mdW5jKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGlsZENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBvdXRwdXQuaW52b2tlKGlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IChjaGlsZENvbmZpZy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkucnVuKGNvbmZpZywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuZnVuYyhmaW5hbENodW5rLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvdXRwdXQgJiYgUnVubmFibGUuaXNSdW5uYWJsZShvdXRwdXQpKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY3Vyc2lvbiBsaW1pdCByZWFjaGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG91dHB1dC5zdHJlYW0oZmluYWxDaHVuaywgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY29uZmlnPy5yZWN1cnNpb25MaW1pdCA/PyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCkgLSAxLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHlpZWxkIG91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVBhcmFsbGVsIGV4dGVuZHMgUnVubmFibGVNYXAge1xufVxuLyoqXG4gKiBBIFJ1bm5hYmxlIHRoYXQgY2FuIGZhbGxiYWNrIHRvIG90aGVyIFJ1bm5hYmxlcyBpZiBpdCBmYWlscy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcyBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVXaXRoRmFsbGJhY2tzXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bm5hYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZhbGxiYWNrc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bm5hYmxlID0gZmllbGRzLnJ1bm5hYmxlO1xuICAgICAgICB0aGlzLmZhbGxiYWNrcyA9IGZpZWxkcy5mYWxsYmFja3M7XG4gICAgfVxuICAgICpydW5uYWJsZXMoKSB7XG4gICAgICAgIHlpZWxkIHRoaXMucnVubmFibGU7XG4gICAgICAgIGZvciAoY29uc3QgZmFsbGJhY2sgb2YgdGhpcy5mYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHlpZWxkIGZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShvcHRpb25zPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgb3B0aW9ucz8udGFncywgdW5kZWZpbmVkLCBvcHRpb25zPy5tZXRhZGF0YSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9ucz8ucnVuTmFtZSk7XG4gICAgICAgIGxldCBmaXJzdEVycm9yO1xuICAgICAgICBmb3IgKGNvbnN0IHJ1bm5hYmxlIG9mIHRoaXMucnVubmFibGVzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgcnVubmFibGUuaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpO1xuICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4gY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGZpcnN0RXJyb3I7XG4gICAgICAgIGZvciAoY29uc3QgcnVubmFibGUgb2YgdGhpcy5ydW5uYWJsZXMoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRzID0gYXdhaXQgcnVubmFibGUuYmF0Y2goaW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpLFxuICAgICAgICAgICAgICAgIH0pKSwgYmF0Y2hPcHRpb25zKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGkpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0c1tpXSwgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdEVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZmlyc3RFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFja3MuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKSkpO1xuICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgIH1cbn1cbi8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IHRoZSBjb21waWxlciBuZWVkcyBoZWxwIGVsaW1pbmF0aW5nIEVycm9yIGFzIGEgUnVuT3V0cHV0IHR5cGVcbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSB7XG4gICAgaWYgKHR5cGVvZiBjb2VyY2VhYmxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7IGZ1bmM6IGNvZXJjZWFibGUgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFJ1bm5hYmxlLmlzUnVubmFibGUoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgcmV0dXJuIGNvZXJjZWFibGU7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KGNvZXJjZWFibGUpICYmIHR5cGVvZiBjb2VyY2VhYmxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHJ1bm5hYmxlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb2VyY2VhYmxlKSkge1xuICAgICAgICAgICAgcnVubmFibGVzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7XG4gICAgICAgICAgICBzdGVwczogcnVubmFibGVzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSBSdW5uYWJsZSwgZnVuY3Rpb24gb3Igb2JqZWN0Llxcbkluc3RlYWQgZ290IGFuIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gaW5wdXRzIG9mIHR5cGUgYFJlY29yZDxzdHJpbmcsIHVua25vd24+YC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQXNzaWduIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUFzc2lnblwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBpZiAoZmllbGRzIGluc3RhbmNlb2YgUnVubmFibGVNYXApIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBtYXBwZXI6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWFwcGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFwcGVyID0gZmllbGRzLm1hcHBlcjtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlclJlc3VsdCA9IGF3YWl0IHRoaXMubWFwcGVyLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pbnB1dCxcbiAgICAgICAgICAgIC4uLm1hcHBlclJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIGNvbGxlY3QgbWFwcGVyIGtleXNcbiAgICAgICAgY29uc3QgbWFwcGVyS2V5cyA9IHRoaXMubWFwcGVyLmdldFN0ZXBzS2V5cygpO1xuICAgICAgICAvLyBjcmVhdGUgdHdvIGlucHV0IGdlbnMsIG9uZSBmb3IgdGhlIG1hcHBlciwgb25lIGZvciB0aGUgaW5wdXRcbiAgICAgICAgY29uc3QgW2ZvclBhc3N0aHJvdWdoLCBmb3JNYXBwZXJdID0gYXRlZShnZW5lcmF0b3IpO1xuICAgICAgICAvLyBjcmVhdGUgbWFwcGVyIG91dHB1dCBnZW5cbiAgICAgICAgY29uc3QgbWFwcGVyT3V0cHV0ID0gdGhpcy5tYXBwZXIudHJhbnNmb3JtKGZvck1hcHBlciwgcGF0Y2hDb25maWcob3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgICAgICAvLyBzdGFydCB0aGUgbWFwcGVyXG4gICAgICAgIGNvbnN0IGZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlID0gbWFwcGVyT3V0cHV0Lm5leHQoKTtcbiAgICAgICAgLy8geWllbGQgdGhlIHBhc3N0aHJvdWdoXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZm9yUGFzc3Rocm91Z2gpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09IFwib2JqZWN0XCIgfHwgQXJyYXkuaXNBcnJheShjaHVuaykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJ1bm5hYmxlQXNzaWduIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBvYmplY3RzIGFzIGlucHV0LCBnb3QgJHt0eXBlb2YgY2h1bmt9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhjaHVuaykuZmlsdGVyKChba2V5XSkgPT4gIW1hcHBlcktleXMuaW5jbHVkZXMoa2V5KSkpO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZpbHRlcmVkKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgZmlsdGVyZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8geWllbGQgdGhlIG1hcHBlciBvdXRwdXRcbiAgICAgICAgeWllbGQgKGF3YWl0IGZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlKS52YWx1ZTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBtYXBwZXJPdXRwdXQpIHtcbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgb3B0aW9ucykpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gaW5wdXRzIG9mIHR5cGUgYFJlY29yZDxzdHJpbmcsIHVua25vd24+YC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUGljayBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVQaWNrXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIiB8fCBBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBrZXlzOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlzID0gZmllbGRzLmtleXM7XG4gICAgfVxuICAgIGFzeW5jIF9waWNrKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRbdGhpcy5rZXlzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IHRoaXMua2V5c1xuICAgICAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gW2tleSwgaW5wdXRba2V5XV0pXG4gICAgICAgICAgICAgICAgLmZpbHRlcigodikgPT4gdlsxXSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHJldHVybiBwaWNrZWQubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogT2JqZWN0LmZyb21FbnRyaWVzKHBpY2tlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9waWNrLmJpbmQodGhpcyksIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yKSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBjb25zdCBwaWNrZWQgPSBhd2FpdCB0aGlzLl9waWNrKGNodW5rKTtcbiAgICAgICAgICAgIGlmIChwaWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHBpY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwUmV0cnkiLCJDYWxsYmFja01hbmFnZXIiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJSdW5Mb2ciLCJSdW5Mb2dQYXRjaCIsIlNlcmlhbGl6YWJsZSIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJjb25jYXQiLCJhdGVlIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJlbnN1cmVDb25maWciLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwYXRjaENvbmZpZyIsIkFzeW5jQ2FsbGVyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsIl9Sb290RXZlbnRGaWx0ZXIiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiX2NvZXJjZVRvRGljdCIsInZhbHVlIiwiZGVmYXVsdEtleSIsIkFycmF5IiwiaXNBcnJheSIsIkRhdGUiLCJSdW5uYWJsZSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJnZXROYW1lIiwic3VmZml4IiwibmFtZSIsImxjX25hbWUiLCJiaW5kIiwia3dhcmdzIiwiUnVubmFibGVCaW5kaW5nIiwiYm91bmQiLCJjb25maWciLCJtYXAiLCJSdW5uYWJsZUVhY2giLCJ3aXRoUmV0cnkiLCJmaWVsZHMiLCJSdW5uYWJsZVJldHJ5IiwibWF4QXR0ZW1wdE51bWJlciIsInN0b3BBZnRlckF0dGVtcHQiLCJ3aXRoQ29uZmlnIiwid2l0aEZhbGxiYWNrcyIsIlJ1bm5hYmxlV2l0aEZhbGxiYWNrcyIsInJ1bm5hYmxlIiwiZmFsbGJhY2tzIiwiX2dldE9wdGlvbnNMaXN0Iiwib3B0aW9ucyIsImxlbmd0aCIsIkVycm9yIiwiZnJvbSIsImJhdGNoIiwiaW5wdXRzIiwiYmF0Y2hPcHRpb25zIiwiY29uZmlnTGlzdCIsIm1heENvbmN1cnJlbmN5IiwiY2FsbGVyIiwib25GYWlsZWRBdHRlbXB0IiwiZSIsImJhdGNoQ2FsbHMiLCJpbnB1dCIsImkiLCJjYWxsIiwicmVzdWx0IiwiaW52b2tlIiwicmV0dXJuRXhjZXB0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJfc3RyZWFtSXRlcmF0b3IiLCJzdHJlYW0iLCJ3cmFwcGVkR2VuZXJhdG9yIiwic2V0dXAiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwiY2FsbGJhY2tzIiwidGFncyIsIm1ldGFkYXRhIiwicnVuTmFtZSIsInJlY3Vyc2lvbkxpbWl0IiwiY2FsbE9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJmdW5jIiwiY2FsbGJhY2tNYW5hZ2VyXyIsInJ1bk1hbmFnZXIiLCJoYW5kbGVDaGFpblN0YXJ0IiwidG9KU09OIiwidW5kZWZpbmVkIiwicnVuVHlwZSIsIm91dHB1dCIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsIm91dHB1dHMiLCJfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyIsImlucHV0R2VuZXJhdG9yIiwidHJhbnNmb3JtZXIiLCJmaW5hbElucHV0IiwiZmluYWxJbnB1dFN1cHBvcnRlZCIsImZpbmFsT3V0cHV0IiwiZmluYWxPdXRwdXRTdXBwb3J0ZWQiLCJ3cmFwSW5wdXRGb3JUcmFjaW5nIiwiY2h1bmsiLCJwaXBlIiwiaXNMb2dTdHJlYW1IYW5kbGVyIiwiaGFuZGxlciIsInN0cmVhbUxvZ0hhbmRsZXIiLCJoYW5kbGVycyIsImZpbmQiLCJpdGVyYXRvciIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJjb2VyY2VhYmxlIiwiUnVubmFibGVTZXF1ZW5jZSIsImZpcnN0IiwibGFzdCIsIl9jb2VyY2VUb1J1bm5hYmxlIiwicGljayIsImtleXMiLCJSdW5uYWJsZVBpY2siLCJhc3NpZ24iLCJtYXBwaW5nIiwiUnVubmFibGVBc3NpZ24iLCJSdW5uYWJsZU1hcCIsInN0ZXBzIiwidHJhbnNmb3JtIiwiZ2VuZXJhdG9yIiwiZmluYWxDaHVuayIsInN0cmVhbUxvZyIsInN0cmVhbU9wdGlvbnMiLCJsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJhdXRvQ2xvc2UiLCJfc2NoZW1hRm9ybWF0IiwiX3N0cmVhbUxvZyIsImNvcGllZENhbGxiYWNrcyIsImNvcHkiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwicHVzaCIsInJ1bm5hYmxlU3RyZWFtUHJvbWlzZSIsImNvbnN1bWVSdW5uYWJsZVN0cmVhbSIsInJ1bm5hYmxlU3RyZWFtIiwicGF0Y2giLCJvcHMiLCJvcCIsInBhdGgiLCJ3cml0ZXIiLCJ3cml0ZSIsImNsb3NlIiwicnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSIsImxvZyIsInN0cmVhbUV2ZW50cyIsInZlcnNpb24iLCJydW5Mb2ciLCJoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQiLCJyb290VGFncyIsInJvb3RNZXRhZGF0YSIsInJvb3ROYW1lIiwicm9vdEV2ZW50RmlsdGVyIiwibG9nU3RyZWFtIiwiZnJvbVJ1bkxvZ1BhdGNoIiwic3RhdGUiLCJldmVudCIsInJ1bl9pZCIsImlkIiwidHlwZSIsImRhdGEiLCJpbmNsdWRlRXZlbnQiLCJwYXRocyIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJzcGxpdCIsImRlZHVwZWRQYXRocyIsIlNldCIsImV2ZW50VHlwZSIsImxvZ0VudHJ5IiwibG9ncyIsImVuZF90aW1lIiwic3RyZWFtZWRfb3V0cHV0IiwiZmluYWxfb3V0cHV0IiwiY2h1bmtDb3VudCIsImlzUnVubmFibGUiLCJ0aGluZyIsImxjX3J1bm5hYmxlIiwid2l0aExpc3RlbmVycyIsIm9uU3RhcnQiLCJvbkVuZCIsIm9uRXJyb3IiLCJjb25maWdGYWN0b3JpZXMiLCJfbWVyZ2VDb25maWciLCJjb25maWdGYWN0b3J5IiwibWVyZ2VkT3B0aW9ucyIsImluZGl2aWR1YWxPcHRpb24iLCJpc1J1bm5hYmxlQmluZGluZyIsIl9pbnZva2UiLCJnZXRDaGlsZCIsIl9wYXRjaENvbmZpZ0ZvclJldHJ5IiwiYXR0ZW1wdCIsInRhZyIsImF0dGVtcHROdW1iZXIiLCJyZXRyaWVzIiwiTWF0aCIsIm1heCIsInJhbmRvbWl6ZSIsIl9iYXRjaCIsImNvbmZpZ3MiLCJyZXN1bHRzTWFwIiwicmVtYWluaW5nSW5kZXhlcyIsIl8iLCJ0b1N0cmluZyIsInJlbWFpbmluZ0lucHV0cyIsInBhdGNoZWRDb25maWdzIiwicmVzdWx0cyIsImZpcnN0RXhjZXB0aW9uIiwicmVzdWx0TWFwSW5kZXgiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsImtleSIsIm1pZGRsZSIsIm5leHRTdGVwSW5wdXQiLCJpbml0aWFsU3RlcHMiLCJzdGVwIiwibmV4dFN0ZXBJbnB1dHMiLCJqIiwiY2hpbGRSdW5NYW5hZ2VyIiwiY29uY2F0U3VwcG9ydGVkIiwiZmluYWxHZW5lcmF0b3IiLCJpc1J1bm5hYmxlU2VxdWVuY2UiLCJydW5uYWJsZXMiLCJzbGljZSIsImdldFN0ZXBzS2V5cyIsImVudHJpZXMiLCJfdHJhbnNmb3JtIiwiaW5wdXRDb3BpZXMiLCJ0YXNrcyIsIk1hcCIsImdlbiIsIm5leHQiLCJ0aGVuIiwic2l6ZSIsInJhY2UiLCJ2YWx1ZXMiLCJkZWxldGUiLCJkb25lIiwic2V0IiwiUnVubmFibGVMYW1iZGEiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2hpbGRDb25maWciLCJnZXRJbnN0YW5jZSIsInJ1biIsInJlcyIsIlJ1bm5hYmxlUGFyYWxsZWwiLCJmYWxsYmFjayIsImNvbmZpZ3VyZSIsImZpcnN0RXJyb3IiLCJtYXBwZXIiLCJtYXBwZXJSZXN1bHQiLCJtYXBwZXJLZXlzIiwiZm9yUGFzc3Rocm91Z2giLCJmb3JNYXBwZXIiLCJtYXBwZXJPdXRwdXQiLCJmaXJzdE1hcHBlckNodW5rUHJvbWlzZSIsImZpbHRlcmVkIiwiZnJvbUVudHJpZXMiLCJpbmNsdWRlcyIsIl9waWNrIiwicGlja2VkIiwidiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const copy = ensureConfig();\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                copy[key] = [\n                    ...new Set(copy[key].concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n */ function ensureConfig(config) {\n    const loadedConfig = config ?? _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    let empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: 25\n    };\n    if (loadedConfig) {\n        empty = {\n            ...empty,\n            ...loadedConfig\n        };\n    }\n    if (loadedConfig?.configurable) {\n        for (const key of Object.keys(loadedConfig.configurable)){\n            if (PRIMITIVES.has(typeof loadedConfig.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = loadedConfig.configurable[key];\n            }\n        }\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBFO0FBQ0U7QUFDckUsTUFBTUcsMEJBQTBCLEdBQUc7QUFDbkMsZUFBZUMsNEJBQTRCQyxNQUFNO0lBQ3BELE9BQU9MLGtFQUFlQSxDQUFDTSxTQUFTLENBQUNELFFBQVFFLFdBQVdDLFdBQVdILFFBQVFJLE1BQU1ELFdBQVdILFFBQVFLO0FBQ3BHO0FBQ08sU0FBU0MsYUFBYSxHQUFHQyxPQUFPO0lBQ25DLDhEQUE4RDtJQUM5RCxNQUFNQyxPQUFPQztJQUNiLEtBQUssTUFBTUMsV0FBV0gsUUFBUUksTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQSxHQUFJO1FBQzlDLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxTQUFVO1lBQ3BDLElBQUlHLFFBQVEsWUFBWTtnQkFDcEJMLElBQUksQ0FBQ0ssSUFBSSxHQUFHO29CQUFFLEdBQUdMLElBQUksQ0FBQ0ssSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFFBQVE7Z0JBQ3JCTCxJQUFJLENBQUNLLElBQUksR0FBRzt1QkFBSSxJQUFJRyxJQUFJUixJQUFJLENBQUNLLElBQUksQ0FBQ0ksTUFBTSxDQUFDUCxPQUFPLENBQUNHLElBQUksSUFBSSxFQUFFO2lCQUFHO1lBQ2xFLE9BQ0ssSUFBSUEsUUFBUSxnQkFBZ0I7Z0JBQzdCTCxJQUFJLENBQUNLLElBQUksR0FBRztvQkFBRSxHQUFHTCxJQUFJLENBQUNLLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxhQUFhO2dCQUMxQixNQUFNSyxnQkFBZ0JWLEtBQUtOLFNBQVM7Z0JBQ3BDLE1BQU1pQixvQkFBb0JULFFBQVFSLFNBQVM7Z0JBQzNDLCtEQUErRDtnQkFD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bUIsYUFBYUssWUFBWSxDQUFDeEIsSUFBSTtZQUN4RDtRQUNKO0lBQ0o7SUFDQSxPQUFPc0I7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU0ksWUFBWXZDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRUUsU0FBUyxFQUFFc0MsY0FBYyxFQUFFSixjQUFjLEVBQUVLLE9BQU8sRUFBRUosWUFBWSxFQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQy9HLE1BQU1LLFlBQVlqQyxhQUFhVDtJQUMvQixJQUFJRSxjQUFjQyxXQUFXO1FBQ3pCOzs7U0FHQyxHQUNELE9BQU91QyxVQUFVRCxPQUFPO1FBQ3hCQyxVQUFVeEMsU0FBUyxHQUFHQTtJQUMxQjtJQUNBLElBQUlrQyxtQkFBbUJqQyxXQUFXO1FBQzlCdUMsVUFBVU4sY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlJLG1CQUFtQnJDLFdBQVc7UUFDOUJ1QyxVQUFVRixjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSUMsWUFBWXRDLFdBQVc7UUFDdkJ1QyxVQUFVRCxPQUFPLEdBQUdBO0lBQ3hCO0lBQ0EsSUFBSUosaUJBQWlCbEMsV0FBVztRQUM1QnVDLFVBQVVMLFlBQVksR0FBRztZQUFFLEdBQUdLLFVBQVVMLFlBQVk7WUFBRSxHQUFHQSxZQUFZO1FBQUM7SUFDMUU7SUFDQSxPQUFPSztBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcz8yN2VhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgZW5zdXJlSGFuZGxlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlUID0gMjU7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNvbmZpZz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIGNvbmZpZz8udGFncywgdW5kZWZpbmVkLCBjb25maWc/Lm1ldGFkYXRhKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbmZpZ3MoLi4uY29uZmlncykge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgY29weSA9IGVuc3VyZUNvbmZpZygpO1xuICAgIGZvciAoY29uc3Qgb3B0aW9ucyBvZiBjb25maWdzLmZpbHRlcigoYykgPT4gISFjKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJtZXRhZGF0YVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInRhZ3NcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IFsuLi5uZXcgU2V0KGNvcHlba2V5XS5jb25jYXQob3B0aW9uc1trZXldID8/IFtdKSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNvbmZpZ3VyYWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNhbGxiYWNrc1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUNhbGxiYWNrcyA9IGNvcHkuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVkQ2FsbGJhY2tzID0gb3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgLy8gY2FsbGJhY2tzIGNhbiBiZSBlaXRoZXIgdW5kZWZpbmVkLCBBcnJheTxoYW5kbGVyPiBvciBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgLy8gc28gbWVyZ2luZyB0d28gY2FsbGJhY2tzIHZhbHVlcyBoYXMgNiBjYXNlc1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3ZpZGVkQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBiYXNlQ2FsbGJhY2tzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IGJhc2VDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBwcm92aWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvdmlkZWRDYWxsYmFja3MgaXMgYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gcHJvdmlkZWRDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VDYWxsYmFja3MgaXMgYWxzbyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbmV3IENhbGxiYWNrTWFuYWdlcihwcm92aWRlZENhbGxiYWNrcy5fcGFyZW50UnVuSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogYmFzZUNhbGxiYWNrcy5oYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhYmxlSGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogQXJyYXkuZnJvbShuZXcgU2V0KGJhc2VDYWxsYmFja3MudGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MudGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZVRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJhc2VDYWxsYmFja3MubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3ZpZGVkQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkS2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGNvcHlbdHlwZWRLZXldID0gb3B0aW9uc1t0eXBlZEtleV0gPz8gY29weVt0eXBlZEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG59XG5jb25zdCBQUklNSVRJVkVTID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJib29sZWFuXCJdKTtcbi8qKlxuICogRW5zdXJlIHRoYXQgYSBwYXNzZWQgY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGFsbCByZXF1aXJlZCBrZXlzIHByZXNlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVDb25maWcoY29uZmlnKSB7XG4gICAgY29uc3QgbG9hZGVkQ29uZmlnID0gY29uZmlnID8/IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKS5nZXRTdG9yZSgpO1xuICAgIGxldCBlbXB0eSA9IHtcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgY2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAyNSxcbiAgICB9O1xuICAgIGlmIChsb2FkZWRDb25maWcpIHtcbiAgICAgICAgZW1wdHkgPSB7IC4uLmVtcHR5LCAuLi5sb2FkZWRDb25maWcgfTtcbiAgICB9XG4gICAgaWYgKGxvYWRlZENvbmZpZz8uY29uZmlndXJhYmxlKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGxvYWRlZENvbmZpZy5jb25maWd1cmFibGUpKSB7XG4gICAgICAgICAgICBpZiAoUFJJTUlUSVZFUy5oYXModHlwZW9mIGxvYWRlZENvbmZpZy5jb25maWd1cmFibGVba2V5XSkgJiZcbiAgICAgICAgICAgICAgICAhZW1wdHkubWV0YWRhdGE/LltrZXldKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbXB0eS5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YVtrZXldID0gbG9hZGVkQ29uZmlnLmNvbmZpZ3VyYWJsZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbXB0eTtcbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgcGF0Y2hlcyBydW5uYWJsZSBjb25maWdzIHdpdGggdXBkYXRlZCBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hDb25maWcoY29uZmlnID0ge30sIHsgY2FsbGJhY2tzLCBtYXhDb25jdXJyZW5jeSwgcmVjdXJzaW9uTGltaXQsIHJ1bk5hbWUsIGNvbmZpZ3VyYWJsZSwgfSA9IHt9KSB7XG4gICAgY29uc3QgbmV3Q29uZmlnID0gZW5zdXJlQ29uZmlnKGNvbmZpZyk7XG4gICAgaWYgKGNhbGxiYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSdyZSByZXBsYWNpbmcgY2FsbGJhY2tzIHdlIG5lZWQgdG8gdW5zZXQgcnVuTmFtZVxuICAgICAgICAgKiBzaW5jZSB0aGF0IHNob3VsZCBhcHBseSBvbmx5IHRvIHRoZSBzYW1lIHJ1biBhcyB0aGUgb3JpZ2luYWwgY2FsbGJhY2tzXG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGUgbmV3Q29uZmlnLnJ1bk5hbWU7XG4gICAgICAgIG5ld0NvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gICAgfVxuICAgIGlmIChyZWN1cnNpb25MaW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5yZWN1cnNpb25MaW1pdCA9IHJlY3Vyc2lvbkxpbWl0O1xuICAgIH1cbiAgICBpZiAobWF4Q29uY3VycmVuY3kgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcubWF4Q29uY3VycmVuY3kgPSBtYXhDb25jdXJyZW5jeTtcbiAgICB9XG4gICAgaWYgKHJ1bk5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucnVuTmFtZSA9IHJ1bk5hbWU7XG4gICAgfVxuICAgIGlmIChjb25maWd1cmFibGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcuY29uZmlndXJhYmxlID0geyAuLi5uZXdDb25maWcuY29uZmlndXJhYmxlLCAuLi5jb25maWd1cmFibGUgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0NvbmZpZztcbn1cbiJdLCJuYW1lcyI6WyJDYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsIkRFRkFVTFRfUkVDVVJTSU9OX0xJTUlUIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwiY29uZmlnIiwiY29uZmlndXJlIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwidGFncyIsIm1ldGFkYXRhIiwibWVyZ2VDb25maWdzIiwiY29uZmlncyIsImNvcHkiLCJlbnN1cmVDb25maWciLCJvcHRpb25zIiwiZmlsdGVyIiwiYyIsImtleSIsIk9iamVjdCIsImtleXMiLCJTZXQiLCJjb25jYXQiLCJiYXNlQ2FsbGJhY2tzIiwicHJvdmlkZWRDYWxsYmFja3MiLCJBcnJheSIsImlzQXJyYXkiLCJtYW5hZ2VyIiwiY2FsbGJhY2siLCJhZGRIYW5kbGVyIiwiX3BhcmVudFJ1bklkIiwiaGFuZGxlcnMiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwiZnJvbSIsImluaGVyaXRhYmxlVGFncyIsInR5cGVkS2V5IiwiUFJJTUlUSVZFUyIsImxvYWRlZENvbmZpZyIsImdldEluc3RhbmNlIiwiZ2V0U3RvcmUiLCJlbXB0eSIsInJlY3Vyc2lvbkxpbWl0IiwiY29uZmlndXJhYmxlIiwiaGFzIiwicGF0Y2hDb25maWciLCJtYXhDb25jdXJyZW5jeSIsInJ1bk5hbWUiLCJuZXdDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter)\n/* harmony export */ });\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Ozs7O0NBTUMsR0FDTSxNQUFNQTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFlBQVksR0FBR1AsT0FBT08sWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1IsT0FBT1EsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsT0FBT1MsV0FBVztRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR1YsT0FBT1UsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsT0FBT1csWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1osT0FBT1ksV0FBVztJQUN6QztJQUNBQyxhQUFhQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUMxQixJQUFJQyxVQUFVLElBQUksQ0FBQ1QsWUFBWSxLQUFLVSxhQUNoQyxJQUFJLENBQUNULFlBQVksS0FBS1MsYUFDdEIsSUFBSSxDQUFDUixXQUFXLEtBQUtRO1FBQ3pCLE1BQU1DLFlBQVlKLE1BQU1LLElBQUksSUFBSSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDWixZQUFZLEtBQUtVLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDVCxZQUFZLENBQUNhLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUM5RDtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtTLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDUixZQUFZLENBQUNZLFFBQVEsQ0FBQ0w7UUFDcEQ7UUFDQSxJQUFJLElBQUksQ0FBQ04sV0FBVyxLQUFLUSxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVSSxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUNkLFdBQVcsRUFBRVcsU0FBU0c7UUFDdEU7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLTyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTixZQUFZLENBQUNVLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUMvRDtRQUNBLElBQUksSUFBSSxDQUFDVixZQUFZLEtBQUtNLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNMLFlBQVksQ0FBQ1MsUUFBUSxDQUFDTDtRQUNyRDtRQUNBLElBQUksSUFBSSxDQUFDSCxXQUFXLEtBQUtLLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVNLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDWCxXQUFXLEVBQUVRLFNBQVNHO1FBQ3hFO1FBQ0EsT0FBT1A7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzPzgxZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVdGlsaXR5IHRvIGZpbHRlciB0aGUgcm9vdCBldmVudCBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICogVGhpcyBpcyBzaW1wbHkgYmluZGluZyB0aGUgYXJndW1lbnRzIHRvIHRoZSBuYW1lc3BhY2UgdG8gbWFrZSBzYXZlIG9uXG4gKiBhIGJpdCBvZiB0eXBpbmcgaW4gdGhlIHN0cmVhbUV2ZW50cyBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBUT0RPOiBSZWZhY3RvciBhbmQgcmVtb3ZlLlxuICovXG5leHBvcnQgY2xhc3MgX1Jvb3RFdmVudEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzLmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHMuZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHMuZXhjbHVkZVRhZ3M7XG4gICAgfVxuICAgIGluY2x1ZGVFdmVudChldmVudCwgcm9vdFR5cGUpIHtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGV2ZW50VGFncyA9IGV2ZW50LnRhZ3MgPz8gW107XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHwgZXZlbnRUYWdzLnNvbWUoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJvb3RUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIGV2ZW50VGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIl9Sb290RXZlbnRGaWx0ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpbmNsdWRlTmFtZXMiLCJpbmNsdWRlVHlwZXMiLCJpbmNsdWRlVGFncyIsImV4Y2x1ZGVOYW1lcyIsImV4Y2x1ZGVUeXBlcyIsImV4Y2x1ZGVUYWdzIiwiaW5jbHVkZUV2ZW50IiwiZXZlbnQiLCJyb290VHlwZSIsImluY2x1ZGUiLCJ1bmRlZmluZWQiLCJldmVudFRhZ3MiLCJ0YWdzIiwiaW5jbHVkZXMiLCJuYW1lIiwic29tZSIsInRhZyIsImV2ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ class MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        callback();\n    }\n}\nclass AsyncLocalStorageProvider {\n    constructor(){\n        Object.defineProperty(this, \"asyncLocalStorage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockAsyncLocalStorage()\n        });\n        Object.defineProperty(this, \"hasBeenInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    getInstance() {\n        return this.asyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        if (!this.hasBeenInitialized) {\n            this.hasBeenInitialized = true;\n            this.asyncLocalStorage = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHFEQUFxRCxHQUM5QyxNQUFNQTtJQUNUQyxXQUFXO1FBQ1AsT0FBT0M7SUFDWDtJQUNBQyxJQUFJQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtRQUNsQkE7SUFDSjtBQUNKO0FBQ0EsTUFBTUM7SUFDRkMsYUFBYztRQUNWQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJYjtRQUNmO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBQyxjQUFjO1FBQ1YsT0FBTyxJQUFJLENBQUNDLGlCQUFpQjtJQUNqQztJQUNBQyx5QkFBeUJDLFFBQVEsRUFBRTtRQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRTtZQUMxQixJQUFJLENBQUNBLGtCQUFrQixHQUFHO1lBQzFCLElBQUksQ0FBQ0gsaUJBQWlCLEdBQUdFO1FBQzdCO0lBQ0o7QUFDSjtBQUNBLE1BQU1FLHFDQUFxQyxJQUFJYjtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcz82NGQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmV4cG9ydCBjbGFzcyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGdldFN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBydW4oX3N0b3JlLCBjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhc3luY0xvY2FsU3RvcmFnZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1vY2tBc3luY0xvY2FsU3RvcmFnZSgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYXNCZWVuSW5pdGlhbGl6ZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNMb2NhbFN0b3JhZ2U7XG4gICAgfVxuICAgIGluaXRpYWxpemVHbG9iYWxJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzQmVlbkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFzeW5jTG9jYWxTdG9yYWdlID0gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uID0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIoKTtcbmV4cG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfTtcbiJdLCJuYW1lcyI6WyJNb2NrQXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRTdG9yZSIsInVuZGVmaW5lZCIsInJ1biIsIl9zdG9yZSIsImNhbGxiYWNrIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImdldEluc3RhbmNlIiwiYXN5bmNMb2NhbFN0b3JhZ2UiLCJpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UiLCJpbnN0YW5jZSIsImhhc0JlZW5Jbml0aWFsaXplZCIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tools.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tools.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicStructuredTool: () => (/* binding */ DynamicStructuredTool),\n/* harmony export */   DynamicTool: () => (/* binding */ DynamicTool),\n/* harmony export */   StructuredTool: () => (/* binding */ StructuredTool),\n/* harmony export */   Tool: () => (/* binding */ Tool),\n/* harmony export */   ToolInputParsingException: () => (/* binding */ ToolInputParsingException)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _language_models_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./language_models/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _runnables_config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./runnables/config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n\n/**\n * Custom error class used to handle exceptions related to tool input parsing.\n * It extends the built-in `Error` class and adds an optional `output`\n * property that can hold the output that caused the exception.\n */ class ToolInputParsingException extends Error {\n    constructor(message, output){\n        super(message);\n        Object.defineProperty(this, \"output\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.output = output;\n    }\n}\n/**\n * Base class for Tools that accept input of any shape defined by a Zod schema.\n */ class StructuredTool extends _language_models_base_js__WEBPACK_IMPORTED_MODULE_1__.BaseLangChain {\n    get lc_namespace() {\n        return [\n            \"langchain\",\n            \"tools\"\n        ];\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"returnDirect\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    /**\n     * Invokes the tool with the provided input and configuration.\n     * @param input The input for the tool.\n     * @param config Optional configuration for the tool.\n     * @returns A Promise that resolves with a string.\n     */ async invoke(input, config) {\n        return this.call(input, (0,_runnables_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(config));\n    }\n    /**\n     * Calls the tool with the provided argument, configuration, and tags. It\n     * parses the input according to the schema, handles any errors, and\n     * manages callbacks.\n     * @param arg The input argument for the tool.\n     * @param configArg Optional configuration or callbacks for the tool.\n     * @param tags Optional tags for the tool.\n     * @returns A Promise that resolves with a string.\n     */ async call(arg, configArg, /** @deprecated */ tags) {\n        let parsed;\n        try {\n            parsed = await this.schema.parseAsync(arg);\n        } catch (e) {\n            throw new ToolInputParsingException(`Received tool input did not match expected schema`, JSON.stringify(arg));\n        }\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config.callbacks, this.callbacks, config.tags || tags, this.tags, config.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const runManager = await callbackManager_?.handleToolStart(this.toJSON(), typeof parsed === \"string\" ? parsed : JSON.stringify(parsed), undefined, undefined, undefined, undefined, config.runName);\n        let result;\n        try {\n            result = await this._call(parsed, runManager, config);\n        } catch (e) {\n            await runManager?.handleToolError(e);\n            throw e;\n        }\n        await runManager?.handleToolEnd(result);\n        return result;\n    }\n}\n/**\n * Base class for Tools that accept input as a string.\n */ class Tool extends StructuredTool {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: zod__WEBPACK_IMPORTED_MODULE_3__.z.object({\n                input: zod__WEBPACK_IMPORTED_MODULE_3__.z.string().optional()\n            }).transform((obj)=>obj.input)\n        });\n    }\n    /**\n     * Calls the tool with the provided argument and callbacks. It handles\n     * string inputs specifically.\n     * @param arg The input argument for the tool, which can be a string, undefined, or an input of the tool's schema.\n     * @param callbacks Optional callbacks for the tool.\n     * @returns A Promise that resolves with a string.\n     */ call(arg, callbacks) {\n        return super.call(typeof arg === \"string\" || !arg ? {\n            input: arg\n        } : arg, callbacks);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and description.\n */ class DynamicTool extends Tool {\n    static lc_name() {\n        return \"DynamicTool\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n    }\n    async call(arg, configArg) {\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        return super.call(arg, config);\n    }\n    /** @ignore */ async _call(input, runManager, config) {\n        return this.func(input, runManager, config);\n    }\n}\n/**\n * A tool that can be created dynamically from a function, name, and\n * description, designed to work with structured data. It extends the\n * StructuredTool class and overrides the _call method to execute the\n * provided function when the tool is called.\n */ class DynamicStructuredTool extends StructuredTool {\n    static lc_name() {\n        return \"DynamicStructuredTool\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"description\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.description = fields.description;\n        this.func = fields.func;\n        this.returnDirect = fields.returnDirect ?? this.returnDirect;\n        this.schema = fields.schema;\n    }\n    async call(arg, configArg, /** @deprecated */ tags) {\n        const config = (0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg)(configArg);\n        if (config.runName === undefined) {\n            config.runName = this.name;\n        }\n        return super.call(arg, config, tags);\n    }\n    _call(arg, runManager, config) {\n        return this.func(arg, runManager, config);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdG9vbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQzBEO0FBQ3ZCO0FBQ047QUFDckQ7Ozs7Q0FJQyxHQUNNLE1BQU1LLGtDQUFrQ0M7SUFDM0NDLFlBQVlDLE9BQU8sRUFBRUMsTUFBTSxDQUFFO1FBQ3pCLEtBQUssQ0FBQ0Q7UUFDTkUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNOLE1BQU0sR0FBR0E7SUFDbEI7QUFDSjtBQUNBOztDQUVDLEdBQ00sTUFBTU8sdUJBQXVCYixtRUFBYUE7SUFDN0MsSUFBSWMsZUFBZTtRQUNmLE9BQU87WUFBQztZQUFhO1NBQVE7SUFDakM7SUFDQVYsWUFBWVcsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0EsVUFBVSxDQUFDO1FBQ2pCUixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDQyxJQUFJLENBQUNGLE9BQU9oQixrRUFBWUEsQ0FBQ2lCO0lBQ3pDO0lBQ0E7Ozs7Ozs7O0tBUUMsR0FDRCxNQUFNQyxLQUFLQyxHQUFHLEVBQUVDLFNBQVMsRUFDekIsZ0JBQWdCLEdBQ2hCQyxJQUFJLEVBQUU7UUFDRixJQUFJQztRQUNKLElBQUk7WUFDQUEsU0FBUyxNQUFNLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxVQUFVLENBQUNMO1FBQzFDLEVBQ0EsT0FBT00sR0FBRztZQUNOLE1BQU0sSUFBSXhCLDBCQUEwQixDQUFDLGlEQUFpRCxDQUFDLEVBQUV5QixLQUFL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dEMsSUFBSUgsT0FBT29CLE9BQU8sS0FBS0QsV0FBVztZQUM5Qm5CLE9BQU9vQixPQUFPLEdBQUcsSUFBSSxDQUFDYSxJQUFJO1FBQzlCO1FBQ0EsT0FBTyxLQUFLLENBQUNoQyxLQUFLQyxLQUFLRixRQUFRSTtJQUNuQztJQUNBa0IsTUFBTXBCLEdBQUcsRUFBRWMsVUFBVSxFQUFFaEIsTUFBTSxFQUFFO1FBQzNCLE9BQU8sSUFBSSxDQUFDbUMsSUFBSSxDQUFDakMsS0FBS2MsWUFBWWhCO0lBQ3RDO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90b29scy5qcz8zNTNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcsIH0gZnJvbSBcIi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5nQ2hhaW4sIH0gZnJvbSBcIi4vbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL3J1bm5hYmxlcy9jb25maWcuanNcIjtcbi8qKlxuICogQ3VzdG9tIGVycm9yIGNsYXNzIHVzZWQgdG8gaGFuZGxlIGV4Y2VwdGlvbnMgcmVsYXRlZCB0byB0b29sIGlucHV0IHBhcnNpbmcuXG4gKiBJdCBleHRlbmRzIHRoZSBidWlsdC1pbiBgRXJyb3JgIGNsYXNzIGFuZCBhZGRzIGFuIG9wdGlvbmFsIGBvdXRwdXRgXG4gKiBwcm9wZXJ0eSB0aGF0IGNhbiBob2xkIHRoZSBvdXRwdXQgdGhhdCBjYXVzZWQgdGhlIGV4Y2VwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xJbnB1dFBhcnNpbmdFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgb3V0cHV0KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBUb29scyB0aGF0IGFjY2VwdCBpbnB1dCBvZiBhbnkgc2hhcGUgZGVmaW5lZCBieSBhIFpvZCBzY2hlbWEuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJ1Y3R1cmVkVG9vbCBleHRlbmRzIEJhc2VMYW5nQ2hhaW4ge1xuICAgIGdldCBsY19uYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiBbXCJsYW5nY2hhaW5cIiwgXCJ0b29sc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJldHVybkRpcmVjdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIHRvb2wgd2l0aCB0aGUgcHJvdmlkZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBmb3IgdGhlIHRvb2wuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgdG9vbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgc3RyaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoaW5wdXQsIGVuc3VyZUNvbmZpZyhjb25maWcpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIHRvb2wgd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnQsIGNvbmZpZ3VyYXRpb24sIGFuZCB0YWdzLiBJdFxuICAgICAqIHBhcnNlcyB0aGUgaW5wdXQgYWNjb3JkaW5nIHRvIHRoZSBzY2hlbWEsIGhhbmRsZXMgYW55IGVycm9ycywgYW5kXG4gICAgICogbWFuYWdlcyBjYWxsYmFja3MuXG4gICAgICogQHBhcmFtIGFyZyBUaGUgaW5wdXQgYXJndW1lbnQgZm9yIHRoZSB0b29sLlxuICAgICAqIEBwYXJhbSBjb25maWdBcmcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvciBjYWxsYmFja3MgZm9yIHRoZSB0b29sLlxuICAgICAqIEBwYXJhbSB0YWdzIE9wdGlvbmFsIHRhZ3MgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzdHJpbmcuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbChhcmcsIGNvbmZpZ0FyZywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgdGFncykge1xuICAgICAgICBsZXQgcGFyc2VkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkID0gYXdhaXQgdGhpcy5zY2hlbWEucGFyc2VBc3luYyhhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbihgUmVjZWl2ZWQgdG9vbCBpbnB1dCBkaWQgbm90IG1hdGNoIGV4cGVjdGVkIHNjaGVtYWAsIEpTT04uc3RyaW5naWZ5KGFyZykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoY29uZmlnQXJnKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoY29uZmlnLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGNvbmZpZy50YWdzIHx8IHRhZ3MsIHRoaXMudGFncywgY29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZVRvb2xTdGFydCh0aGlzLnRvSlNPTigpLCB0eXBlb2YgcGFyc2VkID09PSBcInN0cmluZ1wiID8gcGFyc2VkIDogSlNPTi5zdHJpbmdpZnkocGFyc2VkKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWcucnVuTmFtZSk7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYWxsKHBhcnNlZCwgcnVuTWFuYWdlciwgY29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlVG9vbEVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVUb29sRW5kKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBUb29scyB0aGF0IGFjY2VwdCBpbnB1dCBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2wgZXh0ZW5kcyBTdHJ1Y3R1cmVkVG9vbCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogelxuICAgICAgICAgICAgICAgIC5vYmplY3QoeyBpbnB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pXG4gICAgICAgICAgICAgICAgLnRyYW5zZm9ybSgob2JqKSA9PiBvYmouaW5wdXQpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgdG9vbCB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudCBhbmQgY2FsbGJhY2tzLiBJdCBoYW5kbGVzXG4gICAgICogc3RyaW5nIGlucHV0cyBzcGVjaWZpY2FsbHkuXG4gICAgICogQHBhcmFtIGFyZyBUaGUgaW5wdXQgYXJndW1lbnQgZm9yIHRoZSB0b29sLCB3aGljaCBjYW4gYmUgYSBzdHJpbmcsIHVuZGVmaW5lZCwgb3IgYW4gaW5wdXQgb2YgdGhlIHRvb2wncyBzY2hlbWEuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBPcHRpb25hbCBjYWxsYmFja3MgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzdHJpbmcuXG4gICAgICovXG4gICAgY2FsbChhcmcsIGNhbGxiYWNrcykge1xuICAgICAgICByZXR1cm4gc3VwZXIuY2FsbCh0eXBlb2YgYXJnID09PSBcInN0cmluZ1wiIHx8ICFhcmcgPyB7IGlucHV0OiBhcmcgfSA6IGFyZywgY2FsbGJhY2tzKTtcbiAgICB9XG59XG4vKipcbiAqIEEgdG9vbCB0aGF0IGNhbiBiZSBjcmVhdGVkIGR5bmFtaWNhbGx5IGZyb20gYSBmdW5jdGlvbiwgbmFtZSwgYW5kIGRlc2NyaXB0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRHluYW1pY1Rvb2wgZXh0ZW5kcyBUb29sIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRHluYW1pY1Rvb2xcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZGVzY3JpcHRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnVuY1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGZpZWxkcy5kZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgICAgIHRoaXMucmV0dXJuRGlyZWN0ID0gZmllbGRzLnJldHVybkRpcmVjdCA/PyB0aGlzLnJldHVybkRpcmVjdDtcbiAgICB9XG4gICAgYXN5bmMgY2FsbChhcmcsIGNvbmZpZ0FyZykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGNvbmZpZ0FyZyk7XG4gICAgICAgIGlmIChjb25maWcucnVuTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25maWcucnVuTmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIuY2FsbChhcmcsIGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2NhbGwoaW5wdXQsIHJ1bk1hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5mdW5jKGlucHV0LCBydW5NYW5hZ2VyLCBjb25maWcpO1xuICAgIH1cbn1cbi8qKlxuICogQSB0b29sIHRoYXQgY2FuIGJlIGNyZWF0ZWQgZHluYW1pY2FsbHkgZnJvbSBhIGZ1bmN0aW9uLCBuYW1lLCBhbmRcbiAqIGRlc2NyaXB0aW9uLCBkZXNpZ25lZCB0byB3b3JrIHdpdGggc3RydWN0dXJlZCBkYXRhLiBJdCBleHRlbmRzIHRoZVxuICogU3RydWN0dXJlZFRvb2wgY2xhc3MgYW5kIG92ZXJyaWRlcyB0aGUgX2NhbGwgbWV0aG9kIHRvIGV4ZWN1dGUgdGhlXG4gKiBwcm92aWRlZCBmdW5jdGlvbiB3aGVuIHRoZSB0b29sIGlzIGNhbGxlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIER5bmFtaWNTdHJ1Y3R1cmVkVG9vbCBleHRlbmRzIFN0cnVjdHVyZWRUb29sIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRHluYW1pY1N0cnVjdHVyZWRUb29sXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlc2NyaXB0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZmllbGRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmaWVsZHMuZnVuYztcbiAgICAgICAgdGhpcy5yZXR1cm5EaXJlY3QgPSBmaWVsZHMucmV0dXJuRGlyZWN0ID8/IHRoaXMucmV0dXJuRGlyZWN0O1xuICAgICAgICB0aGlzLnNjaGVtYSA9IGZpZWxkcy5zY2hlbWE7XG4gICAgfVxuICAgIGFzeW5jIGNhbGwoYXJnLCBjb25maWdBcmcsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHRhZ3MpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyhjb25maWdBcmcpO1xuICAgICAgICBpZiAoY29uZmlnLnJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uZmlnLnJ1bk5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmNhbGwoYXJnLCBjb25maWcsIHRhZ3MpO1xuICAgIH1cbiAgICBfY2FsbChhcmcsIHJ1bk1hbmFnZXIsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5mdW5jKGFyZywgcnVuTWFuYWdlciwgY29uZmlnKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsieiIsIkNhbGxiYWNrTWFuYWdlciIsInBhcnNlQ2FsbGJhY2tDb25maWdBcmciLCJCYXNlTGFuZ0NoYWluIiwiZW5zdXJlQ29uZmlnIiwiVG9vbElucHV0UGFyc2luZ0V4Y2VwdGlvbiIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwib3V0cHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIlN0cnVjdHVyZWRUb29sIiwibGNfbmFtZXNwYWNlIiwiZmllbGRzIiwiaW52b2tlIiwiaW5wdXQiLCJjb25maWciLCJjYWxsIiwiYXJnIiwiY29uZmlnQXJnIiwidGFncyIsInBhcnNlZCIsInNjaGVtYSIsInBhcnNlQXN5bmMiLCJlIiwiSlNPTiIsInN0cmluZ2lmeSIsImNhbGxiYWNrTWFuYWdlcl8iLCJjb25maWd1cmUiLCJjYWxsYmFja3MiLCJtZXRhZGF0YSIsInZlcmJvc2UiLCJydW5NYW5hZ2VyIiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9KU09OIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsInJlc3VsdCIsIl9jYWxsIiwiaGFuZGxlVG9vbEVycm9yIiwiaGFuZGxlVG9vbEVuZCIsIlRvb2wiLCJvYmplY3QiLCJzdHJpbmciLCJvcHRpb25hbCIsInRyYW5zZm9ybSIsIm9iaiIsIkR5bmFtaWNUb29sIiwibGNfbmFtZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImZ1bmMiLCJyZXR1cm5EaXJlY3QiLCJEeW5hbWljU3RydWN0dXJlZFRvb2wiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId) {\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) + runId;\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    async _startTrace(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        await this.onRunCreate?.(storedRun);\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQzVELDhEQUE4RDtBQUM5RCxTQUFTQyxjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDcEMsT0FBT0QsU0FBUyxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBLFNBQVNJLHFCQUFxQkMsS0FBSztJQUMvQixPQUFPQSxNQUFNQyxPQUFPLENBQUMsVUFBVTtBQUNuQztBQUNBLFNBQVNDLDJCQUEyQkMsS0FBSyxFQUFFQyxLQUFLO0lBQzVDLE9BQVFMLHFCQUFxQixDQUFDLEVBQUUsSUFBSU0sS0FBS0YsT0FBT0csV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQzVFSDtBQUNSO0FBQ08sTUFBTUksbUJBQW1CZixtRUFBbUJBO0lBQy9DZ0IsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWckIsT0FBTyxJQUFJc0I7UUFDZjtJQUNKO0lBQ0FDLE9BQU87UUFDSCxPQUFPLElBQUk7SUFDZjtJQUNBQyxlQUFlQyxLQUFLLEVBQUU7UUFDbEIsdURBQXVEO1FBQ3ZELElBQUlBLGlCQUFpQkMsT0FBTztZQUN4QixPQUFPRCxNQUFNRSxPQUFPLEdBQUlGLENBQUFBLE9BQU9HLFFBQVEsQ0FBQyxJQUFJLEVBQUVILE1BQU1HLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBQztRQUNuRTtRQUNBLElBQUksT0FBT0gsVUFBVSxVQUFVO1lBQzNCLE9BQU9BO1FBQ1g7UUFDQSxPQUFPLENBQUMsRUFBRUEsTUFBTSxDQUFDO0lBQ3JCO0lBQ0FJLGFB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RyxDQUFDbEM7UUFDNUIsSUFBSSxDQUFDMEIsT0FBT0EsS0FBS3NDLGFBQWEsU0FBUztZQUNuQztRQUNKO1FBQ0F0QyxJQUFJbUMsTUFBTSxDQUFDckMsSUFBSSxDQUFDO1lBQ1orQixNQUFNO1lBQ05PLE1BQU0sSUFBSTdELE9BQU9DLFdBQVc7WUFDNUJpRixRQUFRO2dCQUFFNEI7WUFBSztRQUNuQjtRQUNBLE1BQU0sSUFBSSxDQUFDQyxNQUFNLEdBQUd0RjtJQUN4QjtJQUNBLE1BQU11RixrQkFBa0JDLEtBQUssRUFBRUMsR0FBRyxFQUFFbkgsS0FBSyxFQUFFaUYsWUFBWSxFQUFFQyxLQUFLLEVBQUVrQyxNQUFNLEVBQUU7UUFDcEUsTUFBTTFGLE1BQU0sSUFBSSxDQUFDTyxNQUFNLENBQUNDLEdBQUcsQ0FBQ2xDO1FBQzVCLElBQUksQ0FBQzBCLE9BQU9BLEtBQUtzQyxhQUFhLE9BQU87WUFDakMsTUFBTSxJQUFJL0MsTUFBTSxDQUFDLHlEQUF5RCxDQUFDO1FBQy9FO1FBQ0FTLElBQUltQyxNQUFNLENBQUNyQyxJQUFJLENBQUM7WUFDWitCLE1BQU07WUFDTk8sTUFBTSxJQUFJN0QsT0FBT0MsV0FBVztZQUM1QmlGLFFBQVE7Z0JBQUUrQjtnQkFBT0M7Z0JBQUtFLE9BQU9ELFFBQVFDO1lBQU07UUFDL0M7UUFDQSxNQUFNLElBQUksQ0FBQ0MsYUFBYSxHQUFHNUYsS0FBS3dGLE9BQU87WUFBRUcsT0FBT0QsUUFBUUM7UUFBTTtRQUM5RCxPQUFPM0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzPzFmZmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL2Jhc2UuanNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuZnVuY3Rpb24gc3RyaXBOb25BbHBoYW51bWVyaWMoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvWy06Ll0vZywgXCJcIik7XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChlcG9jaCwgcnVuSWQpIHtcbiAgICByZXR1cm4gKHN0cmlwTm9uQWxwaGFudW1lcmljKGAke25ldyBEYXRlKGVwb2NoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIC0xKX0wMDBaYCkgK1xuICAgICAgICBydW5JZCk7XG59XG5leHBvcnQgY2xhc3MgQmFzZVRyYWNlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKF9maWVsZHMpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdHJpbmdpZnlFcnJvcihlcnJvcikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSArIChlcnJvcj8uc3RhY2sgPyBgXFxuXFxuJHtlcnJvci5zdGFja31gIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtlcnJvcn1gO1xuICAgIH1cbiAgICBfYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBjaGlsZFJ1bikge1xuICAgICAgICBwYXJlbnRSdW4uY2hpbGRfcnVucy5wdXNoKGNoaWxkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgX3N0YXJ0VHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb3R0ZWRPcmRlciA9IGNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0KHJ1bi5zdGFydF90aW1lLCBydW4uaWQpO1xuICAgICAgICBjb25zdCBzdG9yZWRSdW4gPSB7IC4uLnJ1biB9O1xuICAgICAgICBpZiAoc3RvcmVkUnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50UnVuID0gdGhpcy5ydW5NYXAuZ2V0KHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRDaGlsZFJ1bihwYXJlbnRSdW4sIHN0b3JlZFJ1bik7XG4gICAgICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHN0b3JlZFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICAgICAgICAgIHN0b3JlZFJ1bi50cmFjZV9pZCA9IHBhcmVudFJ1bi50cmFjZV9pZDtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50UnVuLmRvdHRlZF9vcmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JlZFJ1bi5kb3R0ZWRfb3JkZXIgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSdW4uZG90dGVkX29yZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERvdHRlZE9yZGVyLFxuICAgICAgICAgICAgICAgICAgICBdLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIG5hdHVyYWxseSBmb3IgY2FsbGJhY2tzIGFkZGVkIHdpdGhpbiBhIHJ1blxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBoYXMgbm8gZG90dGVkIG9yZGVyLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRlYnVnKFxuICAgICAgICAgICAgICAgIC8vICAgYFBhcmVudCBydW4gd2l0aCBVVUlEICR7c3RvcmVkUnVuLnBhcmVudF9ydW5faWR9IG5vdCBmb3VuZC5gXG4gICAgICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0b3JlZFJ1bi50cmFjZV9pZCA9IHN0b3JlZFJ1bi5pZDtcbiAgICAgICAgICAgIHN0b3JlZFJ1bi5kb3R0ZWRfb3JkZXIgPSBjdXJyZW50RG90dGVkT3JkZXI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuc2V0KHN0b3JlZFJ1bi5pZCwgc3RvcmVkUnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1bkNyZWF0ZT8uKHN0b3JlZFJ1bik7XG4gICAgfVxuICAgIGFzeW5jIF9lbmRUcmFjZShydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcnVuLnBhcmVudF9ydW5faWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgocGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciwgcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RSdW4ocnVuKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5kZWxldGUocnVuLmlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJ1blVwZGF0ZT8uKHJ1bik7XG4gICAgfVxuICAgIF9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCkge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBwYXJlbnRSdW5JZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChwYXJlbnRSdW5JZCk7XG4gICAgICAgIC8vIElmIGEgcnVuIGhhcyBubyBwYXJlbnQgdGhlbiBleGVjdXRpb24gb3JkZXIgaXMgMVxuICAgICAgICBpZiAoIXBhcmVudFJ1bikge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgKyAxO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRXh0cmFQYXJhbXMgPSBtZXRhZGF0YVxuICAgICAgICAgICAgPyB7IC4uLmV4dHJhUGFyYW1zLCBtZXRhZGF0YSB9XG4gICAgICAgICAgICA6IGV4dHJhUGFyYW1zO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGxsbS5pZFtsbG0uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBwcm9tcHRzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IG1lc3NhZ2VzIH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwibGxtXCIsXG4gICAgICAgICAgICBleHRyYTogZmluYWxFeHRyYVBhcmFtcyA/PyB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTVN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gb3V0cHV0O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gTExNIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBydW5UeXBlLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gY2hhaW4uaWRbY2hhaW4uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBjaGFpbixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzLFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogcnVuVHlwZSA/PyBcImNoYWluXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dHMsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0gX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVycm9yLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChrd2FyZ3M/LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW4uaW5wdXRzID0gX2NvZXJjZVRvRGljdChrd2FyZ3MuaW5wdXRzLCBcImlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gdG9vbC5pZFt0b29sLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogdG9vbCxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IGlucHV0IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInRvb2xcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgb3V0cHV0IH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbEVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhZ2VudFJ1biA9IHJ1bjtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucyA9IGFnZW50UnVuLmFjdGlvbnMgfHwgW107XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMucHVzaChhY3Rpb24pO1xuICAgICAgICBhZ2VudFJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImFnZW50X2FjdGlvblwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IGFjdGlvbiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50QWN0aW9uPy4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9lbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEVuZD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyByZXRyaWV2ZXIuaWRbcmV0cmlldmVyLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogcmV0cmlldmVyLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcXVlcnkgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwicmV0cmlldmVyXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IHsgZG9jdW1lbnRzIH07XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlckVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInJldHJpZXZlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyByZXRyaWV2ZXIgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwidGV4dFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IHRleHQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25UZXh0Py4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgXCJydW5JZFwiIHByb3ZpZGVkIHRvIFwiaGFuZGxlTExNTmV3VG9rZW5cIiBjYWxsYmFjay5gKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJuZXdfdG9rZW5cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0b2tlbiwgaWR4LCBjaHVuazogZmllbGRzPy5jaHVuayB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTU5ld1Rva2VuPy4ocnVuLCB0b2tlbiwgeyBjaHVuazogZmllbGRzPy5jaHVuayB9KTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZUNhbGxiYWNrSGFuZGxlciIsIl9jb2VyY2VUb0RpY3QiLCJ2YWx1ZSIsImRlZmF1bHRLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJzdHJpcE5vbkFscGhhbnVtZXJpYyIsImlucHV0IiwicmVwbGFjZSIsImNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0IiwiZXBvY2giLCJydW5JZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwiQmFzZVRyYWNlciIsImNvbnN0cnVjdG9yIiwiX2ZpZWxkcyIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiTWFwIiwiY29weSIsInN0cmluZ2lmeUVycm9yIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdGFjayIsIl9hZGRDaGlsZFJ1biIsInBhcmVudFJ1biIsImNoaWxkUnVuIiwiY2hpbGRfcnVucyIsInB1c2giLCJfc3RhcnRUcmFjZSIsInJ1biIsImN1cnJlbnREb3R0ZWRPcmRlciIsInN0YXJ0X3RpbWUiLCJpZCIsInN0b3JlZFJ1biIsInBhcmVudF9ydW5faWQiLCJ1bmRlZmluZWQiLCJydW5NYXAiLCJnZXQiLCJjaGlsZF9leGVjdXRpb25fb3JkZXIiLCJNYXRoIiwibWF4IiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJqb2luIiwic2V0Iiwib25SdW5DcmVhdGUiLCJfZW5kVHJhY2UiLCJwZXJzaXN0UnVuIiwiZGVsZXRlIiwib25SdW5VcGRhdGUiLCJfZ2V0RXhlY3V0aW9uT3JkZXIiLCJwYXJlbnRSdW5JZCIsImhhbmRsZUxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsImV4dHJhUGFyYW1zIiwidGFncyIsIm1ldGFkYXRhIiwibmFtZSIsImV4ZWN1dGlvbl9vcmRlciIsIm5vdyIsImZpbmFsRXh0cmFQYXJhbXMiLCJsZW5ndGgiLCJzZXJpYWxpemVkIiwiZXZlbnRzIiwidGltZSIsImlucHV0cyIsInJ1bl90eXBlIiwiZXh0cmEiLCJvbkxMTVN0YXJ0IiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJtZXNzYWdlcyIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsImVuZF90aW1lIiwib3V0cHV0cyIsIm9uTExNRW5kIiwiaGFuZGxlTExNRXJyb3IiLCJvbkxMTUVycm9yIiwiaGFuZGxlQ2hhaW5TdGFydCIsImNoYWluIiwicnVuVHlwZSIsIm9uQ2hhaW5TdGFydCIsImhhbmRsZUNoYWluRW5kIiwiX3BhcmVudFJ1bklkIiwiX3RhZ3MiLCJrd2FyZ3MiLCJvbkNoYWluRW5kIiwiaGFuZGxlQ2hhaW5FcnJvciIsIm9uQ2hhaW5FcnJvciIsImhhbmRsZVRvb2xTdGFydCIsInRvb2wiLCJvblRvb2xTdGFydCIsImhhbmRsZVRvb2xFbmQiLCJvblRvb2xFbmQiLCJoYW5kbGVUb29sRXJyb3IiLCJvblRvb2xFcnJvciIsImhhbmRsZUFnZW50QWN0aW9uIiwiYWN0aW9uIiwiYWdlbnRSdW4iLCJhY3Rpb25zIiwib25BZ2VudEFjdGlvbiIsImhhbmRsZUFnZW50RW5kIiwib25BZ2VudEVuZCIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwicmV0cmlldmVyIiwicXVlcnkiLCJvblJldHJpZXZlclN0YXJ0IiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwib25SZXRyaWV2ZXJFbmQiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIm9uUmV0cmlldmVyRXJyb3IiLCJoYW5kbGVUZXh0IiwidGV4dCIsIm9uVGV4dCIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJmaWVsZHMiLCJjaHVuayIsIm9uTExNTmV3VG9rZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${run.inputs.input?.trim()}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${run.outputs?.output?.trim()}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNNO0FBQ3ZDLFNBQVNFLEtBQUtDLEtBQUssRUFBRUMsSUFBSTtJQUNyQixPQUFPLENBQUMsRUFBRUQsTUFBTUUsSUFBSSxDQUFDLEVBQUVELEtBQUssRUFBRUQsTUFBTUcsS0FBSyxDQUFDLENBQUM7QUFDL0M7QUFDQSxTQUFTQyxpQkFBaUJDLEdBQUcsRUFBRUMsUUFBUTtJQUNuQyxJQUFJO1FBQ0EsT0FBT0MsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07SUFDckMsRUFDQSxPQUFPSSxLQUFLO1FBQ1IsT0FBT0g7SUFDWDtBQUNKO0FBQ0EsU0FBU0ksUUFBUUMsR0FBRztJQUNoQixJQUFJLENBQUNBLElBQUlDLFFBQVEsRUFDYixPQUFPO0lBQ1gsTUFBTUYsVUFBVUMsSUFBSUMsUUFBUSxHQUFHRCxJQUFJRSxVQUFVO0lBQzdDLElBQUlILFVBQVUsTUFBTTtRQUNoQixPQUFPLENBQUMsRUFBRUEsUUFBUSxFQUFFLENBQUM7SUFDekI7SUFDQSxPQUFPLENBQUMsRUFBRSxDQUFDQSxVQUFVLElBQUcsRUFBR0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVDO0FBQ0EsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR2xCLHdDQUFNQTtBQUN4Qjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU1tQiwrQkFBK0JsQixnREFBVUE7SUFDbERtQixhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0E7Ozs7O0tBS0MsR0FDREMsV0FBV0MsSUFBSSxFQUFFO1FBQ2IsT0FBT0MsUUFBUUMsT0FBTztJQUMxQjtJQUNBLGtCQUFrQjtJQUNsQjs7OztLQUlD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V2xFO1FBQ2pCLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU0rRCxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsRUFBRTNCLE9BQU8seUJBQXlCLEVBQUUvQyxpQkFBaUJ5RSxTQUFTRSxPQUFPLENBQUNGLFNBQVNFLE9BQU8sQ0FBQ2pDLE1BQU0sR0FBRyxFQUFFLEVBQUUsWUFBWSxDQUFDO0lBQ3pLO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2NvbnNvbGUuanM/NzNjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3R5bGVzIGZyb20gXCJhbnNpLXN0eWxlc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmZ1bmN0aW9uIHdyYXAoc3R5bGUsIHRleHQpIHtcbiAgICByZXR1cm4gYCR7c3R5bGUub3Blbn0ke3RleHR9JHtzdHlsZS5jbG9zZX1gO1xufVxuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeShvYmosIGZhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGVsYXBzZWQocnVuKSB7XG4gICAgaWYgKCFydW4uZW5kX3RpbWUpXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBydW4uZW5kX3RpbWUgLSBydW4uc3RhcnRfdGltZTtcbiAgICBpZiAoZWxhcHNlZCA8IDEwMDApIHtcbiAgICAgICAgcmV0dXJuIGAke2VsYXBzZWR9bXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7KGVsYXBzZWQgLyAxMDAwKS50b0ZpeGVkKDIpfXNgO1xufVxuY29uc3QgeyBjb2xvciB9ID0gc3R5bGVzO1xuLyoqXG4gKiBBIHRyYWNlciB0aGF0IGxvZ3MgYWxsIGV2ZW50cyB0byB0aGUgY29uc29sZS4gSXQgZXh0ZW5kcyBmcm9tIHRoZVxuICogYEJhc2VUcmFjZXJgIGNsYXNzIGFuZCBvdmVycmlkZXMgaXRzIG1ldGhvZHMgdG8gcHJvdmlkZSBjdXN0b20gbG9nZ2luZ1xuICogZnVuY3Rpb25hbGl0eS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKlxuICogY29uc3QgbGxtID0gbmV3IENoYXRBbnRocm9waWMoe1xuICogICB0ZW1wZXJhdHVyZTogMCxcbiAqICAgdGFnczogW1wiZXhhbXBsZVwiLCBcImNhbGxiYWNrc1wiLCBcImNvbnN0cnVjdG9yXCJdLFxuICogICBjYWxsYmFja3M6IFtuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpXSxcbiAqIH0pO1xuICpcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBwZXJzaXN0IHRoZSBydW4uIEluIHRoaXMgY2FzZSwgaXQgc2ltcGx5IHJldHVybnMgYVxuICAgICAqIHJlc29sdmVkIHByb21pc2UgYXMgdGhlcmUncyBubyBwZXJzaXN0ZW5jZSBsb2dpYy5cbiAgICAgKiBAcGFyYW0gX3J1biBUaGUgcnVuIHRvIHBlcnNpc3QuXG4gICAgICogQHJldHVybnMgQSByZXNvbHZlZCBwcm9taXNlLlxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8vIHV0aWxpdHkgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGdldCBhbGwgdGhlIHBhcmVudCBydW5zIG9mIGEgZ2l2ZW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBwYXJlbnRzIGFyZSB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgcGFyZW50IHJ1bnMuXG4gICAgICovXG4gICAgZ2V0UGFyZW50cyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgICAgICBsZXQgY3VycmVudFJ1biA9IHJ1bjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5ydW5NYXAuZ2V0KGN1cnJlbnRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFJ1biA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UsIHdoaWNoXG4gICAgICogaXMgdXNlZCBpbiBsb2dnaW5nLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biB3aG9zZSBsaW5lYWdlIGlzIHRvIGJlIHJldHJpZXZlZC5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZS5cbiAgICAgKi9cbiAgICBnZXRCcmVhZGNydW1icyhydW4pIHtcbiAgICAgICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0UGFyZW50cyhydW4pLnJldmVyc2UoKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nID0gWy4uLnBhcmVudHMsIHJ1bl1cbiAgICAgICAgICAgIC5tYXAoKHBhcmVudCwgaSwgYXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7cGFyZW50LmV4ZWN1dGlvbl9vcmRlcn06JHtwYXJlbnQucnVuX3R5cGV9OiR7cGFyZW50Lm5hbWV9YDtcbiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnIubGVuZ3RoIC0gMSA/IHdyYXAoc3R5bGVzLmJvbGQsIG5hbWUpIDogbmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiID4gXCIpO1xuICAgICAgICByZXR1cm4gd3JhcChjb2xvci5ncmV5LCBzdHJpbmcpO1xuICAgIH1cbiAgICAvLyBsb2dnaW5nIG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbY2hhaW4vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBDaGFpbiBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2NoYWluL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgQ2hhaW4gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpbkVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltjaGFpbi9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIENoYWluIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBcInByb21wdHNcIiBpbiBydW4uaW5wdXRzXG4gICAgICAgICAgICA/IHsgcHJvbXB0czogcnVuLmlucHV0cy5wcm9tcHRzLm1hcCgocCkgPT4gcC50cmltKCkpIH1cbiAgICAgICAgICAgIDogcnVuLmlucHV0cztcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbbGxtL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgTExNIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkoaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbbGxtL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgTExNIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltyZXNwb25zZV1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltsbG0vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBMTE0gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbdG9vbC9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFRvb2wgcnVuIHdpdGggaW5wdXQ6IFwiJHtydW4uaW5wdXRzLmlucHV0Py50cmltKCl9XCJgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbdG9vbC9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFRvb2wgcnVuIHdpdGggb3V0cHV0OiBcIiR7cnVuLm91dHB1dHM/Lm91dHB1dD8udHJpbSgpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25Ub29sRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3Rvb2wvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBUb29sIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlclN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3JldHJpZXZlci9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIFJldHJpZXZlciBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5pbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3JldHJpZXZlci9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIFJldHJpZXZlciBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW3JldHJpZXZlci9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFJldHJpZXZlciBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgYWN0aW9uIHNlbGVjdGVkIGJ5IHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gaW4gd2hpY2ggdGhlIGFnZW50IGFjdGlvbiBvY2N1cnJlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25BZ2VudEFjdGlvbihydW4pIHtcbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ibHVlLCBcIlthZ2VudC9hY3Rpb25dXCIpfSBbJHtjcnVtYnN9XSBBZ2VudCBzZWxlY3RlZCBhY3Rpb246ICR7dHJ5SnNvblN0cmluZ2lmeShhZ2VudFJ1bi5hY3Rpb25zW2FnZW50UnVuLmFjdGlvbnMubGVuZ3RoIC0gMV0sIFwiW2FjdGlvbl1cIil9YCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInN0eWxlcyIsIkJhc2VUcmFjZXIiLCJ3cmFwIiwic3R5bGUiLCJ0ZXh0Iiwib3BlbiIsImNsb3NlIiwidHJ5SnNvblN0cmluZ2lmeSIsIm9iaiIsImZhbGxiYWNrIiwiSlNPTiIsInN0cmluZ2lmeSIsImVyciIsImVsYXBzZWQiLCJydW4iLCJlbmRfdGltZSIsInN0YXJ0X3RpbWUiLCJ0b0ZpeGVkIiwiY29sb3IiLCJDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldFBhcmVudHMiLCJwYXJlbnRzIiwiY3VycmVudFJ1biIsInBhcmVudF9ydW5faWQiLCJwYXJlbnQiLCJydW5NYXAiLCJnZXQiLCJwdXNoIiwiZ2V0QnJlYWRjcnVtYnMiLCJyZXZlcnNlIiwic3RyaW5nIiwibWFwIiwiaSIsImFyciIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJydW5fdHlwZSIsImxlbmd0aCIsImJvbGQiLCJqb2luIiwiZ3JleSIsIm9uQ2hhaW5TdGFydCIsImNydW1icyIsImNvbnNvbGUiLCJsb2ciLCJncmVlbiIsImlucHV0cyIsIm9uQ2hhaW5FbmQiLCJjeWFuIiwib3V0cHV0cyIsIm9uQ2hhaW5FcnJvciIsInJlZCIsImVycm9yIiwib25MTE1TdGFydCIsInByb21wdHMiLCJwIiwidHJpbSIsIm9uTExNRW5kIiwib25MTE1FcnJvciIsIm9uVG9vbFN0YXJ0IiwiaW5wdXQiLCJvblRvb2xFbmQiLCJvdXRwdXQiLCJvblRvb2xFcnJvciIsIm9uUmV0cmlldmVyU3RhcnQiLCJvblJldHJpZXZlckVuZCIsIm9uUmV0cmlldmVyRXJyb3IiLCJvbkFnZW50QWN0aW9uIiwiYWdlbnRSdW4iLCJibHVlIiwiYWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/initialize.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTracingCallbackHandler: () => (/* binding */ getTracingCallbackHandler),\n/* harmony export */   getTracingV2CallbackHandler: () => (/* binding */ getTracingV2CallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer_langchain_v1.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\");\n\n\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */ async function getTracingCallbackHandler(session) {\n    const tracer = new _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__.LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    } else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */ async function getTracingV2CallbackHandler() {\n    return new _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__.LangChainTracer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9pbml0aWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDSztBQUM3RDs7Ozs7Ozs7Q0FRQyxHQUNNLGVBQWVFLDBCQUEwQkMsT0FBTztJQUNuRCxNQUFNQyxTQUFTLElBQUlILHNFQUFpQkE7SUFDcEMsSUFBSUUsU0FBUztRQUNULE1BQU1DLE9BQU9DLFdBQVcsQ0FBQ0Y7SUFDN0IsT0FDSztRQUNELE1BQU1DLE9BQU9FLGtCQUFrQjtJQUNuQztJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7OztDQUlDLEdBQ00sZUFBZUc7SUFDbEIsT0FBTyxJQUFJUCxpRUFBZUE7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2luaXRpYWxpemUuanM/Nzc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXIgfSBmcm9tIFwiLi90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXJWMSB9IGZyb20gXCIuL3RyYWNlcl9sYW5nY2hhaW5fdjEuanNcIjtcbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBWMiBoYW5kbGVyIGluc3RlYWQuXG4gKlxuICogRnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJWMWAuIElmIGEgc2Vzc2lvblxuICogaXMgcHJvdmlkZWQsIGl0IGxvYWRzIHRoYXQgc2Vzc2lvbiBpbnRvIHRoZSB0cmFjZXI7IG90aGVyd2lzZSwgaXQgbG9hZHNcbiAqIGEgZGVmYXVsdCBzZXNzaW9uLlxuICogQHBhcmFtIHNlc3Npb24gT3B0aW9uYWwgc2Vzc2lvbiB0byBsb2FkIGludG8gdGhlIHRyYWNlci5cbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJWMWAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyKHNlc3Npb24pIHtcbiAgICBjb25zdCB0cmFjZXIgPSBuZXcgTGFuZ0NoYWluVHJhY2VyVjEoKTtcbiAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZFNlc3Npb24oc2Vzc2lvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCB0cmFjZXIubG9hZERlZmF1bHRTZXNzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB0cmFjZXI7XG59XG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyYC4gSXQgZG9lcyBub3RcbiAqIGxvYWQgYW55IHNlc3Npb24gZGF0YS5cbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJgLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyKCkge1xuICAgIHJldHVybiBuZXcgTGFuZ0NoYWluVHJhY2VyKCk7XG59XG4iXSwibmFtZXMiOlsiTGFuZ0NoYWluVHJhY2VyIiwiTGFuZ0NoYWluVHJhY2VyVjEiLCJnZXRUcmFjaW5nQ2FsbGJhY2tIYW5kbGVyIiwic2Vzc2lvbiIsInRyYWNlciIsImxvYWRTZXNzaW9uIiwibG9hZERlZmF1bHRTZXNzaW9uIiwiZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_index_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk(token);\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0U7QUFDekI7QUFDcUI7QUFDTjtBQUN0RDs7Ozs7O0NBTUMsR0FDTSxNQUFNSTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxHQUFHLEdBQUdQLE9BQU9PLEdBQUcsSUFBSSxFQUFFO0lBQy9CO0lBQ0FDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE1BQU1GLE1BQU0sSUFBSSxDQUFDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTUYsR0FBRztRQUNyQyxNQUFNRyxTQUFTaEIsMkVBQVVBLENBQUMsQ0FBQyxHQUFHYTtRQUM5QixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSSxPQUFPO1lBQ2RKO1lBQ0FLLE9BQU9GLE1BQU0sQ0FBQ0EsT0FBT0csTUFBTSxHQUFHLEVBQUUsQ0FBQ0MsV0FBVztRQUNoRDtJQUNKO0FBQ0o7QUFDTyxNQUFNSCxlQUFlYjtJQUN4QkMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNNLEtBQUssR0FBR1osT0FBT1ksS0FBSztJQUM3QjtJQUNBSixPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLElBQUksQ0FBQ2tCLEtBQUssRUFBRUgsTUFBTUYs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Q2pELElBQUlvQyxFQUFFLENBQUM7UUFDMUMsSUFBSWlDLFlBQVk3RCxXQUFXO1lBQ3ZCO1FBQ0o7UUFDQSxvQkFBb0I7UUFDcEIsTUFBTW1FLGNBQWMzRSxJQUFJRyxNQUFNLENBQUN5RSxRQUFRLEtBQUtwRTtRQUM1QyxJQUFJcUU7UUFDSixJQUFJRixhQUFhO1lBQ2IsSUFBSS9ELHNCQUFzQjhELFFBQVEzQixRQUFRO2dCQUN0QzhCLHNCQUFzQkgsUUFBUTNCO1lBQ2xDLE9BQ0s7Z0JBQ0Q4QixzQkFBc0IsSUFBSWxHLDhEQUFjQSxDQUFDOEY7WUFDN0M7UUFDSixPQUNLO1lBQ0RJLHNCQUFzQko7UUFDMUI7UUFDQSxNQUFNM0UsUUFBUSxJQUFJbEIsWUFBWTtZQUMxQlMsS0FBSztnQkFDRDtvQkFDSThELElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLHNCQUFzQixDQUFDO29CQUM5Q2pGLE9BQU9xRjtnQkFDWDtnQkFDQTtvQkFDSXRCLElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLGtCQUFrQixDQUFDO29CQUMxQ2pGLE9BQU95RjtnQkFDWDthQUNIO1FBQ0w7UUFDQSxNQUFNLElBQUksQ0FBQ25ELE1BQU0sQ0FBQ3dCLEtBQUssQ0FBQ3BEO0lBQzVCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanM/MjlkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBseVBhdGNoLCB9IGZyb20gXCIuLi91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbi8qKlxuICogTGlzdCBvZiBqc29ucGF0Y2ggSlNPTlBhdGNoT3BlcmF0aW9ucywgd2hpY2ggZGVzY3JpYmUgaG93IHRvIGNyZWF0ZSB0aGUgcnVuIHN0YXRlXG4gKiBmcm9tIGFuIGVtcHR5IGRpY3QuIFRoaXMgaXMgdGhlIG1pbmltYWwgcmVwcmVzZW50YXRpb24gb2YgdGhlIGxvZywgZGVzaWduZWQgdG9cbiAqIGJlIHNlcmlhbGl6ZWQgYXMgSlNPTiBhbmQgc2VudCBvdmVyIHRoZSB3aXJlIHRvIHJlY29uc3RydWN0IHRoZSBsb2cgb24gdGhlIG90aGVyXG4gKiBzaWRlLiBSZWNvbnN0cnVjdGlvbiBvZiB0aGUgc3RhdGUgY2FuIGJlIGRvbmUgd2l0aCBhbnkganNvbnBhdGNoLWNvbXBsaWFudCBsaWJyYXJ5LFxuICogc2VlIGh0dHBzOi8vanNvbnBhdGNoLmNvbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BzID0gZmllbGRzLm9wcyA/PyBbXTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBvcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTG9nIGV4dGVuZHMgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0YXRlID0gZmllbGRzLnN0YXRlO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2godGhpcy5zdGF0ZSwgb3RoZXIub3BzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coeyBvcHMsIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50IH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJ1bkxvZ1BhdGNoKHBhdGNoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIHBhdGNoLm9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzOiBwYXRjaC5vcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IHN0YW5kYXJkaXplZCBpbnB1dHMgZnJvbSBhIHJ1bi5cbiAqXG4gKiBTdGFuZGFyZGl6ZXMgdGhlIGlucHV0cyBiYXNlZCBvbiB0aGUgdHlwZSBvZiB0aGUgcnVubmFibGUgdXNlZC5cbiAqXG4gKiBAcGFyYW0gcnVuIC0gUnVuIG9iamVjdFxuICogQHBhcmFtIHNjaGVtYUZvcm1hdCAtIFRoZSBzY2hlbWEgZm9ybWF0IHRvIHVzZS5cbiAqXG4gKiBAcmV0dXJucyBWYWxpZCBpbnB1dHMgYXJlIG9ubHkgZGljdC4gQnkgY29udmVudGlvbnMsIGlucHV0cyBhbHdheXMgcmVwcmVzZW50ZWRcbiAqIGludm9jYXRpb24gdXNpbmcgbmFtZWQgYXJndW1lbnRzLlxuICogQSBudWxsIG1lYW5zIHRoYXQgdGhlIGlucHV0IGlzIG5vdCB5ZXQga25vd24hXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCBzY2hlbWFGb3JtYXQpIHtcbiAgICBpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG8gbm90IGFzc2lnbiBpbnB1dHMgd2l0aCBvcmlnaW5hbCBzY2hlbWEgZHJvcCB0aGUga2V5IGZvciBub3cuIFwiICtcbiAgICAgICAgICAgIFwiV2hlbiBpbnB1dHMgYXJlIGFkZGVkIHRvIHN0cmVhbUxvZyB0aGV5IHNob3VsZCBiZSBhZGRlZCB3aXRoIFwiICtcbiAgICAgICAgICAgIFwic3RhbmRhcmRpemVkIHNjaGVtYSBmb3Igc3RyZWFtaW5nIGV2ZW50cy5cIik7XG4gICAgfVxuICAgIGNvbnN0IHsgaW5wdXRzIH0gPSBydW47XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dHM7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dHMpLmxlbmd0aCA9PT0gMSAmJiBpbnB1dHM/LmlucHV0ID09PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIG5ldyBzdHlsZSBjaGFpbnNcbiAgICAvLyBUaGVzZSBuZXN0IGFuIGFkZGl0aW9uYWwgJ2lucHV0JyBrZXkgaW5zaWRlIHRoZSAnaW5wdXRzJyB0byBtYWtlIHN1cmVcbiAgICAvLyB0aGUgaW5wdXQgaXMgYWx3YXlzIGEgZGljdC4gV2UgbmVlZCB0byB1bnBhY2sgYW5kIHVzZXIgdGhlIGlubmVyIHZhbHVlLlxuICAgIC8vIFdlIHNob3VsZCB0cnkgdG8gZml4IHRoaXMgaW4gUnVubmFibGVzIGFuZCBjYWxsYmFja3MvdHJhY2Vyc1xuICAgIC8vIFJ1bm5hYmxlcyBzaG91bGQgYmUgdXNpbmcgYSBudWxsIHR5cGUgaGVyZSBub3QgYSBwbGFjZWhvbGRlclxuICAgIC8vIGRpY3QuXG4gICAgcmV0dXJuIGlucHV0cy5pbnB1dDtcbn1cbmFzeW5jIGZ1bmN0aW9uIF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgY29uc3QgeyBvdXRwdXRzIH0gPSBydW47XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgb2xkIHNjaGVtYSwgd2l0aG91dCBzdGFuZGFyZGl6aW5nIGFueXRoaW5nXG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICBpZiAoW1wicmV0cmlldmVyXCIsIFwibGxtXCIsIFwicHJvbXB0XCJdLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIGhhY2t5IGNoZWNrXG4gICAgaWYgKG91dHB1dHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBPYmplY3Qua2V5cyhvdXRwdXRzKS5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgb3V0cHV0cz8ub3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG91dHB1dHMub3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0cztcbn1cbmZ1bmN0aW9uIGlzQ2hhdEdlbmVyYXRpb25DaHVuayh4KSB7XG4gICAgcmV0dXJuIHggIT09IHVuZGVmaW5lZCAmJiB4Lm1lc3NhZ2UgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ2xhc3MgdGhhdCBleHRlbmRzIHRoZSBgQmFzZVRyYWNlcmAgY2xhc3MgZnJvbSB0aGVcbiAqIGBsYW5nY2hhaW4uY2FsbGJhY2tzLnRyYWNlcnMuYmFzZWAgbW9kdWxlLiBJdCByZXByZXNlbnRzIGEgY2FsbGJhY2tcbiAqIGhhbmRsZXIgdGhhdCBsb2dzIHRoZSBleGVjdXRpb24gb2YgcnVucyBhbmQgZW1pdHMgYFJ1bkxvZ2AgaW5zdGFuY2VzIHRvIGFcbiAqIGBSdW5Mb2dTdHJlYW1gLlxuICovXG5leHBvcnQgY2xhc3MgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9DbG9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9zY2hlbWFGb3JtYXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwib3JpZ2luYWxcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9vdElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleU1hcEJ5UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb3VudGVyTWFwQnlSdW5OYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHJhbnNmb3JtU3RyZWFtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndyaXRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWNlaXZlU3RyZWFtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibG9nX3N0cmVhbV90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hdXRvQ2xvc2UgPSBmaWVsZHM/LmF1dG9DbG9zZSA/PyB0cnVlO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcz8uaW5jbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcz8uaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzPy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHM/LmV4Y2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHM/LmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcz8uZXhjbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuX3NjaGVtYUZvcm1hdCA9IGZpZWxkcz8uX3NjaGVtYUZvcm1hdCA/PyB0aGlzLl9zY2hlbWFGb3JtYXQ7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtU3RyZWFtID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuICAgICAgICB0aGlzLndyaXRlciA9IHRoaXMudHJhbnNmb3JtU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xuICAgICAgICB0aGlzLnJlY2VpdmVTdHJlYW0gPSBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbSh0aGlzLnRyYW5zZm9ybVN0cmVhbS5yZWFkYWJsZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVTdHJlYW07XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbGVnYWN5IG1ldGhvZCBvbmx5IGNhbGxlZCBvbmNlIGZvciBhbiBlbnRpcmUgcnVuIHRyZWVcbiAgICAgICAgLy8gYW5kIGlzIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICB9XG4gICAgX2luY2x1ZGVSdW4ocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgPT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVuVGFncyA9IHJ1bi50YWdzID8/IFtdO1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1bl90eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlIHx8XG4gICAgICAgICAgICAgICAgICAgIHJ1blRhZ3MuZmluZCgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1bl90eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIHJ1blRhZ3MuZXZlcnkoKHRhZykgPT4gIXRoaXMuZXhjbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgIH1cbiAgICBhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dCkge1xuICAgICAgICAvLyBUYXAgYW4gb3V0cHV0IGFzeW5jIGl0ZXJhdG9yIHRvIHN0cmVhbSBpdHMgdmFsdWVzIHRvIHRoZSBsb2cuXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0KSB7XG4gICAgICAgICAgICAvLyByb290IHJ1biBpcyBoYW5kbGVkIGluIC5zdHJlYW1Mb2coKVxuICAgICAgICAgICAgaWYgKHJ1bklkICE9PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGNhbid0IGZpbmQgdGhlIHJ1biBzaWxlbnRseSBpZ25vcmVcbiAgICAgICAgICAgICAgICAvLyBlZy4gYmVjYXVzZSB0aGlzIHJ1biB3YXNuJ3QgaW5jbHVkZWQgaW4gdGhlIGxvZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW5JZF07XG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7a2V5fS9zdHJlYW1lZF9vdXRwdXQvLWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBpZiAodGhpcy5yb290SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yb290SWQgPSBydW4uaWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXQ6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsX291dHB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ3M6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faW5jbHVkZVJ1bihydW4pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSArPSAxO1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV07XG4gICAgICAgIHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdID1cbiAgICAgICAgICAgIGNvdW50ID09PSAxID8gcnVuLm5hbWUgOiBgJHtydW4ubmFtZX06JHtjb3VudH1gO1xuICAgICAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBzdGFydF90aW1lOiBuZXcgRGF0ZShydW4uc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXRfc3RyOiBbXSxcbiAgICAgICAgICAgIGZpbmFsX291dHB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kX3RpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuX3NjaGVtYUZvcm1hdCA9PT0gXCJzdHJlYW1pbmdfZXZlbnRzXCIpIHtcbiAgICAgICAgICAgIGxvZ0VudHJ5LmlucHV0cyA9IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHt0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXX1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbG9nRW50cnksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBydW5OYW1lID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF07XG4gICAgICAgICAgICBpZiAocnVuTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3BzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9pbnB1dHNgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vZmluYWxfb3V0cHV0YCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocnVuLmVuZF90aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9lbmRfdGltZWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7IG9wcyB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChydW4uaWQgPT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogXCIvZmluYWxfb3V0cHV0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvbkxMTU5ld1Rva2VuKHJ1biwgdG9rZW4sIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW5OYW1lID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF07XG4gICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgaGFja1xuICAgICAgICBjb25zdCBpc0NoYXRNb2RlbCA9IHJ1bi5pbnB1dHMubWVzc2FnZXMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0cmVhbWVkT3V0cHV0VmFsdWU7XG4gICAgICAgIGlmIChpc0NoYXRNb2RlbCkge1xuICAgICAgICAgICAgaWYgKGlzQ2hhdEdlbmVyYXRpb25DaHVuayhrd2FyZ3M/LmNodW5rKSkge1xuICAgICAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSBrd2FyZ3M/LmNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IG5ldyBBSU1lc3NhZ2VDaHVuayh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0X3N0ci8tYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRva2VuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RyZWFtZWRPdXRwdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYXBwbHlQYXRjaCIsIkJhc2VUcmFjZXIiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiQUlNZXNzYWdlQ2h1bmsiLCJSdW5Mb2dQYXRjaCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm9wcyIsImNvbmNhdCIsIm90aGVyIiwic3RhdGVzIiwiUnVuTG9nIiwic3RhdGUiLCJsZW5ndGgiLCJuZXdEb2N1bWVudCIsImZyb21SdW5Mb2dQYXRjaCIsInBhdGNoIiwiX2dldFN0YW5kYXJkaXplZElucHV0cyIsInJ1biIsInNjaGVtYUZvcm1hdCIsIkVycm9yIiwiaW5wdXRzIiwiaW5jbHVkZXMiLCJydW5fdHlwZSIsImtleXMiLCJpbnB1dCIsInVuZGVmaW5lZCIsIl9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzIiwib3V0cHV0cyIsIm91dHB1dCIsImlzQ2hhdEdlbmVyYXRpb25DaHVuayIsIngiLCJtZXNzYWdlIiwiTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsIl9zY2hlbWFGb3JtYXQiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsImlkIiwicm9vdElkIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwibmFtZSIsImZpbmQiLCJ0YWciLCJldmVyeSIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJjaHVuayIsImtleSIsImtleU1hcEJ5UnVuSWQiLCJ3cml0ZSIsIm9wIiwicGF0aCIsIm9uUnVuQ3JlYXRlIiwidHlwZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImxvZ3MiLCJjb3VudGVyTWFwQnlSdW5OYW1lIiwiY291bnQiLCJsb2dFbnRyeSIsIm1ldGFkYXRhIiwiZXh0cmEiLCJzdGFydF90aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3RyZWFtZWRfb3V0cHV0X3N0ciIsImVuZF90aW1lIiwib25SdW5VcGRhdGUiLCJydW5OYW1lIiwicHVzaCIsImNsb3NlIiwib25MTE1OZXdUb2tlbiIsInRva2VuIiwia3dhcmdzIiwiaXNDaGF0TW9kZWwiLCJtZXNzYWdlcyIsInN0cmVhbWVkT3V0cHV0VmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDO0FBQ2hDLE1BQU1DLDRCQUE0QkQsZ0RBQVVBO0lBQy9DRSxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxDQUFFO1FBQzlDLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSw0QkFBNEIsR0FDNUJMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVCxNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDVSxVQUFVLEdBQUdUO1FBQ2xCLElBQUksQ0FBQ1UsUUFBUSxHQUFHVDtRQUNoQixJQUFJLENBQUNVLFVBQVUsR0FBR1Q7SUFDdEI7SUFDQTs7OztLQUlDLEdBQ0RVLFdBQVdDLENBQUMsRUFBRTtRQUNWLE9BQU9DLFFBQVFDLE9BQU87SUFDMUI7SUFDQSxNQUFNQyxZQUFZQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxJQUFJLENBQUNDLE1BQU0sRUFBRTtZQUNiO1FBQ0o7UUFDQSxJQUFJLENBQUNBLE1BQU0sR0FBR0QsSUFBSUUsRUFBRTtRQUNwQixJQUFJLElBQUksQ0FBQ1YsVUFBVSxFQUFFO1lBQ2pCLElBQUksSUFBSSxDQUFDQSxVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUM5QixNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUTtZQUMxQixPQUNLLElBQUksSUFBSSxDQUFDUixVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUNuQyxNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUSxLQUFLLElBQUksQ0FBQ2xCLE1BQU07WUFDMUM7UUFDSjtJQUNKO0lBQ0EsTUFBTXNCLFlBQVlKLEdBQUcsRUFBRTtRQUNuQixJQUFJQSxJQUFJRSxFQUFFLEtBQUssSUFBSSxDQUFDRCxNQUFNLEVBQUU7WUFDeEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsSUFBSUssS0FBSyxFQUFFO1lBQ1osSUFBSSxJQUFJLENBQUNaLFFBQVEsRUFBRTtnQkFDZixJQUFJLElBQUksQ0FBQ0EsUUFBUSxDQUFDVSxNQUFNLEtBQUssR0FBRztvQkFDNUIsTUFBTSxJQUFJLENBQUNWLFFBQVEsQ0FBQ087Z0JBQ3hCLE9BQ0ssSUFBSSxJQUFJLENBQUNQLFFBQVEsQ0FBQ1UsTUFBTSxLQUFLLEdBQUc7b0JBQ2pDLE1BQU0sSUFBSSxDQUFDVixRQUFRLENBQUNPLEtBQUssSUFBSSxDQUFDbEIsTUFBTTtnQkFDeEM7WUFDSjtRQUNKLE9BQ0ssSUFBSSxJQUFJLENBQUNZLFVBQVUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQ0EsVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDOUIsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ007WUFDMUIsT0FDSyxJQUFJLElBQUksQ0FBQ04sVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDbkMsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ00sS0FBSyxJQUFJLENBQUNsQixNQUFNO1lBQzFDO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzPzBkNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBSb290TGlzdGVuZXJzVHJhY2VyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoeyBjb25maWcsIG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiUm9vdExpc3RlbmVyc1RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIFJ1bidzIElELiBUeXBlIFVVSUQgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9vdElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPblN0YXJ0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uRXJyb3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuYXJnT25TdGFydCA9IG9uU3RhcnQ7XG4gICAgICAgIHRoaXMuYXJnT25FbmQgPSBvbkVuZDtcbiAgICAgICAgdGhpcy5hcmdPbkVycm9yID0gb25FcnJvcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIGxlZ2FjeSBtZXRob2Qgb25seSBjYWxsZWQgb25jZSBmb3IgYW4gZW50aXJlIHJ1biB0cmVlXG4gICAgICogdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgICAqIEBwYXJhbSB7UnVufSBfIE5vdCB1c2VkXG4gICAgICovXG4gICAgcGVyc2lzdFJ1bihfKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm9vdElkID0gcnVuLmlkO1xuICAgICAgICBpZiAodGhpcy5hcmdPblN0YXJ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPblN0YXJ0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25TdGFydChydW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPblN0YXJ0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25TdGFydChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCAhPT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJ1bi5lcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVuZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRW5kLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRW5kKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRXJyb3IubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVycm9yKHJ1bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uRXJyb3IubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVycm9yKHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFjZXIiLCJSb290TGlzdGVuZXJzVHJhY2VyIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJvblN0YXJ0Iiwib25FbmQiLCJvbkVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFyZ09uU3RhcnQiLCJhcmdPbkVuZCIsImFyZ09uRXJyb3IiLCJwZXJzaXN0UnVuIiwiXyIsIlByb21pc2UiLCJyZXNvbHZlIiwib25SdW5DcmVhdGUiLCJydW4iLCJyb290SWQiLCJpZCIsImxlbmd0aCIsIm9uUnVuVXBkYXRlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUM7QUFDNkM7QUFDekM7QUFDaEMsTUFBTUksd0JBQXdCRCxnREFBVUE7SUFDM0NFLFlBQVlDLFNBQVMsQ0FBQyxDQUFDLENBQUU7UUFDckIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sRUFBRSxHQUFHVDtRQUMzQyxJQUFJLENBQUNRLFdBQVcsR0FDWkEsZUFDSWIscUVBQXNCQSxDQUFDLHdCQUN2QkEscUVBQXNCQSxDQUFDO1FBQy9CLElBQUksQ0FBQ1ksU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNFLE1BQU0sR0FBR0EsVUFBVSxJQUFJZiw2Q0FBTUEsQ0FBQyxDQUFDO0lBQ3hDO0lBQ0EsTUFBTWdCLGlCQUFpQkMsR0FBRyxFQUFFQyxhQUFhQyxTQUFTLEVBQUU7UUFDaEQsT0FBTztZQUNILEdBQUdGLEdBQUc7WUFDTkcsT0FBTztnQkFDSCxHQUFHSCxJQUFJRyxLQUFLO2dCQUNaQyxTQUFTLE1BQU1uQixvRUFBcUJBO1lBQ3hDO1lBQ0FvQixZQUFZSDtZQUNaSSxjQUFjLElBQUksQ0FBQ1QsV0FBVztZQUM5QlUsc0JBQXNCUCxJQUFJUSxhQUFhLEdBQUdOLFlBQVlEO1FBQzFEO0lBQ0o7SUFDQSxNQUFNUSxXQUFXQyxJQUFJLEVBQUUsQ0FBRTtJQUN6QixNQUFNQyxZQUFZWCxHQUFHLEVBQUU7UUFDbkIsTUFBTVksZUFBZSxNQUFNLElBQUksQ0FBQ2IsZ0JBQWdCLENBQUNDLEtBQUssSUFBSSxDQUFDSixTQUFTO1FBQ3BFLE1BQU0sSUFBSSxDQUFDRSxNQUFNLENBQUNlLFNBQVMsQ0FBQ0Q7SUFDaEM7SUFDQSxNQUFNRSxZQUFZZCxHQUFHLEVBQUU7UUFDbkIsTUFBTWUsWUFBWTtZQUNkQyxVQUFVaEIsSUFBSWdCLFFBQVE7WUFDdEJDLE9BQU9qQixJQUFJaUIsS0FBSztZQUNoQkMsU0FBU2xCLElBQUlrQixPQUFPO1lBQ3BCQyxRQUFRbkIsSUFBSW1CLE1BQU07WUFDbEJDLFFBQVFwQixJQUFJb0IsTUFBTTtZQUNsQkMsVUFBVXJCLElBQUlxQixRQUFRO1lBQ3RCQyxjQUFjdEIsSUFBSXNCLFlBQVk7WUFDOUJkLGVBQWVSLElBQUlRLGFBQWE7UUFDcEM7UUFDQSxNQUFNLElBQUksQ0FBQ1YsTUFBTSxDQUFDeUIsU0FBUyxDQUFDdkIsSUFBSXdCLEVBQUUsRUFBRVQ7SUFDeEM7SUFDQVUsT0FBT0QsRUFBRSxFQUFFO1FBQ1AsT0FBTyxJQUFJLENBQUNFLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDSDtJQUMzQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzPzRkODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcImxhbmdzbWl0aFwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSwgZ2V0UnVudGltZUVudmlyb25tZW50IH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMgPSB7fSkge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxhbmdjaGFpbl90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvamVjdE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZUlkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IGV4YW1wbGVJZCwgcHJvamVjdE5hbWUsIGNsaWVudCB9ID0gZmllbGRzO1xuICAgICAgICB0aGlzLnByb2plY3ROYW1lID1cbiAgICAgICAgICAgIHByb2plY3ROYW1lID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9QUk9KRUNUXCIpID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9TRVNTSU9OXCIpO1xuICAgICAgICB0aGlzLmV4YW1wbGVJZCA9IGV4YW1wbGVJZDtcbiAgICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQgPz8gbmV3IENsaWVudCh7fSk7XG4gICAgfVxuICAgIGFzeW5jIF9jb252ZXJ0VG9DcmVhdGUocnVuLCBleGFtcGxlX2lkID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ydW4sXG4gICAgICAgICAgICBleHRyYToge1xuICAgICAgICAgICAgICAgIC4uLnJ1bi5leHRyYSxcbiAgICAgICAgICAgICAgICBydW50aW1lOiBhd2FpdCBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZXNzaW9uX25hbWU6IHRoaXMucHJvamVjdE5hbWUsXG4gICAgICAgICAgICByZWZlcmVuY2VfZXhhbXBsZV9pZDogcnVuLnBhcmVudF9ydW5faWQgPyB1bmRlZmluZWQgOiBleGFtcGxlX2lkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKF9ydW4pIHsgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBjb25zdCBwZXJzaXN0ZWRSdW4gPSBhd2FpdCB0aGlzLl9jb252ZXJ0VG9DcmVhdGUocnVuLCB0aGlzLmV4YW1wbGVJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmNyZWF0ZVJ1bihwZXJzaXN0ZWRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcnVuVXBkYXRlID0ge1xuICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgIGVycm9yOiBydW4uZXJyb3IsXG4gICAgICAgICAgICBvdXRwdXRzOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIGV2ZW50czogcnVuLmV2ZW50cyxcbiAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgICAgIHRyYWNlX2lkOiBydW4udHJhY2VfaWQsXG4gICAgICAgICAgICBkb3R0ZWRfb3JkZXI6IHJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBydW4ucGFyZW50X3J1bl9pZCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQudXBkYXRlUnVuKHJ1bi5pZCwgcnVuVXBkYXRlKTtcbiAgICB9XG4gICAgZ2V0UnVuKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bk1hcC5nZXQoaWQpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDbGllbnQiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwiQmFzZVRyYWNlciIsIkxhbmdDaGFpblRyYWNlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImV4YW1wbGVJZCIsInByb2plY3ROYW1lIiwiY2xpZW50IiwiX2NvbnZlcnRUb0NyZWF0ZSIsInJ1biIsImV4YW1wbGVfaWQiLCJ1bmRlZmluZWQiLCJleHRyYSIsInJ1bnRpbWUiLCJjaGlsZF9ydW5zIiwic2Vzc2lvbl9uYW1lIiwicmVmZXJlbmNlX2V4YW1wbGVfaWQiLCJwYXJlbnRfcnVuX2lkIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJvblJ1bkNyZWF0ZSIsInBlcnNpc3RlZFJ1biIsImNyZWF0ZVJ1biIsIm9uUnVuVXBkYXRlIiwicnVuVXBkYXRlIiwiZW5kX3RpbWUiLCJlcnJvciIsIm91dHB1dHMiLCJldmVudHMiLCJpbnB1dHMiLCJ0cmFjZV9pZCIsImRvdHRlZF9vcmRlciIsInVwZGF0ZVJ1biIsImlkIiwiZ2V0UnVuIiwicnVuTWFwIiwiZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracerV1: () => (/* binding */ LangChainTracerV1)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n/** @deprecated Use LangChainTracer instead. */ class LangChainTracerV1 extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? await this.loadDefaultSession();\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map((x)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs\n            };\n            runResult = llmRun;\n        } else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = chainRun;\n        } else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = toolRun;\n        } else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        } else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        } else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        } else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = await response.json();\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluX3YxLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFDRTtBQUNsQjtBQUN2Qyw2Q0FBNkMsR0FDdEMsTUFBTUcsMEJBQTBCRCxnREFBVUE7SUFDN0NFLGFBQWM7UUFDVixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1QscUVBQXNCQSxDQUFDLHlCQUF5QjtRQUMzRDtRQUNBSSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQ0gsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxNQUFNQyxTQUFTVixxRUFBc0JBLENBQUM7UUFDdEMsSUFBSVUsUUFBUTtZQUNSLElBQUksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksR0FBR0Q7UUFDaEM7SUFDSjtJQUNBLE1BQU1FLFdBQVdDLFdBQVcsRUFBRTtRQUMxQixNQUFNQyxnQkFBZ0I7WUFDbEJDLFlBQVlDLEtBQUtDLEdBQUc7WUFDcEJDLE1BQU1MO1FBQ1Y7UUFDQSxNQUFNTSxVQUFVLE1BQU0sSUFBSSxDQUFDQyxjQUFjLENBQUNOO1FBQzFDLElBQUksQ0FBQ0ssT0FBTyxHQUFHQTtRQUNmLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRSxZQUFZUixXQUFXLEVBQUU7UUFDM0IsTUFBTVMsV0FBVyxDQUFDLEVBQUUsSUFBSSxDQUFDQSxRQUFRLENBQUMsZUFBZSxFQUFFVCxZQUFZLENBQUM7UUFDaEUsT0FBTyxJQUFJLENBQUNVLHNCQUFzQixDQUFDRDtJQUN2QztJQUNBLE1BQU1FLHFCQUFxQjtRQUN2QixNQUFNRixXQUFXLENBQUMsRUFBRSxJQUFJLENBQUNBLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQztRQUN6RCxPQUFPLElBQUksQ0FBQ0Msc0JBQXNCLENBQUNEO0lBQ3ZDO0lBQ0EsTUFBTUcsa0JBQWtCQyxHQUFHLEVBQUU7UUFDekIsTUFBTVAsVUFBVSxJQUFJLENBQUNBLE9BQU8sSUFBSyxNQUFNLElBQUksQ0FBQ0ssa0JBQWtCO1FBQzlELE1BQU1HLGFBQWFELElBQUlDLFVBQVU7UUFDakMsSUFBSUM7UUFDSixJQUFJRixJQUFJRyxRQUFRLEtBQUssT0FBTztZQUN4QixNQUFNQyxVQUFVSixJQUFJSyxNQUFNLENBQUNELE9BQU8sR0FDNUJKLElBQUlLLE1BQU0sQ0FBQ0QsT0FBTyxHQUNsQkosSUFBSUssTUFBTSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxJQUFNbkMsbUVBQWVBLENBQUNtQztZQUNyRCxNQUFNQyxTQUFTO2dCQUNYQyxNQUFNVixJQUFJVyxFQUFFO2dCQUNadEIsWUFBWVcsSUFBSVgsVUFBVTtnQkFDMUJ1QixVQUFVWixJQUFJWSxRQUFRO2dCQUN0QkMsaUJBQWlCYixJQUFJYSxlQUFlO2dCQUNwQ0MsdUJBQXVCZCxJQUFJYyxxQkFBcUI7Z0JBQ2hEYjtnQkFDQWMsTUFBTWYsSUFBSUcsUUFBUTtnQkFDbEJhLFlBQVl2QixRQUFRa0IsRUFBRTtnQkFDdEJQO2dCQUNBYSxVQUFVakIsSUFBSWtCLE9BQU87WUFDekI7WUFDQWhCLFlBQVlPO1FBQ2hCLE9BQ0ssSUFBSVQsSUFBSUcsUUFBUSxLQUFLLFNBQVM7WUFDL0IsTUFBTWdCLGFBQWEsTUFBTUMsUUFBUUMsR0FBRyxDQUFDckIsSUFBSW1CLFVBQVUsQ0FBQ1osR0FBRyxDQUFDLENBQUNlLFlBQWMsSUFBSSxDQUFDdkIsaUJBQWlCLENBQUN1QjtZQUM5RixNQUFNQyxXQUFXO2dCQUNiYixNQUFNVixJQUFJVyxFQUFFO2dCQUNadEIsWUFBWVcsSUFBSVgsVUFBVTtnQkFDMUJ1QixVQUFVWixJQUFJWSxRQUFRO2dCQUN0QkMsaUJBQWlCYixJQUFJYSxlQUFlO2dCQUNwQ0MsdUJBQXVCZCxJQUFJYyxxQkFBcUI7Z0JBQ2hEYjtnQkFDQWMsTUFBTWYsSUFBSUcsUUFBUTtnQkFDbEJhLFlBQVl2QixRQUFRa0IsRUFBRTtnQkFDdEJOLFFBQVFMLElBQUlLLE1BQU07Z0JBQ2xCYSxTQUFTbEIsSUFBSWtCLE9BQU87Z0JBQ3BCTSxnQkFBZ0JMLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7Z0JBQ3BFVyxrQkFBa0JQLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7Z0JBQ3RFWSxpQkFBaUJSLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7WUFDekU7WUFDQWIsWUFBWXFCO1FBQ2hCLE9BQ0ssSUFBSXZCLElBQUlHLFFBQVEsS0FBSyxRQUFRO1lBQzlCLE1BQU1nQixhQUFhLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ3JCLElBQUltQixVQUFVLENBQUNaLEdBQUcsQ0FBQyxDQUFDZSxZQUFjLElBQUksQ0FBQ3ZCLGlCQUFpQixDQUFDdUI7WUFDOUYsTUFBTU0sVUFBVTtnQkFDWmxCLE1BQU1WLElBQUlXLEVBQUU7Z0JBQ1p0QixZQUFZVyxJQUFJWCxVQUFVO2dCQUMxQnVCLFVBQVVaLElBQUlZLFFBQVE7Z0JBQ3RCQyxpQkFBaUJiLElBQUlhLGVBQWU7Z0JBQ3BDQyx1QkFBdUJkLElBQUljLHFCQUFxQjtnQkFDaERiO2dCQUNBYyxNQUFNZixJQUFJRyxRQUFRO2dCQUNsQmEsWUFBWXZCLFFBQVFrQixFQUFFO2dCQUN0QmtCLFlBQVk3QixJQUFJSyxNQUFNLENBQUN5QixLQUFLO2dCQUM1QkMsUUFBUS9CLElBQUlrQixPQUFPLEVBQUVhO2dCQUNyQkMsUUFBUUMsS0FBS0MsU0FBUyxDQUFDakM7Z0JBQ3ZCdUIsZ0JBQWdCTCxXQUFXTSxNQUFNLENBQUMsQ0FBQ0gsWUFBY0EsVUFBVVAsSUFBSSxLQUFLO2dCQUNwRVcsa0JBQWtCUCxXQUFXTSxNQUFNLENBQUMsQ0FBQ0gsWUFBY0EsVUFBVVAsSUFBSSxLQUFLO2dCQUN0RVksaUJBQWlCUixXQUFXTSxNQUFNLENBQUMsQ0FBQ0gsWUFBY0EsVUFBVVAsSUFBSSxLQUFLO1lBQ3pFO1lBQ0FiLFlBQVkwQjtRQUNoQixPQUNLO1lBQ0QsTUFBTSxJQUFJTyxNQUFNLENBQUMsa0JBQWtCLEVBQUVuQyxJQUFJRyxRQUFRLENBQUMsQ0FBQztRQUN2RDtRQUNBLE9BQU9EO0lBQ1g7SUFDQSxNQUFNa0MsV0FBV3BDLEdBQUcsRUFBRTtRQUNsQixJQUFJSjtRQUNKLElBQUl5QztRQUNKLElBQUlyQyxJQUFJRyxRQUFRLEtBQUttQyxXQUFXO1lBQzVCRCxRQUFRLE1BQU0sSUFBSSxDQUFDdEMsaUJBQWlCLENBQUNDO1FBQ3pDLE9BQ0s7WUFDRHFDLFFBQVFyQztRQUNaO1FBQ0EsSUFBSXFDLE1BQU10QixJQUFJLEtBQUssT0FBTztZQUN0Qm5CLFdBQVcsQ0FBQyxFQUFFLElBQUksQ0FBQ0EsUUFBUSxDQUFDLFNBQVMsQ0FBQztRQUMxQyxPQUNLLElBQUl5QyxNQUFNdEIsSUFBSSxLQUFLLFNBQVM7WUFDN0JuQixXQUFXLENBQUMsRUFBRSxJQUFJLENBQUNBLFFBQVEsQ0FBQyxXQUFXLENBQUM7UUFDNUMsT0FDSztZQUNEQSxXQUFXLENBQUMsRUFBRSxJQUFJLENBQUNBLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFDM0M7UUFDQSxNQUFNcUIsV0FBVyxNQUFNc0IsTUFBTTNDLFVBQVU7WUFDbkM0QyxRQUFRO1lBQ1J2RCxTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQndELE1BQU1SLEtBQUtDLFNBQVMsQ0FBQ0c7UUFDekI7UUFDQSxJQUFJLENBQUNwQixTQUFTeUIsRUFBRSxFQUFFO1lBQ2RDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLHVCQUF1QixFQUFFM0IsU0FBUzRCLE1BQU0sQ0FBQyxDQUFDLEVBQUU1QixTQUFTNkIsVUFBVSxDQUFDLENBQUM7UUFDcEY7SUFDSjtJQUNBLE1BQU1wRCxlQUFlTixhQUFhLEVBQUU7UUFDaEMsTUFBTVEsV0FBVyxDQUFDLEVBQUUsSUFBSSxDQUFDQSxRQUFRLENBQUMsU0FBUyxDQUFDO1FBQzVDLE1BQU1xQixXQUFXLE1BQU1zQixNQUFNM0MsVUFBVTtZQUNuQzRDLFFBQVE7WUFDUnZELFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCd0QsTUFBTVIsS0FBS0MsU0FBUyxDQUFDOUM7UUFDekI7UUFDQSxJQUFJLENBQUM2QixTQUFTeUIsRUFBRSxFQUFFO1lBQ2RDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFM0IsU0FBUzRCLE1BQU0sQ0FBQyxDQUFDLEVBQUU1QixTQUFTNkIsVUFBVSxDQUFDLHdCQUF3QixDQUFDO1lBQzVHLE9BQU87Z0JBQ0huQyxJQUFJO2dCQUNKLEdBQUd2QixhQUFhO1lBQ3BCO1FBQ0o7UUFDQSxPQUFPO1lBQ0h1QixJQUFJLENBQUMsTUFBTU0sU0FBUzhCLElBQUksRUFBQyxFQUFHcEMsRUFBRTtZQUM5QixHQUFHdkIsYUFBYTtRQUNwQjtJQUNKO0lBQ0EsTUFBTVMsdUJBQXVCRCxRQUFRLEVBQUU7UUFDbkMsTUFBTXFCLFdBQVcsTUFBTXNCLE1BQU0zQyxVQUFVO1lBQ25DNEMsUUFBUTtZQUNSdkQsU0FBUyxJQUFJLENBQUNBLE9BQU87UUFDekI7UUFDQSxJQUFJK0Q7UUFDSixJQUFJLENBQUMvQixTQUFTeUIsRUFBRSxFQUFFO1lBQ2RDLFFBQVFDLEtBQUssQ0FBQyxDQUFDLHdCQUF3QixFQUFFM0IsU0FBUzRCLE1BQU0sQ0FBQyxDQUFDLEVBQUU1QixTQUFTNkIsVUFBVSxDQUFDLENBQUM7WUFDakZFLGdCQUFnQjtnQkFDWnJDLElBQUk7Z0JBQ0p0QixZQUFZQyxLQUFLQyxHQUFHO1lBQ3hCO1lBQ0EsSUFBSSxDQUFDRSxPQUFPLEdBQUd1RDtZQUNmLE9BQU9BO1FBQ1g7UUFDQSxNQUFNQyxPQUFRLE1BQU1oQyxTQUFTOEIsSUFBSTtRQUNqQyxJQUFJRSxLQUFLQyxNQUFNLEtBQUssR0FBRztZQUNuQkYsZ0JBQWdCO2dCQUNackMsSUFBSTtnQkFDSnRCLFlBQVlDLEtBQUtDLEdBQUc7WUFDeEI7WUFDQSxJQUFJLENBQUNFLE9BQU8sR0FBR3VEO1lBQ2YsT0FBT0E7UUFDWDtRQUNBLENBQUNBLGNBQWMsR0FBR0M7UUFDbEIsSUFBSSxDQUFDeEQsT0FBTyxHQUFHdUQ7UUFDZixPQUFPQTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW5fdjEuanM/ZDQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqIEBkZXByZWNhdGVkIFVzZSBMYW5nQ2hhaW5UcmFjZXIgaW5zdGVhZC4gKi9cbmV4cG9ydCBjbGFzcyBMYW5nQ2hhaW5UcmFjZXJWMSBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImxhbmdjaGFpbl90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kcG9pbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fRU5EUE9JTlRcIikgfHwgXCJodHRwOi8vbG9jYWxob3N0OjE5ODRcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVhZGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2Vzc2lvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0FQSV9LRVlcIik7XG4gICAgICAgIGlmIChhcGlLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc1tcIngtYXBpLWtleVwiXSA9IGFwaUtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXdTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25DcmVhdGUgPSB7XG4gICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmFtZTogc2Vzc2lvbk5hbWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLnBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgYXN5bmMgbG9hZFNlc3Npb24oc2Vzc2lvbk5hbWUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPSR7c2Vzc2lvbk5hbWV9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWREZWZhdWx0U2Vzc2lvbigpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9ucz9uYW1lPWRlZmF1bHRgO1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KTtcbiAgICB9XG4gICAgYXN5bmMgY29udmVydFYyUnVuVG9SdW4ocnVuKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb24gPz8gKGF3YWl0IHRoaXMubG9hZERlZmF1bHRTZXNzaW9uKCkpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gcnVuLnNlcmlhbGl6ZWQ7XG4gICAgICAgIGxldCBydW5SZXN1bHQ7XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdHMgPSBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA/IHJ1bi5pbnB1dHMucHJvbXB0c1xuICAgICAgICAgICAgICAgIDogcnVuLmlucHV0cy5tZXNzYWdlcy5tYXAoKHgpID0+IGdldEJ1ZmZlclN0cmluZyh4KSk7XG4gICAgICAgICAgICBjb25zdCBsbG1SdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHByb21wdHMsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGxsbVJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4ucnVuX3R5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IGNoYWluUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gY2hhaW5SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRfcnVucyA9IGF3YWl0IFByb21pc2UuYWxsKHJ1bi5jaGlsZF9ydW5zLm1hcCgoY2hpbGRfcnVuKSA9PiB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKGNoaWxkX3J1bikpKTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xSdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIHRvb2xfaW5wdXQ6IHJ1bi5pbnB1dHMuaW5wdXQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBydW4ub3V0cHV0cz8ub3V0cHV0LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZCksXG4gICAgICAgICAgICAgICAgY2hpbGRfbGxtX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImxsbVwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9jaGFpbl9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJjaGFpblwiKSxcbiAgICAgICAgICAgICAgICBjaGlsZF90b29sX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcInRvb2xcIiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gdG9vbFJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBydW4gdHlwZTogJHtydW4ucnVuX3R5cGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1blJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihydW4pIHtcbiAgICAgICAgbGV0IGVuZHBvaW50O1xuICAgICAgICBsZXQgdjFSdW47XG4gICAgICAgIGlmIChydW4ucnVuX3R5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdjFSdW4gPSBhd2FpdCB0aGlzLmNvbnZlcnRWMlJ1blRvUnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2MVJ1biA9IHJ1bjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodjFSdW4udHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9sbG0tcnVuc2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodjFSdW4udHlwZSA9PT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L2NoYWluLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS90b29sLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2MVJ1biksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGVyc2lzdCBydW46ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFNlc3Npb24oc2Vzc2lvbkNyZWF0ZSkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Nlc3Npb25zYDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlc3Npb25DcmVhdGUpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3Qgc2Vzc2lvbjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH0sIHVzaW5nIGRlZmF1bHQgc2Vzc2lvbi5gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgLi4uc2Vzc2lvbkNyZWF0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiAoYXdhaXQgcmVzcG9uc2UuanNvbigpKS5pZCxcbiAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHRyYWNlclNlc3Npb247XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3AgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcbiAgICAgICAgaWYgKHJlc3AubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0cmFjZXJTZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIFt0cmFjZXJTZXNzaW9uXSA9IHJlc3A7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgIHJldHVybiB0cmFjZXJTZXNzaW9uO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRCdWZmZXJTdHJpbmciLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZVRyYWNlciIsIkxhbmdDaGFpblRyYWNlclYxIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXBpS2V5IiwiaGVhZGVycyIsIm5ld1Nlc3Npb24iLCJzZXNzaW9uTmFtZSIsInNlc3Npb25DcmVhdGUiLCJzdGFydF90aW1lIiwiRGF0ZSIsIm5vdyIsIm5hbWUiLCJzZXNzaW9uIiwicGVyc2lzdFNlc3Npb24iLCJsb2FkU2Vzc2lvbiIsImVuZHBvaW50IiwiX2hhbmRsZVNlc3Npb25SZXNwb25zZSIsImxvYWREZWZhdWx0U2Vzc2lvbiIsImNvbnZlcnRWMlJ1blRvUnVuIiwicnVuIiwic2VyaWFsaXplZCIsInJ1blJlc3VsdCIsInJ1bl90eXBlIiwicHJvbXB0cyIsImlucHV0cyIsIm1lc3NhZ2VzIiwibWFwIiwieCIsImxsbVJ1biIsInV1aWQiLCJpZCIsImVuZF90aW1lIiwiZXhlY3V0aW9uX29yZGVyIiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwidHlwZSIsInNlc3Npb25faWQiLCJyZXNwb25zZSIsIm91dHB1dHMiLCJjaGlsZF9ydW5zIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkX3J1biIsImNoYWluUnVuIiwiY2hpbGRfbGxtX3J1bnMiLCJmaWx0ZXIiLCJjaGlsZF9jaGFpbl9ydW5zIiwiY2hpbGRfdG9vbF9ydW5zIiwidG9vbFJ1biIsInRvb2xfaW5wdXQiLCJpbnB1dCIsIm91dHB1dCIsImFjdGlvbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJFcnJvciIsInBlcnNpc3RSdW4iLCJ2MVJ1biIsInVuZGVmaW5lZCIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIm9rIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImpzb24iLCJ0cmFjZXJTZXNzaW9uIiwicmVzcCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUNHO0FBQ2hDLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELDhEQUE4RDtBQUM5RCxNQUFNQyw4QkFBOEIsQ0FBQ0M7SUFDakMsSUFBSUEsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsYUFDekJGLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGlCQUN6QkYsTUFBTUcsSUFBSSxLQUFLLGNBQWM7UUFDN0IsTUFBTUg7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPSSxTQUFTLGdCQUFnQjtRQUNoQyxNQUFNSjtJQUNWO0lBQ0EsTUFBTUssU0FDTiw4REFBOEQ7SUFDOURMLE9BQU9NLFVBQVVELFVBQVVMLE9BQU9LO0lBQ2xDLElBQUlBLFVBQVVQLGdCQUFnQlMsUUFBUSxDQUFDLENBQUNGLFNBQVM7UUFDN0MsTUFBTUw7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPQSxPQUFPSSxTQUFTLHNCQUFzQjtRQUM3QyxNQUFNSSxNQUFNLElBQUlDLE1BQU1ULE9BQU9DO1FBQzdCTyxJQUFJTCxJQUFJLEdBQUc7UUFDWCxNQUFNSztJQUNWO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxPQUFPTyxjQUFjLElBQUlDO1FBQy9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHVCxPQUFPUyxVQUFVLElBQUk7UUFDdkMsSUFBSSxDQUFDQyxlQUFlLEdBQ2hCVixPQUFPVSxlQUFlLElBQUl2QjtRQUM5QixNQUFNd0IsU0FBUyxLQUFzQjFCLEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7UUFDckUsSUFBSSxDQUFDNEIsS0FBSyxHQUFHLElBQUlGLE9BQU87WUFBRUcsYUFBYSxJQUFJLENBQUNQLGNBQWM7UUFBQztJQUMvRDtJQUNBLDhEQUE4RDtJQUM5RFEsS0FBS0MsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxHQUFHLENBQUMsSUFBTWxDLG9DQUFNQSxDQUFDLElBQU1nQyxZQUFZQyxNQUFNRSxLQUFLLENBQUMsQ0FBQy9CO29CQUM5RCx1REFBdUQ7b0JBQ3ZELElBQUlBLGlCQUFpQlMsT0FBTzt3QkFDeEIsTUFBTVQ7b0JBQ1YsT0FDSzt3QkFDRCxNQUFNLElBQUlTLE1BQU1UO29CQUNwQjtnQkFDSixJQUFJO2dCQUNBc0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtnQkFDckNVLFNBQVMsSUFBSSxDQUFDWCxVQUFVO2dCQUN4QlksV0FBVztZQUdmLElBQUk7WUFBRUMsZ0JBQWdCO1FBQUs7SUFDL0I7SUFDQSw4REFBOEQ7SUFDOURDLGdCQUFnQkMsT0FBTyxFQUFFUixRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3hDLG1EQUFtRDtRQUNuRCx3RUFBd0U7UUFDeEUsSUFBSU8sUUFBUUMsTUFBTSxFQUFFO1lBQ2hCLE9BQU9DLFFBQVFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxDQUFDWixJQUFJLENBQUNDLGFBQWFDO2dCQUN2QixJQUFJUyxRQUFRLENBQUNFLEdBQUdDO29CQUNaTCxRQUFRQyxNQUFNLEVBQUVLLGlCQUFpQixTQUFTO3dCQUN0Q0QsT0FBTyxJQUFJaEMsTUFBTTtvQkFDckI7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNrQixJQUFJLENBQUNDLGFBQWFDO0lBQ2xDO0lBQ0FjLE1BQU0sR0FBR2QsSUFBSSxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxJQUFNZ0IsU0FBU2QsTUFBTWUsSUFBSSxDQUFDLENBQUNDLE1BQVNBLElBQUlDLEVBQUUsR0FBR0QsTUFBTVAsUUFBUUcsTUFBTSxDQUFDSTtJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzPzE0YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBSZXRyeSBmcm9tIFwicC1yZXRyeVwiO1xuaW1wb3J0IFBRdWV1ZU1vZCBmcm9tIFwicC1xdWV1ZVwiO1xuY29uc3QgU1RBVFVTX05PX1JFVFJZID0gW1xuICAgIDQwMCxcbiAgICA0MDEsXG4gICAgNDAyLFxuICAgIDQwMyxcbiAgICA0MDQsXG4gICAgNDA1LFxuICAgIDQwNixcbiAgICA0MDcsXG4gICAgNDA5LCAvLyBDb25mbGljdFxuXTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5jb25zdCBkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXIgPSAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQ2FuY2VsXCIpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkFib3J0RXJyb3JcIikgfHxcbiAgICAgICAgZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGVycm9yPy5jb2RlID09PSBcIkVDT05OQUJPUlRFRFwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zdCBzdGF0dXMgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGVycm9yPy5yZXNwb25zZT8uc3RhdHVzID8/IGVycm9yPy5zdGF0dXM7XG4gICAgaWYgKHN0YXR1cyAmJiBTVEFUVVNfTk9fUkVUUlkuaW5jbHVkZXMoK3N0YXR1cykpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgaWYgKGVycm9yPy5lcnJvcj8uY29kZSA9PT0gXCJpbnN1ZmZpY2llbnRfcXVvdGFcIikge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoZXJyb3I/Lm1lc3NhZ2UpO1xuICAgICAgICBlcnIubmFtZSA9IFwiSW5zdWZmaWNpZW50UXVvdGFFcnJvclwiO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufTtcbi8qKlxuICogQSBjbGFzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIG1ha2UgYXN5bmMgY2FsbHMgd2l0aCBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgZm9yIG1ha2luZyBjYWxscyB0byBhbnkga2luZCBvZiBcImV4cGVuc2l2ZVwiIGV4dGVybmFsIHJlc291cmNlLFxuICogYmUgaXQgYmVjYXVzZSBpdCdzIHJhdGUtbGltaXRlZCwgc3ViamVjdCB0byBuZXR3b3JrIGlzc3VlcywgZXRjLlxuICpcbiAqIENvbmN1cnJlbnQgY2FsbHMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhDb25jdXJyZW5jeWAgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0c1xuICogdG8gYEluZmluaXR5YC4gVGhpcyBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGFsbCBjYWxscyB3aWxsIGJlIG1hZGUgaW4gcGFyYWxsZWwuXG4gKlxuICogUmV0cmllcyBhcmUgbGltaXRlZCBieSB0aGUgYG1heFJldHJpZXNgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHMgdG8gNi4gVGhpc1xuICogbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBlYWNoIGNhbGwgd2lsbCBiZSByZXRyaWVkIHVwIHRvIDYgdGltZXMsIHdpdGggYW5cbiAqIGV4cG9uZW50aWFsIGJhY2tvZmYgYmV0d2VlbiBlYWNoIGF0dGVtcHQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBc3luY0NhbGxlciB7XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heENvbmN1cnJlbmN5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFJldHJpZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25GYWlsZWRBdHRlbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWF4Q29uY3VycmVuY3kgPSBwYXJhbXMubWF4Q29uY3VycmVuY3kgPz8gSW5maW5pdHk7XG4gICAgICAgIHRoaXMubWF4UmV0cmllcyA9IHBhcmFtcy5tYXhSZXRyaWVzID8/IDY7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID1cbiAgICAgICAgICAgIHBhcmFtcy5vbkZhaWxlZEF0dGVtcHQgPz8gZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyO1xuICAgICAgICBjb25zdCBQUXVldWUgPSBcImRlZmF1bHRcIiBpbiBQUXVldWVNb2QgPyBQUXVldWVNb2QuZGVmYXVsdCA6IFBRdWV1ZU1vZDtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQUXVldWUoeyBjb25jdXJyZW5jeTogdGhpcy5tYXhDb25jdXJyZW5jeSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmFkZCgoKSA9PiBwUmV0cnkoKCkgPT4gY2FsbGFibGUoLi4uYXJncykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogdGhpcy5vbkZhaWxlZEF0dGVtcHQsXG4gICAgICAgICAgICByZXRyaWVzOiB0aGlzLm1heFJldHJpZXMsXG4gICAgICAgICAgICByYW5kb21pemU6IHRydWUsXG4gICAgICAgICAgICAvLyBJZiBuZWVkZWQgd2UgY2FuIGNoYW5nZSBzb21lIG9mIHRoZSBkZWZhdWx0cyBoZXJlLFxuICAgICAgICAgICAgLy8gYnV0IHRoZXkncmUgcXVpdGUgc2Vuc2libGUuXG4gICAgICAgIH0pLCB7IHRocm93T25UaW1lb3V0OiB0cnVlIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGxXaXRoT3B0aW9ucyhvcHRpb25zLCBjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICAvLyBOb3RlIHRoaXMgZG9lc24ndCBjYW5jZWwgdGhlIHVuZGVybHlpbmcgcmVxdWVzdCxcbiAgICAgICAgLy8gd2hlbiBhdmFpbGFibGUgcHJlZmVyIHRvIHVzZSB0aGUgc2lnbmFsIG9wdGlvbiBvZiB0aGUgdW5kZXJseWluZyBjYWxsXG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKSxcbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIikpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBmZXRjaCguLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwoKCkgPT4gZmV0Y2goLi4uYXJncykudGhlbigocmVzKSA9PiAocmVzLm9rID8gcmVzIDogUHJvbWlzZS5yZWplY3QocmVzKSkpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicFJldHJ5IiwiUFF1ZXVlTW9kIiwiU1RBVFVTX05PX1JFVFJZIiwiZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhcnRzV2l0aCIsIm5hbWUiLCJjb2RlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJpbmNsdWRlcyIsImVyciIsIkVycm9yIiwiQXN5bmNDYWxsZXIiLCJjb25zdHJ1Y3RvciIsInBhcmFtcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJtYXhDb25jdXJyZW5jeSIsIkluZmluaXR5IiwibWF4UmV0cmllcyIsIm9uRmFpbGVkQXR0ZW1wdCIsIlBRdWV1ZSIsImRlZmF1bHQiLCJxdWV1ZSIsImNvbmN1cnJlbmN5IiwiY2FsbCIsImNhbGxhYmxlIiwiYXJncyIsImFkZCIsImNhdGNoIiwicmV0cmllcyIsInJhbmRvbWl6ZSIsInRocm93T25UaW1lb3V0IiwiY2FsbFdpdGhPcHRpb25zIiwib3B0aW9ucyIsInNpZ25hbCIsIlByb21pc2UiLCJyYWNlIiwiXyIsInJlamVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsWUFBWSxJQUFNLE1BQTZCLElBQUksQ0FBc0MsQ0FBQztBQUNoRyxNQUFNRyxjQUFjLElBQU0sT0FBT0MsZUFBZSxZQUNuREEsV0FBV0MsV0FBVyxJQUN0QkQsV0FBV0MsV0FBVyxDQUFDQyxJQUFJLEtBQUssNkJBQTZCO0FBQzFELE1BQU1DLFVBQVUsSUFBTSxNQUEwRCxJQUNsRixPQUFPQyxjQUFjLGVBQ2pCQSxDQUFBQSxVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxjQUMxQkYsVUFBVUMsU0FBUyxDQUFDQyxRQUFRLENBQUMsUUFBTyxFQUFJO0FBQ3BELHlEQUF5RDtBQUN6RCw2QkFBNkI7QUFDdEIsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFNBQVMsWUFBWTtBQUN4RCxnREFBZ0Q7QUFDekMsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFlBQVksZUFDM0MsT0FBT0EsUUFBUUMsUUFBUSxLQUFLLGVBQzVCLE9BQU9ELFFBQVFDLFFBQVEsQ0FBQ0MsSUFBSSxLQUFLLGVBQ2pDLENBQUNMLFNBQVM7QUFDUCxNQUFNTSxTQUFTO0lBQ2xCLElBQUlDO0lBQ0osSUFBSWxCLGFBQWE7UUFDYmtCLE1BQU07SUFDVixPQUNLLElBQUlMLFVBQVU7UUFDZkssTUFBTTtJQUNWLE9BQ0ssSUFBSWYsZUFBZTtRQUNwQmUsTUFBTTtJQUNWLE9BQ0ssSUFBSVgsV0FBVztRQUNoQlcsTUFBTTtJQUNWLE9BQ0ssSUFBSVAsVUFBVTtRQUNmTyxNQUFNO0lBQ1YsT0FDSztRQUNEQSxNQUFNO0lBQ1Y7SUFDQSxPQUFPQTtBQUNYLEVBQUU7QUFDRixJQUFJQztBQUNHLGVBQWVDO0lBQ2xCLElBQUlELHVCQUF1QkUsV0FBVztRQUNsQyxNQUFNSCxNQUFNRDtRQUNaRSxxQkFBcUI7WUFDakJHLFNBQVM7WUFDVEMsU0FBU0w7UUFDYjtJQUNKO0lBQ0EsT0FBT0M7QUFDWDtBQUNPLFNBQVNLLHVCQUF1QmxCLElBQUk7SUFDdkMscUZBQXFGO0lBQ3JGLDBEQUEwRDtJQUMxRCxJQUFJO1FBQ0EsT0FBTyxPQUFPUSxZQUFZLGNBRWxCQSxRQUFRSSxHQUFHLEVBQUUsQ0FBQ1osS0FBSyxHQUNyQmU7SUFDVixFQUNBLE9BQU9JLEdBQUc7UUFDTixPQUFPSjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9lbnYuanM/NDJmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2Ygd2luZG93LmRvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiO1xuZXhwb3J0IGNvbnN0IGlzV2ViV29ya2VyID0gKCkgPT4gdHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkRlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlXCI7XG5leHBvcnQgY29uc3QgaXNKc0RvbSA9ICgpID0+ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5uYW1lID09PSBcIm5vZGVqc1wiKSB8fFxuICAgICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwiTm9kZS5qc1wiKSB8fFxuICAgICAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcImpzZG9tXCIpKSk7XG4vLyBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uIHByb3ZpZGVzIGEgYERlbm9gIGdsb2JhbCBvYmplY3Rcbi8vIHdpdGhvdXQgYHZlcnNpb25gIHByb3BlcnR5XG5leHBvcnQgY29uc3QgaXNEZW5vID0gKCkgPT4gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCI7XG4vLyBNYXJrIG5vdC1hcy1ub2RlIGlmIGluIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb25cbmV4cG9ydCBjb25zdCBpc05vZGUgPSAoKSA9PiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICFpc0Rlbm8oKTtcbmV4cG9ydCBjb25zdCBnZXRFbnYgPSAoKSA9PiB7XG4gICAgbGV0IGVudjtcbiAgICBpZiAoaXNCcm93c2VyKCkpIHtcbiAgICAgICAgZW52ID0gXCJicm93c2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzTm9kZSgpKSB7XG4gICAgICAgIGVudiA9IFwibm9kZVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1dlYldvcmtlcigpKSB7XG4gICAgICAgIGVudiA9IFwid2Vid29ya2VyXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzSnNEb20oKSkge1xuICAgICAgICBlbnYgPSBcImpzZG9tXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRGVubygpKSB7XG4gICAgICAgIGVudiA9IFwiZGVub1wiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZW52ID0gXCJvdGhlclwiO1xuICAgIH1cbiAgICByZXR1cm4gZW52O1xufTtcbmxldCBydW50aW1lRW52aXJvbm1lbnQ7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UnVudGltZUVudmlyb25tZW50KCkge1xuICAgIGlmIChydW50aW1lRW52aXJvbm1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlbnYgPSBnZXRFbnYoKTtcbiAgICAgICAgcnVudGltZUVudmlyb25tZW50ID0ge1xuICAgICAgICAgICAgbGlicmFyeTogXCJsYW5nY2hhaW4tanNcIixcbiAgICAgICAgICAgIHJ1bnRpbWU6IGVudixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bnRpbWVFbnZpcm9ubWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKG5hbWUpIHtcbiAgICAvLyBDZXJ0YWluIERlbm8gc2V0dXBzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IHRyeSB0byBhY2Nlc3MgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9pc3N1ZXMvMTQxMlxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvY2Vzcy1lbnZcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudj8uW25hbWVdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNCcm93c2VyIiwid2luZG93IiwiZG9jdW1lbnQiLCJpc1dlYldvcmtlciIsImdsb2JhbFRoaXMiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpc0pzRG9tIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc0Rlbm8iLCJEZW5vIiwiaXNOb2RlIiwicHJvY2VzcyIsInZlcnNpb25zIiwibm9kZSIsImdldEVudiIsImVudiIsInJ1bnRpbWVFbnZpcm9ubWVudCIsImdldFJ1bnRpbWVFbnZpcm9ubWVudCIsInVuZGVmaW5lZCIsImxpYnJhcnkiLCJydW50aW1lIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRTtBQUNzRztBQUN0STs7Q0FFQyxHQUNxQztBQUNnRztBQUN0SSxpRUFBZTtJQUNYLEdBQUdNLHlDQUFJO0lBQ1AsYUFBYTtJQUNiTCxjQUFjQSx5REFBQUE7SUFDZEUsU0FBU0EseURBQUFBO0lBQ1RDLG1CQUFtQkEsa0VBQUFBO0lBQ25CQyxxQkFBcUJBLG9FQUFBQTtBQUN6QixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanM/NGM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3JjL2R1cGxleC5qc1wiO1xuZXhwb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuLyoqXG4gKiBEZWZhdWx0IGV4cG9ydCBmb3IgYmFja3dhcmRzIGNvbXBhdFxuICovXG5pbXBvcnQgKiBhcyBjb3JlIGZyb20gXCIuL3NyYy9jb3JlLmpzXCI7XG5pbXBvcnQgeyBQYXRjaEVycm9yIGFzIEpzb25QYXRjaEVycm9yLCBfZGVlcENsb25lIGFzIGRlZXBDbG9uZSwgZXNjYXBlUGF0aENvbXBvbmVudCwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCB9IGZyb20gXCIuL3NyYy9oZWxwZXJzLmpzXCI7XG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLi4uY29yZSxcbiAgICAvLyAuLi5kdXBsZXgsXG4gICAgSnNvblBhdGNoRXJyb3IsXG4gICAgZGVlcENsb25lLFxuICAgIGVzY2FwZVBhdGhDb21wb25lbnQsXG4gICAgdW5lc2NhcGVQYXRoQ29tcG9uZW50LFxufTtcbiJdLCJuYW1lcyI6WyJQYXRjaEVycm9yIiwiSnNvblBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiZGVlcENsb25lIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsImNvcmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ3lGO0FBQ2hHLE1BQU1LLGlCQUFpQkwsbURBQVVBLENBQUM7QUFDbEMsTUFBTU0sWUFBWUwsbURBQVVBLENBQUM7QUFDcEM7Ozs7O0NBS0MsR0FDRCwwQ0FBMEMsR0FDMUMsTUFBTU0sU0FBUztJQUNYQyxLQUFLLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzdCRixHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtRQUFTO0lBQ25DO0lBQ0FHLFFBQVEsU0FBVUwsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDaEMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCLE9BQU9ELEdBQUcsQ0FBQ0MsSUFBSTtRQUNmLE9BQU87WUFBRUcsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBQyxTQUFTLFNBQVVQLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2pDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QkQsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNLFNBQVVSLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCOztvQ0FFNEIsR0FDNUIsSUFBSUksVUFBVUcsa0JBQWtCUCxVQUFVLElBQUksQ0FBQ1EsSUFBSTtRQUNuRCxJQUFJSixTQUFTO1lBQ1RBLFVBQVVkLHVEQUFVQSxDQUFDYztRQUN6QjtRQUNBLE1BQU1LLGdCQUFnQkMsZUFBZVYsVUFBVTtZQUMzQ1csSUFBSTtZQUNKSCxNQUFNLElBQUksQ0FBQ0ksSUFBSTtRQUNu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d2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvY29yZS5qcz9kZjk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG5pbXBvcnQgeyBQYXRjaEVycm9yLCBfZGVlcENsb25lLCBpc0ludGVnZXIsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzVW5kZWZpbmVkLCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmV4cG9ydCBjb25zdCBKc29uUGF0Y2hFcnJvciA9IFBhdGNoRXJyb3I7XG5leHBvcnQgY29uc3QgZGVlcENsb25lID0gX2RlZXBDbG9uZTtcbi8qIFdlIHVzZSBhIEphdmFzY3JpcHQgaGFzaCB0byBzdG9yZSBlYWNoXG4gZnVuY3Rpb24uIEVhY2ggaGFzaCBlbnRyeSAocHJvcGVydHkpIHVzZXNcbiB0aGUgb3BlcmF0aW9uIGlkZW50aWZpZXJzIHNwZWNpZmllZCBpbiByZmM2OTAyLlxuIEluIHRoaXMgd2F5LCB3ZSBjYW4gbWFwIGVhY2ggcGF0Y2ggb3BlcmF0aW9uXG4gdG8gaXRzIGRlZGljYXRlZCBmdW5jdGlvbiBpbiBlZmZpY2llbnQgd2F5LlxuICovXG4vKiBUaGUgb3BlcmF0aW9ucyBhcHBsaWNhYmxlIHRvIGFuIG9iamVjdCAqL1xuY29uc3Qgb2JqT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gb2JqW2tleV07XG4gICAgICAgIGRlbGV0ZSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICByZXBsYWNlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gb2JqW2tleV07XG4gICAgICAgIG9ialtrZXldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBtb3ZlOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIC8qIGluIGNhc2UgbW92ZSB0YXJnZXQgb3ZlcndyaXRlcyBhbiBleGlzdGluZyB2YWx1ZSxcbiAgICAgICAgcmV0dXJuIHRoZSByZW1vdmVkIHZhbHVlLCB0aGlzIGNhbiBiZSB0YXhpbmcgcGVyZm9ybWFuY2Utd2lzZSxcbiAgICAgICAgYW5kIGlzIHBvdGVudGlhbGx5IHVubmVlZGVkICovXG4gICAgICAgIGxldCByZW1vdmVkID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHRoaXMucGF0aCk7XG4gICAgICAgIGlmIChyZW1vdmVkKSB7XG4gICAgICAgICAgICByZW1vdmVkID0gX2RlZXBDbG9uZShyZW1vdmVkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5mcm9tLFxuICAgICAgICB9KS5yZW1vdmVkO1xuICAgICAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLnBhdGgsXG4gICAgICAgICAgICB2YWx1ZTogb3JpZ2luYWxWYWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgY29weTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICBjb25zdCB2YWx1ZVRvQ29weSA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLmZyb20pO1xuICAgICAgICAvLyBlbmZvcmNlIGNvcHkgYnkgdmFsdWUgc28gZnVydGhlciBvcGVyYXRpb25zIGRvbid0IGFmZmVjdCBzb3VyY2UgKHNlZSBpc3N1ZSAjMTc3KVxuICAgICAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLnBhdGgsXG4gICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZSh2YWx1ZVRvQ29weSksXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHRlc3Q6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCB0ZXN0OiBfYXJlRXF1YWxzKG9ialtrZXldLCB0aGlzLnZhbHVlKSB9O1xuICAgIH0sXG4gICAgX2dldDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG59O1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBhcnJheS4gTWFueSBhcmUgdGhlIHNhbWUgYXMgZm9yIHRoZSBvYmplY3QgKi9cbnZhciBhcnJPcHMgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICBpZiAoaXNJbnRlZ2VyKGkpKSB7XG4gICAgICAgICAgICBhcnIuc3BsaWNlKGksIDAsIHRoaXMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYXJyYXkgcHJvcHNcbiAgICAgICAgICAgIGFycltpXSA9IHRoaXMudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBtYXkgYmUgbmVlZGVkIHdoZW4gdXNpbmcgJy0nIGluIGFuIGFycmF5XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgaW5kZXg6IGkgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWRMaXN0ID0gYXJyLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkOiByZW1vdmVkTGlzdFswXSB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBhcnJbaV07XG4gICAgICAgIGFycltpXSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogb2JqT3BzLm1vdmUsXG4gICAgY29weTogb2JqT3BzLmNvcHksXG4gICAgdGVzdDogb2JqT3BzLnRlc3QsXG4gICAgX2dldDogb2JqT3BzLl9nZXQsXG59O1xuLyoqXG4gKiBSZXRyaWV2ZXMgYSB2YWx1ZSBmcm9tIGEgSlNPTiBkb2N1bWVudCBieSBhIEpTT04gcG9pbnRlci5cbiAqIFJldHVybnMgdGhlIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gZ2V0IHRoZSB2YWx1ZSBmcm9tXG4gKiBAcGFyYW0gcG9pbnRlciBhbiBlc2NhcGVkIEpTT04gcG9pbnRlclxuICogQHJldHVybiBUaGUgcmV0cmlldmVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgcG9pbnRlcikge1xuICAgIGlmIChwb2ludGVyID09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgIH1cbiAgICB2YXIgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbiA9IHsgb3A6IFwiX2dldFwiLCBwYXRoOiBwb2ludGVyIH07XG4gICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGdldE9yaWdpbmFsRGVzdGluYXRpb24pO1xuICAgIHJldHVybiBnZXRPcmlnaW5hbERlc3RpbmF0aW9uLnZhbHVlO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB7bmV3RG9jdW1lbnQsIHJlc3VsdH0gb2YgdGhlIG9wZXJhdGlvbi5cbiAqIEl0IG1vZGlmaWVzIHRoZSBgZG9jdW1lbnRgIGFuZCBgb3BlcmF0aW9uYCBvYmplY3RzIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGF2b2lkIHRvdWNoaW5nIHlvdXIgdmFsdWVzLCBjbG9uZSB0aGVtOlxuICogYGpzb25wYXRjaC5hcHBseU9wZXJhdGlvbihkb2N1bWVudCwganNvbnBhdGNoLl9kZWVwQ2xvbmUob3BlcmF0aW9uKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHBhcmFtIHZhbGlkYXRlT3BlcmF0aW9uIGBmYWxzZWAgaXMgd2l0aG91dCB2YWxpZGF0aW9uLCBgdHJ1ZWAgdG8gdXNlIGRlZmF1bHQganNvbnBhdGNoJ3MgdmFsaWRhdGlvbiwgb3IgeW91IGNhbiBwYXNzIGEgYHZhbGlkYXRlT3BlcmF0aW9uYCBjYWxsYmFjayB0byBiZSB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICogQHBhcmFtIG11dGF0ZURvY3VtZW50IFdoZXRoZXIgdG8gbXV0YXRlIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBvciBjbG9uZSBpdCBiZWZvcmUgYXBwbHlpbmdcbiAqIEBwYXJhbSBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIFdoZXRoZXIgdG8gYmFuIG1vZGlmaWNhdGlvbnMgdG8gYF9fcHJvdG9fX2AsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiAqIEByZXR1cm4gYHtuZXdEb2N1bWVudCwgcmVzdWx0fWAgYWZ0ZXIgdGhlIG9wZXJhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbiwgdmFsaWRhdGVPcGVyYXRpb24gPSBmYWxzZSwgbXV0YXRlRG9jdW1lbnQgPSB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zID0gdHJ1ZSwgaW5kZXggPSAwKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVPcGVyYXRpb24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24sIDAsIGRvY3VtZW50LCBvcGVyYXRpb24ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxpZGF0b3Iob3BlcmF0aW9uLCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBST09UIE9QRVJBVElPTlMgKi9cbiAgICBpZiAob3BlcmF0aW9uLnBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgbGV0IHJldHVyblZhbHVlID0geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBvcGVyYXRpb24udmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBvcGVyYXRpb24udmFsdWU7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7IC8vZG9jdW1lbnQgd2UgcmVtb3ZlZFxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgLy8gaXQncyBhIG1vdmUgb3IgY29weSB0byByb290XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCBvcGVyYXRpb24uZnJvbSk7IC8vIGdldCB0aGUgdmFsdWUgYnkganNvbi1wb2ludGVyIGluIGBmcm9tYCBmaWVsZFxuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyByZXBvcnQgcmVtb3ZlZCBpdGVtXG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnRlc3QgPSBfYXJlRXF1YWxzKGRvY3VtZW50LCBvcGVyYXRpb24udmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlbW92ZVwiKSB7XG4gICAgICAgICAgICAvLyBhIHJlbW92ZSBvbiByb290XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgb3BlcmF0aW9uLnZhbHVlID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKiBiYWQgb3BlcmF0aW9uICovXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYG9wYCBwcm9wZXJ0eSBpcyBub3Qgb25lIG9mIG9wZXJhdGlvbnMgZGVmaW5lZCBpbiBSRkMtNjkwMlwiLCBcIk9QRVJBVElPTl9PUF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gLyogRU5EIFJPT1QgT1BFUkFUSU9OUyAqL1xuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIW11dGF0ZURvY3VtZW50KSB7XG4gICAgICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGggPSBvcGVyYXRpb24ucGF0aCB8fCBcIlwiO1xuICAgICAgICBjb25zdCBrZXlzID0gcGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIGxldCBvYmogPSBkb2N1bWVudDtcbiAgICAgICAgbGV0IHQgPSAxOyAvL3NraXAgZW1wdHkgZWxlbWVudCAtIGh0dHA6Ly9qc3BlcmYuY29tL3RvLXNoaWZ0LW9yLW5vdC10by1zaGlmdFxuICAgICAgICBsZXQgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGxldCBleGlzdGluZ1BhdGhGcmFnbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGtleTtcbiAgICAgICAgbGV0IHZhbGlkYXRlRnVuY3Rpb247XG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRhdGVPcGVyYXRpb24gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uID0gdmFsaWRhdGVPcGVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uID0gdmFsaWRhdG9yO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW3RdO1xuICAgICAgICAgICAgaWYgKGtleSAmJiBrZXkuaW5kZXhPZihcIn5cIikgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSB1bmVzY2FwZVBhdGhDb21wb25lbnQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zICYmXG4gICAgICAgICAgICAgICAgKGtleSA9PSBcIl9fcHJvdG9fX1wiIHx8XG4gICAgICAgICAgICAgICAgICAgIChrZXkgPT0gXCJwcm90b3R5cGVcIiAmJiB0ID4gMCAmJiBrZXlzW3QgLSAxXSA9PSBcImNvbnN0cnVjdG9yXCIpKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJKU09OLVBhdGNoOiBtb2RpZnlpbmcgYF9fcHJvdG9fX2Agb3IgYGNvbnN0cnVjdG9yL3Byb3RvdHlwZWAgcHJvcCBpcyBiYW5uZWQgZm9yIHNlY3VyaXR5IHJlYXNvbnMsIGlmIHRoaXMgd2FzIG9uIHB1cnBvc2UsIHBsZWFzZSBzZXQgYGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnNgIGZsYWcgZmFsc2UgYW5kIHBhc3MgaXQgdG8gdGhpcyBmdW5jdGlvbi4gTW9yZSBpbmZvIGluIGZhc3QtanNvbi1wYXRjaCBSRUFETUVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXRoRnJhZ21lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSBrZXlzLnNsaWNlKDAsIHQpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT0gbGVuIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSBvcGVyYXRpb24ucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdQYXRoRnJhZ21lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbihvcGVyYXRpb24sIDAsIGRvY3VtZW50LCBleGlzdGluZ1BhdGhGcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0Kys7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gb2JqLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiAhaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkV4cGVjdGVkIGFuIHVuc2lnbmVkIGJhc2UtMTAgaW50ZWdlciB2YWx1ZSwgbWFraW5nIHRoZSBuZXcgcmVmZXJlbmNlZCB2YWx1ZSB0aGUgYXJyYXkgZWxlbWVudCB3aXRoIHRoZSB6ZXJvLWJhc2VkIGluZGV4XCIsIFwiT1BFUkFUSU9OX1BBVEhfSUxMRUdBTF9BUlJBWV9JTkRFWFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0gLy8gb25seSBwYXJzZSBrZXkgd2hlbiBpdCdzIGFuIGludGVnZXIgZm9yIGBhcnIucHJvcGAgdG8gd29ya1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0ludGVnZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gfn5rZXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiBvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgJiYga2V5ID4gb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGhlIHNwZWNpZmllZCBpbmRleCBNVVNUIE5PVCBiZSBncmVhdGVyIHRoYW4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgYXJyYXlcIiwgXCJPUEVSQVRJT05fVkFMVUVfT1VUX09GX0JPVU5EU1wiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBhcnJPcHNbb3BlcmF0aW9uLm9wXS5jYWxsKG9wZXJhdGlvbiwgb2JqLCBrZXksIGRvY3VtZW50KTsgLy8gQXBwbHkgcGF0Y2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodCA+PSBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBvYmpPcHNbb3BlcmF0aW9uLm9wXS5jYWxsKG9wZXJhdGlvbiwgb2JqLCBrZXksIGRvY3VtZW50KTsgLy8gQXBwbHkgcGF0Y2hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbW9yZSBrZXlzIGluIHRoZSBwYXRoLCBidXQgdGhlIG5leHQgdmFsdWUgaXNuJ3QgYSBub24tbnVsbCBvYmplY3QsXG4gICAgICAgICAgICAvLyB0aHJvdyBhbiBPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEUgZXJyb3IgaW5zdGVhZCBvZiBpdGVyYXRpbmcgYWdhaW4uXG4gICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgdCA8IGxlbiAmJiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIG9wZXJhdGlvbiBhdCB0aGUgZGVzaXJlZCBwYXRoXCIsIFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgYSBmdWxsIEpTT04gUGF0Y2ggYXJyYXkgb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBwYXRjaC5cbiAqIEl0IG1vZGlmaWVzIHRoZSBgZG9jdW1lbnRgIG9iamVjdCBhbmQgYHBhdGNoYCAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlQYXRjaChkb2N1bWVudCwganNvbnBhdGNoLl9kZWVwQ2xvbmUocGF0Y2gpKWAuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIHBhdGNoIFRoZSBwYXRjaCB0byBhcHBseVxuICogQHBhcmFtIHZhbGlkYXRlT3BlcmF0aW9uIGBmYWxzZWAgaXMgd2l0aG91dCB2YWxpZGF0aW9uLCBgdHJ1ZWAgdG8gdXNlIGRlZmF1bHQganNvbnBhdGNoJ3MgdmFsaWRhdGlvbiwgb3IgeW91IGNhbiBwYXNzIGEgYHZhbGlkYXRlT3BlcmF0aW9uYCBjYWxsYmFjayB0byBiZSB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICogQHBhcmFtIG11dGF0ZURvY3VtZW50IFdoZXRoZXIgdG8gbXV0YXRlIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBvciBjbG9uZSBpdCBiZWZvcmUgYXBwbHlpbmdcbiAqIEBwYXJhbSBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIFdoZXRoZXIgdG8gYmFuIG1vZGlmaWNhdGlvbnMgdG8gYF9fcHJvdG9fX2AsIGRlZmF1bHRzIHRvIGB0cnVlYC5cbiAqIEByZXR1cm4gQW4gYXJyYXkgb2YgYHtuZXdEb2N1bWVudCwgcmVzdWx0fWAgYWZ0ZXIgdGhlIHBhdGNoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBhdGNoKGRvY3VtZW50LCBwYXRjaCwgdmFsaWRhdGVPcGVyYXRpb24sIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUpIHtcbiAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhdGNoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW11dGF0ZURvY3VtZW50KSB7XG4gICAgICAgIGRvY3VtZW50ID0gX2RlZXBDbG9uZShkb2N1bWVudCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkocGF0Y2gubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gcGF0Y2gubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG11dGF0ZURvY3VtZW50IGFyZ3VtZW50IGJlY2F1c2UgaWYgaXQgd2FzIHRydWUsIHdlIGFscmVhZHkgZGVlcCBjbG9uZWQgdGhlIG9iamVjdCwgd2UnbGwganVzdCBwYXNzIGB0cnVlYFxuICAgICAgICByZXN1bHRzW2ldID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHBhdGNoW2ldLCB2YWxpZGF0ZU9wZXJhdGlvbiwgdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucywgaSk7XG4gICAgICAgIGRvY3VtZW50ID0gcmVzdWx0c1tpXS5uZXdEb2N1bWVudDsgLy8gaW4gY2FzZSByb290IHdhcyByZXBsYWNlZFxuICAgIH1cbiAgICByZXN1bHRzLm5ld0RvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEFwcGx5IGEgc2luZ2xlIEpTT04gUGF0Y2ggT3BlcmF0aW9uIG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgZG9jdW1lbnQuXG4gKiBTdWl0YWJsZSBhcyBhIHJlZHVjZXIuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIG9wZXJhdGlvbiBUaGUgb3BlcmF0aW9uIHRvIGFwcGx5XG4gKiBAcmV0dXJuIFRoZSB1cGRhdGVkIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVJlZHVjZXIoZG9jdW1lbnQsIG9wZXJhdGlvbiwgaW5kZXgpIHtcbiAgICBjb25zdCBvcGVyYXRpb25SZXN1bHQgPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgb3BlcmF0aW9uKTtcbiAgICBpZiAob3BlcmF0aW9uUmVzdWx0LnRlc3QgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIGZhaWxlZCB0ZXN0XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIHJldHVybiBvcGVyYXRpb25SZXN1bHQubmV3RG9jdW1lbnQ7XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNpbmdsZSBvcGVyYXRpb24uIENhbGxlZCBmcm9tIGBqc29ucGF0Y2gudmFsaWRhdGVgLiBUaHJvd3MgYEpzb25QYXRjaEVycm9yYCBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICogQHBhcmFtIHtvYmplY3R9IG9wZXJhdGlvbiAtIG9wZXJhdGlvbiBvYmplY3QgKHBhdGNoKVxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gaW5kZXggb2Ygb3BlcmF0aW9uIGluIHRoZSBzZXF1ZW5jZVxuICogQHBhcmFtIHtvYmplY3R9IFtkb2N1bWVudF0gLSBvYmplY3Qgd2hlcmUgdGhlIG9wZXJhdGlvbiBpcyBzdXBwb3NlZCB0byBiZSBhcHBsaWVkXG4gKiBAcGFyYW0ge3N0cmluZ30gW2V4aXN0aW5nUGF0aEZyYWdtZW50XSAtIGNvbWVzIGFsb25nIHdpdGggYGRvY3VtZW50YFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdG9yKG9wZXJhdGlvbiwgaW5kZXgsIGRvY3VtZW50LCBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgIGlmICh0eXBlb2Ygb3BlcmF0aW9uICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbiA9PT0gbnVsbCB8fFxuICAgICAgICBBcnJheS5pc0FycmF5KG9wZXJhdGlvbikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGlzIG5vdCBhbiBvYmplY3RcIiwgXCJPUEVSQVRJT05fTk9UX0FOX09CSkVDVFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFvYmpPcHNbb3BlcmF0aW9uLm9wXSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYG9wYCBwcm9wZXJ0eSBpcyBub3Qgb25lIG9mIG9wZXJhdGlvbnMgZGVmaW5lZCBpbiBSRkMtNjkwMlwiLCBcIk9QRVJBVElPTl9PUF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG9wZXJhdGlvbi5wYXRoICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgaXMgbm90IGEgc3RyaW5nXCIsIFwiT1BFUkFUSU9OX1BBVEhfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5wYXRoLmluZGV4T2YoXCIvXCIpICE9PSAwICYmIG9wZXJhdGlvbi5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gcGF0aHMgdGhhdCBhcmVuJ3QgZW1wdHkgc3RyaW5nIHNob3VsZCBzdGFydCB3aXRoIFwiL1wiXG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcignT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBtdXN0IHN0YXJ0IHdpdGggXCIvXCInLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSAmJlxuICAgICAgICB0eXBlb2Ygb3BlcmF0aW9uLmZyb20gIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBmcm9tYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgbW92ZWAgYW5kIGBjb3B5YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9GUk9NX1JFUVVJUkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpICYmXG4gICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgdmFsdWVgIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBhZGRgLCBgcmVwbGFjZWAgYW5kIGB0ZXN0YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9WQUxVRV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBoYXNVbmRlZmluZWQob3BlcmF0aW9uLnZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfQ0FOTk9UX0NPTlRBSU5fVU5ERUZJTkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKG9wZXJhdGlvbi5vcCA9PSBcImFkZFwiKSB7XG4gICAgICAgICAgICB2YXIgcGF0aExlbiA9IG9wZXJhdGlvbi5wYXRoLnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdQYXRoTGVuID0gZXhpc3RpbmdQYXRoRnJhZ21lbnQuc3BsaXQoXCIvXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4gKyAxICYmIHBhdGhMZW4gIT09IGV4aXN0aW5nUGF0aExlbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIGFuIGBhZGRgIG9wZXJhdGlvbiBhdCB0aGUgZGVzaXJlZCBwYXRoXCIsIFwiT1BFUkFUSU9OX1BBVEhfQ0FOTk9UX0FERFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlbW92ZVwiIHx8XG4gICAgICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwiX2dldFwiKSB7XG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uLnBhdGggIT09IGV4aXN0aW5nUGF0aEZyYWdtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBhdCBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSB7XG4gICAgICAgICAgICB2YXIgZXhpc3RpbmdWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICBvcDogXCJfZ2V0XCIsXG4gICAgICAgICAgICAgICAgcGF0aDogb3BlcmF0aW9uLmZyb20sXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0ZShbZXhpc3RpbmdWYWx1ZV0sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci5uYW1lID09PSBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gdGhlIG9wZXJhdGlvbiBmcm9tIGEgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0XCIsIFwiT1BFUkFUSU9OX0ZST01fVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVmFsaWRhdGVzIGEgc2VxdWVuY2Ugb2Ygb3BlcmF0aW9ucy4gSWYgYGRvY3VtZW50YCBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQsIHRoZSBzZXF1ZW5jZSBpcyBhZGRpdGlvbmFsbHkgdmFsaWRhdGVkIGFnYWluc3QgdGhlIG9iamVjdCBkb2N1bWVudC5cbiAqIElmIGVycm9yIGlzIGVuY291bnRlcmVkLCByZXR1cm5zIGEgSnNvblBhdGNoRXJyb3Igb2JqZWN0XG4gKiBAcGFyYW0gc2VxdWVuY2VcbiAqIEBwYXJhbSBkb2N1bWVudFxuICogQHJldHVybnMge0pzb25QYXRjaEVycm9yfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKHNlcXVlbmNlLCBkb2N1bWVudCwgZXh0ZXJuYWxWYWxpZGF0b3IpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2VxdWVuY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJQYXRjaCBzZXF1ZW5jZSBtdXN0IGJlIGFuIGFycmF5XCIsIFwiU0VRVUVOQ0VfTk9UX0FOX0FSUkFZXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudCkge1xuICAgICAgICAgICAgLy9jbG9uZSBkb2N1bWVudCBhbmQgc2VxdWVuY2Ugc28gdGhhdCB3ZSBjYW4gc2FmZWx5IHRyeSBhcHBseWluZyBvcGVyYXRpb25zXG4gICAgICAgICAgICBhcHBseVBhdGNoKF9kZWVwQ2xvbmUoZG9jdW1lbnQpLCBfZGVlcENsb25lKHNlcXVlbmNlKSwgZXh0ZXJuYWxWYWxpZGF0b3IgfHwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlcm5hbFZhbGlkYXRvciA9IGV4dGVybmFsVmFsaWRhdG9yIHx8IHZhbGlkYXRvcjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VxdWVuY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBleHRlcm5hbFZhbGlkYXRvcihzZXF1ZW5jZVtpXSwgaSwgZG9jdW1lbnQsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBKc29uUGF0Y2hFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Vwb2JlcmV6a2luL2Zhc3QtZGVlcC1lcXVhbFxuLy8gTUlUIExpY2Vuc2Vcbi8vIENvcHlyaWdodCAoYykgMjAxNyBFdmdlbnkgUG9iZXJlemtpblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4vLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4vLyBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbi8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbi8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4vLyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuLy8gU09GVFdBUkUuXG5leHBvcnQgZnVuY3Rpb24gX2FyZUVxdWFscyhhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChhICYmIGIgJiYgdHlwZW9mIGEgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYiA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIHZhciBhcnJBID0gQXJyYXkuaXNBcnJheShhKSwgYXJyQiA9IEFycmF5LmlzQXJyYXkoYiksIGksIGxlbmd0aCwga2V5O1xuICAgICAgICBpZiAoYXJyQSAmJiBhcnJCKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2ldLCBiW2ldKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyckEgIT0gYXJyQilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgaWYgKCFiLmhhc093blByb3BlcnR5KGtleXNbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgaWYgKCFfYXJlRXF1YWxzKGFba2V5XSwgYltrZXldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG59XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIl9kZWVwQ2xvbmUiLCJpc0ludGVnZXIiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJoYXNVbmRlZmluZWQiLCJKc29uUGF0Y2hFcnJvciIsImRlZXBDbG9uZSIsIm9iak9wcyIsImFkZCIsIm9iaiIsImtleSIsImRvY3VtZW50IiwidmFsdWUiLCJuZXdEb2N1bWVudCIsInJlbW92ZSIsInJlbW92ZWQiLCJyZXBsYWNlIiwibW92ZSIsImdldFZhbHVlQnlQb2ludGVyIiwicGF0aCIsIm9yaWdpbmFsVmFsdWUiLCJhcHBseU9wZXJhdGlvbiIsIm9wIiwiZnJvbSIsImNvcHkiLCJ2YWx1ZVRvQ29weSIsInRlc3QiLCJfYXJlRXF1YWxzIiwiX2dldCIsImFyck9wcyIsImFyciIsImkiLCJzcGxpY2UiLCJpbmRleCIsInJlbW92ZWRMaXN0IiwicG9pbnRlciIsImdldE9yaWdpbmFsRGVzdGluYXRpb24iLCJvcGVyYXRpb24iLCJ2YWxpZGF0ZU9wZXJhdGlvbiIsIm11dGF0ZURvY3VtZW50IiwiYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyIsInZhbGlkYXRvciIsInJldHVyblZhbHVlIiwia2V5cyIsInNwbGl0IiwidCIsImxlbiIsImxlbmd0aCIsImV4aXN0aW5nUGF0aEZyYWdtZW50IiwidW5kZWZpbmVkIiwidmFsaWRhdGVGdW5jdGlvbiIsImluZGV4T2YiLCJUeXBlRXJyb3IiLCJzbGljZSIsImpvaW4iLCJBcnJheSIsImlzQXJyYXkiLCJjYWxsIiwiYXBwbHlQYXRjaCIsInBhdGNoIiwicmVzdWx0cyIsImFwcGx5UmVkdWNlciIsIm9wZXJhdGlvblJlc3VsdCIsInBhdGhMZW4iLCJleGlzdGluZ1BhdGhMZW4iLCJleGlzdGluZ1ZhbHVlIiwiZXJyb3IiLCJ2YWxpZGF0ZSIsIm5hbWUiLCJzZXF1ZW5jZSIsImV4dGVybmFsVmFsaWRhdG9yIiwiZSIsImEiLCJiIiwiYXJyQSIsImFyckIiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQzRGO0FBQ3REO0FBQ3ZDLElBQUlLLGFBQWEsSUFBSUM7QUFDckIsTUFBTUM7SUFDRkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2JDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO1FBQ0FOLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixHQUFHLEdBQUdBO0lBQ2Y7QUFDSjtBQUNBLE1BQU1RO0lBQ0ZULFlBQVlVLFFBQVEsRUFBRUMsUUFBUSxDQUFFO1FBQzVCVCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0csUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7QUFDSjtBQUNBLFNBQVNDLFVBQVVYLEdBQUc7SUFDbEIsT0FBT0osV0FBV2dCLEdBQUcsQ0FBQ1o7QUFDMUI7QUFD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L2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanM/Y2U2YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDEzLTIwMjEgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlXG4gKi9cbmltcG9ydCB7IF9kZWVwQ2xvbmUsIF9vYmplY3RLZXlzLCBlc2NhcGVQYXRoQ29tcG9uZW50LCBoYXNPd25Qcm9wZXJ0eSwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBhcHBseVBhdGNoIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xudmFyIGJlZm9yZURpY3QgPSBuZXcgV2Vha01hcCgpO1xuY2xhc3MgTWlycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihvYmopIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JqXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ic2VydmVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWx1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICB9XG59XG5jbGFzcyBPYnNlcnZlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCBvYnNlcnZlcikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNaXJyb3Iob2JqKSB7XG4gICAgcmV0dXJuIGJlZm9yZURpY3QuZ2V0KG9iaik7XG59XG5mdW5jdGlvbiBnZXRPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBtaXJyb3Iub2JzZXJ2ZXJzLmdldChjYWxsYmFjayk7XG59XG5mdW5jdGlvbiByZW1vdmVPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBvYnNlcnZlcikge1xuICAgIG1pcnJvci5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyLmNhbGxiYWNrKTtcbn1cbi8qKlxuICogRGV0YWNoIGFuIG9ic2VydmVyIGZyb20gYW4gb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bm9ic2VydmUocm9vdCwgb2JzZXJ2ZXIpIHtcbiAgICBvYnNlcnZlci51bm9ic2VydmUoKTtcbn1cbi8qKlxuICogT2JzZXJ2ZXMgY2hhbmdlcyBtYWRlIHRvIGFuIG9iamVjdCwgd2hpY2ggY2FuIHRoZW4gYmUgcmV0cmlldmVkIHVzaW5nIGdlbmVyYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlKG9iaiwgY2FsbGJhY2spIHtcbiAgICB2YXIgcGF0Y2hlcyA9IFtdO1xuICAgIHZhciBvYnNlcnZlcjtcbiAgICB2YXIgbWlycm9yID0gZ2V0TWlycm9yKG9iaik7XG4gICAgaWYgKCFtaXJyb3IpIHtcbiAgICAgICAgbWlycm9yID0gbmV3IE1pcnJvcihvYmopO1xuICAgICAgICBiZWZvcmVEaWN0LnNldChvYmosIG1pcnJvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBvYnNlcnZlckluZm8gPSBnZXRPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBjYWxsYmFjayk7XG4gICAgICAgIG9ic2VydmVyID0gb2JzZXJ2ZXJJbmZvICYmIG9ic2VydmVySW5mby5vYnNlcnZlcjtcbiAgICB9XG4gICAgaWYgKG9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlcjtcbiAgICB9XG4gICAgb2JzZXJ2ZXIgPSB7fTtcbiAgICBtaXJyb3IudmFsdWUgPSBfZGVlcENsb25lKG9iaik7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIG9ic2VydmVyLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIG9ic2VydmVyLm5leHQgPSBudWxsO1xuICAgICAgICB2YXIgZGlydHlDaGVjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGdlbmVyYXRlKG9ic2VydmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZhc3RDaGVjayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBzZXRUaW1lb3V0KGRpcnR5Q2hlY2spO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgLy9ub3QgTm9kZVxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9ic2VydmVyLnBhdGNoZXMgPSBwYXRjaGVzO1xuICAgIG9ic2VydmVyLm9iamVjdCA9IG9iajtcbiAgICBvYnNlcnZlci51bm9ic2VydmUgPSAoKSA9PiB7XG4gICAgICAgIGdlbmVyYXRlKG9ic2VydmVyKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KG9ic2VydmVyLm5leHQpO1xuICAgICAgICByZW1vdmVPYnNlcnZlckZyb21NaXJyb3IobWlycm9yLCBvYnNlcnZlcik7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZhc3RDaGVjayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIG1pcnJvci5vYnNlcnZlcnMuc2V0KGNhbGxiYWNrLCBuZXcgT2JzZXJ2ZXJJbmZvKGNhbGxiYWNrLCBvYnNlcnZlcikpO1xuICAgIHJldHVybiBvYnNlcnZlcjtcbn1cbi8qKlxuICogR2VuZXJhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIGFuIG9ic2VydmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZShvYnNlcnZlciwgaW52ZXJ0aWJsZSA9IGZhbHNlKSB7XG4gICAgdmFyIG1pcnJvciA9IGJlZm9yZURpY3QuZ2V0KG9ic2VydmVyLm9iamVjdCk7XG4gICAgX2dlbmVyYXRlKG1pcnJvci52YWx1ZSwgb2JzZXJ2ZXIub2JqZWN0LCBvYnNlcnZlci5wYXRjaGVzLCBcIlwiLCBpbnZlcnRpYmxlKTtcbiAgICBpZiAob2JzZXJ2ZXIucGF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgICAgYXBwbHlQYXRjaChtaXJyb3IudmFsdWUsIG9ic2VydmVyLnBhdGNoZXMpO1xuICAgIH1cbiAgICB2YXIgdGVtcCA9IG9ic2VydmVyLnBhdGNoZXM7XG4gICAgaWYgKHRlbXAubGVuZ3RoID4gMCkge1xuICAgICAgICBvYnNlcnZlci5wYXRjaGVzID0gW107XG4gICAgICAgIGlmIChvYnNlcnZlci5jYWxsYmFjaykge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY2FsbGJhY2sodGVtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRlbXA7XG59XG4vLyBEaXJ0eSBjaGVjayBpZiBvYmogaXMgZGlmZmVyZW50IGZyb20gbWlycm9yLCBnZW5lcmF0ZSBwYXRjaGVzIGFuZCB1cGRhdGUgbWlycm9yXG5mdW5jdGlvbiBfZ2VuZXJhdGUobWlycm9yLCBvYmosIHBhdGNoZXMsIHBhdGgsIGludmVydGlibGUpIHtcbiAgICBpZiAob2JqID09PSBtaXJyb3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iai50b0pTT04gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBvYmogPSBvYmoudG9KU09OKCk7XG4gICAgfVxuICAgIHZhciBuZXdLZXlzID0gX29iamVjdEtleXMob2JqKTtcbiAgICB2YXIgb2xkS2V5cyA9IF9vYmplY3RLZXlzKG1pcnJvcik7XG4gICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICB2YXIgZGVsZXRlZCA9IGZhbHNlO1xuICAgIC8vaWYgZXZlciBcIm1vdmVcIiBvcGVyYXRpb24gaXMgaW1wbGVtZW50ZWQgaGVyZSwgbWFrZSBzdXJlIHRoaXMgdGVzdCBydW5zIE9LOiBcInNob3VsZCBub3QgZ2VuZXJhdGUgdGhlIHNhbWUgcGF0Y2ggdHdpY2UgKG1vdmUpXCJcbiAgICBmb3IgKHZhciB0ID0gb2xkS2V5cy5sZW5ndGggLSAxOyB0ID49IDA7IHQtLSkge1xuICAgICAgICB2YXIga2V5ID0gb2xkS2V5c1t0XTtcbiAgICAgICAgdmFyIG9sZFZhbCA9IG1pcnJvcltrZXldO1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCBrZXkpICYmXG4gICAgICAgICAgICAhKG9ialtrZXldID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBvbGRWYWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkob2JqKSA9PT0gZmFsc2UpKSB7XG4gICAgICAgICAgICB2YXIgbmV3VmFsID0gb2JqW2tleV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9sZFZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgbmV3VmFsID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBuZXdWYWwgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkob2xkVmFsKSA9PT0gQXJyYXkuaXNBcnJheShuZXdWYWwpKSB7XG4gICAgICAgICAgICAgICAgX2dlbmVyYXRlKG9sZFZhbCwgbmV3VmFsLCBwYXRjaGVzLCBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksIGludmVydGlibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9sZFZhbCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUobmV3VmFsKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWlycm9yKSA9PT0gQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcInRlc3RcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGV0ZWQgPSB0cnVlOyAvLyBwcm9wZXJ0eSBoYXMgYmVlbiBkZWxldGVkXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaW52ZXJ0aWJsZSkge1xuICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7IG9wOiBcInRlc3RcIiwgcGF0aCwgdmFsdWU6IG1pcnJvciB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7IG9wOiBcInJlcGxhY2VcIiwgcGF0aCwgdmFsdWU6IG9iaiB9KTtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghZGVsZXRlZCAmJiBuZXdLZXlzLmxlbmd0aCA9PSBvbGRLZXlzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgbmV3S2V5cy5sZW5ndGg7IHQrKykge1xuICAgICAgICB2YXIga2V5ID0gbmV3S2V5c1t0XTtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShtaXJyb3IsIGtleSkgJiYgb2JqW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2JqW2tleV0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhbiBhcnJheSBvZiBwYXRjaGVzIGZyb20gdGhlIGRpZmZlcmVuY2VzIGluIHR3byBvYmplY3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlKHRyZWUxLCB0cmVlMiwgaW52ZXJ0aWJsZSA9IGZhbHNlKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICBfZ2VuZXJhdGUodHJlZTEsIHRyZWUyLCBwYXRjaGVzLCBcIlwiLCBpbnZlcnRpYmxlKTtcbiAgICByZXR1cm4gcGF0Y2hlcztcbn1cbiJdLCJuYW1lcyI6WyJfZGVlcENsb25lIiwiX29iamVjdEtleXMiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzT3duUHJvcGVydHkiLCJhcHBseVBhdGNoIiwiYmVmb3JlRGljdCIsIldlYWtNYXAiLCJNaXJyb3IiLCJjb25zdHJ1Y3RvciIsIm9iaiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJNYXAiLCJPYnNlcnZlckluZm8iLCJjYWxsYmFjayIsIm9ic2VydmVyIiwiZ2V0TWlycm9yIiwiZ2V0IiwiZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yIiwibWlycm9yIiwib2JzZXJ2ZXJzIiwicmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yIiwiZGVsZXRlIiwidW5vYnNlcnZlIiwicm9vdCIsIm9ic2VydmUiLCJwYXRjaGVzIiwic2V0Iiwib2JzZXJ2ZXJJbmZvIiwibmV4dCIsImRpcnR5Q2hlY2siLCJnZW5lcmF0ZSIsImZhc3RDaGVjayIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwib2JqZWN0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImludmVydGlibGUiLCJfZ2VuZXJhdGUiLCJsZW5ndGgiLCJ0ZW1wIiwicGF0aCIsInRvSlNPTiIsIm5ld0tleXMiLCJvbGRLZXlzIiwiY2hhbmdlZCIsImRlbGV0ZWQiLCJ0Iiwia2V5Iiwib2xkVmFsIiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwibmV3VmFsIiwicHVzaCIsIm9wIiwiY29tcGFyZSIsInRyZWUxIiwidHJlZTIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNQSxrQkFBa0JDLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYztBQUNoRCxTQUFTQSxlQUFlQyxHQUFHLEVBQUVDLEdBQUc7SUFDbkMsT0FBT0wsZ0JBQWdCTSxJQUFJLENBQUNGLEtBQUtDO0FBQ3JDO0FBQ08sU0FBU0UsWUFBWUgsR0FBRztJQUMzQixJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07UUFDcEIsTUFBTU0sT0FBTyxJQUFJRixNQUFNSixJQUFJTyxNQUFNO1FBQ2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLQyxNQUFNLEVBQUVDLElBQUs7WUFDbENGLElBQUksQ0FBQ0UsRUFBRSxHQUFHLEtBQUtBO1FBQ25CO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLElBQUlULE9BQU9TLElBQUksRUFBRTtRQUNiLE9BQU9ULE9BQU9TLElBQUksQ0FBQ047SUFDdkI7SUFDQSxJQUFJTSxPQUFPLEVBQUU7SUFDYixJQUFLLElBQUlHLEtBQUtULElBQUs7UUFDZixJQUFJRCxlQUFlQyxLQUFLUyxJQUFJO1lBQ3hCSCxLQUFLSSxJQUFJLENBQUNEO1FBQ2Q7SUFDSjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNLLFdBQVdYLEdBQUc7SUFDMUIsT0FBUSxPQUFPQTtRQUNYLEtBQUs7WUFDRCxPQUFPWSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ2QsT0FBTyxxRUFBcUU7UUFDakgsS0FBSztZQUNELE9BQU8sTUFBTSxvREFBb0Q7UUFDckU7WUFDSSxPQUFPQSxLQUFLLDZCQUE2QjtJQUNqRDtBQUNKO0FBQ0EseUNBQXlDO0FBQ2xDLFNBQVNlLFVBQVVDLEdB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QWEzQixJQUFJLENBQUMsQ0FBQyxFQUFFVCxJQUFJLEVBQUUsRUFBRXFDLE1BQU0sQ0FBQztRQUN4QztJQUNKO0lBQ0EsT0FBT0QsYUFBYUUsSUFBSSxDQUFDO0FBQzdCO0FBQ08sTUFBTUMsbUJBQW1CWDtJQUM1QlksWUFBWU4sT0FBTyxFQUFFTyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxJQUFJLENBQUU7UUFDL0MsS0FBSyxDQUFDWCwyQkFBMkJDLFNBQVM7WUFBRU87WUFBTUM7WUFBT0M7WUFBV0M7UUFBSztRQUN6RWhELE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9JO1FBQ1g7UUFDQTdDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9LO1FBQ1g7UUFDQTlDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9NO1FBQ1g7UUFDQS9DLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9PO1FBQ1g7UUFDQWhELE9BQU9xRCxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdwRCxTQUFTLEdBQUcsb0VBQW9FO1FBQ3ZILElBQUksQ0FBQ3FDLE9BQU8sR0FBR0QsMkJBQTJCQyxTQUFTO1lBQy9DTztZQUNBQztZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvaGVscGVycy5qcz8yOTk5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIGJlY2F1c2Ugb2YgRVNNIGltcG9ydCBpc3N1ZXNcbi8qIVxuICogaHR0cHM6Ly9naXRodWIuY29tL1N0YXJjb3VudGVyLUphY2svSlNPTi1QYXRjaFxuICogKGMpIDIwMTctMjAyMiBKb2FjaGltIFdlc3RlclxuICogTUlUIGxpY2Vuc2VkXG4gKi9cbmNvbnN0IF9oYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5leHBvcnQgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gX2hhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9vYmplY3RLZXlzKG9iaikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBBcnJheShvYmoubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBrZXlzW2tdID0gXCJcIiArIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKTtcbiAgICB9XG4gICAgbGV0IGtleXMgPSBbXTtcbiAgICBmb3IgKGxldCBpIGluIG9iaikge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCBpKSkge1xuICAgICAgICAgICAga2V5cy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufVxuLyoqXG4gKiBEZWVwbHkgY2xvbmUgdGhlIG9iamVjdC5cbiAqIGh0dHBzOi8vanNwZXJmLmNvbS9kZWVwLWNvcHktdnMtanNvbi1zdHJpbmdpZnktanNvbi1wYXJzZS8yNSAocmVjdXJzaXZlRGVlcENvcHkpXG4gKiBAcGFyYW0gIHthbnl9IG9iaiB2YWx1ZSB0byBjbG9uZVxuICogQHJldHVybiB7YW55fSBjbG9uZWQgb2JqXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVlcENsb25lKG9iaikge1xuICAgIHN3aXRjaCAodHlwZW9mIG9iaikge1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTsgLy9GYXN0ZXIgdGhhbiBFUzUgY2xvbmUgLSBodHRwOi8vanNwZXJmLmNvbS9kZWVwLWNsb25pbmctb2Ytb2JqZWN0cy81XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvL3RoaXMgaXMgaG93IEpTT04uc3RyaW5naWZ5IGJlaGF2ZXMgZm9yIGFycmF5IGl0ZW1zXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gb2JqOyAvL25vIG5lZWQgdG8gY2xvbmUgcHJpbWl0aXZlc1xuICAgIH1cbn1cbi8vM3ggZmFzdGVyIHRoYW4gY2FjaGVkIC9eXFxkKyQvLnRlc3Qoc3RyKVxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZWdlcihzdHIpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgY29uc3QgbGVuID0gc3RyLmxlbmd0aDtcbiAgICBsZXQgY2hhckNvZGU7XG4gICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBFc2NhcGVzIGEganNvbiBwb2ludGVyIHBhdGhcbiAqIEBwYXJhbSBwYXRoIFRoZSByYXcgcG9pbnRlclxuICogQHJldHVybiB0aGUgRXNjYXBlZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICBpZiAocGF0aC5pbmRleE9mKFwiL1wiKSA9PT0gLTEgJiYgcGF0aC5pbmRleE9mKFwiflwiKSA9PT0gLTEpXG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL34vZywgXCJ+MFwiKS5yZXBsYWNlKC9cXC8vZywgXCJ+MVwiKTtcbn1cbi8qKlxuICogVW5lc2NhcGVzIGEganNvbiBwb2ludGVyIHBhdGhcbiAqIEBwYXJhbSBwYXRoIFRoZSBlc2NhcGVkIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHVuZXNjYXBlZCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmVzY2FwZVBhdGhDb21wb25lbnQocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL34xL2csIFwiL1wiKS5yZXBsYWNlKC9+MC9nLCBcIn5cIik7XG59XG5leHBvcnQgZnVuY3Rpb24gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKSB7XG4gICAgbGV0IGZvdW5kO1xuICAgIGZvciAobGV0IGtleSBpbiByb290KSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShyb290LCBrZXkpKSB7XG4gICAgICAgICAgICBpZiAocm9vdFtrZXldID09PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlUGF0aENvbXBvbmVudChrZXkpICsgXCIvXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygcm9vdFtrZXldID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZm91bmQgPSBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290W2tleV0sIG9iaik7XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiICsgZm91bmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcIlwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGgocm9vdCwgb2JqKSB7XG4gICAgaWYgKHJvb3QgPT09IG9iaikge1xuICAgICAgICByZXR1cm4gXCIvXCI7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290LCBvYmopO1xuICAgIGlmIChwYXRoID09PSBcIlwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9iamVjdCBub3QgZm91bmQgaW4gcm9vdFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGAvJHtwYXRofWA7XG59XG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYW55IHVuZGVmaW5lZCB2YWx1ZXMgaW5zaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzVW5kZWZpbmVkKG9iaikge1xuICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG9iaikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1VuZGVmaW5lZChvYmpbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzID0gX29iamVjdEtleXMob2JqKTtcbiAgICAgICAgICAgIGNvbnN0IG9iaktleXNMZW5ndGggPSBvYmpLZXlzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqS2V5c0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1VuZGVmaW5lZChvYmpbb2JqS2V5c1tpXV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCBhcmdzKSB7XG4gICAgY29uc3QgbWVzc2FnZVBhcnRzID0gW21lc3NhZ2VdO1xuICAgIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0eXBlb2YgYXJnc1trZXldID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGFyZ3Nba2V5XSwgbnVsbCwgMilcbiAgICAgICAgICAgIDogYXJnc1trZXldOyAvLyBwcmV0dHkgcHJpbnRcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgbWVzc2FnZVBhcnRzLnB1c2goYCR7a2V5fTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZVBhcnRzLmpvaW4oXCJcXG5cIik7XG59XG5leHBvcnQgY2xhc3MgUGF0Y2hFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBuYW1lLCBpbmRleCwgb3BlcmF0aW9uLCB0cmVlKSB7XG4gICAgICAgIHN1cGVyKHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIHsgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSB9KSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluZGV4XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BlcmF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBvcGVyYXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyZWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRyZWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7IC8vIHJlc3RvcmUgcHJvdG90eXBlIGNoYWluLCBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4MzQyMzU5XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIHRyZWUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJfaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm9iaiIsImtleSIsImNhbGwiLCJfb2JqZWN0S2V5cyIsIkFycmF5IiwiaXNBcnJheSIsImtleXMiLCJsZW5ndGgiLCJrIiwiaSIsInB1c2giLCJfZGVlcENsb25lIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiaXNJbnRlZ2VyIiwic3RyIiwibGVuIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiZXNjYXBlUGF0aENvbXBvbmVudCIsInBhdGgiLCJpbmRleE9mIiwicmVwbGFjZSIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsIl9nZXRQYXRoUmVjdXJzaXZlIiwicm9vdCIsImZvdW5kIiwiZ2V0UGF0aCIsIkVycm9yIiwiaGFzVW5kZWZpbmVkIiwidW5kZWZpbmVkIiwib2JqS2V5cyIsIm9iaktleXNMZW5ndGgiLCJwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlciIsIm1lc3NhZ2UiLCJhcmdzIiwibWVzc2FnZVBhcnRzIiwidmFsdWUiLCJqb2luIiwiUGF0Y2hFcnJvciIsImNvbnN0cnVjdG9yIiwibmFtZSIsImluZGV4Iiwib3BlcmF0aW9uIiwidHJlZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwic2V0UHJvdG90eXBlT2YiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2hhc2guanM/NGI0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBpbnNlY3VyZUhhc2ggfSBmcm9tIFwiLi9qcy1zaGExL2hhc2guanNcIjtcbiJdLCJuYW1lcyI6WyJpbnNlY3VyZUhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nconst insecureHash = (message)=>{\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxjQUFjO0FBQ2QsdUVBQXVFO0FBQ3ZFOzs7Ozs7O0NBT0MsR0FDRCx1QkFBdUIsR0FDVjtBQUNiLElBQUlBLE9BQU8sTUFBMEIsR0FBR0MsQ0FBTUEsR0FBRyxDQUFDO0FBQ2xELElBQUlDLFlBQVksbUJBQW1CQyxLQUFLLENBQUM7QUFDekMsSUFBSUMsUUFBUTtJQUFDLENBQUM7SUFBWTtJQUFTO0lBQU87Q0FBSTtBQUM5QyxJQUFJQyxRQUFRO0lBQUM7SUFBSTtJQUFJO0lBQUc7Q0FBRTtBQUMxQixJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxLQUFLQyxZQUFZO0lBQ3RCLElBQUlBLGNBQWM7UUFDZEYsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtRQUNwRSxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEIsT0FDSztRQUNELElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQUM7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFH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U0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNRLEtBQUssS0FBSyxHQUNwQlIsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNTLEtBQUssS0FBSyxHQUNwQlQsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNVLEtBQUssS0FBSyxHQUNwQlYsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNXLEtBQUssS0FBSyxHQUNwQlgsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNZLEtBQUssS0FBSztBQUM1QjtBQUNBTixLQUFLYyxTQUFTLENBQUN3QixRQUFRLEdBQUd0QyxLQUFLYyxTQUFTLENBQUN1QixHQUFHO0FBQzVDckMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTSxHQUFHO0lBQ3BCLElBQUksQ0FBQ1gsUUFBUTtJQUNiLElBQUkxQixLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRTtJQUN4RSxPQUFPO1FBQ0ZKLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztLQUNSO0FBQ0w7QUFDQU4sS0FBS2MsU0FBUyxDQUFDMEIsS0FBSyxHQUFHeEMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTTtBQUM1Q3ZDLEtBQUtjLFNBQVMsQ0FBQzJCLFdBQVcsR0FBRztJQUN6QixJQUFJLENBQUNiLFFBQVE7SUFDYixJQUFJYyxTQUFTLElBQUl2QixZQUFZO0lBQzdCLElBQUl3QixXQUFXLElBQUlDLFNBQVNGO0lBQzVCQyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMzQyxFQUFFO0lBQzdCeUMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDMUMsRUFBRTtJQUM3QndDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ3pDLEVBQUU7SUFDN0J1QyxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUN4QyxFQUFFO0lBQzlCc0MsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDdkMsRUFBRTtJQUM5QixPQUFPb0M7QUFDWDtBQUNPLE1BQU1JLGVBQWUsQ0FBQzlCO0lBQ3pCLE9BQU8sSUFBSWhCLEtBQUssTUFBTWUsTUFBTSxDQUFDQyxRQUFRLENBQUMsTUFBTTtBQUNoRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzPzFkYzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgdG8gZGVhbCB3aXRoIHBvcnRhYmlsaXR5IGlzc3VlcyB3aXRoIGltcG9ydGluZyBjcnlwdG8gbW9kdWxlXG4vKlxuICogW2pzLXNoYTFde0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9lbW4xNzgvanMtc2hhMX1cbiAqXG4gKiBAdmVyc2lvbiAwLjYuMFxuICogQGF1dGhvciBDaGVuLCBZaS1DeXVhbiBbZW1uMTc4QGdtYWlsLmNvbV1cbiAqIEBjb3B5cmlnaHQgQ2hlbiwgWWktQ3l1YW4gMjAxNC0yMDE3XG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgPyB3aW5kb3cgOiB7fTtcbnZhciBIRVhfQ0hBUlMgPSBcIjAxMjM0NTY3ODlhYmNkZWZcIi5zcGxpdChcIlwiKTtcbnZhciBFWFRSQSA9IFstMjE0NzQ4MzY0OCwgODM4ODYwOCwgMzI3NjgsIDEyOF07XG52YXIgU0hJRlQgPSBbMjQsIDE2LCA4LCAwXTtcbnZhciBPVVRQVVRfVFlQRVMgPSBbXCJoZXhcIiwgXCJhcnJheVwiLCBcImRpZ2VzdFwiLCBcImFycmF5QnVmZmVyXCJdO1xudmFyIGJsb2NrcyA9IFtdO1xuZnVuY3Rpb24gU2hhMShzaGFyZWRNZW1vcnkpIHtcbiAgICBpZiAoc2hhcmVkTWVtb3J5KSB7XG4gICAgICAgIGJsb2Nrc1swXSA9XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB0aGlzLmJsb2NrcyA9IGJsb2NrcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xuICAgIH1cbiAgICB0aGlzLmgwID0gMHg2NzQ1MjMwMTtcbiAgICB0aGlzLmgxID0gMHhlZmNkYWI4OTtcbiAgICB0aGlzLmgyID0gMHg5OGJhZGNmZTtcbiAgICB0aGlzLmgzID0gMHgxMDMyNTQ3NjtcbiAgICB0aGlzLmg0ID0gMHhjM2QyZTFmMDtcbiAgICB0aGlzLmJsb2NrID0gdGhpcy5zdGFydCA9IHRoaXMuYnl0ZXMgPSB0aGlzLmhCeXRlcyA9IDA7XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0aGlzLmhhc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZmlyc3QgPSB0cnVlO1xufVxuU2hhMS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbm90U3RyaW5nID0gdHlwZW9mIG1lc3NhZ2UgIT09IFwic3RyaW5nXCI7XG4gICAgaWYgKG5vdFN0cmluZyAmJiBtZXNzYWdlLmNvbnN0cnVjdG9yID09PSByb290LkFycmF5QnVmZmVyKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBuZXcgVWludDhBcnJheShtZXNzYWdlKTtcbiAgICB9XG4gICAgdmFyIGNvZGUsIGluZGV4ID0gMCwgaSwgbGVuZ3RoID0gbWVzc2FnZS5sZW5ndGggfHwgMCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJsb2Nrc1swXSA9IHRoaXMuYmxvY2s7XG4gICAgICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RTdHJpbmcpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IG1lc3NhZ2VbaW5kZXhdIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG4gICAgICAgICAgICAgICAgY29kZSA9IG1lc3NhZ2UuY2hhckNvZGVBdChpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgPCAweDgwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9IGNvZGUgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCAweDgwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhjMCB8IChjb2RlID4+IDYpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA8IDB4ZDgwMCB8fCBjb2RlID49IDB4ZTAwMCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhlMCB8IChjb2RlID4+IDEyKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAweDEwMDAwICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKChjb2RlICYgMHgzZmYpIDw8IDEwKSB8IChtZXNzYWdlLmNoYXJDb2RlQXQoKytpbmRleCkgJiAweDNmZikpO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHhmMCB8IChjb2RlID4+IDE4KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDEyKSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEJ5dGVJbmRleCA9IGk7XG4gICAgICAgIHRoaXMuYnl0ZXMgKz0gaSAtIHRoaXMuc3RhcnQ7XG4gICAgICAgIGlmIChpID49IDY0KSB7XG4gICAgICAgICAgICB0aGlzLmJsb2NrID0gYmxvY2tzWzE2XTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpIC0gNjQ7XG4gICAgICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgICAgIHRoaXMuaGFzaGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmJ5dGVzID4gNDI5NDk2NzI5NSkge1xuICAgICAgICB0aGlzLmhCeXRlcyArPSAodGhpcy5ieXRlcyAvIDQyOTQ5NjcyOTYpIDw8IDA7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSB0aGlzLmJ5dGVzICUgNDI5NDk2NzI5NjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuU2hhMS5wcm90b3R5cGUuZmluYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBibG9ja3MgPSB0aGlzLmJsb2NrcywgaSA9IHRoaXMubGFzdEJ5dGVJbmRleDtcbiAgICBibG9ja3NbMTZdID0gdGhpcy5ibG9jaztcbiAgICBibG9ja3NbaSA+PiAyXSB8PSBFWFRSQVtpICYgM107XG4gICAgdGhpcy5ibG9jayA9IGJsb2Nrc1sxNl07XG4gICAgaWYgKGkgPj0gNTYpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc2hlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2tzWzBdID0gdGhpcy5ibG9jaztcbiAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICBibG9ja3NbMV0gPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1syXSA9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbN10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTFdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgIH1cbiAgICBibG9ja3NbMTRdID0gKHRoaXMuaEJ5dGVzIDw8IDMpIHwgKHRoaXMuYnl0ZXMgPj4+IDI5KTtcbiAgICBibG9ja3NbMTVdID0gdGhpcy5ieXRlcyA8PCAzO1xuICAgIHRoaXMuaGFzaCgpO1xufTtcblNoYTEucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGEgPSB0aGlzLmgwLCBiID0gdGhpcy5oMSwgYyA9IHRoaXMuaDIsIGQgPSB0aGlzLmgzLCBlID0gdGhpcy5oNDtcbiAgICB2YXIgZiwgaiwgdCwgYmxvY2tzID0gdGhpcy5ibG9ja3M7XG4gICAgZm9yIChqID0gMTY7IGogPCA4MDsgKytqKSB7XG4gICAgICAgIHQgPSBibG9ja3NbaiAtIDNdIF4gYmxvY2tzW2ogLSA4XSBeIGJsb2Nrc1tqIC0gMTRdIF4gYmxvY2tzW2ogLSAxNl07XG4gICAgICAgIGJsb2Nrc1tqXSA9ICh0IDw8IDEpIHwgKHQgPj4+IDMxKTtcbiAgICB9XG4gICAgZm9yIChqID0gMDsgaiA8IDIwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAofmIgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8ICh+YSAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8ICh+ZSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8ICh+ZCAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8ICh+YyAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE1MTg1MDAyNDkgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDQwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gYSBeIGIgXiBjO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gZSBeIGEgXiBiO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gYyBeIGQgXiBlO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSArIDE4NTk3NzUzOTMgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDYwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gKGEgJiBiKSB8IChhICYgYykgfCAoYiAmIGMpO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gKGUgJiBhKSB8IChlICYgYikgfCAoYSAmIGIpO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gKGQgJiBlKSB8IChkICYgYSkgfCAoZSAmIGEpO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gKGMgJiBkKSB8IChjICYgZSkgfCAoZCAmIGUpO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSAtIDE4OTQwMDc1ODggKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICBmb3IgKDsgaiA8IDgwOyBqICs9IDUpIHtcbiAgICAgICAgZiA9IGIgXiBjIF4gZDtcbiAgICAgICAgdCA9IChhIDw8IDUpIHwgKGEgPj4+IDI3KTtcbiAgICAgICAgZSA9ICh0ICsgZiArIGUgLSA4OTk0OTc1MTQgKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSBhIF4gYiBeIGM7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IGUgXiBhIF4gYjtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDJdKSA8PCAwO1xuICAgICAgICBlID0gKGUgPDwgMzApIHwgKGUgPj4+IDIpO1xuICAgICAgICBmID0gZCBeIGUgXiBhO1xuICAgICAgICB0ID0gKGMgPDwgNSkgfCAoYyA+Pj4gMjcpO1xuICAgICAgICBiID0gKHQgKyBmICsgYiAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSBjIF4gZCBeIGU7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgdGhpcy5oMCA9ICh0aGlzLmgwICsgYSkgPDwgMDtcbiAgICB0aGlzLmgxID0gKHRoaXMuaDEgKyBiKSA8PCAwO1xuICAgIHRoaXMuaDIgPSAodGhpcy5oMiArIGMpIDw8IDA7XG4gICAgdGhpcy5oMyA9ICh0aGlzLmgzICsgZCkgPDwgMDtcbiAgICB0aGlzLmg0ID0gKHRoaXMuaDQgKyBlKSA8PCAwO1xufTtcblNoYTEucHJvdG90eXBlLmhleCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0O1xuICAgIHJldHVybiAoSEVYX0NIQVJTWyhoMCA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDAgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gxICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMiAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDMgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2g0ICYgMHgwZl0pO1xufTtcblNoYTEucHJvdG90eXBlLnRvU3RyaW5nID0gU2hhMS5wcm90b3R5cGUuaGV4O1xuU2hhMS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzLCBoNCA9IHRoaXMuaDQ7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgKGgwID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMCA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDAgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMCAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDEgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgxID4+IDgpICYgMHhmZixcbiAgICAgICAgaDEgJiAweGZmLFxuICAgICAgICAoaDIgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgyID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgyICYgMHhmZixcbiAgICAgICAgKGgzID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDMgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMyAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDQgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDgpICYgMHhmZixcbiAgICAgICAgaDQgJiAweGZmLFxuICAgIF07XG59O1xuU2hhMS5wcm90b3R5cGUuYXJyYXkgPSBTaGExLnByb3RvdHlwZS5kaWdlc3Q7XG5TaGExLnByb3RvdHlwZS5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigyMCk7XG4gICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDAsIHRoaXMuaDApO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMig0LCB0aGlzLmgxKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoOCwgdGhpcy5oMik7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDEyLCB0aGlzLmgzKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMTYsIHRoaXMuaDQpO1xuICAgIHJldHVybiBidWZmZXI7XG59O1xuZXhwb3J0IGNvbnN0IGluc2VjdXJlSGFzaCA9IChtZXNzYWdlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTaGExKHRydWUpLnVwZGF0ZShtZXNzYWdlKVtcImhleFwiXSgpO1xufTtcbiJdLCJuYW1lcyI6WyJyb290Iiwid2luZG93IiwiSEVYX0NIQVJTIiwic3BsaXQiLCJFWFRSQSIsIlNISUZUIiwiT1VUUFVUX1RZUEVTIiwiYmxvY2tzIiwiU2hhMSIsInNoYXJlZE1lbW9yeSIsImgwIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJibG9jayIsInN0YXJ0IiwiYnl0ZXMiLCJoQnl0ZXMiLCJmaW5hbGl6ZWQiLCJoYXNoZWQiLCJmaXJzdCIsInByb3RvdHlwZSIsInVwZGF0ZSIsIm1lc3NhZ2UiLCJub3RTdHJpbmciLCJjb25zdHJ1Y3RvciIsIkFycmF5QnVmZmVyIiwiVWludDhBcnJheSIsImNvZGUiLCJpbmRleCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwibGFzdEJ5dGVJbmRleCIsImhhc2giLCJmaW5hbGl6ZSIsImEiLCJiIiwiYyIsImQiLCJlIiwiZiIsImoiLCJ0IiwiaGV4IiwidG9TdHJpbmciLCJkaWdlc3QiLCJhcnJheSIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiZGF0YVZpZXciLCJEYXRhVmlldyIsInNldFVpbnQzMiIsImluc2VjdXJlSGFzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/math.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/math.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSimilarity: () => (/* binding */ cosineSimilarity),\n/* harmony export */   euclideanDistance: () => (/* binding */ euclideanDistance),\n/* harmony export */   innerProduct: () => (/* binding */ innerProduct),\n/* harmony export */   matrixFunc: () => (/* binding */ matrixFunc),\n/* harmony export */   maximalMarginalRelevance: () => (/* binding */ maximalMarginalRelevance),\n/* harmony export */   normalize: () => (/* binding */ normalize)\n/* harmony export */ });\n/* harmony import */ var ml_distance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ml-distance */ \"(rsc)/./node_modules/ml-distance/lib-esm/index.js\");\n\n/**\n * Apply a row-wise function between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n * @param {VectorFunction} func - The function to apply.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the result of applying the function between the corresponding rows of X and Y.\n */ function matrixFunc(X, Y, func) {\n    if (X.length === 0 || X[0].length === 0 || Y.length === 0 || Y[0].length === 0) {\n        return [\n            []\n        ];\n    }\n    if (X[0].length !== Y[0].length) {\n        throw new Error(`Number of columns in X and Y must be the same. X has shape ${[\n            X.length,\n            X[0].length\n        ]} and Y has shape ${[\n            Y.length,\n            Y[0].length\n        ]}.`);\n    }\n    return X.map((xVector)=>Y.map((yVector)=>func(xVector, yVector)).map((similarity)=>Number.isNaN(similarity) ? 0 : similarity));\n}\nfunction normalize(M, similarity = false) {\n    const max = matrixMaxVal(M);\n    return M.map((row)=>row.map((val)=>similarity ? 1 - val / max : val / max));\n}\n/**\n * This function calculates the row-wise cosine similarity between two matrices with the same number of columns.\n *\n * @param {number[][]} X - The first matrix.\n * @param {number[][]} Y - The second matrix.\n *\n * @throws {Error} If the number of columns in X and Y are not the same.\n *\n * @returns {number[][] | [[]]} A matrix where each row represents the cosine similarity values between the corresponding rows of X and Y.\n */ function cosineSimilarity(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.similarity.cosine);\n}\nfunction innerProduct(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.distance.innerProduct);\n}\nfunction euclideanDistance(X, Y) {\n    return matrixFunc(X, Y, ml_distance__WEBPACK_IMPORTED_MODULE_0__.distance.euclidean);\n}\n/**\n * This function implements the Maximal Marginal Relevance algorithm\n * to select a set of embeddings that maximizes the diversity and relevance to a query embedding.\n *\n * @param {number[]|number[][]} queryEmbedding - The query embedding.\n * @param {number[][]} embeddingList - The list of embeddings to select from.\n * @param {number} [lambda=0.5] - The trade-off parameter between relevance and diversity.\n * @param {number} [k=4] - The maximum number of embeddings to select.\n *\n * @returns {number[]} The indexes of the selected embeddings in the embeddingList.\n */ function maximalMarginalRelevance(queryEmbedding, embeddingList, lambda = 0.5, k = 4) {\n    if (Math.min(k, embeddingList.length) <= 0) {\n        return [];\n    }\n    const queryEmbeddingExpanded = Array.isArray(queryEmbedding[0]) ? queryEmbedding : [\n        queryEmbedding\n    ];\n    const similarityToQuery = cosineSimilarity(queryEmbeddingExpanded, embeddingList)[0];\n    const mostSimilarEmbeddingIndex = argMax(similarityToQuery).maxIndex;\n    const selectedEmbeddings = [\n        embeddingList[mostSimilarEmbeddingIndex]\n    ];\n    const selectedEmbeddingsIndexes = [\n        mostSimilarEmbeddingIndex\n    ];\n    while(selectedEmbeddingsIndexes.length < Math.min(k, embeddingList.length)){\n        let bestScore = -Infinity;\n        let bestIndex = -1;\n        const similarityToSelected = cosineSimilarity(embeddingList, selectedEmbeddings);\n        similarityToQuery.forEach((queryScore, queryScoreIndex)=>{\n            if (selectedEmbeddingsIndexes.includes(queryScoreIndex)) {\n                return;\n            }\n            const maxSimilarityToSelected = Math.max(...similarityToSelected[queryScoreIndex]);\n            const score = lambda * queryScore - (1 - lambda) * maxSimilarityToSelected;\n            if (score > bestScore) {\n                bestScore = score;\n                bestIndex = queryScoreIndex;\n            }\n        });\n        selectedEmbeddings.push(embeddingList[bestIndex]);\n        selectedEmbeddingsIndexes.push(bestIndex);\n    }\n    return selectedEmbeddingsIndexes;\n}\n/**\n * Finds the index of the maximum value in the given array.\n * @param {number[]} array - The input array.\n *\n * @returns {number} The index of the maximum value in the array. If the array is empty, returns -1.\n */ function argMax(array) {\n    if (array.length === 0) {\n        return {\n            maxIndex: -1,\n            maxValue: NaN\n        };\n    }\n    let maxValue = array[0];\n    let maxIndex = 0;\n    for(let i = 1; i < array.length; i += 1){\n        if (array[i] > maxValue) {\n            maxIndex = i;\n            maxValue = array[i];\n        }\n    }\n    return {\n        maxIndex,\n        maxValue\n    };\n}\nfunction matrixMaxVal(arrays) {\n    return arrays.reduce((acc, array)=>Math.max(acc, argMax(array).maxValue), 0);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZGO0FBQzdGOzs7Ozs7Ozs7O0NBVUMsR0FDTSxTQUFTSSxXQUFXQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsSUFBSTtJQUNqQyxJQUFJRixFQUFFRyxNQUFNLEtBQUssS0FDYkgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTSxLQUFLLEtBQ2hCRixFQUFFRSxNQUFNLEtBQUssS0FDYkYsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0UsTUFBTSxLQUFLLEdBQUc7UUFDbkIsT0FBTztZQUFDLEVBQUU7U0FBQztJQUNmO0lBQ0EsSUFBSUgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTSxLQUFLRixDQUFDLENBQUMsRUFBRSxDQUFDRSxNQUFNLEVBQUU7UUFDN0IsTUFBTSxJQUFJQyxNQUFNLENBQUMsMkRBQTJELEVBQUU7WUFDMUVKLEVBQUVHLE1BQU07WUFDUkgsQ0FBQyxDQUFDLEVBQUUsQ0FBQ0csTUFBTTtTQUNkLENBQUMsaUJBQWlCLEVBQUU7WUFBQ0YsRUFBRUUsTUFBTTtZQUFFRixDQUFDLENBQUMsRUFBRSxDQUFDRSxNQUFNO1NBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkQ7SUFDQSxPQUFPSCxFQUFFSyxHQUFHLENBQUMsQ0FBQ0MsVUFBWUwsRUFBRUksR0FBRyxDQUFDLENBQUNFLFVBQVlMLEtBQUtJLFNBQVNDLFVBQVVGLEdBQUcsQ0FBQyxDQUFDVixhQUFlYSxPQUFPQyxLQUFLLENBQUNkLGNBQWMsSUFBSUE7QUFDNUg7QUFDTyxTQUFTZSxVQUFVQyxDQUFDLEVBQUVoQixhQUFhLEtBQUs7SUFDM0MsTUFBTWlCLE1BQU1DLGFBQWFGO0lBQ3pCLE9BQU9BLEVBQUVOLEdBQUcsQ0FBQyxDQUFDUyxNQUFRQSxJQUFJVCxHQUFHLENBQUMsQ0FBQ1UsTUFBU3BCLGFBQWEsSUFBSW9CLE1BQU1ILE1BQU1HLE1BQU1IO0FBQy9FO0FBQ0E7Ozs7Ozs7OztDQVNDLEdBQ00sU0FBU0ksaUJBQWlCaEIsQ0FBQyxFQUFFQyxDQUFDO0lBQ2pDLE9BQU9GLFdBQVdDLEdBQUdDLEdBQUdMLDBEQUE2QjtBQUN6RDtBQUNPLFNBQVNzQixhQUFhbEIsQ0FBQyxFQUFFQyxDQUFDO0lBQzdCLE9BQU9GLFdBQVdDLEdBQUdDLEdBQUdILDhEQUF3QjtBQUNwRDtBQUNPLFNBQVNxQixrQkFBa0JuQixDQUFDLEVBQUVDLENBQUM7SUFDbEMsT0FBT0YsV0FBV0MsR0FBR0MsR0FBR0gsMkRBQXFCO0FBQ2pEO0FBQ0E7Ozs7Ozs7Ozs7Q0FVQyxHQUNNLFNBQVN1Qix5QkFBeUJDLGNBQWMsRUFBRUMsYUFBYSxFQUFFQyxTQUFTLEdBQUcsRUFBRUMsSUFBSSxDQUFDO0lBQ3ZGLElBQUlDLEtBQUtDLEdBQUcsQ0FBQ0YsR0FBR0YsY0FBY3BCLE1BQU0sS0FBSyxHQUFHO1FBQ3hDLE9BQU8sRUFBRTtJQUNiO0lBQ0EsTUFBTXlCLHlCQUEwQkMsTUFBTUMsT0FBTyxDQUFDUixjQUFjLENBQUMsRUFBRSxJQUFJQSxpQkFBaUI7UUFBQ0E7S0FBZTtJQUNwRyxNQUFNUyxvQkFBb0JmLGlCQUFpQlksd0JBQXdCTCxjQUFjLENBQUMsRUFBRTtJQUNwRixNQUFNUyw0QkFBNEJDLE9BQU9GLG1CQUFtQkcsUUFBUTtJQUNwRSxNQUFNQyxxQkFBcUI7UUFBQ1osYUFBYSxDQUFDUywwQkFBMEI7S0FBQztJQUNyRSxNQUFNSSw0QkFBNEI7UUFBQ0o7S0FBMEI7SUFDN0QsTUFBT0ksMEJBQTBCakMsTUFBTSxHQUFHdUIsS0FBS0MsR0FBRyxDQUFDRixHQUFHRixjQUFjcEIsTUFBTSxFQUFHO1FBQ3pFLElBQUlrQyxZQUFZLENBQUNDO1FBQ2pCLElBQUlDLFlBQVksQ0FBQztRQUNqQixNQUFNQyx1QkFBdUJ4QixpQkFBaUJPLGVBQWVZO1FBQzdESixrQkFBa0JVLE9BQU8sQ0FBQyxDQUFDQyxZQUFZQztZQUNuQyxJQUFJUCwwQkFBMEJRLFFBQVEsQ0FBQ0Qsa0JBQWtCO2dCQUNyRDtZQUNKO1lBQ0EsTUFBTUUsMEJBQTBCbkIsS0FBS2QsR0FBRyxJQUFJNEIsb0JBQW9CLENBQUNHLGdCQUFnQjtZQUNqRixNQUFNRyxRQUFRdEIsU0FBU2tCLGFBQWEsQ0FBQyxJQUFJbEIsTUFBSyxJQUFLcUI7WUFDbkQsSUFBSUMsUUFBUVQsV0FBVztnQkFDbkJBLFlBQVlTO2dCQUNaUCxZQUFZSTtZQUNoQjtRQUNKO1FBQ0FSLG1CQUFtQlksSUFBSSxDQUFDeEIsYUFBYSxDQUFDZ0IsVUFBVTtRQUNoREgsMEJBQTBCVyxJQUFJLENBQUNSO0lBQ25DO0lBQ0EsT0FBT0g7QUFDWDtBQUNBOzs7OztDQUtDLEdBQ0QsU0FBU0gsT0FBT2UsS0FBSztJQUNqQixJQUFJQSxNQUFNN0MsTUFBTSxLQUFLLEdBQUc7UUFDcEIsT0FBTztZQUNIK0IsVUFBVSxDQUFDO1lBQ1hlLFVBQVVDO1FBQ2Q7SUFDSjtJQUNBLElBQUlELFdBQVdELEtBQUssQ0FBQyxFQUFFO0lBQ3ZCLElBQUlkLFdBQVc7SUFDZixJQUFLLElBQUlpQixJQUFJLEdBQUdBLElBQUlILE1BQU03QyxNQUFNLEVBQUVnRCxLQUFLLEVBQUc7UUFDdEMsSUFBSUgsS0FBSyxDQUFDRyxFQUFFLEdBQUdGLFVBQVU7WUFDckJmLFdBQVdpQjtZQUNYRixXQUFXRCxLQUFLLENBQUNHLEVBQUU7UUFDdkI7SUFDSjtJQUNBLE9BQU87UUFBRWpCO1FBQVVlO0lBQVM7QUFDaEM7QUFDQSxTQUFTcEMsYUFBYXVDLE1BQU07SUFDeEIsT0FBT0EsT0FBT0MsTUFBTSxDQUFDLENBQUNDLEtBQUtOLFFBQVV0QixLQUFLZCxHQUFHLENBQUMwQyxLQUFLckIsT0FBT2UsT0FBT0MsUUFBUSxHQUFHO0FBQ2hGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvbWF0aC5qcz81M2E0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNpbWlsYXJpdHkgYXMgbWxfZGlzdGFuY2Vfc2ltaWxhcml0eSwgZGlzdGFuY2UgYXMgbWxfZGlzdGFuY2UsIH0gZnJvbSBcIm1sLWRpc3RhbmNlXCI7XG4vKipcbiAqIEFwcGx5IGEgcm93LXdpc2UgZnVuY3Rpb24gYmV0d2VlbiB0d28gbWF0cmljZXMgd2l0aCB0aGUgc2FtZSBudW1iZXIgb2YgY29sdW1ucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcltdW119IFggLSBUaGUgZmlyc3QgbWF0cml4LlxuICogQHBhcmFtIHtudW1iZXJbXVtdfSBZIC0gVGhlIHNlY29uZCBtYXRyaXguXG4gKiBAcGFyYW0ge1ZlY3RvckZ1bmN0aW9ufSBmdW5jIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5LlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gWCBhbmQgWSBhcmUgbm90IHRoZSBzYW1lLlxuICpcbiAqIEByZXR1cm5zIHtudW1iZXJbXVtdIHwgW1tdXX0gQSBtYXRyaXggd2hlcmUgZWFjaCByb3cgcmVwcmVzZW50cyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBmdW5jdGlvbiBiZXR3ZWVuIHRoZSBjb3JyZXNwb25kaW5nIHJvd3Mgb2YgWCBhbmQgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdHJpeEZ1bmMoWCwgWSwgZnVuYykge1xuICAgIGlmIChYLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBYWzBdLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBZLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICBZWzBdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW1tdXTtcbiAgICB9XG4gICAgaWYgKFhbMF0ubGVuZ3RoICE9PSBZWzBdLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgbXVzdCBiZSB0aGUgc2FtZS4gWCBoYXMgc2hhcGUgJHtbXG4gICAgICAgICAgICBYLmxlbmd0aCxcbiAgICAgICAgICAgIFhbMF0ubGVuZ3RoLFxuICAgICAgICBdfSBhbmQgWSBoYXMgc2hhcGUgJHtbWS5sZW5ndGgsIFlbMF0ubGVuZ3RoXX0uYCk7XG4gICAgfVxuICAgIHJldHVybiBYLm1hcCgoeFZlY3RvcikgPT4gWS5tYXAoKHlWZWN0b3IpID0+IGZ1bmMoeFZlY3RvciwgeVZlY3RvcikpLm1hcCgoc2ltaWxhcml0eSkgPT4gTnVtYmVyLmlzTmFOKHNpbWlsYXJpdHkpID8gMCA6IHNpbWlsYXJpdHkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoTSwgc2ltaWxhcml0eSA9IGZhbHNlKSB7XG4gICAgY29uc3QgbWF4ID0gbWF0cml4TWF4VmFsKE0pO1xuICAgIHJldHVybiBNLm1hcCgocm93KSA9PiByb3cubWFwKCh2YWwpID0+IChzaW1pbGFyaXR5ID8gMSAtIHZhbCAvIG1heCA6IHZhbCAvIG1heCkpKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxjdWxhdGVzIHRoZSByb3ctd2lzZSBjb3NpbmUgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byBtYXRyaWNlcyB3aXRoIHRoZSBzYW1lIG51bWJlciBvZiBjb2x1bW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gWCAtIFRoZSBmaXJzdCBtYXRyaXguXG4gKiBAcGFyYW0ge251bWJlcltdW119IFkgLSBUaGUgc2Vjb25kIG1hdHJpeC5cbiAqXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIG51bWJlciBvZiBjb2x1bW5zIGluIFggYW5kIFkgYXJlIG5vdCB0aGUgc2FtZS5cbiAqXG4gKiBAcmV0dXJucyB7bnVtYmVyW11bXSB8IFtbXV19IEEgbWF0cml4IHdoZXJlIGVhY2ggcm93IHJlcHJlc2VudHMgdGhlIGNvc2luZSBzaW1pbGFyaXR5IHZhbHVlcyBiZXR3ZWVuIHRoZSBjb3JyZXNwb25kaW5nIHJvd3Mgb2YgWCBhbmQgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvc2luZVNpbWlsYXJpdHkoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlX3NpbWlsYXJpdHkuY29zaW5lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbm5lclByb2R1Y3QoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlLmlubmVyUHJvZHVjdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXVjbGlkZWFuRGlzdGFuY2UoWCwgWSkge1xuICAgIHJldHVybiBtYXRyaXhGdW5jKFgsIFksIG1sX2Rpc3RhbmNlLmV1Y2xpZGVhbik7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaW1wbGVtZW50cyB0aGUgTWF4aW1hbCBNYXJnaW5hbCBSZWxldmFuY2UgYWxnb3JpdGhtXG4gKiB0byBzZWxlY3QgYSBzZXQgb2YgZW1iZWRkaW5ncyB0aGF0IG1heGltaXplcyB0aGUgZGl2ZXJzaXR5IGFuZCByZWxldmFuY2UgdG8gYSBxdWVyeSBlbWJlZGRpbmcuXG4gKlxuICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJbXVtdfSBxdWVyeUVtYmVkZGluZyAtIFRoZSBxdWVyeSBlbWJlZGRpbmcuXG4gKiBAcGFyYW0ge251bWJlcltdW119IGVtYmVkZGluZ0xpc3QgLSBUaGUgbGlzdCBvZiBlbWJlZGRpbmdzIHRvIHNlbGVjdCBmcm9tLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsYW1iZGE9MC41XSAtIFRoZSB0cmFkZS1vZmYgcGFyYW1ldGVyIGJldHdlZW4gcmVsZXZhbmNlIGFuZCBkaXZlcnNpdHkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2s9NF0gLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgZW1iZWRkaW5ncyB0byBzZWxlY3QuXG4gKlxuICogQHJldHVybnMge251bWJlcltdfSBUaGUgaW5kZXhlcyBvZiB0aGUgc2VsZWN0ZWQgZW1iZWRkaW5ncyBpbiB0aGUgZW1iZWRkaW5nTGlzdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heGltYWxNYXJnaW5hbFJlbGV2YW5jZShxdWVyeUVtYmVkZGluZywgZW1iZWRkaW5nTGlzdCwgbGFtYmRhID0gMC41LCBrID0gNCkge1xuICAgIGlmIChNYXRoLm1pbihrLCBlbWJlZGRpbmdMaXN0Lmxlbmd0aCkgPD0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5RW1iZWRkaW5nRXhwYW5kZWQgPSAoQXJyYXkuaXNBcnJheShxdWVyeUVtYmVkZGluZ1swXSkgPyBxdWVyeUVtYmVkZGluZyA6IFtxdWVyeUVtYmVkZGluZ10pO1xuICAgIGNvbnN0IHNpbWlsYXJpdHlUb1F1ZXJ5ID0gY29zaW5lU2ltaWxhcml0eShxdWVyeUVtYmVkZGluZ0V4cGFuZGVkLCBlbWJlZGRpbmdMaXN0KVswXTtcbiAgICBjb25zdCBtb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4ID0gYXJnTWF4KHNpbWlsYXJpdHlUb1F1ZXJ5KS5tYXhJbmRleDtcbiAgICBjb25zdCBzZWxlY3RlZEVtYmVkZGluZ3MgPSBbZW1iZWRkaW5nTGlzdFttb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4XV07XG4gICAgY29uc3Qgc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcyA9IFttb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4XTtcbiAgICB3aGlsZSAoc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5sZW5ndGggPCBNYXRoLm1pbihrLCBlbWJlZGRpbmdMaXN0Lmxlbmd0aCkpIHtcbiAgICAgICAgbGV0IGJlc3RTY29yZSA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IGJlc3RJbmRleCA9IC0xO1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5VG9TZWxlY3RlZCA9IGNvc2luZVNpbWlsYXJpdHkoZW1iZWRkaW5nTGlzdCwgc2VsZWN0ZWRFbWJlZGRpbmdzKTtcbiAgICAgICAgc2ltaWxhcml0eVRvUXVlcnkuZm9yRWFjaCgocXVlcnlTY29yZSwgcXVlcnlTY29yZUluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5pbmNsdWRlcyhxdWVyeVNjb3JlSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF4U2ltaWxhcml0eVRvU2VsZWN0ZWQgPSBNYXRoLm1heCguLi5zaW1pbGFyaXR5VG9TZWxlY3RlZFtxdWVyeVNjb3JlSW5kZXhdKTtcbiAgICAgICAgICAgIGNvbnN0IHNjb3JlID0gbGFtYmRhICogcXVlcnlTY29yZSAtICgxIC0gbGFtYmRhKSAqIG1heFNpbWlsYXJpdHlUb1NlbGVjdGVkO1xuICAgICAgICAgICAgaWYgKHNjb3JlID4gYmVzdFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgYmVzdFNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgYmVzdEluZGV4ID0gcXVlcnlTY29yZUluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRFbWJlZGRpbmdzLnB1c2goZW1iZWRkaW5nTGlzdFtiZXN0SW5kZXhdKTtcbiAgICAgICAgc2VsZWN0ZWRFbWJlZGRpbmdzSW5kZXhlcy5wdXNoKGJlc3RJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzO1xufVxuLyoqXG4gKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIG1heGltdW0gdmFsdWUgaW4gdGhlIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIHtudW1iZXJbXX0gYXJyYXkgLSBUaGUgaW5wdXQgYXJyYXkuXG4gKlxuICogQHJldHVybnMge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBtYXhpbXVtIHZhbHVlIGluIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGlzIGVtcHR5LCByZXR1cm5zIC0xLlxuICovXG5mdW5jdGlvbiBhcmdNYXgoYXJyYXkpIHtcbiAgICBpZiAoYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXhJbmRleDogLTEsXG4gICAgICAgICAgICBtYXhWYWx1ZTogTmFOLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgbWF4VmFsdWUgPSBhcnJheVswXTtcbiAgICBsZXQgbWF4SW5kZXggPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJyYXkubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGFycmF5W2ldID4gbWF4VmFsdWUpIHtcbiAgICAgICAgICAgIG1heEluZGV4ID0gaTtcbiAgICAgICAgICAgIG1heFZhbHVlID0gYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgbWF4SW5kZXgsIG1heFZhbHVlIH07XG59XG5mdW5jdGlvbiBtYXRyaXhNYXhWYWwoYXJyYXlzKSB7XG4gICAgcmV0dXJuIGFycmF5cy5yZWR1Y2UoKGFjYywgYXJyYXkpID0+IE1hdGgubWF4KGFjYywgYXJnTWF4KGFycmF5KS5tYXhWYWx1ZSksIDApO1xufVxuIl0sIm5hbWVzIjpbInNpbWlsYXJpdHkiLCJtbF9kaXN0YW5jZV9zaW1pbGFyaXR5IiwiZGlzdGFuY2UiLCJtbF9kaXN0YW5jZSIsIm1hdHJpeEZ1bmMiLCJYIiwiWSIsImZ1bmMiLCJsZW5ndGgiLCJFcnJvciIsIm1hcCIsInhWZWN0b3IiLCJ5VmVjdG9yIiwiTnVtYmVyIiwiaXNOYU4iLCJub3JtYWxpemUiLCJNIiwibWF4IiwibWF0cml4TWF4VmFsIiwicm93IiwidmFsIiwiY29zaW5lU2ltaWxhcml0eSIsImNvc2luZSIsImlubmVyUHJvZHVjdCIsImV1Y2xpZGVhbkRpc3RhbmNlIiwiZXVjbGlkZWFuIiwibWF4aW1hbE1hcmdpbmFsUmVsZXZhbmNlIiwicXVlcnlFbWJlZGRpbmciLCJlbWJlZGRpbmdMaXN0IiwibGFtYmRhIiwiayIsIk1hdGgiLCJtaW4iLCJxdWVyeUVtYmVkZGluZ0V4cGFuZGVkIiwiQXJyYXkiLCJpc0FycmF5Iiwic2ltaWxhcml0eVRvUXVlcnkiLCJtb3N0U2ltaWxhckVtYmVkZGluZ0luZGV4IiwiYXJnTWF4IiwibWF4SW5kZXgiLCJzZWxlY3RlZEVtYmVkZGluZ3MiLCJzZWxlY3RlZEVtYmVkZGluZ3NJbmRleGVzIiwiYmVzdFNjb3JlIiwiSW5maW5pdHkiLCJiZXN0SW5kZXgiLCJzaW1pbGFyaXR5VG9TZWxlY3RlZCIsImZvckVhY2giLCJxdWVyeVNjb3JlIiwicXVlcnlTY29yZUluZGV4IiwiaW5jbHVkZXMiLCJtYXhTaW1pbGFyaXR5VG9TZWxlY3RlZCIsInNjb3JlIiwicHVzaCIsImFycmF5IiwibWF4VmFsdWUiLCJOYU4iLCJpIiwiYXJyYXlzIiwicmVkdWNlIiwiYWNjIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/math.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(generator, startSetup){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = generator;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            this.firstResult = generator.next();\n            if (startSetup) {\n                this.firstResult.then(startSetup).then(resolve, reject);\n            } else {\n                this.firstResult.then((_result)=>resolve(undefined), reject);\n            }\n        });\n    }\n    async next(...args) {\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return this.generator.next(...args);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, ...args) {\n    const gen = new AsyncGeneratorWithSetup(generator, startSetup);\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBQ00sTUFBTUEsK0JBQStCQztJQUN4Q0MsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNQyxPQUFPO1FBQ1QsSUFBSSxDQUFDSCxZQUFZO1FBQ2pCLElBQUk7WUFDQSxNQUFNSSxTQUFTLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLElBQUk7WUFDckMsSUFBSUQsT0FBT0UsSUFBSSxFQUFFO2dCQUNiLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxXQUFXLElBQUksMENBQTBDO2dCQUNyRSxPQUFPO29CQUNIRCxNQUFNO29CQUNOUCxPQUFPUztnQkFDWDtZQUNKLE9BQ0s7Z0JBQ0QsT0FBTztvQkFDSEYsTUFBTTtvQkFDTlAsT0FBT0ssT0FBT0wsS0FBSztnQkFDdkI7WUFDSjtRQUNKLEVBQ0EsT0FBT1UsR0FBRztZQUNOLElBQUksQ0FBQ1IsTUFBTSxDQUFDTSxXQUFXLElBQUksMkNBQTJDO1lBQ3RFLE1BQU1FO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFNBQVM7UUFDWCxJQUFJLENBQUNWLFlBQVk7UUFDakIseURBQXlEO1FBQ3pELElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFDWixNQUFNLENBQUNNLFdBQVcsSUFB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QXdCdEIsV0FBV3VCO0lBQ25ELE1BQU1DLFFBQVEsTUFBTVUsSUFBSVYsS0FBSztJQUM3QixPQUFPO1FBQUVXLFFBQVFGLEdBQUdDLEtBQUtWLFVBQVVNO1FBQU9OO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zdHJlYW0uanM/OTIxNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogU3VwcG9ydCBhc3luYyBpdGVyYXRvciBzeW50YXggZm9yIFJlYWRhYmxlU3RyZWFtcyBpbiBhbGwgZW52aXJvbm1lbnRzLlxuICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZXhwb3J0IGNsYXNzIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gZXh0ZW5kcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlYWRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbnN1cmVSZWFkZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyID0gdGhpcy5nZXRSZWFkZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgY2xvc2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIC8vIElmIHdyYXBwZWQgaW4gYSBOb2RlIHN0cmVhbSwgY2FuY2VsIGlzIGFscmVhZHkgY2FsbGVkLlxuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIGlmICh0aGlzLmxvY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpOyAvLyBjYW5jZWwgZmlyc3QsIGJ1dCBkb24ndCBhd2FpdCB5ZXRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayBmaXJzdFxuICAgICAgICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTsgLy8gbm93IGF3YWl0IGl0XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICAgIC8vIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1N0cmVhbXNfQVBJL1VzaW5nX3JlYWRhYmxlX3N0cmVhbXMjcmVhZGluZ190aGVfc3RyZWFtXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHB1bXAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4oKHsgZG9uZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVucXVldWUgdGhlIG5leHQgZGF0YSBjaHVuayBpbnRvIG91ciB0YXJnZXQgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUFzeW5jR2VuZXJhdG9yKGdlbmVyYXRvcikge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgZ2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIG5vIG1vcmUgZGF0YSBuZWVkcyB0byBiZSBjb25zdW1lZCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRml4OiBgZWxzZSBpZiAodmFsdWUpYCB3aWxsIGhhbmcgdGhlIHN0cmVhbWluZyB3aGVuIG51bGxpc2ggdmFsdWUgKGUuZy4gZW1wdHkgc3RyaW5nKSBpcyBwdWxsZWRcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jIGNhbmNlbChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0b3IucmV0dXJuKHJlYXNvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXRlZShpdGVyLCBsZW5ndGggPSAyKSB7XG4gICAgY29uc3QgYnVmZmVycyA9IEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gW10pO1xuICAgIHJldHVybiBidWZmZXJzLm1hcChhc3luYyBmdW5jdGlvbiogbWFrZUl0ZXIoYnVmZmVyKSB7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYnVmZmVyIG9mIGJ1ZmZlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChidWZmZXJbMF0uZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgeWllbGQgYnVmZmVyLnNoaWZ0KCkudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoZmlyc3QsIHNlY29uZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSAmJiBBcnJheS5pc0FycmF5KHNlY29uZCkpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gKGZpcnN0ICsgc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJjb25jYXRcIiBpbiBmaXJzdCAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0eXBlb2YgZmlyc3QuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIGZpcnN0LmNvbmNhdChzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBjaHVuayA9IHsgLi4uZmlyc3QgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2Vjb25kKSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiBjaHVuayAmJiAhQXJyYXkuaXNBcnJheShjaHVua1trZXldKSkge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSBjb25jYXQoY2h1bmtba2V5XSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2h1bmtba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaHVuaztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbmNhdCAke3R5cGVvZiBmaXJzdH0gYW5kICR7dHlwZW9mIHNlY29uZH1gKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAge1xuICAgIGNvbnN0cnVjdG9yKGdlbmVyYXRvciwgc3RhcnRTZXR1cCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2V0dXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RSZXN1bHRVc2VkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gICAgICAgIC8vIHNldHVwIGlzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9ubHkgYWZ0ZXIgdGhlIGZpcnN0IGl0ZXJhdG9yIHZhbHVlXG4gICAgICAgIC8vIGlzIGF2YWlsYWJsZS4gdGhpcyBpcyB1c2VmdWwgd2hlbiBzZXR1cCBvZiBzZXZlcmFsIHBpcGVkIGdlbmVyYXRvcnNcbiAgICAgICAgLy8gbmVlZHMgdG8gaGFwcGVuIGluIGxvZ2ljYWwgb3JkZXIsIGllLiBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggaW5wdXQgdG9cbiAgICAgICAgLy8gdG8gZWFjaCBnZW5lcmF0b3IgaXMgYXZhaWxhYmxlLlxuICAgICAgICB0aGlzLnNldHVwID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdCA9IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoc3RhcnRTZXR1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQudGhlbihzdGFydFNldHVwKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oKF9yZXN1bHQpID0+IHJlc29sdmUodW5kZWZpbmVkKSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG5leHQoLi4uYXJncykge1xuICAgICAgICBpZiAoIXRoaXMuZmlyc3RSZXN1bHRVc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0VXNlZCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maXJzdFJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IubmV4dCguLi5hcmdzKTtcbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5yZXR1cm4odmFsdWUpO1xuICAgIH1cbiAgICBhc3luYyB0aHJvdyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci50aHJvdyhlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodG8sIGdlbmVyYXRvciwgc3RhcnRTZXR1cCwgLi4uYXJncykge1xuICAgIGNvbnN0IGdlbiA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cChnZW5lcmF0b3IsIHN0YXJ0U2V0dXApO1xuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgZ2VuLnNldHVwO1xuICAgIHJldHVybiB7IG91dHB1dDogdG8oZ2VuLCBzZXR1cCwgLi4uYXJncyksIHNldHVwIH07XG59XG4iXSwibmFtZXMiOlsiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZW5zdXJlUmVhZGVyIiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwibmV4dCIsInJlc3VsdCIsInJlYWQiLCJkb25lIiwicmVsZWFzZUxvY2siLCJ1bmRlZmluZWQiLCJlIiwicmV0dXJuIiwibG9ja2VkIiwiY2FuY2VsUHJvbWlzZSIsImNhbmNlbCIsInRocm93IiwiU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsImZyb21SZWFkYWJsZVN0cmVhbSIsInN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsInB1bXAiLCJ0aGVuIiwiY2xvc2UiLCJlbnF1ZXVlIiwiZnJvbUFzeW5jR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwicHVsbCIsInJlYXNvbiIsImF0ZWUiLCJpdGVyIiwibGVuZ3RoIiwiYnVmZmVycyIsIkFycmF5IiwiZnJvbSIsIm1hcCIsIm1ha2VJdGVyIiwiYnVmZmVyIiwicHVzaCIsInNoaWZ0IiwiY29uY2F0IiwiZmlyc3QiLCJzZWNvbmQiLCJpc0FycmF5IiwiY2h1bmsiLCJrZXkiLCJlbnRyaWVzIiwiRXJyb3IiLCJBc3luY0dlbmVyYXRvcldpdGhTZXR1cCIsInN0YXJ0U2V0dXAiLCJzZXR1cCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmlyc3RSZXN1bHQiLCJfcmVzdWx0IiwiYXJncyIsImZpcnN0UmVzdWx0VXNlZCIsInBpcGVHZW5lcmF0b3JXaXRoU2V0dXAiLCJ0byIsImdlbiIsIm91dHB1dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRTtBQUN0QjtBQUNoRCxNQUFNRyxRQUFRLENBQUM7QUFDZixNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJRix5REFBV0EsQ0FBQyxDQUFDO0FBQ3pDLGVBQWVHLFlBQVlDLFFBQVE7SUFDdEMsSUFBSSxDQUFFQSxDQUFBQSxZQUFZSCxLQUFJLEdBQUk7UUFDdEJBLEtBQUssQ0FBQ0csU0FBUyxHQUFHRixPQUNiRyxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUQsU0FBUyxLQUFLLENBQUMsRUFDdERFLElBQUksQ0FBQyxDQUFDQyxNQUFRQSxJQUFJQyxJQUFJLElBQ3RCRixJQUFJLENBQUMsQ0FBQ0csT0FBUyxJQUFJWCxzREFBUUEsQ0FBQ1csT0FDNUJDLEtBQUssQ0FBQyxDQUFDQztZQUNSLE9BQU9WLEtBQUssQ0FBQ0csU0FBUztZQUN0QixNQUFNTztRQUNWO0lBQ0o7SUFDQSxPQUFPLE1BQU1WLEtBQUssQ0FBQ0csU0FBUztBQUNoQztBQUNPLGVBQWVRLGlCQUFpQkMsS0FBSztJQUN4QyxPQUFPVixZQUFZSix5RUFBdUJBLENBQUNjO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanM/OGU2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaWt0b2tlbiwgZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwsIH0gZnJvbSBcImpzLXRpa3Rva2VuL2xpdGVcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4vYXN5bmNfY2FsbGVyLmpzXCI7XG5jb25zdCBjYWNoZSA9IHt9O1xuY29uc3QgY2FsbGVyID0gLyogI19fUFVSRV9fICovIG5ldyBBc3luY0NhbGxlcih7fSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgICBpZiAoIShlbmNvZGluZyBpbiBjYWNoZSkpIHtcbiAgICAgICAgY2FjaGVbZW5jb2RpbmddID0gY2FsbGVyXG4gICAgICAgICAgICAuZmV0Y2goYGh0dHBzOi8vdGlrdG9rZW4ucGFnZXMuZGV2L2pzLyR7ZW5jb2Rpbmd9Lmpzb25gKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBuZXcgVGlrdG9rZW4oZGF0YSkpXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtlbmNvZGluZ107XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IGNhY2hlW2VuY29kaW5nXTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNvZGluZ0Zvck1vZGVsKG1vZGVsKSB7XG4gICAgcmV0dXJuIGdldEVuY29kaW5nKGdldEVuY29kaW5nTmFtZUZvck1vZGVsKG1vZGVsKSk7XG59XG4iXSwibmFtZXMiOlsiVGlrdG9rZW4iLCJnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCIsIkFzeW5jQ2FsbGVyIiwiY2FjaGUiLCJjYWxsZXIiLCJnZXRFbmNvZGluZyIsImVuY29kaW5nIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsImRhdGEiLCJjYXRjaCIsImUiLCJlbmNvZGluZ0Zvck1vZGVsIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/vectorstores.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/vectorstores.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SaveableVectorStore: () => (/* binding */ SaveableVectorStore),\n/* harmony export */   VectorStore: () => (/* binding */ VectorStore),\n/* harmony export */   VectorStoreRetriever: () => (/* binding */ VectorStoreRetriever)\n/* harmony export */ });\n/* harmony import */ var _retrievers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retrievers.js */ \"(rsc)/./node_modules/@langchain/core/dist/retrievers.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n\n/**\n * Class for performing document retrieval from a VectorStore. Can perform\n * similarity search or maximal marginal relevance search.\n */ class VectorStoreRetriever extends _retrievers_js__WEBPACK_IMPORTED_MODULE_0__.BaseRetriever {\n    static lc_name() {\n        return \"VectorStoreRetriever\";\n    }\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"vectorstores\"\n        ];\n    }\n    _vectorstoreType() {\n        return this.vectorStore._vectorstoreType();\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"vectorStore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        Object.defineProperty(this, \"searchType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"similarity\"\n        });\n        Object.defineProperty(this, \"searchKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.vectorStore = fields.vectorStore;\n        this.k = fields.k ?? this.k;\n        this.searchType = fields.searchType ?? this.searchType;\n        this.filter = fields.filter;\n        if (fields.searchType === \"mmr\") {\n            this.searchKwargs = fields.searchKwargs;\n        }\n    }\n    async _getRelevantDocuments(query, runManager) {\n        if (this.searchType === \"mmr\") {\n            if (typeof this.vectorStore.maxMarginalRelevanceSearch !== \"function\") {\n                throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);\n            }\n            return this.vectorStore.maxMarginalRelevanceSearch(query, {\n                k: this.k,\n                filter: this.filter,\n                ...this.searchKwargs\n            }, runManager?.getChild(\"vectorstore\"));\n        }\n        return this.vectorStore.similaritySearch(query, this.k, this.filter, runManager?.getChild(\"vectorstore\"));\n    }\n    async addDocuments(documents, options) {\n        return this.vectorStore.addDocuments(documents, options);\n    }\n}\n/**\n * Abstract class representing a store of vectors. Provides methods for\n * adding vectors and documents, deleting from the store, and searching\n * the store.\n */ class VectorStore extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_1__.Serializable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(embeddings, dbConfig){\n        super(dbConfig);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"vectorstores\",\n                this._vectorstoreType()\n            ]\n        });\n        Object.defineProperty(this, \"embeddings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.embeddings = embeddings;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async delete(_params) {\n        throw new Error(\"Not implemented.\");\n    }\n    async similaritySearch(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        const results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n        return results.map((result)=>result[0]);\n    }\n    async similaritySearchWithScore(query, k = 4, filter = undefined, _callbacks = undefined // implement passing to embedQuery later\n    ) {\n        return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n    }\n    static fromTexts(_texts, _metadatas, _embeddings, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    static fromDocuments(_docs, _embeddings, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    asRetriever(kOrFields, filter, callbacks, tags, metadata, verbose) {\n        if (typeof kOrFields === \"number\") {\n            return new VectorStoreRetriever({\n                vectorStore: this,\n                k: kOrFields,\n                filter,\n                tags: [\n                    ...tags ?? [],\n                    this._vectorstoreType()\n                ],\n                metadata,\n                verbose,\n                callbacks\n            });\n        } else {\n            const params = {\n                vectorStore: this,\n                k: kOrFields?.k,\n                filter: kOrFields?.filter,\n                tags: [\n                    ...kOrFields?.tags ?? [],\n                    this._vectorstoreType()\n                ],\n                metadata: kOrFields?.metadata,\n                verbose: kOrFields?.verbose,\n                callbacks: kOrFields?.callbacks,\n                searchType: kOrFields?.searchType\n            };\n            if (kOrFields?.searchType === \"mmr\") {\n                return new VectorStoreRetriever({\n                    ...params,\n                    searchKwargs: kOrFields.searchKwargs\n                });\n            }\n            return new VectorStoreRetriever({\n                ...params\n            });\n        }\n    }\n}\n/**\n * Abstract class extending VectorStore with functionality for saving and\n * loading the vector store.\n */ class SaveableVectorStore extends VectorStore {\n    static load(_directory, _embeddings) {\n        throw new Error(\"Not implemented\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdmVjdG9yc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWlEO0FBQ0s7QUFDdEQ7OztDQUdDLEdBQ00sTUFBTUUsNkJBQTZCRix5REFBYUE7SUFDbkQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLElBQUlDLGVBQWU7UUFDZixPQUFPO1lBQUM7WUFBa0I7U0FBZTtJQUM3QztJQUNBQyxtQkFBbUI7UUFDZixPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDRCxnQkFBZ0I7SUFDNUM7SUFDQUUsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxLQUFLO1lBQzdCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1IsV0FBVyxHQUFHRSxPQUFPRixXQUFXO1FBQ3JDLElBQUksQ0FBQ1MsQ0FBQyxHQUFHUCxPQUFPTyxDQUFDLElBQUksSUFBSSxDQUFDQSxDQUFDO1FBQzNCLElBQUksQ0FBQ0MsVUFB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QUFFO1FBQ1AsTUFBTSxJQUFJdkIsTUFBTTtJQUNwQjtJQUNBMEIsWUFBWUMsU0FBUyxFQUFFakMsTUFBTSxFQUFFa0MsU0FBUyxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxFQUFFO1FBQy9ELElBQUksT0FBT0osY0FBYyxVQUFVO1lBQy9CLE9BQU8sSUFBSWhELHFCQUFxQjtnQkFDNUJJLGFBQWEsSUFBSTtnQkFDakJTLEdBQUdtQztnQkFDSGpDO2dCQUNBbUMsTUFBTTt1QkFBS0EsUUFBUSxFQUFFO29CQUFHLElBQUksQ0FBQy9DLGdCQUFnQjtpQkFBRztnQkFDaERnRDtnQkFDQUM7Z0JBQ0FIO1lBQ0o7UUFDSixPQUNLO1lBQ0QsTUFBTUksU0FBUztnQkFDWGpELGFBQWEsSUFBSTtnQkFDakJTLEdBQUdtQyxXQUFXbkM7Z0JBQ2RFLFFBQVFpQyxXQUFXakM7Z0JBQ25CbUMsTUFBTTt1QkFBS0YsV0FBV0UsUUFBUSxFQUFFO29CQUFHLElBQUksQ0FBQy9DLGdCQUFnQjtpQkFBRztnQkFDM0RnRCxVQUFVSCxXQUFXRztnQkFDckJDLFNBQVNKLFdBQVdJO2dCQUNwQkgsV0FBV0QsV0FBV0M7Z0JBQ3RCbkMsWUFBWWtDLFdBQVdsQztZQUMzQjtZQUNBLElBQUlrQyxXQUFXbEMsZUFBZSxPQUFPO2dCQUNqQyxPQUFPLElBQUlkLHFCQUFxQjtvQkFDNUIsR0FBR3FELE1BQU07b0JBQ1RyQyxjQUFjZ0MsVUFBVWhDLFlBQVk7Z0JBQ3hDO1lBQ0o7WUFDQSxPQUFPLElBQUloQixxQkFBcUI7Z0JBQUUsR0FBR3FELE1BQU07WUFBQztRQUNoRDtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQyw0QkFBNEIzQjtJQUNyQyxPQUFPNEIsS0FBS0MsVUFBVSxFQUFFYixXQUFXLEVBQUU7UUFDakMsTUFBTSxJQUFJdEIsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdmVjdG9yc3RvcmVzLmpzPzAwZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVJldHJpZXZlciwgfSBmcm9tIFwiLi9yZXRyaWV2ZXJzLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuLyoqXG4gKiBDbGFzcyBmb3IgcGVyZm9ybWluZyBkb2N1bWVudCByZXRyaWV2YWwgZnJvbSBhIFZlY3RvclN0b3JlLiBDYW4gcGVyZm9ybVxuICogc2ltaWxhcml0eSBzZWFyY2ggb3IgbWF4aW1hbCBtYXJnaW5hbCByZWxldmFuY2Ugc2VhcmNoLlxuICovXG5leHBvcnQgY2xhc3MgVmVjdG9yU3RvcmVSZXRyaWV2ZXIgZXh0ZW5kcyBCYXNlUmV0cmlldmVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVmVjdG9yU3RvcmVSZXRyaWV2ZXJcIjtcbiAgICB9XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwidmVjdG9yc3RvcmVzXCJdO1xuICAgIH1cbiAgICBfdmVjdG9yc3RvcmVUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5fdmVjdG9yc3RvcmVUeXBlKCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZWN0b3JTdG9yZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiA0XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZWFyY2hUeXBlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcInNpbWlsYXJpdHlcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2VhcmNoS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpbHRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlY3RvclN0b3JlID0gZmllbGRzLnZlY3RvclN0b3JlO1xuICAgICAgICB0aGlzLmsgPSBmaWVsZHMuayA/PyB0aGlzLms7XG4gICAgICAgIHRoaXMuc2VhcmNoVHlwZSA9IGZpZWxkcy5zZWFyY2hUeXBlID8/IHRoaXMuc2VhcmNoVHlwZTtcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWVsZHMuZmlsdGVyO1xuICAgICAgICBpZiAoZmllbGRzLnNlYXJjaFR5cGUgPT09IFwibW1yXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoS3dhcmdzID0gZmllbGRzLnNlYXJjaEt3YXJncztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZ2V0UmVsZXZhbnREb2N1bWVudHMocXVlcnksIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVHlwZSA9PT0gXCJtbXJcIikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZlY3RvclN0b3JlLm1heE1hcmdpbmFsUmVsZXZhbmNlU2VhcmNoICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB2ZWN0b3Igc3RvcmUgYmFja2luZyB0aGlzIHJldHJpZXZlciwgJHt0aGlzLl92ZWN0b3JzdG9yZVR5cGUoKX0gZG9lcyBub3Qgc3VwcG9ydCBtYXggbWFyZ2luYWwgcmVsZXZhbmNlIHNlYXJjaC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlY3RvclN0b3JlLm1heE1hcmdpbmFsUmVsZXZhbmNlU2VhcmNoKHF1ZXJ5LCB7XG4gICAgICAgICAgICAgICAgazogdGhpcy5rLFxuICAgICAgICAgICAgICAgIGZpbHRlcjogdGhpcy5maWx0ZXIsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5zZWFyY2hLd2FyZ3MsXG4gICAgICAgICAgICB9LCBydW5NYW5hZ2VyPy5nZXRDaGlsZChcInZlY3RvcnN0b3JlXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5zaW1pbGFyaXR5U2VhcmNoKHF1ZXJ5LCB0aGlzLmssIHRoaXMuZmlsdGVyLCBydW5NYW5hZ2VyPy5nZXRDaGlsZChcInZlY3RvcnN0b3JlXCIpKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkRG9jdW1lbnRzKGRvY3VtZW50cywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JTdG9yZS5hZGREb2N1bWVudHMoZG9jdW1lbnRzLCBvcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIHN0b3JlIG9mIHZlY3RvcnMuIFByb3ZpZGVzIG1ldGhvZHMgZm9yXG4gKiBhZGRpbmcgdmVjdG9ycyBhbmQgZG9jdW1lbnRzLCBkZWxldGluZyBmcm9tIHRoZSBzdG9yZSwgYW5kIHNlYXJjaGluZ1xuICogdGhlIHN0b3JlLlxuICovXG5leHBvcnQgY2xhc3MgVmVjdG9yU3RvcmUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3RydWN0b3IoZW1iZWRkaW5ncywgZGJDb25maWcpIHtcbiAgICAgICAgc3VwZXIoZGJDb25maWcpO1xuICAgICAgICAvLyBPbmx5IGV2ZXIgaW5zdGFudGlhdGVkIGluIG1haW4gTGFuZ0NoYWluXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwidmVjdG9yc3RvcmVzXCIsIHRoaXMuX3ZlY3RvcnN0b3JlVHlwZSgpXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZW1iZWRkaW5nc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVtYmVkZGluZ3MgPSBlbWJlZGRpbmdzO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIGRlbGV0ZShfcGFyYW1zKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2gocXVlcnksIGsgPSA0LCBmaWx0ZXIgPSB1bmRlZmluZWQsIF9jYWxsYmFja3MgPSB1bmRlZmluZWQgLy8gaW1wbGVtZW50IHBhc3NpbmcgdG8gZW1iZWRRdWVyeSBsYXRlclxuICAgICkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KSwgaywgZmlsdGVyKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdFswXSk7XG4gICAgfVxuICAgIGFzeW5jIHNpbWlsYXJpdHlTZWFyY2hXaXRoU2NvcmUocXVlcnksIGsgPSA0LCBmaWx0ZXIgPSB1bmRlZmluZWQsIF9jYWxsYmFja3MgPSB1bmRlZmluZWQgLy8gaW1wbGVtZW50IHBhc3NpbmcgdG8gZW1iZWRRdWVyeSBsYXRlclxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZFF1ZXJ5KHF1ZXJ5KSwgaywgZmlsdGVyKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UZXh0cyhfdGV4dHMsIF9tZXRhZGF0YXMsIF9lbWJlZGRpbmdzLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9kYkNvbmZpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0aGUgTGFuZ2NoYWluIHZlY3RvcnN0b3JlIGltcGxlbWVudGF0aW9uIHlvdSBhcmUgdXNpbmcgZm9yZ290IHRvIG92ZXJyaWRlIHRoaXMsIHBsZWFzZSByZXBvcnQgYSBidWdcIik7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tRG9jdW1lbnRzKF9kb2NzLCBfZW1iZWRkaW5ncywgXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBfZGJDb25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhlIExhbmdjaGFpbiB2ZWN0b3JzdG9yZSBpbXBsZW1lbnRhdGlvbiB5b3UgYXJlIHVzaW5nIGZvcmdvdCB0byBvdmVycmlkZSB0aGlzLCBwbGVhc2UgcmVwb3J0IGEgYnVnXCIpO1xuICAgIH1cbiAgICBhc1JldHJpZXZlcihrT3JGaWVsZHMsIGZpbHRlciwgY2FsbGJhY2tzLCB0YWdzLCBtZXRhZGF0YSwgdmVyYm9zZSkge1xuICAgICAgICBpZiAodHlwZW9mIGtPckZpZWxkcyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3JTdG9yZVJldHJpZXZlcih7XG4gICAgICAgICAgICAgICAgdmVjdG9yU3RvcmU6IHRoaXMsXG4gICAgICAgICAgICAgICAgazoga09yRmllbGRzLFxuICAgICAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgICAgICB0YWdzOiBbLi4uKHRhZ3MgPz8gW10pLCB0aGlzLl92ZWN0b3JzdG9yZVR5cGUoKV0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgdmVyYm9zZSxcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICB2ZWN0b3JTdG9yZTogdGhpcyxcbiAgICAgICAgICAgICAgICBrOiBrT3JGaWVsZHM/LmssXG4gICAgICAgICAgICAgICAgZmlsdGVyOiBrT3JGaWVsZHM/LmZpbHRlcixcbiAgICAgICAgICAgICAgICB0YWdzOiBbLi4uKGtPckZpZWxkcz8udGFncyA/PyBbXSksIHRoaXMuX3ZlY3RvcnN0b3JlVHlwZSgpXSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YToga09yRmllbGRzPy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICB2ZXJib3NlOiBrT3JGaWVsZHM/LnZlcmJvc2UsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBrT3JGaWVsZHM/LmNhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICBzZWFyY2hUeXBlOiBrT3JGaWVsZHM/LnNlYXJjaFR5cGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGtPckZpZWxkcz8uc2VhcmNoVHlwZSA9PT0gXCJtbXJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yU3RvcmVSZXRyaWV2ZXIoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaEt3YXJnczoga09yRmllbGRzLnNlYXJjaEt3YXJncyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yU3RvcmVSZXRyaWV2ZXIoeyAuLi5wYXJhbXMgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIGV4dGVuZGluZyBWZWN0b3JTdG9yZSB3aXRoIGZ1bmN0aW9uYWxpdHkgZm9yIHNhdmluZyBhbmRcbiAqIGxvYWRpbmcgdGhlIHZlY3RvciBzdG9yZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNhdmVhYmxlVmVjdG9yU3RvcmUgZXh0ZW5kcyBWZWN0b3JTdG9yZSB7XG4gICAgc3RhdGljIGxvYWQoX2RpcmVjdG9yeSwgX2VtYmVkZGluZ3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlUmV0cmlldmVyIiwiU2VyaWFsaXphYmxlIiwiVmVjdG9yU3RvcmVSZXRyaWV2ZXIiLCJsY19uYW1lIiwibGNfbmFtZXNwYWNlIiwiX3ZlY3RvcnN0b3JlVHlwZSIsInZlY3RvclN0b3JlIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiayIsInNlYXJjaFR5cGUiLCJmaWx0ZXIiLCJzZWFyY2hLd2FyZ3MiLCJfZ2V0UmVsZXZhbnREb2N1bWVudHMiLCJxdWVyeSIsInJ1bk1hbmFnZXIiLCJtYXhNYXJnaW5hbFJlbGV2YW5jZVNlYXJjaCIsIkVycm9yIiwiZ2V0Q2hpbGQiLCJzaW1pbGFyaXR5U2VhcmNoIiwiYWRkRG9jdW1lbnRzIiwiZG9jdW1lbnRzIiwib3B0aW9ucyIsIlZlY3RvclN0b3JlIiwiZW1iZWRkaW5ncyIsImRiQ29uZmlnIiwiZGVsZXRlIiwiX3BhcmFtcyIsInVuZGVmaW5lZCIsIl9jYWxsYmFja3MiLCJyZXN1bHRzIiwic2ltaWxhcml0eVNlYXJjaFZlY3RvcldpdGhTY29yZSIsImVtYmVkUXVlcnkiLCJtYXAiLCJyZXN1bHQiLCJzaW1pbGFyaXR5U2VhcmNoV2l0aFNjb3JlIiwiZnJvbVRleHRzIiwiX3RleHRzIiwiX21ldGFkYXRhcyIsIl9lbWJlZGRpbmdzIiwiX2RiQ29uZmlnIiwiZnJvbURvY3VtZW50cyIsIl9kb2NzIiwiYXNSZXRyaWV2ZXIiLCJrT3JGaWVsZHMiLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwicGFyYW1zIiwiU2F2ZWFibGVWZWN0b3JTdG9yZSIsImxvYWQiLCJfZGlyZWN0b3J5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/documents.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/documents.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcz82ZDE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9kb2N1bWVudHMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/messages.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/core/messages.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMuanM/ODI5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/tools.js":
/*!***********************************************!*\
  !*** ./node_modules/@langchain/core/tools.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DynamicStructuredTool: () => (/* reexport safe */ _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__.DynamicStructuredTool),\n/* harmony export */   DynamicTool: () => (/* reexport safe */ _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__.DynamicTool),\n/* harmony export */   StructuredTool: () => (/* reexport safe */ _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__.StructuredTool),\n/* harmony export */   Tool: () => (/* reexport safe */ _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__.Tool),\n/* harmony export */   ToolInputParsingException: () => (/* reexport safe */ _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__.ToolInputParsingException)\n/* harmony export */ });\n/* harmony import */ var _dist_tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/tools.js */ \"(rsc)/./node_modules/@langchain/core/dist/tools.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3Rvb2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS90b29scy5qcz84ODg5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC90b29scy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/tools.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/async_caller.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/utils/async_caller.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* reexport safe */ _dist_utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2FzeW5jX2NhbGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9hc3luY19jYWxsZXIuanM/MzJhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/env.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/utils/env.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52LmpzPzQ2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9lbnYuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/math.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/utils/math.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cosineSimilarity: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.cosineSimilarity),\n/* harmony export */   euclideanDistance: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.euclideanDistance),\n/* harmony export */   innerProduct: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.innerProduct),\n/* harmony export */   matrixFunc: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.matrixFunc),\n/* harmony export */   maximalMarginalRelevance: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.maximalMarginalRelevance),\n/* harmony export */   normalize: () => (/* reexport safe */ _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__.normalize)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/math.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/math.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL21hdGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9tYXRoLmpzP2M0MDciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9tYXRoLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/math.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/vectorstores.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/vectorstores.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SaveableVectorStore: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.SaveableVectorStore),\n/* harmony export */   VectorStore: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.VectorStore),\n/* harmony export */   VectorStoreRetriever: () => (/* reexport safe */ _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__.VectorStoreRetriever)\n/* harmony export */ });\n/* harmony import */ var _dist_vectorstores_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/vectorstores.js */ \"(rsc)/./node_modules/@langchain/core/dist/vectorstores.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3ZlY3RvcnN0b3Jlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3ZlY3RvcnN0b3Jlcy5qcz8xZGE2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC92ZWN0b3JzdG9yZXMuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/chat_models.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* binding */ ChatGoogleGenerativeAI)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/utils.js\");\n\n\n\n\n/**\n * A class that wraps the Google Palm chat model.\n * @example\n * ```typescript\n * const model = new ChatGoogleGenerativeAI({\n *   apiKey: \"<YOUR API KEY>\",\n *   temperature: 0.7,\n *   modelName: \"gemini-pro\",\n *   topK: 40,\n *   topP: 1,\n * });\n * const questions = [\n *   new HumanMessage({\n *     content: [\n *       {\n *         type: \"text\",\n *         text: \"You are a funny assistant that answers in pirate language.\",\n *       },\n *       {\n *         type: \"text\",\n *         text: \"What is your favorite food?\",\n *       },\n *     ]\n *   })\n * ];\n * const res = await model.invoke(questions);\n * console.log({ res });\n * ```\n */ class ChatGoogleGenerativeAI extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_2__.BaseChatModel {\n    static lc_name() {\n        return \"googlegenerativeai\";\n    }\n    get lc_secrets() {\n        return {\n            apiKey: \"GOOGLE_API_KEY\"\n        };\n    }\n    get _isMultimodalModel() {\n        return this.model.includes(\"vision\") || this.model.startsWith(\"gemini-1.5\");\n    }\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gemini-pro\"\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gemini-pro\"\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"maxOutputTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // default value chosen based on model\n        Object.defineProperty(this, \"stopSequences\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"safetySettings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.modelName = fields?.model?.replace(/^models\\//, \"\") ?? fields?.modelName?.replace(/^models\\//, \"\") ?? this.model;\n        this.model = this.modelName;\n        this.maxOutputTokens = fields?.maxOutputTokens ?? this.maxOutputTokens;\n        if (this.maxOutputTokens && this.maxOutputTokens < 0) {\n            throw new Error(\"`maxOutputTokens` must be a positive integer\");\n        }\n        this.temperature = fields?.temperature ?? this.temperature;\n        if (this.temperature && (this.temperature < 0 || this.temperature > 1)) {\n            throw new Error(\"`temperature` must be in the range of [0.0,1.0]\");\n        }\n        this.topP = fields?.topP ?? this.topP;\n        if (this.topP && this.topP < 0) {\n            throw new Error(\"`topP` must be a positive integer\");\n        }\n        if (this.topP && this.topP > 1) {\n            throw new Error(\"`topP` must be below 1.\");\n        }\n        this.topK = fields?.topK ?? this.topK;\n        if (this.topK && this.topK < 0) {\n            throw new Error(\"`topK` must be a positive integer\");\n        }\n        this.stopSequences = fields?.stopSequences ?? this.stopSequences;\n        this.apiKey = fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n        if (!this.apiKey) {\n            throw new Error(\"Please set an API key for Google GenerativeAI \" + \"in the environment variable GOOGLE_API_KEY \" + \"or in the `apiKey` field of the \" + \"ChatGoogleGenerativeAI constructor\");\n        }\n        this.safetySettings = fields?.safetySettings ?? this.safetySettings;\n        if (this.safetySettings && this.safetySettings.length > 0) {\n            const safetySettingsSet = new Set(this.safetySettings.map((s)=>s.category));\n            if (safetySettingsSet.size !== this.safetySettings.length) {\n                throw new Error(\"The categories in `safetySettings` array must be unique\");\n            }\n        }\n        this.streaming = fields?.streaming ?? this.streaming;\n        this.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({\n            model: this.model,\n            safetySettings: this.safetySettings,\n            generationConfig: {\n                candidateCount: 1,\n                stopSequences: this.stopSequences,\n                maxOutputTokens: this.maxOutputTokens,\n                temperature: this.temperature,\n                topP: this.topP,\n                topK: this.topK\n            }\n        });\n    }\n    _combineLLMOutput() {\n        return [];\n    }\n    _llmType() {\n        return \"googlegenerativeai\";\n    }\n    async _generate(messages, options, runManager) {\n        const prompt = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertBaseMessagesToContent)(messages, this._isMultimodalModel);\n        // Handle streaming\n        if (this.streaming) {\n            const tokenUsage = {};\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            const finalChunks = {};\n            for await (const chunk of stream){\n                const index = chunk.generationInfo?.completion ?? 0;\n                if (finalChunks[index] === undefined) {\n                    finalChunks[index] = chunk;\n                } else {\n                    finalChunks[index] = finalChunks[index].concat(chunk);\n                }\n            }\n            const generations = Object.entries(finalChunks).sort(([aKey], [bKey])=>parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value])=>value);\n            return {\n                generations,\n                llmOutput: {\n                    estimatedTokenUsage: tokenUsage\n                }\n            };\n        }\n        const res = await this.caller.callWithOptions({\n            signal: options?.signal\n        }, async ()=>{\n            let output;\n            try {\n                output = await this.client.generateContent({\n                    contents: prompt\n                });\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            } catch (e) {\n                // TODO: Improve error handling\n                if (e.message?.includes(\"400 Bad Request\")) {\n                    e.status = 400;\n                }\n                throw e;\n            }\n            return output;\n        });\n        const generationResult = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.mapGenerateContentResultToChatResult)(res.response);\n        await runManager?.handleLLMNewToken(generationResult.generations[0].text ?? \"\");\n        return generationResult;\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        const prompt = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertBaseMessagesToContent)(messages, this._isMultimodalModel);\n        const stream = await this.caller.callWithOptions({\n            signal: options?.signal\n        }, async ()=>{\n            const { stream } = await this.client.generateContentStream({\n                contents: prompt\n            });\n            return stream;\n        });\n        for await (const response of stream){\n            const chunk = (0,_utils_js__WEBPACK_IMPORTED_MODULE_3__.convertResponseContentToChatGenerationChunk)(response);\n            if (!chunk) {\n                continue;\n            }\n            yield chunk;\n            await runManager?.handleLLMNewToken(chunk.text ?? \"\");\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0RTtBQUNUO0FBQ1U7QUFDaUU7QUFDOUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0QkMsR0FDTSxNQUFNTywrQkFBK0JKLHNGQUFhQTtJQUNyRCxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsUUFBUTtRQUNaO0lBQ0o7SUFDQSxJQUFJQyxxQkFBcUI7UUFDckIsT0FBTyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsUUFBUSxDQUFDLGFBQWEsSUFBSSxDQUFDRCxLQUFLLENBQUNFLFVBQVUsQ0FBQztJQUNsRTtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQSxVQUFVLENBQUM7UUFDakJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEIsSUFBSSxzQ0FBc0M7UUFDMUNMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FB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Q0EsT0FBTzNCLHNCQUFzQk4sUUFBUSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsRUFBRTtRQUN4RCxNQUFNQyxTQUFTOUMsdUVBQTRCQSxDQUFDMkMsVUFBVSxJQUFJLENBQUNwQyxrQkFBa0I7UUFDN0UsTUFBTXlDLFNBQVMsTUFBTSxJQUFJLENBQUNtQixNQUFNLENBQUNDLGVBQWUsQ0FBQztZQUFFQyxRQUFRekIsU0FBU3lCO1FBQU8sR0FBRztZQUMxRSxNQUFNLEVBQUVyQixNQUFNLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQ1osTUFBTSxDQUFDNEMscUJBQXFCLENBQUM7Z0JBQ3ZEUixVQUFVMUI7WUFDZDtZQUNBLE9BQU9FO1FBQ1g7UUFDQSxXQUFXLE1BQU02QixZQUFZN0IsT0FBUTtZQUNqQyxNQUFNRyxRQUFRbEQsc0ZBQTJDQSxDQUFDNEU7WUFDMUQsSUFBSSxDQUFDMUIsT0FBTztnQkFDUjtZQUNKO1lBQ0EsTUFBTUE7WUFDTixNQUFNTixZQUFZaUMsa0JBQWtCM0IsTUFBTTRCLElBQUksSUFBSTtRQUN0RDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2NoYXRfbW9kZWxzLmpzP2EzYTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIGFzIEdlbmVyYXRpdmVBSSwgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IEJhc2VDaGF0TW9kZWwsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHNcIjtcbmltcG9ydCB7IGNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQsIGNvbnZlcnRSZXNwb25zZUNvbnRlbnRUb0NoYXRHZW5lcmF0aW9uQ2h1bmssIG1hcEdlbmVyYXRlQ29udGVudFJlc3VsdFRvQ2hhdFJlc3VsdCwgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuLyoqXG4gKiBBIGNsYXNzIHRoYXQgd3JhcHMgdGhlIEdvb2dsZSBQYWxtIGNoYXQgbW9kZWwuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbW9kZWwgPSBuZXcgQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSh7XG4gKiAgIGFwaUtleTogXCI8WU9VUiBBUEkgS0VZPlwiLFxuICogICB0ZW1wZXJhdHVyZTogMC43LFxuICogICBtb2RlbE5hbWU6IFwiZ2VtaW5pLXByb1wiLFxuICogICB0b3BLOiA0MCxcbiAqICAgdG9wUDogMSxcbiAqIH0pO1xuICogY29uc3QgcXVlc3Rpb25zID0gW1xuICogICBuZXcgSHVtYW5NZXNzYWdlKHtcbiAqICAgICBjb250ZW50OiBbXG4gKiAgICAgICB7XG4gKiAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICogICAgICAgICB0ZXh0OiBcIllvdSBhcmUgYSBmdW5ueSBhc3Npc3RhbnQgdGhhdCBhbnN3ZXJzIGluIHBpcmF0ZSBsYW5ndWFnZS5cIixcbiAqICAgICAgIH0sXG4gKiAgICAgICB7XG4gKiAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICogICAgICAgICB0ZXh0OiBcIldoYXQgaXMgeW91ciBmYXZvcml0ZSBmb29kP1wiLFxuICogICAgICAgfSxcbiAqICAgICBdXG4gKiAgIH0pXG4gKiBdO1xuICogY29uc3QgcmVzID0gYXdhaXQgbW9kZWwuaW52b2tlKHF1ZXN0aW9ucyk7XG4gKiBjb25zb2xlLmxvZyh7IHJlcyB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJnb29nbGVnZW5lcmF0aXZlYWlcIjtcbiAgICB9XG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcGlLZXk6IFwiR09PR0xFX0FQSV9LRVlcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IF9pc011bHRpbW9kYWxNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwuaW5jbHVkZXMoXCJ2aXNpb25cIikgfHwgdGhpcy5tb2RlbC5zdGFydHNXaXRoKFwiZ2VtaW5pLTEuNVwiKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImdlbWluaS1wcm9cIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibW9kZWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZ2VtaW5pLXByb1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pOyAvLyBkZWZhdWx0IHZhbHVlIGNob3NlbiBiYXNlZCBvbiBtb2RlbFxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhPdXRwdXRUb2tlbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wUFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pOyAvLyBkZWZhdWx0IHZhbHVlIGNob3NlbiBiYXNlZCBvbiBtb2RlbFxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BLXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7IC8vIGRlZmF1bHQgdmFsdWUgY2hvc2VuIGJhc2VkIG9uIG1vZGVsXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3BTZXF1ZW5jZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzYWZldHlTZXR0aW5nc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RyZWFtaW5nXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID1cbiAgICAgICAgICAgIGZpZWxkcz8ubW9kZWw/LnJlcGxhY2UoL15tb2RlbHNcXC8vLCBcIlwiKSA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8ubW9kZWxOYW1lPy5yZXBsYWNlKC9ebW9kZWxzXFwvLywgXCJcIikgPz9cbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsO1xuICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5tb2RlbE5hbWU7XG4gICAgICAgIHRoaXMubWF4T3V0cHV0VG9rZW5zID0gZmllbGRzPy5tYXhPdXRwdXRUb2tlbnMgPz8gdGhpcy5tYXhPdXRwdXRUb2tlbnM7XG4gICAgICAgIGlmICh0aGlzLm1heE91dHB1dFRva2VucyAmJiB0aGlzLm1heE91dHB1dFRva2VucyA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImBtYXhPdXRwdXRUb2tlbnNgIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBmaWVsZHM/LnRlbXBlcmF0dXJlID8/IHRoaXMudGVtcGVyYXR1cmU7XG4gICAgICAgIGlmICh0aGlzLnRlbXBlcmF0dXJlICYmICh0aGlzLnRlbXBlcmF0dXJlIDwgMCB8fCB0aGlzLnRlbXBlcmF0dXJlID4gMSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImB0ZW1wZXJhdHVyZWAgbXVzdCBiZSBpbiB0aGUgcmFuZ2Ugb2YgWzAuMCwxLjBdXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9wUCA9IGZpZWxkcz8udG9wUCA/PyB0aGlzLnRvcFA7XG4gICAgICAgIGlmICh0aGlzLnRvcFAgJiYgdGhpcy50b3BQIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYHRvcFBgIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRvcFAgJiYgdGhpcy50b3BQID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYHRvcFBgIG11c3QgYmUgYmVsb3cgMS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3BLID0gZmllbGRzPy50b3BLID8/IHRoaXMudG9wSztcbiAgICAgICAgaWYgKHRoaXMudG9wSyAmJiB0aGlzLnRvcEsgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJgdG9wS2AgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wU2VxdWVuY2VzID0gZmllbGRzPy5zdG9wU2VxdWVuY2VzID8/IHRoaXMuc3RvcFNlcXVlbmNlcztcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBmaWVsZHM/LmFwaUtleSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiR09PR0xFX0FQSV9LRVlcIik7XG4gICAgICAgIGlmICghdGhpcy5hcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzZXQgYW4gQVBJIGtleSBmb3IgR29vZ2xlIEdlbmVyYXRpdmVBSSBcIiArXG4gICAgICAgICAgICAgICAgXCJpbiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgR09PR0xFX0FQSV9LRVkgXCIgK1xuICAgICAgICAgICAgICAgIFwib3IgaW4gdGhlIGBhcGlLZXlgIGZpZWxkIG9mIHRoZSBcIiArXG4gICAgICAgICAgICAgICAgXCJDaGF0R29vZ2xlR2VuZXJhdGl2ZUFJIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2FmZXR5U2V0dGluZ3MgPSBmaWVsZHM/LnNhZmV0eVNldHRpbmdzID8/IHRoaXMuc2FmZXR5U2V0dGluZ3M7XG4gICAgICAgIGlmICh0aGlzLnNhZmV0eVNldHRpbmdzICYmIHRoaXMuc2FmZXR5U2V0dGluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2FmZXR5U2V0dGluZ3NTZXQgPSBuZXcgU2V0KHRoaXMuc2FmZXR5U2V0dGluZ3MubWFwKChzKSA9PiBzLmNhdGVnb3J5KSk7XG4gICAgICAgICAgICBpZiAoc2FmZXR5U2V0dGluZ3NTZXQuc2l6ZSAhPT0gdGhpcy5zYWZldHlTZXR0aW5ncy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2F0ZWdvcmllcyBpbiBgc2FmZXR5U2V0dGluZ3NgIGFycmF5IG11c3QgYmUgdW5pcXVlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gdGhpcy5zdHJlYW1pbmc7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEdlbmVyYXRpdmVBSSh0aGlzLmFwaUtleSkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgc3RvcFNlcXVlbmNlczogdGhpcy5zdG9wU2VxdWVuY2VzLFxuICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2VuczogdGhpcy5tYXhPdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgdG9wUDogdGhpcy50b3BQLFxuICAgICAgICAgICAgICAgIHRvcEs6IHRoaXMudG9wSyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfY29tYmluZUxMTU91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ29vZ2xlZ2VuZXJhdGl2ZWFpXCI7XG4gICAgfVxuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCB0aGlzLl9pc011bHRpbW9kYWxNb2RlbCk7XG4gICAgICAgIC8vIEhhbmRsZSBzdHJlYW1pbmdcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlblVzYWdlID0ge307XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCBmaW5hbENodW5rcyA9IHt9O1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rLmdlbmVyYXRpb25JbmZvPy5jb21wbGV0aW9uID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzW2luZGV4XSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVua3NbaW5kZXhdID0gZmluYWxDaHVua3NbaW5kZXhdLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBPYmplY3QuZW50cmllcyhmaW5hbENodW5rcylcbiAgICAgICAgICAgICAgICAuc29ydCgoW2FLZXldLCBbYktleV0pID0+IHBhcnNlSW50KGFLZXksIDEwKSAtIHBhcnNlSW50KGJLZXksIDEwKSlcbiAgICAgICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0OiB7IGVzdGltYXRlZFRva2VuVXNhZ2U6IHRva2VuVXNhZ2UgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuY2xpZW50LmdlbmVyYXRlQ29udGVudCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBwcm9tcHQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW1wcm92ZSBlcnJvciBoYW5kbGluZ1xuICAgICAgICAgICAgICAgIGlmIChlLm1lc3NhZ2U/LmluY2x1ZGVzKFwiNDAwIEJhZCBSZXF1ZXN0XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RhdHVzID0gNDAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25SZXN1bHQgPSBtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQocmVzLnJlc3BvbnNlKTtcbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oZ2VuZXJhdGlvblJlc3VsdC5nZW5lcmF0aW9uc1swXS50ZXh0ID8/IFwiXCIpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvblJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwcm9tcHQgPSBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCB0aGlzLl9pc011bHRpbW9kYWxNb2RlbCk7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuY2FsbGVyLmNhbGxXaXRoT3B0aW9ucyh7IHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsIH0sIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RyZWFtIH0gPSBhd2FpdCB0aGlzLmNsaWVudC5nZW5lcmF0ZUNvbnRlbnRTdHJlYW0oe1xuICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBwcm9tcHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3BvbnNlIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmICghY2h1bmspIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oY2h1bmsudGV4dCA/PyBcIlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJHZW5lcmF0aXZlQUkiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNoYXRNb2RlbCIsImNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQiLCJjb252ZXJ0UmVzcG9uc2VDb250ZW50VG9DaGF0R2VuZXJhdGlvbkNodW5rIiwibWFwR2VuZXJhdGVDb250ZW50UmVzdWx0VG9DaGF0UmVzdWx0IiwiQ2hhdEdvb2dsZUdlbmVyYXRpdmVBSSIsImxjX25hbWUiLCJsY19zZWNyZXRzIiwiYXBpS2V5IiwiX2lzTXVsdGltb2RhbE1vZGVsIiwibW9kZWwiLCJpbmNsdWRlcyIsInN0YXJ0c1dpdGgiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJtb2RlbE5hbWUiLCJyZXBsYWNlIiwibWF4T3V0cHV0VG9rZW5zIiwiRXJyb3IiLCJ0ZW1wZXJhdHVyZSIsInRvcFAiLCJ0b3BLIiwic3RvcFNlcXVlbmNlcyIsInNhZmV0eVNldHRpbmdzIiwibGVuZ3RoIiwic2FmZXR5U2V0dGluZ3NTZXQiLCJTZXQiLCJtYXAiLCJzIiwiY2F0ZWdvcnkiLCJzaXplIiwic3RyZWFtaW5nIiwiY2xpZW50IiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwiZ2VuZXJhdGlvbkNvbmZpZyIsImNhbmRpZGF0ZUNvdW50IiwiX2NvbWJpbmVMTE1PdXRwdXQiLCJfbGxtVHlwZSIsIl9nZW5lcmF0ZSIsIm1lc3NhZ2VzIiwib3B0aW9ucyIsInJ1bk1hbmFnZXIiLCJwcm9tcHQiLCJ0b2tlblVzYWdlIiwic3RyZWFtIiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwiZmluYWxDaHVua3MiLCJjaHVuayIsImluZGV4IiwiZ2VuZXJhdGlvbkluZm8iLCJjb21wbGV0aW9uIiwidW5kZWZpbmVkIiwiY29uY2F0IiwiZ2VuZXJhdGlvbnMiLCJlbnRyaWVzIiwic29ydCIsImFLZXkiLCJiS2V5IiwicGFyc2VJbnQiLCJfIiwibGxtT3V0cHV0IiwiZXN0aW1hdGVkVG9rZW5Vc2FnZSIsInJlcyIsImNhbGxlciIsImNhbGxXaXRoT3B0aW9ucyIsInNpZ25hbCIsIm91dHB1dCIsImdlbmVyYXRlQ29udGVudCIsImNvbnRlbnRzIiwiZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJnZW5lcmF0aW9uUmVzdWx0IiwicmVzcG9uc2UiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRleHQiLCJnZW5lcmF0ZUNvbnRlbnRTdHJlYW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/embeddings.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* binding */ GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/embeddings.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/chunk_array.js\");\n\n\n\n\n/**\n * Class that extends the Embeddings class and provides methods for\n * generating embeddings using the Google Palm API.\n * @example\n * ```typescript\n * const model = new GoogleGenerativeAIEmbeddings({\n *   apiKey: \"<YOUR API KEY>\",\n *   modelName: \"embedding-001\",\n * });\n *\n * // Embed a single query\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\"\n * );\n * console.log({ res });\n *\n * // Embed multiple documents\n * const documentRes = await model.embedDocuments([\"Hello world\", \"Bye bye\"]);\n * console.log({ documentRes });\n * ```\n */ class GoogleGenerativeAIEmbeddings extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_2__.Embeddings {\n    constructor(fields){\n        super(fields ?? {});\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"embedding-001\"\n        });\n        Object.defineProperty(this, \"model\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"embedding-001\"\n        });\n        Object.defineProperty(this, \"taskType\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"title\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"maxBatchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 100\n        }); // Max batch size for embedDocuments set by GenerativeModel client's batchEmbedContents call\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.modelName = fields?.model?.replace(/^models\\//, \"\") ?? fields?.modelName?.replace(/^models\\//, \"\") ?? this.modelName;\n        this.model = this.modelName;\n        this.taskType = fields?.taskType ?? this.taskType;\n        this.title = fields?.title ?? this.title;\n        if (this.title && this.taskType !== \"RETRIEVAL_DOCUMENT\") {\n            throw new Error(\"title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT\");\n        }\n        this.apiKey = fields?.apiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"GOOGLE_API_KEY\");\n        if (!this.apiKey) {\n            throw new Error(\"Please set an API key for Google GenerativeAI \" + \"in the environmentb variable GOOGLE_API_KEY \" + \"or in the `apiKey` field of the \" + \"GoogleGenerativeAIEmbeddings constructor\");\n        }\n        this.client = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(this.apiKey).getGenerativeModel({\n            model: this.model\n        });\n    }\n    _convertToContent(text) {\n        const cleanedText = this.stripNewLines ? text.replace(/\\n/g, \" \") : text;\n        return {\n            content: {\n                role: \"user\",\n                parts: [\n                    {\n                        text: cleanedText\n                    }\n                ]\n            },\n            taskType: this.taskType,\n            title: this.title\n        };\n    }\n    async _embedQueryContent(text) {\n        const req = this._convertToContent(text);\n        const res = await this.client.embedContent(req);\n        return res.embedding.values ?? [];\n    }\n    async _embedDocumentsContent(documents) {\n        const batchEmbedChunks = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_3__.chunkArray)(documents, this.maxBatchSize);\n        const batchEmbedRequests = batchEmbedChunks.map((chunk)=>({\n                requests: chunk.map((doc)=>this._convertToContent(doc))\n            }));\n        const responses = await Promise.allSettled(batchEmbedRequests.map((req)=>this.client.batchEmbedContents(req)));\n        const embeddings = responses.flatMap((res, idx)=>{\n            if (res.status === \"fulfilled\") {\n                return res.value.embeddings.map((e)=>e.values || []);\n            } else {\n                return Array(batchEmbedChunks[idx].length).fill([]);\n            }\n        });\n        return embeddings;\n    }\n    /**\n     * Method that takes a document as input and returns a promise that\n     * resolves to an embedding for the document. It calls the _embedText\n     * method with the document as the input.\n     * @param document Document for which to generate an embedding.\n     * @returns Promise that resolves to an embedding for the input document.\n     */ embedQuery(document) {\n        return this.caller.call(this._embedQueryContent.bind(this), document);\n    }\n    /**\n     * Method that takes an array of documents as input and returns a promise\n     * that resolves to a 2D array of embeddings for each document. It calls\n     * the _embedText method for each document in the array.\n     * @param documents Array of documents for which to generate embeddings.\n     * @returns Promise that resolves to a 2D array of embeddings for each input document.\n     */ embedDocuments(documents) {\n        return this.caller.call(this._embedDocumentsContent.bind(this), documents);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJEO0FBQ1E7QUFDWDtBQUNPO0FBQy9EOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW9CQyxHQUNNLE1BQU1JLHFDQUFxQ0Ysa0VBQVVBO0lBQ3hERyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQSxVQUFVLENBQUM7UUFDakJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWCxJQUFJLDRGQUE0RjtRQUNoR0wsT0FBT0MsY0FBYyxDQUFD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O0lBQ2hFO0lBQ0E7Ozs7OztLQU1DLEdBQ0RJLGVBQWV6QixTQUFTLEVBQUU7UUFDdEIsT0FBTyxJQUFJLENBQUNzQixNQUFNLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUN4QixzQkFBc0IsQ0FBQ3lCLElBQUksQ0FBQyxJQUFJLEdBQUd4QjtJQUNwRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9lbWJlZGRpbmdzLmpzP2NkNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSBcIkBnb29nbGUvZ2VuZXJhdGl2ZS1haVwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzXCI7XG5pbXBvcnQgeyBjaHVua0FycmF5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheVwiO1xuLyoqXG4gKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIEVtYmVkZGluZ3MgY2xhc3MgYW5kIHByb3ZpZGVzIG1ldGhvZHMgZm9yXG4gKiBnZW5lcmF0aW5nIGVtYmVkZGluZ3MgdXNpbmcgdGhlIEdvb2dsZSBQYWxtIEFQSS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtb2RlbCA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzKHtcbiAqICAgYXBpS2V5OiBcIjxZT1VSIEFQSSBLRVk+XCIsXG4gKiAgIG1vZGVsTmFtZTogXCJlbWJlZGRpbmctMDAxXCIsXG4gKiB9KTtcbiAqXG4gKiAvLyBFbWJlZCBhIHNpbmdsZSBxdWVyeVxuICogY29uc3QgcmVzID0gYXdhaXQgbW9kZWwuZW1iZWRRdWVyeShcbiAqICAgXCJXaGF0IHdvdWxkIGJlIGEgZ29vZCBjb21wYW55IG5hbWUgZm9yIGEgY29tcGFueSB0aGF0IG1ha2VzIGNvbG9yZnVsIHNvY2tzP1wiXG4gKiApO1xuICogY29uc29sZS5sb2coeyByZXMgfSk7XG4gKlxuICogLy8gRW1iZWQgbXVsdGlwbGUgZG9jdW1lbnRzXG4gKiBjb25zdCBkb2N1bWVudFJlcyA9IGF3YWl0IG1vZGVsLmVtYmVkRG9jdW1lbnRzKFtcIkhlbGxvIHdvcmxkXCIsIFwiQnllIGJ5ZVwiXSk7XG4gKiBjb25zb2xlLmxvZyh7IGRvY3VtZW50UmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzIGV4dGVuZHMgRW1iZWRkaW5ncyB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZW1iZWRkaW5nLTAwMVwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJlbWJlZGRpbmctMDAxXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhc2tUeXBlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpdGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmlwTmV3TGluZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMTAwXG4gICAgICAgIH0pOyAvLyBNYXggYmF0Y2ggc2l6ZSBmb3IgZW1iZWREb2N1bWVudHMgc2V0IGJ5IEdlbmVyYXRpdmVNb2RlbCBjbGllbnQncyBiYXRjaEVtYmVkQ29udGVudHMgY2FsbFxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5tb2RlbD8ucmVwbGFjZSgvXm1vZGVsc1xcLy8sIFwiXCIpID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5tb2RlbE5hbWU/LnJlcGxhY2UoL15tb2RlbHNcXC8vLCBcIlwiKSA/P1xuICAgICAgICAgICAgICAgIHRoaXMubW9kZWxOYW1lO1xuICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5tb2RlbE5hbWU7XG4gICAgICAgIHRoaXMudGFza1R5cGUgPSBmaWVsZHM/LnRhc2tUeXBlID8/IHRoaXMudGFza1R5cGU7XG4gICAgICAgIHRoaXMudGl0bGUgPSBmaWVsZHM/LnRpdGxlID8/IHRoaXMudGl0bGU7XG4gICAgICAgIGlmICh0aGlzLnRpdGxlICYmIHRoaXMudGFza1R5cGUgIT09IFwiUkVUUklFVkFMX0RPQ1VNRU5UXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRpdGxlIGNhbiBvbmx5IGJlIHNlcGNpZmllZCB3aXRoIFRhc2tUeXBlLlJFVFJJRVZBTF9ET0NVTUVOVFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwaUtleSA9IGZpZWxkcz8uYXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJHT09HTEVfQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHNldCBhbiBBUEkga2V5IGZvciBHb29nbGUgR2VuZXJhdGl2ZUFJIFwiICtcbiAgICAgICAgICAgICAgICBcImluIHRoZSBlbnZpcm9ubWVudGIgdmFyaWFibGUgR09PR0xFX0FQSV9LRVkgXCIgK1xuICAgICAgICAgICAgICAgIFwib3IgaW4gdGhlIGBhcGlLZXlgIGZpZWxkIG9mIHRoZSBcIiArXG4gICAgICAgICAgICAgICAgXCJHb29nbGVHZW5lcmF0aXZlQUlFbWJlZGRpbmdzIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSSh0aGlzLmFwaUtleSkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2NvbnZlcnRUb0NvbnRlbnQodGV4dCkge1xuICAgICAgICBjb25zdCBjbGVhbmVkVGV4dCA9IHRoaXMuc3RyaXBOZXdMaW5lcyA/IHRleHQucmVwbGFjZSgvXFxuL2csIFwiIFwiKSA6IHRleHQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZW50OiB7IHJvbGU6IFwidXNlclwiLCBwYXJ0czogW3sgdGV4dDogY2xlYW5lZFRleHQgfV0gfSxcbiAgICAgICAgICAgIHRhc2tUeXBlOiB0aGlzLnRhc2tUeXBlLFxuICAgICAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIF9lbWJlZFF1ZXJ5Q29udGVudCh0ZXh0KSB7XG4gICAgICAgIGNvbnN0IHJlcSA9IHRoaXMuX2NvbnZlcnRUb0NvbnRlbnQodGV4dCk7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmVtYmVkQ29udGVudChyZXEpO1xuICAgICAgICByZXR1cm4gcmVzLmVtYmVkZGluZy52YWx1ZXMgPz8gW107XG4gICAgfVxuICAgIGFzeW5jIF9lbWJlZERvY3VtZW50c0NvbnRlbnQoZG9jdW1lbnRzKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoRW1iZWRDaHVua3MgPSBjaHVua0FycmF5KGRvY3VtZW50cywgdGhpcy5tYXhCYXRjaFNpemUpO1xuICAgICAgICBjb25zdCBiYXRjaEVtYmVkUmVxdWVzdHMgPSBiYXRjaEVtYmVkQ2h1bmtzLm1hcCgoY2h1bmspID0+ICh7XG4gICAgICAgICAgICByZXF1ZXN0czogY2h1bmsubWFwKChkb2MpID0+IHRoaXMuX2NvbnZlcnRUb0NvbnRlbnQoZG9jKSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhdGNoRW1iZWRSZXF1ZXN0cy5tYXAoKHJlcSkgPT4gdGhpcy5jbGllbnQuYmF0Y2hFbWJlZENvbnRlbnRzKHJlcSkpKTtcbiAgICAgICAgY29uc3QgZW1iZWRkaW5ncyA9IHJlc3BvbnNlcy5mbGF0TWFwKChyZXMsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnZhbHVlLmVtYmVkZGluZ3MubWFwKChlKSA9PiBlLnZhbHVlcyB8fCBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkoYmF0Y2hFbWJlZENodW5rc1tpZHhdLmxlbmd0aCkuZmlsbChbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZW1iZWRkaW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgdGFrZXMgYSBkb2N1bWVudCBhcyBpbnB1dCBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdFxuICAgICAqIHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGRvY3VtZW50LiBJdCBjYWxscyB0aGUgX2VtYmVkVGV4dFxuICAgICAqIG1ldGhvZCB3aXRoIHRoZSBkb2N1bWVudCBhcyB0aGUgaW5wdXQuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IERvY3VtZW50IGZvciB3aGljaCB0byBnZW5lcmF0ZSBhbiBlbWJlZGRpbmcuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtYmVkZGluZyBmb3IgdGhlIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGVtYmVkUXVlcnkoZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwodGhpcy5fZW1iZWRRdWVyeUNvbnRlbnQuYmluZCh0aGlzKSwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdGhhdCB0YWtlcyBhbiBhcnJheSBvZiBkb2N1bWVudHMgYXMgaW5wdXQgYW5kIHJldHVybnMgYSBwcm9taXNlXG4gICAgICogdGhhdCByZXNvbHZlcyB0byBhIDJEIGFycmF5IG9mIGVtYmVkZGluZ3MgZm9yIGVhY2ggZG9jdW1lbnQuIEl0IGNhbGxzXG4gICAgICogdGhlIF9lbWJlZFRleHQgbWV0aG9kIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBhcnJheS5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRzIEFycmF5IG9mIGRvY3VtZW50cyBmb3Igd2hpY2ggdG8gZ2VuZXJhdGUgZW1iZWRkaW5ncy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSAyRCBhcnJheSBvZiBlbWJlZGRpbmdzIGZvciBlYWNoIGlucHV0IGRvY3VtZW50LlxuICAgICAqL1xuICAgIGVtYmVkRG9jdW1lbnRzKGRvY3VtZW50cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbCh0aGlzLl9lbWJlZERvY3VtZW50c0NvbnRlbnQuYmluZCh0aGlzKSwgZG9jdW1lbnRzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkVtYmVkZGluZ3MiLCJjaHVua0FycmF5IiwiR29vZ2xlR2VuZXJhdGl2ZUFJRW1iZWRkaW5ncyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm1vZGVsTmFtZSIsIm1vZGVsIiwicmVwbGFjZSIsInRhc2tUeXBlIiwidGl0bGUiLCJFcnJvciIsImFwaUtleSIsImNsaWVudCIsImdldEdlbmVyYXRpdmVNb2RlbCIsIl9jb252ZXJ0VG9Db250ZW50IiwidGV4dCIsImNsZWFuZWRUZXh0Iiwic3RyaXBOZXdMaW5lcyIsImNvbnRlbnQiLCJyb2xlIiwicGFydHMiLCJfZW1iZWRRdWVyeUNvbnRlbnQiLCJyZXEiLCJyZXMiLCJlbWJlZENvbnRlbnQiLCJlbWJlZGRpbmciLCJ2YWx1ZXMiLCJfZW1iZWREb2N1bWVudHNDb250ZW50IiwiZG9jdW1lbnRzIiwiYmF0Y2hFbWJlZENodW5rcyIsIm1heEJhdGNoU2l6ZSIsImJhdGNoRW1iZWRSZXF1ZXN0cyIsIm1hcCIsImNodW5rIiwicmVxdWVzdHMiLCJkb2MiLCJyZXNwb25zZXMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsImJhdGNoRW1iZWRDb250ZW50cyIsImVtYmVkZGluZ3MiLCJmbGF0TWFwIiwiaWR4Iiwic3RhdHVzIiwiZSIsIkFycmF5IiwibGVuZ3RoIiwiZmlsbCIsImVtYmVkUXVlcnkiLCJkb2N1bWVudCIsImNhbGxlciIsImNhbGwiLCJiaW5kIiwiZW1iZWREb2N1bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI),\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_1__.GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/chat_models.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/embeddings.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9kaXN0L2luZGV4LmpzPzEwNWIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vY2hhdF9tb2RlbHMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VtYmVkZGluZ3MuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/dist/utils.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/dist/utils.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertAuthorToRole: () => (/* binding */ convertAuthorToRole),\n/* harmony export */   convertBaseMessagesToContent: () => (/* binding */ convertBaseMessagesToContent),\n/* harmony export */   convertMessageContentToParts: () => (/* binding */ convertMessageContentToParts),\n/* harmony export */   convertResponseContentToChatGenerationChunk: () => (/* binding */ convertResponseContentToChatGenerationChunk),\n/* harmony export */   getMessageAuthor: () => (/* binding */ getMessageAuthor),\n/* harmony export */   mapGenerateContentResultToChatResult: () => (/* binding */ mapGenerateContentResultToChatResult)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/outputs.js\");\n\n\nfunction getMessageAuthor(message) {\n    const type = message._getType();\n    if (_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) {\n        return message.role;\n    }\n    return message.name ?? type;\n}\n/**\n * Maps a message type to a Google Generative AI chat author.\n * @param message The message to map.\n * @param model The model to use for mapping.\n * @returns The message type mapped to a Google Generative AI chat author.\n */ function convertAuthorToRole(author) {\n    switch(author){\n        /**\n         *  Note: Gemini currently is not supporting system messages\n         *  we will convert them to human messages and merge with following\n         * */ case \"ai\":\n        case \"model\":\n            return \"model\";\n        case \"system\":\n        case \"human\":\n            return \"user\";\n        default:\n            throw new Error(`Unknown / unsupported author: ${author}`);\n    }\n}\nfunction convertMessageContentToParts(content, isMultimodalModel) {\n    if (typeof content === \"string\") {\n        return [\n            {\n                text: content\n            }\n        ];\n    }\n    return content.map((c)=>{\n        if (c.type === \"text\") {\n            return {\n                text: c.text\n            };\n        }\n        if (c.type === \"image_url\") {\n            if (!isMultimodalModel) {\n                throw new Error(`This model does not support images`);\n            }\n            let source;\n            if (typeof c.image_url === \"string\") {\n                source = c.image_url;\n            } else if (typeof c.image_url === \"object\" && \"url\" in c.image_url) {\n                source = c.image_url.url;\n            } else {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            const [dm, data] = source.split(\",\");\n            if (!dm.startsWith(\"data:\")) {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            const [mimeType, encoding] = dm.replace(/^data:/, \"\").split(\";\");\n            if (encoding !== \"base64\") {\n                throw new Error(\"Please provide image as base64 encoded data URL\");\n            }\n            return {\n                inlineData: {\n                    data,\n                    mimeType\n                }\n            };\n        }\n        throw new Error(`Unknown content type ${c.type}`);\n    });\n}\nfunction convertBaseMessagesToContent(messages, isMultimodalModel) {\n    return messages.reduce((acc, message, index)=>{\n        if (!(0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(message)) {\n            throw new Error(\"Unsupported message input\");\n        }\n        const author = getMessageAuthor(message);\n        if (author === \"system\" && index !== 0) {\n            throw new Error(\"System message should be the first one\");\n        }\n        const role = convertAuthorToRole(author);\n        const prevContent = acc.content[acc.content.length];\n        if (!acc.mergeWithPreviousContent && prevContent && prevContent.role === role) {\n            throw new Error(\"Google Generative AI requires alternate messages between authors\");\n        }\n        const parts = convertMessageContentToParts(message.content, isMultimodalModel);\n        if (acc.mergeWithPreviousContent) {\n            const prevContent = acc.content[acc.content.length - 1];\n            if (!prevContent) {\n                throw new Error(\"There was a problem parsing your system message. Please try a prompt without one.\");\n            }\n            prevContent.parts.push(...parts);\n            return {\n                mergeWithPreviousContent: false,\n                content: acc.content\n            };\n        }\n        const content = {\n            role,\n            parts\n        };\n        return {\n            mergeWithPreviousContent: author === \"system\",\n            content: [\n                ...acc.content,\n                content\n            ]\n        };\n    }, {\n        content: [],\n        mergeWithPreviousContent: false\n    }).content;\n}\nfunction mapGenerateContentResultToChatResult(response) {\n    // if rejected or error, return empty generations with reason in filters\n    if (!response.candidates || response.candidates.length === 0 || !response.candidates[0]) {\n        return {\n            generations: [],\n            llmOutput: {\n                filters: response.promptFeedback\n            }\n        };\n    }\n    const [candidate] = response.candidates;\n    const { content, ...generationInfo } = candidate;\n    const text = content?.parts[0]?.text ?? \"\";\n    const generation = {\n        text,\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage({\n            content: text,\n            name: !content ? undefined : content.role,\n            additional_kwargs: generationInfo\n        }),\n        generationInfo\n    };\n    return {\n        generations: [\n            generation\n        ]\n    };\n}\nfunction convertResponseContentToChatGenerationChunk(response) {\n    if (!response.candidates || response.candidates.length === 0) {\n        return null;\n    }\n    const [candidate] = response.candidates;\n    const { content, ...generationInfo } = candidate;\n    const text = content?.parts[0]?.text ?? \"\";\n    return new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n        text,\n        message: new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n            content: text,\n            name: !content ? undefined : content.role,\n            // Each chunk can have unique \"generationInfo\", and merging strategy is unclear,\n            // so leave blank for now.\n            additional_kwargs: {}\n        }),\n        generationInfo\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFrRztBQUNuQztBQUN4RCxTQUFTSyxpQkFBaUJDLE9BQU87SUFDcEMsTUFBTUMsT0FBT0QsUUFBUUUsUUFBUTtJQUM3QixJQUFJTixpRUFBV0EsQ0FBQ08sVUFBVSxDQUFDSCxVQUFVO1FBQ2pDLE9BQU9BLFFBQVFJLElBQUk7SUFDdkI7SUFDQSxPQUFPSixRQUFRSyxJQUFJLElBQUlKO0FBQzNCO0FBQ0E7Ozs7O0NBS0MsR0FDTSxTQUFTSyxvQkFBb0JDLE1BQU07SUFDdEMsT0FBUUE7UUFDSjs7O1dBR0csR0FDSCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1FBQ0wsS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDhCQUE4QixFQUFFRCxPQUFPLENBQUM7SUFDakU7QUFDSjtBQUNPLFNBQVNFLDZCQUE2QkMsT0FBTyxFQUFFQyxpQkFBaUI7SUFDbkUsSUFBSSxPQUFPRCxZQUFZLFVBQVU7UUFDN0IsT0FBTztZQUFDO2dCQUFFRSxNQUFNRjtZQUFRO1NBQUU7SUFDOUI7SUFDQSxPQUFPQSxRQUFRRyxHQUFHLENBQUMsQ0FBQ0M7UUFDaEIsSUFBSUEsRUFBRWIsSUFBSSxLQUFLLFFBQVE7WUFDbkIsT0FBTztnQkFDSFcsTUFBTUUsRUFBRUYsSUFBSTtZQUNoQjtRQUNKO1FBQ0EsSUFBSUUsRUFBRWIsSUFBSSxLQUFLLGFBQWE7WUFDeEIsSUFBSSxDQUFDVSxtQkFBbUI7Z0JBQ3BCLE1BQU0sSUFBSUgsTUFBTSxDQUFDLGtDQUFrQyxDQUFDO1lBQ3hEO1lBQ0EsSUFBSU87WUFDSixJQUFJLE9BQU9ELEVBQUVFLFNBQVMsS0FBSyxVQUFVO2dCQUNqQ0QsU0FBU0QsRUFBRUUsU0FBUztZQUN4QixPQUNLLElBQUksT0FBT0YsRUFBRUUsU0FBUyxLQUFLLFlBQVks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VW9DLFlBQVlwQyxRQUFRTixJQUFJO1lBQ3pDMkMsbUJBQW1CSDtRQUN2QjtRQUNBQTtJQUNKO0lBQ0EsT0FBTztRQUNITCxhQUFhO1lBQUNNO1NBQVc7SUFDN0I7QUFDSjtBQUNPLFNBQVNHLDRDQUE0Q1gsUUFBUTtJQUNoRSxJQUFJLENBQUNBLFNBQVNDLFVBQVUsSUFBSUQsU0FBU0MsVUFBVSxDQUFDTixNQUFNLEtBQUssR0FBRztRQUMxRCxPQUFPO0lBQ1g7SUFDQSxNQUFNLENBQUNXLFVBQVUsR0FBR04sU0FBU0MsVUFBVTtJQUN2QyxNQUFNLEVBQUU1QixPQUFPLEVBQUUsR0FBR2tDLGdCQUFnQixHQUFHRDtJQUN2QyxNQUFNL0IsT0FBT0YsU0FBU3dCLEtBQUssQ0FBQyxFQUFFLEVBQUV0QixRQUFRO0lBQ3hDLE9BQU8sSUFBSWQsd0VBQW1CQSxDQUFDO1FBQzNCYztRQUNBWixTQUFTLElBQUlMLG9FQUFjQSxDQUFDO1lBQ3hCZSxTQUFTRTtZQUNUUCxNQUFNLENBQUNLLFVBQVVvQyxZQUFZcEMsUUFBUU4sSUFBSTtZQUN6QyxnRkFBZ0Y7WUFDaEYsMEJBQTBCO1lBQzFCMkMsbUJBQW1CLENBQUM7UUFDeEI7UUFDQUg7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvZGlzdC91dGlscy5qcz8yY2RmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmssIENoYXRNZXNzYWdlLCBpc0Jhc2VNZXNzYWdlLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IENoYXRHZW5lcmF0aW9uQ2h1bmssIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9vdXRwdXRzXCI7XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVzc2FnZUF1dGhvcihtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBpZiAoQ2hhdE1lc3NhZ2UuaXNJbnN0YW5jZShtZXNzYWdlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5yb2xlO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZS5uYW1lID8/IHR5cGU7XG59XG4vKipcbiAqIE1hcHMgYSBtZXNzYWdlIHR5cGUgdG8gYSBHb29nbGUgR2VuZXJhdGl2ZSBBSSBjaGF0IGF1dGhvci5cbiAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIG1hcC5cbiAqIEBwYXJhbSBtb2RlbCBUaGUgbW9kZWwgdG8gdXNlIGZvciBtYXBwaW5nLlxuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdHlwZSBtYXBwZWQgdG8gYSBHb29nbGUgR2VuZXJhdGl2ZSBBSSBjaGF0IGF1dGhvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBdXRob3JUb1JvbGUoYXV0aG9yKSB7XG4gICAgc3dpdGNoIChhdXRob3IpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqICBOb3RlOiBHZW1pbmkgY3VycmVudGx5IGlzIG5vdCBzdXBwb3J0aW5nIHN5c3RlbSBtZXNzYWdlc1xuICAgICAgICAgKiAgd2Ugd2lsbCBjb252ZXJ0IHRoZW0gdG8gaHVtYW4gbWVzc2FnZXMgYW5kIG1lcmdlIHdpdGggZm9sbG93aW5nXG4gICAgICAgICAqICovXG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICBjYXNlIFwibW9kZWxcIjogLy8gZ2V0TWVzc2FnZUF1dGhvciByZXR1cm5zIG1lc3NhZ2UubmFtZS4gY29kZSBleC46IHJldHVybiBtZXNzYWdlLm5hbWUgPz8gdHlwZTtcbiAgICAgICAgICAgIHJldHVybiBcIm1vZGVsXCI7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgY2FzZSBcImh1bWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ1c2VyXCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gLyB1bnN1cHBvcnRlZCBhdXRob3I6ICR7YXV0aG9yfWApO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0TWVzc2FnZUNvbnRlbnRUb1BhcnRzKGNvbnRlbnQsIGlzTXVsdGltb2RhbE1vZGVsKSB7XG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBbeyB0ZXh0OiBjb250ZW50IH1dO1xuICAgIH1cbiAgICByZXR1cm4gY29udGVudC5tYXAoKGMpID0+IHtcbiAgICAgICAgaWYgKGMudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGV4dDogYy50ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYy50eXBlID09PSBcImltYWdlX3VybFwiKSB7XG4gICAgICAgICAgICBpZiAoIWlzTXVsdGltb2RhbE1vZGVsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGlzIG1vZGVsIGRvZXMgbm90IHN1cHBvcnQgaW1hZ2VzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IGMuaW1hZ2VfdXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGMuaW1hZ2VfdXJsID09PSBcIm9iamVjdFwiICYmIFwidXJsXCIgaW4gYy5pbWFnZV91cmwpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBjLmltYWdlX3VybC51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBpbWFnZSBhcyBiYXNlNjQgZW5jb2RlZCBkYXRhIFVSTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFtkbSwgZGF0YV0gPSBzb3VyY2Uuc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgaWYgKCFkbS5zdGFydHNXaXRoKFwiZGF0YTpcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgcHJvdmlkZSBpbWFnZSBhcyBiYXNlNjQgZW5jb2RlZCBkYXRhIFVSTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFttaW1lVHlwZSwgZW5jb2RpbmddID0gZG0ucmVwbGFjZSgvXmRhdGE6LywgXCJcIikuc3BsaXQoXCI7XCIpO1xuICAgICAgICAgICAgaWYgKGVuY29kaW5nICE9PSBcImJhc2U2NFwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHByb3ZpZGUgaW1hZ2UgYXMgYmFzZTY0IGVuY29kZWQgZGF0YSBVUkxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlubGluZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNvbnRlbnQgdHlwZSAke2MudHlwZX1gKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0QmFzZU1lc3NhZ2VzVG9Db250ZW50KG1lc3NhZ2VzLCBpc011bHRpbW9kYWxNb2RlbCkge1xuICAgIHJldHVybiBtZXNzYWdlcy5yZWR1Y2UoKGFjYywgbWVzc2FnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCFpc0Jhc2VNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXNzYWdlIGlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF1dGhvciA9IGdldE1lc3NhZ2VBdXRob3IobWVzc2FnZSk7XG4gICAgICAgIGlmIChhdXRob3IgPT09IFwic3lzdGVtXCIgJiYgaW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5c3RlbSBtZXNzYWdlIHNob3VsZCBiZSB0aGUgZmlyc3Qgb25lXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvbGUgPSBjb252ZXJ0QXV0aG9yVG9Sb2xlKGF1dGhvcik7XG4gICAgICAgIGNvbnN0IHByZXZDb250ZW50ID0gYWNjLmNvbnRlbnRbYWNjLmNvbnRlbnQubGVuZ3RoXTtcbiAgICAgICAgaWYgKCFhY2MubWVyZ2VXaXRoUHJldmlvdXNDb250ZW50ICYmXG4gICAgICAgICAgICBwcmV2Q29udGVudCAmJlxuICAgICAgICAgICAgcHJldkNvbnRlbnQucm9sZSA9PT0gcm9sZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR29vZ2xlIEdlbmVyYXRpdmUgQUkgcmVxdWlyZXMgYWx0ZXJuYXRlIG1lc3NhZ2VzIGJldHdlZW4gYXV0aG9yc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJ0cyA9IGNvbnZlcnRNZXNzYWdlQ29udGVudFRvUGFydHMobWVzc2FnZS5jb250ZW50LCBpc011bHRpbW9kYWxNb2RlbCk7XG4gICAgICAgIGlmIChhY2MubWVyZ2VXaXRoUHJldmlvdXNDb250ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2Q29udGVudCA9IGFjYy5jb250ZW50W2FjYy5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgaWYgKCFwcmV2Q29udGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIHdhcyBhIHByb2JsZW0gcGFyc2luZyB5b3VyIHN5c3RlbSBtZXNzYWdlLiBQbGVhc2UgdHJ5IGEgcHJvbXB0IHdpdGhvdXQgb25lLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZDb250ZW50LnBhcnRzLnB1c2goLi4ucGFydHMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGFjYy5jb250ZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250ZW50ID0ge1xuICAgICAgICAgICAgcm9sZSxcbiAgICAgICAgICAgIHBhcnRzLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVyZ2VXaXRoUHJldmlvdXNDb250ZW50OiBhdXRob3IgPT09IFwic3lzdGVtXCIsXG4gICAgICAgICAgICBjb250ZW50OiBbLi4uYWNjLmNvbnRlbnQsIGNvbnRlbnRdLFxuICAgICAgICB9O1xuICAgIH0sIHsgY29udGVudDogW10sIG1lcmdlV2l0aFByZXZpb3VzQ29udGVudDogZmFsc2UgfSkuY29udGVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQocmVzcG9uc2UpIHtcbiAgICAvLyBpZiByZWplY3RlZCBvciBlcnJvciwgcmV0dXJuIGVtcHR5IGdlbmVyYXRpb25zIHdpdGggcmVhc29uIGluIGZpbHRlcnNcbiAgICBpZiAoIXJlc3BvbnNlLmNhbmRpZGF0ZXMgfHxcbiAgICAgICAgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgIXJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbXSxcbiAgICAgICAgICAgIGxsbU91dHB1dDoge1xuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHJlc3BvbnNlLnByb21wdEZlZWRiYWNrLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgW2NhbmRpZGF0ZV0gPSByZXNwb25zZS5jYW5kaWRhdGVzO1xuICAgIGNvbnN0IHsgY29udGVudCwgLi4uZ2VuZXJhdGlvbkluZm8gfSA9IGNhbmRpZGF0ZTtcbiAgICBjb25zdCB0ZXh0ID0gY29udGVudD8ucGFydHNbMF0/LnRleHQgPz8gXCJcIjtcbiAgICBjb25zdCBnZW5lcmF0aW9uID0ge1xuICAgICAgICB0ZXh0LFxuICAgICAgICBtZXNzYWdlOiBuZXcgQUlNZXNzYWdlKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQsXG4gICAgICAgICAgICBuYW1lOiAhY29udGVudCA/IHVuZGVmaW5lZCA6IGNvbnRlbnQucm9sZSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBnZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgfSksXG4gICAgICAgIGdlbmVyYXRpb25JbmZvLFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2VuZXJhdGlvbnM6IFtnZW5lcmF0aW9uXSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRSZXNwb25zZUNvbnRlbnRUb0NoYXRHZW5lcmF0aW9uQ2h1bmsocmVzcG9uc2UpIHtcbiAgICBpZiAoIXJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IFtjYW5kaWRhdGVdID0gcmVzcG9uc2UuY2FuZGlkYXRlcztcbiAgICBjb25zdCB7IGNvbnRlbnQsIC4uLmdlbmVyYXRpb25JbmZvIH0gPSBjYW5kaWRhdGU7XG4gICAgY29uc3QgdGV4dCA9IGNvbnRlbnQ/LnBhcnRzWzBdPy50ZXh0ID8/IFwiXCI7XG4gICAgcmV0dXJuIG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgdGV4dCxcbiAgICAgICAgbWVzc2FnZTogbmV3IEFJTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHRleHQsXG4gICAgICAgICAgICBuYW1lOiAhY29udGVudCA/IHVuZGVmaW5lZCA6IGNvbnRlbnQucm9sZSxcbiAgICAgICAgICAgIC8vIEVhY2ggY2h1bmsgY2FuIGhhdmUgdW5pcXVlIFwiZ2VuZXJhdGlvbkluZm9cIiwgYW5kIG1lcmdpbmcgc3RyYXRlZ3kgaXMgdW5jbGVhcixcbiAgICAgICAgICAgIC8vIHNvIGxlYXZlIGJsYW5rIGZvciBub3cuXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoge30sXG4gICAgICAgIH0pLFxuICAgICAgICBnZW5lcmF0aW9uSW5mbyxcbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJBSU1lc3NhZ2UiLCJBSU1lc3NhZ2VDaHVuayIsIkNoYXRNZXNzYWdlIiwiaXNCYXNlTWVzc2FnZSIsIkNoYXRHZW5lcmF0aW9uQ2h1bmsiLCJnZXRNZXNzYWdlQXV0aG9yIiwibWVzc2FnZSIsInR5cGUiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJyb2xlIiwibmFtZSIsImNvbnZlcnRBdXRob3JUb1JvbGUiLCJhdXRob3IiLCJFcnJvciIsImNvbnZlcnRNZXNzYWdlQ29udGVudFRvUGFydHMiLCJjb250ZW50IiwiaXNNdWx0aW1vZGFsTW9kZWwiLCJ0ZXh0IiwibWFwIiwiYyIsInNvdXJjZSIsImltYWdlX3VybCIsInVybCIsImRtIiwiZGF0YSIsInNwbGl0Iiwic3RhcnRzV2l0aCIsIm1pbWVUeXBlIiwiZW5jb2RpbmciLCJyZXBsYWNlIiwiaW5saW5lRGF0YSIsImNvbnZlcnRCYXNlTWVzc2FnZXNUb0NvbnRlbnQiLCJtZXNzYWdlcyIsInJlZHVjZSIsImFjYyIsImluZGV4IiwicHJldkNvbnRlbnQiLCJsZW5ndGgiLCJtZXJnZVdpdGhQcmV2aW91c0NvbnRlbnQiLCJwYXJ0cyIsInB1c2giLCJtYXBHZW5lcmF0ZUNvbnRlbnRSZXN1bHRUb0NoYXRSZXN1bHQiLCJyZXNwb25zZSIsImNhbmRpZGF0ZXMiLCJnZW5lcmF0aW9ucyIsImxsbU91dHB1dCIsImZpbHRlcnMiLCJwcm9tcHRGZWVkYmFjayIsImNhbmRpZGF0ZSIsImdlbmVyYXRpb25JbmZvIiwiZ2VuZXJhdGlvbiIsInVuZGVmaW5lZCIsImFkZGl0aW9uYWxfa3dhcmdzIiwiY29udmVydFJlc3BvbnNlQ29udGVudFRvQ2hhdEdlbmVyYXRpb25DaHVuayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/dist/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@langchain/google-genai/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGoogleGenerativeAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatGoogleGenerativeAI),\n/* harmony export */   GoogleGenerativeAIEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvaW5kZXguanM/Yzk1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/caches.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/caches.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/hash.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * This cache key should be consistent across all versions of langchain.\n * It is currently NOT consistent across versions of langchain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * seperate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of langchain.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(getCacheKey(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(getCacheKey(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhY2hlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQStDO0FBQ3NCO0FBQ3JFOzs7Ozs7Ozs7Q0FTQyxHQUNNLE1BQU1FLGNBQWMsQ0FBQyxHQUFHQyxVQUFZSCw0REFBWUEsQ0FBQ0csUUFBUUMsSUFBSSxDQUFDLE1BQU07QUFDcEUsU0FBU0MsNEJBQTRCQyxnQkFBZ0I7SUFDeEQsSUFBSUEsaUJBQWlCQyxPQUFPLEtBQUtDLFdBQVc7UUFDeEMsT0FBTztZQUNIQyxNQUFNSCxpQkFBaUJHLElBQUk7WUFDM0JGLFNBQVNOLGlGQUE2QkEsQ0FBQ0ssaUJBQWlCQyxPQUFPO1FBQ25FO0lBQ0osT0FDSztRQUNELE9BQU87WUFBRUUsTUFBTUgsaUJBQWlCRyxJQUFJO1FBQUM7SUFDekM7QUFDSjtBQUNPLFNBQVNDLG9CQUFvQkMsVUFBVTtJQUMxQyxNQUFNQyxrQkFBa0I7UUFDcEJILE1BQU1FLFdBQVdGLElBQUk7SUFDekI7SUFDQSxJQUFJRSxXQUFXSixPQUFPLEtBQUtDLFdBQVc7UUFDbENJLGdCQUFnQkwsT0FBTyxHQUFHSSxXQUFXSixPQUFPLENBQUNNLE1BQU07SUFDdkQ7SUFDQSxPQUFPRDtBQUNYO0FBQ0E7O0NBRUMsR0FDTSxNQUFNRTtBQUNiO0FBQ0EsTUFBTUMsYUFBYSxJQUFJQztBQUN2Qjs7Q0FFQyxHQUNNLE1BQU1DLHNCQUFzQkg7SUFDL0JJLFlBQVlDLEdBQUcsQ0FBRTtRQUNiLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLEtBQUssR0FBR1AsT0FBTyxJQUFJSDtJQUM1QjtJQUNBOzs7Ozs7S0FNQyxHQUNEVyxPQUFPQyxNQUFNLEVBQUVDLE1BQU0sRUFBRTtRQUNuQixPQUFPQyxRQUFRQyxPQUFPLENBQUMsSUFBSSxDQUFDTCxLQUFLLENBQUNNLEdBQUcsQ0FBQzlCLFlBQVkwQixRQUFRQyxZQUFZO0lBQzFFO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNSSxPQUFPTCxNQUFNLEVBQUVDLE1BQU0sRUFBRUosS0FBSyxFQUFFO1FBQ2hDLElBQUksQ0FBQ0MsS0FBSyxDQUFDUSxHQUFHLENBQUNoQyxZQUFZMEIsUUFBUUMsU0FBU0o7SUFDaEQ7SUFDQTs7OztLQUlDLEdBQ0QsT0FBT1UsU0FBUztRQUNaLE9BQU8sSUFBSWxCLGNBQWNGO0lBQzdCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzLmpzPzg3YzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5zZWN1cmVIYXNoIH0gZnJvbSBcIi4vdXRpbHMvaGFzaC5qc1wiO1xuaW1wb3J0IHsgbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UsIH0gZnJvbSBcIi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbi8qKlxuICogVGhpcyBjYWNoZSBrZXkgc2hvdWxkIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCB2ZXJzaW9ucyBvZiBsYW5nY2hhaW4uXG4gKiBJdCBpcyBjdXJyZW50bHkgTk9UIGNvbnNpc3RlbnQgYWNyb3NzIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqXG4gKiBBIGh1Z2UgYmVuZWZpdCBvZiBoYXZpbmcgYSByZW1vdGUgY2FjaGUgKGxpa2UgcmVkaXMpIGlzIHRoYXQgeW91IGNhblxuICogYWNjZXNzIHRoZSBjYWNoZSBmcm9tIGRpZmZlcmVudCBwcm9jZXNzZXMvbWFjaGluZXMuIFRoZSBhbGxvd3MgeW91IHRvXG4gKiBzZXBlcmF0ZSBjb25jZXJucyBhbmQgc2NhbGUgaG9yaXpvbnRhbGx5LlxuICpcbiAqIFRPRE86IE1ha2UgY2FjaGUga2V5IGNvbnNpc3RlbnQgYWNyb3NzIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldENhY2hlS2V5ID0gKC4uLnN0cmluZ3MpID0+IGluc2VjdXJlSGFzaChzdHJpbmdzLmpvaW4oXCJfXCIpKTtcbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVN0b3JlZEdlbmVyYXRpb24oc3RvcmVkR2VuZXJhdGlvbikge1xuICAgIGlmIChzdG9yZWRHZW5lcmF0aW9uLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGV4dDogc3RvcmVkR2VuZXJhdGlvbi50ZXh0LFxuICAgICAgICAgICAgbWVzc2FnZTogbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2Uoc3RvcmVkR2VuZXJhdGlvbi5tZXNzYWdlKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHRleHQ6IHN0b3JlZEdlbmVyYXRpb24udGV4dCB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVHZW5lcmF0aW9uKGdlbmVyYXRpb24pIHtcbiAgICBjb25zdCBzZXJpYWxpemVkVmFsdWUgPSB7XG4gICAgICAgIHRleHQ6IGdlbmVyYXRpb24udGV4dCxcbiAgICB9O1xuICAgIGlmIChnZW5lcmF0aW9uLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXJpYWxpemVkVmFsdWUubWVzc2FnZSA9IGdlbmVyYXRpb24ubWVzc2FnZS50b0RpY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlcmlhbGl6ZWRWYWx1ZTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGNhY2hlcy4gQWxsIGNhY2hlcyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FjaGUge1xufVxuY29uc3QgR0xPQkFMX01BUCA9IG5ldyBNYXAoKTtcbi8qKlxuICogQSBjYWNoZSBmb3Igc3RvcmluZyBMTE0gZ2VuZXJhdGlvbnMgdGhhdCBzdG9yZXMgZGF0YSBpbiBtZW1vcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbk1lbW9yeUNhY2hlIGV4dGVuZHMgQmFzZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihtYXApIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FjaGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWNoZSA9IG1hcCA/PyBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBkYXRhIGZyb20gdGhlIGNhY2hlIHVzaW5nIGEgcHJvbXB0IGFuZCBhbiBMTE0ga2V5LiBJZiB0aGVcbiAgICAgKiBkYXRhIGlzIG5vdCBmb3VuZCwgaXQgcmV0dXJucyBudWxsLlxuICAgICAqIEBwYXJhbSBwcm9tcHQgVGhlIHByb21wdCB1c2VkIHRvIGZpbmQgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGxsbUtleSBUaGUgTExNIGtleSB1c2VkIHRvIGZpbmQgdGhlIGRhdGEuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvbXB0IGFuZCBMTE0ga2V5LCBvciBudWxsIGlmIG5vdCBmb3VuZC5cbiAgICAgKi9cbiAgICBsb29rdXAocHJvbXB0LCBsbG1LZXkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNhY2hlLmdldChnZXRDYWNoZUtleShwcm9tcHQsIGxsbUtleSkpID8/IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjYWNoZSB3aXRoIG5ldyBkYXRhIHVzaW5nIGEgcHJvbXB0IGFuZCBhbiBMTE0ga2V5LlxuICAgICAqIEBwYXJhbSBwcm9tcHQgVGhlIHByb21wdCB1c2VkIHRvIHN0b3JlIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBsbG1LZXkgVGhlIExMTSBrZXkgdXNlZCB0byBzdG9yZSB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIGRhdGEgdG8gYmUgc3RvcmVkLlxuICAgICAqL1xuICAgIGFzeW5jIHVwZGF0ZShwcm9tcHQsIGxsbUtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5zZXQoZ2V0Q2FjaGVLZXkocHJvbXB0LCBsbG1LZXkpLCB2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBnbG9iYWwgaW5zdGFuY2Ugb2YgSW5NZW1vcnlDYWNoZSB1c2luZyBhIHByZWRlZmluZWQgZ2xvYmFsXG4gICAgICogbWFwIGFzIHRoZSBpbml0aWFsIGNhY2hlLlxuICAgICAqIEByZXR1cm5zIEEgZ2xvYmFsIGluc3RhbmNlIG9mIEluTWVtb3J5Q2FjaGUuXG4gICAgICovXG4gICAgc3RhdGljIGdsb2JhbCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbk1lbW9yeUNhY2hlKEdMT0JBTF9NQVApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJpbnNlY3VyZUhhc2giLCJtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSIsImdldENhY2hlS2V5Iiwic3RyaW5ncyIsImpvaW4iLCJkZXNlcmlhbGl6ZVN0b3JlZEdlbmVyYXRpb24iLCJzdG9yZWRHZW5lcmF0aW9uIiwibWVzc2FnZSIsInVuZGVmaW5lZCIsInRleHQiLCJzZXJpYWxpemVHZW5lcmF0aW9uIiwiZ2VuZXJhdGlvbiIsInNlcmlhbGl6ZWRWYWx1ZSIsInRvRGljdCIsIkJhc2VDYWNoZSIsIkdMT0JBTF9NQVAiLCJNYXAiLCJJbk1lbW9yeUNhY2hlIiwiY29uc3RydWN0b3IiLCJtYXAiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiY2FjaGUiLCJsb29rdXAiLCJwcm9tcHQiLCJsbG1LZXkiLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldCIsInVwZGF0ZSIsInNldCIsImdsb2JhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/caches.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/base.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/base.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.awaitHandlers = input._awaitHandler ?? this.awaitHandlers;\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkI7QUFDK0M7QUFDbkI7QUFDekQ7Ozs7Q0FJQyxHQUNELE1BQU1JO0FBQ047QUFDQTs7Ozs7Q0FLQyxHQUNNLE1BQU1DLDRCQUE0QkQ7SUFDckMsSUFBSUUsZUFBZTtRQUNmLE9BQU87WUFBQztZQUFrQjtZQUFhLElBQUksQ0FBQ0MsSUFBSTtTQUFDO0lBQ3JEO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU9DO0lBQ1g7SUFDQSxJQUFJQyxnQkFBZ0I7UUFDaEIsT0FBT0Q7SUFDWDtJQUNBLElBQUlFLGFBQWE7UUFDYixPQUFPRjtJQUNYO0lBQ0E7Ozs7O0tBS0MsR0FDRCxPQUFPRyxVQUFVO1FBQ2IsT0FBTyxJQUFJLENBQUNMLElBQUk7SUFDcEI7SUFDQTs7S0FFQyxHQUNELElBQUlNLFFBQVE7UUFDUixPQUFPO2VBQ0EsSUFBSSxDQUFDUCxZQUFZO1lBQ3BCSix5RUFBa0JBLENBQUMsSUFBSSxDQUFDWSxXQUFXO1NBQ3RDO0lBQ0w7SUFDQUEsWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9sQixxRUFBc0JBLENBQUMsc0NBQXNDO1FBQ3hFO1FBQ0EsSUFBSSxDQUFDbUIsU0FBUyxHQUFHUCxTQUFTLENBQUM7UUFDM0IsSUFBSUEsT0FBTztZQUNQLElBQUksQ0FBQ1EsU0FBUyxHQUFHUixNQUFNUSxTQUFTLElBQUksSUFBSSxDQUFDQSxTQUFTO1lBQ2xELElBQUksQ0FBQ0MsV0FBVyxHQUFHVCxNQUFNUyxXQUFXLElBQUksSUFBSSxDQUFDQSxXQUFXO1lBQ3hELElBQUksQ0FBQ0MsV0FBVyxHQUFHVixNQUFNVSxXQUFXLElBQUksSUFBSSxDQUFDQSxXQUFXO1lBQ3hELElBQUksQ0FBQ0MsZUFBZSxHQUFHWCxNQUFNVyxlQUFlLElBQUksSUFBSSxDQUFDQSxlQUFlO1lBQ3BFLElBQUksQ0FBQ0MsYUFBYSxHQUFHWixNQUFNYSxhQUFhLElBQUksSUFBSSxDQUFDRCxhQUFhO1FBQ2xFO0lBQ0o7SUFDQUUsT0FBTztRQUNILE9BQU8sSUFBSSxJQUFJLENBQUNmLFdBQVcsQ0FBQyxJQUFJO0lBQ3BDO0lBQ0FnQixTQUFTO1FBQ0wsT0FBTzdCLCtEQUFZQSxDQUFDOEIsU0FBUyxDQUFDRCxNQUFNLENBQUNFLElBQUksQ0FBQyxJQUFJO0lBQ2xEO0lBQ0FDLHVCQUF1QjtRQUNuQixPQUFPaEMsK0RBQVlBLENBQUM4QixTQUFTLENBQUNFLG9CQUFvQixDQUFDRCxJQUFJLENBQUMsSUFBSTtJQUNoRTtJQUNBLE9BQU9FLFlBQVlDLE9BQU8sRUFBRTtRQUN4QixNQUFNQyxnQkFBZ0IvQjtZQUNsQlMsYUFBYztnQkFDVixLQUFLO2dCQUNMRSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7b0JBQ2hDQyxZQUFZO29CQUNaQyxjQUFjO29CQUNkQyxVQUFVO29CQUNWQyxPQUFPckIsNENBQU87Z0JBQ2xCO2dCQUNBZ0IsT0FBT3NCLE1BQU0sQ0FBQyxJQUFJLEVBQUVIO1lBQ3hCO1FBQ0o7UUFDQSxPQUFPLElBQUlDO0lBQ2Y7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcz85YjA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgZ2V0X2xjX3VuaXF1ZV9uYW1lLCB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlXG4gKiBvdmVycmlkZGVuIGluIGRlcml2ZWQgY2xhc3NlcyB0byBoYW5kbGUgdmFyaW91cyBldmVudHMgZHVyaW5nIHRoZVxuICogZXhlY3V0aW9uIG9mIGEgTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuICovXG5jbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyTWV0aG9kc0NsYXNzIHtcbn1cbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgY3JlYXRpbmcgY2FsbGJhY2sgaGFuZGxlcnMgaW4gdGhlIExhbmdDaGFpblxuICogZnJhbWV3b3JrLiBJdCBwcm92aWRlcyBhIHNldCBvZiBvcHRpb25hbCBtZXRob2RzIHRoYXQgY2FuIGJlIG92ZXJyaWRkZW5cbiAqIGluIGRlcml2ZWQgY2xhc3NlcyB0byBoYW5kbGUgdmFyaW91cyBldmVudHMgZHVyaW5nIHRoZSBleGVjdXRpb24gb2YgYVxuICogTGFuZ0NoYWluIGFwcGxpY2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xuICAgIGdldCBsY19uYW1lc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcImNhbGxiYWNrc1wiLCB0aGlzLm5hbWVdO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2VyaWFsaXphYmxlLiBPdmVycmlkZSB0byBwcm92aWRlIGFuIGFsaWFzIG9yXG4gICAgICogdG8gcHJlc2VydmUgdGhlIHNlcmlhbGl6ZWQgbW9kdWxlIG5hbWUgaW4gbWluaWZpZWQgZW52aXJvbm1lbnRzLlxuICAgICAqXG4gICAgICogSW1wbGVtZW50ZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIHN1cHBvcnQgbG9hZGluZyBsb2dpYy5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIHNlcmlhbGl6ZWQgaWRlbnRpZmllciBmb3IgdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICBnZXQgbGNfaWQoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi50aGlzLmxjX25hbWVzcGFjZSxcbiAgICAgICAgICAgIGdldF9sY191bmlxdWVfbmFtZSh0aGlzLmNvbnN0cnVjdG9yKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUxMTVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZUNoYWluXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQWdlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVSZXRyaWV2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhd2FpdEhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpICE9PSBcInRydWVcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MgPSBpbnB1dCB8fCB7fTtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUxMTSA9IGlucHV0Lmlnbm9yZUxMTSA/PyB0aGlzLmlnbm9yZUxMTTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlQ2hhaW4gPSBpbnB1dC5pZ25vcmVDaGFpbiA/PyB0aGlzLmlnbm9yZUNoYWluO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVBZ2VudCA9IGlucHV0Lmlnbm9yZUFnZW50ID8/IHRoaXMuaWdub3JlQWdlbnQ7XG4gICAgICAgICAgICB0aGlzLmlnbm9yZVJldHJpZXZlciA9IGlucHV0Lmlnbm9yZVJldHJpZXZlciA/PyB0aGlzLmlnbm9yZVJldHJpZXZlcjtcbiAgICAgICAgICAgIHRoaXMuYXdhaXRIYW5kbGVycyA9IGlucHV0Ll9hd2FpdEhhbmRsZXIgPz8gdGhpcy5hd2FpdEhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gU2VyaWFsaXphYmxlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgdG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTk5vdEltcGxlbWVudGVkLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTWV0aG9kcyhtZXRob2RzKSB7XG4gICAgICAgIGNsYXNzIEhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1dWlkLnY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIG1ldGhvZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSGFuZGxlcigpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ1dWlkIiwiU2VyaWFsaXphYmxlIiwiZ2V0X2xjX3VuaXF1ZV9uYW1lIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3MiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwibGNfbmFtZXNwYWNlIiwibmFtZSIsImxjX3NlY3JldHMiLCJ1bmRlZmluZWQiLCJsY19hdHRyaWJ1dGVzIiwibGNfYWxpYXNlcyIsImxjX25hbWUiLCJsY19pZCIsImNvbnN0cnVjdG9yIiwiaW5wdXQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibGNfa3dhcmdzIiwiaWdub3JlTExNIiwiaWdub3JlQ2hhaW4iLCJpZ25vcmVBZ2VudCIsImlnbm9yZVJldHJpZXZlciIsImF3YWl0SGFuZGxlcnMiLCJfYXdhaXRIYW5kbGVyIiwiY29weSIsInRvSlNPTiIsInByb3RvdHlwZSIsImNhbGwiLCJ0b0pTT05Ob3RJbXBsZW1lbnRlZCIsImZyb21NZXRob2RzIiwibWV0aG9kcyIsIkhhbmRsZXIiLCJ2NCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/initialize.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/initialize.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/promises.js\");\n\n\n\n\n\n\n\n\nif (/* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\" && /* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\") {\n    /* #__PURE__ */ console.warn([\n        \"[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.\",\n        \"[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,\",\n        `[WARN]: we suggest setting \"process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true\" to avoid additional latency.`\n    ].join(\"\\n\"));\n}\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            await handler.handleLLMStart?.(llm, [\n                                prompt\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            if (handler.handleChatModelStart) {\n                                await handler.handleChatModelStart?.(llm, [\n                                    messageGroup\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            } else if (handler.handleLLMStart) {\n                                const messageString = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(messageGroup);\n                                await handler.handleLLMStart?.(llm, [\n                                    messageString\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            }\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\";\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    callbackManager.addHandler(await (0,_tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__.getTracingV2CallbackHandler)(), true);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\n * processQuestions(questions).catch(console.error);\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvQztBQUNhO0FBQ2M7QUFDUTtBQUNoQjtBQUNFO0FBQ1M7QUFDbEI7QUFDaEQsSUFDQSxhQUFhLEdBQUdNLHFFQUFzQkEsQ0FBQyw0QkFBNEIsVUFDL0QsYUFBYSxHQUFHQSxxRUFBc0JBLENBQUMsc0NBQ25DLFFBQVE7SUFDWixhQUFhLEdBQUdHLFFBQVFDLElBQUksQ0FBQztRQUN6QjtRQUNBO1FBQ0EsQ0FBQyx5R0FBeUcsQ0FBQztLQUM5RyxDQUFDQyxJQUFJLENBQUM7QUFDWDtBQUNPLFNBQVNDLHVCQUF1QkMsR0FBRztJQUN0QyxJQUFJLENBQUNBLEtBQUs7UUFDTixPQUFPLENBQUM7SUFDWixPQUNLLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsUUFBUSxVQUFVQSxLQUFLO1FBQzFDLE9BQU87WUFBRUcsV0FBV0g7UUFBSTtJQUM1QixPQUNLO1FBQ0QsT0FBT0E7SUFDWDtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNSTtJQUNUQyxXQUFXQyxPQUFPLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUNDLFdBQVcsQ0FBQztZQUFDRDtTQUFRO0lBQ3JDO0FBQ0o7QUFDQTs7Q0FFQyxHQUNELE1BQU1FO0lBQ0ZDLFlBQVlDLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUMsSUFBSSxFQUFFQyxlQUFlLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLFlBQVksQ0FBRTtRQUNsSEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPYjtRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0Ms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YnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanM/Mzc1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgQmFzZUNhbGxiYWNrSGFuZGxlciwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIH0gZnJvbSBcIi4uL3RyYWNlcnMvY29uc29sZS5qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyIH0gZnJvbSBcIi4uL3RyYWNlcnMvaW5pdGlhbGl6ZS5qc1wiO1xuaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyLCB9IGZyb20gXCIuLi90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW4uanNcIjtcbmltcG9ydCB7IGNvbnN1bWVDYWxsYmFjayB9IGZyb20gXCIuL3Byb21pc2VzLmpzXCI7XG5pZiAoXG4vKiAjX19QVVJFX18gKi8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HX1YyXCIpID09PSBcInRydWVcIiAmJlxuICAgIC8qICNfX1BVUkVfXyAqLyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EXCIpICE9PVxuICAgICAgICBcInRydWVcIikge1xuICAgIC8qICNfX1BVUkVfXyAqLyBjb25zb2xlLndhcm4oW1xuICAgICAgICBcIltXQVJOXTogWW91IGhhdmUgZW5hYmxlZCBMYW5nU21pdGggdHJhY2luZyB3aXRob3V0IGJhY2tncm91bmRpbmcgY2FsbGJhY2tzLlwiLFxuICAgICAgICBcIltXQVJOXTogSWYgeW91IGFyZSBub3QgdXNpbmcgYSBzZXJ2ZXJsZXNzIGVudmlyb25tZW50IHdoZXJlIHlvdSBtdXN0IHdhaXQgZm9yIHRyYWNpbmcgY2FsbHMgdG8gZmluaXNoLFwiLFxuICAgICAgICBgW1dBUk5dOiB3ZSBzdWdnZXN0IHNldHRpbmcgXCJwcm9jZXNzLmVudi5MQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkQ9dHJ1ZVwiIHRvIGF2b2lkIGFkZGl0aW9uYWwgbGF0ZW5jeS5gLFxuICAgIF0uam9pbihcIlxcblwiKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDYWxsYmFja0NvbmZpZ0FyZyhhcmcpIHtcbiAgICBpZiAoIWFyZykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSB8fCBcIm5hbWVcIiBpbiBhcmcpIHtcbiAgICAgICAgcmV0dXJuIHsgY2FsbGJhY2tzOiBhcmcgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2UgY2FsbGJhY2tzIGZyb20gZGlmZmVyZW50IGNvbXBvbmVudHMgb2YgTGFuZ0NoYWluLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNhbGxiYWNrTWFuYWdlciB7XG4gICAgc2V0SGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldEhhbmRsZXJzKFtoYW5kbGVyXSk7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBydW4gbWFuYWdlciBpbiBMYW5nQ2hhaW4uXG4gKi9cbmNsYXNzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihydW5JZCwgaGFuZGxlcnMsIGluaGVyaXRhYmxlSGFuZGxlcnMsIHRhZ3MsIGluaGVyaXRhYmxlVGFncywgbWV0YWRhdGEsIGluaGVyaXRhYmxlTWV0YWRhdGEsIF9wYXJlbnRSdW5JZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogcnVuSWRcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBoYW5kbGVyc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5oZXJpdGFibGVIYW5kbGVyc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZVRhZ3NcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBtZXRhZGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5oZXJpdGFibGVNZXRhZGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBfcGFyZW50UnVuSWRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRleHQodGV4dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUZXh0Py4odGV4dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRleHQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBNYW5hZ2VzIGNhbGxiYWNrcyBmb3IgcmV0cmlldmVyIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVuZD8uKGRvY3VtZW50cywgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlcmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckxMTVJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGZpZWxkcykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTU5ld1Rva2VuPy4odG9rZW4sIGlkeCA/PyB7IHByb21wdDogMCwgY29tcGxldGlvbjogMCB9LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBmaWVsZHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1OZXdUb2tlbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnIsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0LCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGt3YXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRBY3Rpb24oYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVBZ2VudEFjdGlvbj8uKGFjdGlvbiwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUFnZW50QWN0aW9uOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQWdlbnRFbmQoYWN0aW9uKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVBZ2VudEVuZD8uKGFjdGlvbiwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUFnZW50RW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbEVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdCA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcIldoYXQgaXMgdGhlIGFuc3dlciB0byB7cXVlc3Rpb259P1wiKTtcbiAqXG4gKiAvLyBFeGFtcGxlIG9mIHVzaW5nIExMTUNoYWluIHdpdGggT3BlbkFJIGFuZCBhIHNpbXBsZSBwcm9tcHRcbiAqIGNvbnN0IGNoYWluID0gbmV3IExMTUNoYWluKHtcbiAqICAgbGxtOiBuZXcgQ2hhdE9wZW5BSSh7IHRlbXBlcmF0dXJlOiAwLjkgfSksXG4gKiAgIHByb21wdCxcbiAqIH0pO1xuICpcbiAqIC8vIFJ1bm5pbmcgdGhlIGNoYWluIHdpdGggYSBzaW5nbGUgcXVlc3Rpb25cbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYWluLmNhbGwoe1xuICogICBxdWVzdGlvbjogXCJXaGF0IGlzIHRoZSBhaXJzcGVlZCB2ZWxvY2l0eSBvZiBhbiB1bmxhZGVuIHN3YWxsb3c/XCIsXG4gKiB9KTtcbiAqIGNvbnNvbGUubG9nKFwiVGhlIGFuc3dlciBpczpcIiwgcmVzdWx0KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyIGV4dGVuZHMgQmFzZUNhbGxiYWNrTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocGFyZW50UnVuSWQsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiY2FsbGJhY2tfbWFuYWdlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG9wdGlvbnM/LmhhbmRsZXJzID8/IHRoaXMuaGFuZGxlcnM7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZUhhbmRsZXJzID8/IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycztcbiAgICAgICAgdGhpcy50YWdzID0gb3B0aW9ucz8udGFncyA/PyB0aGlzLnRhZ3M7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzID0gb3B0aW9ucz8uaW5oZXJpdGFibGVUYWdzID8/IHRoaXMuaW5oZXJpdGFibGVUYWdzO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gb3B0aW9ucz8ubWV0YWRhdGEgPz8gdGhpcy5tZXRhZGF0YTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhID1cbiAgICAgICAgICAgIG9wdGlvbnM/LmluaGVyaXRhYmxlTWV0YWRhdGEgPz8gdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhO1xuICAgICAgICB0aGlzLl9wYXJlbnRSdW5JZCA9IHBhcmVudFJ1bklkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBwYXJlbnQgcnVuIElELCBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyZW50IHJ1biBJRC5cbiAgICAgKi9cbiAgICBnZXRQYXJlbnRSdW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudFJ1bklkO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1TdGFydChsbG0sIHByb21wdHMsIHJ1bklkID0gdW5kZWZpbmVkLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9tcHRzLm1hcChhc3luYyAocHJvbXB0LCBpZHgpID0+IHtcbiAgICAgICAgICAgIC8vIENhbid0IGhhdmUgZHVwbGljYXRlIHJ1bnMgd2l0aCB0aGUgc2FtZSBydW4gSUQgKGlmIHByb3ZpZGVkKVxuICAgICAgICAgICAgY29uc3QgcnVuSWRfID0gaWR4ID09PSAwICYmIHJ1bklkID8gcnVuSWQgOiB1dWlkdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFtwcm9tcHRdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWRfLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkID0gdW5kZWZpbmVkLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChtZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2VHcm91cCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAvLyBDYW4ndCBoYXZlIGR1cGxpY2F0ZSBydW5zIHdpdGggdGhlIHNhbWUgcnVuIElEIChpZiBwcm92aWRlZClcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkXyA9IGlkeCA9PT0gMCAmJiBydW5JZCA/IHJ1bklkIDogdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhdE1vZGVsU3RhcnQ/LihsbG0sIFttZXNzYWdlR3JvdXBdLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRsZXIuaGFuZGxlTExNU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlU3RyaW5nID0gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgW21lc3NhZ2VTdHJpbmddLCBydW5JZF8sIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWRfLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQgPSB1dWlkdjQoKSwgcnVuVHlwZSA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5TdGFydD8uKGNoYWluLCBpbnB1dHMsIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5UeXBlLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yQ2hhaW5SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sU3RhcnQ/Lih0b29sLCBpbnB1dCwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlclN0YXJ0KHJldHJpZXZlciwgcXVlcnksIHJ1bklkID0gdXVpZHY0KCksIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgX3RhZ3MgPSB1bmRlZmluZWQsIF9tZXRhZGF0YSA9IHVuZGVmaW5lZCwgcnVuTmFtZSA9IHVuZGVmaW5lZCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlclN0YXJ0Py4ocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuKHJ1bklkLCB0aGlzLmhhbmRsZXJzLCB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMsIHRoaXMudGFncywgdGhpcy5pbmhlcml0YWJsZVRhZ3MsIHRoaXMubWV0YWRhdGEsIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgdGhpcy5fcGFyZW50UnVuSWQpO1xuICAgIH1cbiAgICBhZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gdGhpcy5oYW5kbGVycy5maWx0ZXIoKF9oYW5kbGVyKSA9PiBfaGFuZGxlciAhPT0gaGFuZGxlcik7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5maWx0ZXIoKF9oYW5kbGVyKSA9PiBfaGFuZGxlciAhPT0gaGFuZGxlcik7XG4gICAgfVxuICAgIHNldEhhbmRsZXJzKGhhbmRsZXJzLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUYWdzKHRhZ3MsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlVGFncyh0YWdzKTsgLy8gUmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgdGhpcy50YWdzLnB1c2goLi4udGFncyk7XG4gICAgICAgIGlmIChpbmhlcml0KSB7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncy5wdXNoKC4uLnRhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZVRhZ3ModGFncykge1xuICAgICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IHRoaXMuaW5oZXJpdGFibGVUYWdzLmZpbHRlcigodGFnKSA9PiAhdGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICB9XG4gICAgYWRkTWV0YWRhdGEobWV0YWRhdGEsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSB7IC4uLnRoaXMubWV0YWRhdGEsIC4uLm1ldGFkYXRhIH07XG4gICAgICAgIGlmIChpbmhlcml0KSB7XG4gICAgICAgICAgICB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEgPSB7IC4uLnRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVNZXRhZGF0YShtZXRhZGF0YSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhtZXRhZGF0YSkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1ldGFkYXRhW2tleV07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weShhZGRpdGlvbmFsSGFuZGxlcnMgPSBbXSwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5fcGFyZW50UnVuSWQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5oYW5kbGVycykge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMuaW5jbHVkZXMoaGFuZGxlcik7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRoaXMudGFncykge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSB0aGlzLmluaGVyaXRhYmxlVGFncy5pbmNsdWRlcyh0YWcpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5tZXRhZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaGVyaXRhYmxlID0gT2JqZWN0LmtleXModGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKS5pbmNsdWRlcyhrZXkpO1xuICAgICAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh7IFtrZXldOiB0aGlzLm1ldGFkYXRhW2tleV0gfSwgaW5oZXJpdGFibGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBhZGRpdGlvbmFsSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIFByZXZlbnQgbXVsdGlwbGUgY29waWVzIG9mIGNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclxuICAgICAgICAgICAgbWFuYWdlci5oYW5kbGVyc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGgpID0+IGgubmFtZSA9PT0gXCJjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcIilcbiAgICAgICAgICAgICAgICAuc29tZSgoaCkgPT4gaC5uYW1lID09PSBoYW5kbGVyLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSGFuZGxlcnMoaGFuZGxlcnMpIHtcbiAgICAgICAgY2xhc3MgSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV1aWR2NCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBoYW5kbGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyB0aGlzKCk7XG4gICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihuZXcgSGFuZGxlcigpKTtcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBjb25maWd1cmUoaW5oZXJpdGFibGVIYW5kbGVycywgbG9jYWxIYW5kbGVycywgaW5oZXJpdGFibGVUYWdzLCBsb2NhbFRhZ3MsIGluaGVyaXRhYmxlTWV0YWRhdGEsIGxvY2FsTWV0YWRhdGEsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNhbGxiYWNrTWFuYWdlcjtcbiAgICAgICAgaWYgKGluaGVyaXRhYmxlSGFuZGxlcnMgfHwgbG9jYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5oZXJpdGFibGVIYW5kbGVycykgfHwgIWluaGVyaXRhYmxlSGFuZGxlcnMpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKCk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLnNldEhhbmRsZXJzKGluaGVyaXRhYmxlSGFuZGxlcnM/Lm1hcChlbnN1cmVIYW5kbGVyKSA/PyBbXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBpbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gY2FsbGJhY2tNYW5hZ2VyLmNvcHkoQXJyYXkuaXNBcnJheShsb2NhbEhhbmRsZXJzKVxuICAgICAgICAgICAgICAgID8gbG9jYWxIYW5kbGVycy5tYXAoZW5zdXJlSGFuZGxlcilcbiAgICAgICAgICAgICAgICA6IGxvY2FsSGFuZGxlcnM/LmhhbmRsZXJzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmVyYm9zZUVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1ZFUkJPU0VcIikgPT09IFwidHJ1ZVwiIHx8XG4gICAgICAgICAgICBvcHRpb25zPy52ZXJib3NlO1xuICAgICAgICBjb25zdCB0cmFjaW5nVjJFbmFibGVkID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HX1YyXCIpID09PSBcInRydWVcIjtcbiAgICAgICAgY29uc3QgdHJhY2luZ0VuYWJsZWQgPSB0cmFjaW5nVjJFbmFibGVkIHx8XG4gICAgICAgICAgICAoZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9UUkFDSU5HXCIpID8/IGZhbHNlKTtcbiAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkIHx8IHRyYWNpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAoIWNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2ZXJib3NlRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyLnByb3RvdHlwZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNvbGVIYW5kbGVyID0gbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihjb25zb2xlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJhY2luZ0VuYWJsZWQgJiZcbiAgICAgICAgICAgICAgICAhY2FsbGJhY2tNYW5hZ2VyLmhhbmRsZXJzLnNvbWUoKGhhbmRsZXIpID0+IGhhbmRsZXIubmFtZSA9PT0gXCJsYW5nY2hhaW5fdHJhY2VyXCIpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNpbmdWMkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZEhhbmRsZXIoYXdhaXQgZ2V0VHJhY2luZ1YyQ2FsbGJhY2tIYW5kbGVyKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVUYWdzIHx8IGxvY2FsVGFncykge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRUYWdzKGluaGVyaXRhYmxlVGFncyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MobG9jYWxUYWdzID8/IFtdLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaGVyaXRhYmxlTWV0YWRhdGEgfHwgbG9jYWxNZXRhZGF0YSkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShpbmhlcml0YWJsZU1ldGFkYXRhID8/IHt9KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkTWV0YWRhdGEobG9jYWxNZXRhZGF0YSA/PyB7fSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFja01hbmFnZXI7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUhhbmRsZXIoaGFuZGxlcikge1xuICAgIGlmIChcIm5hbWVcIiBpbiBoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVyO1xuICAgIH1cbiAgICByZXR1cm4gQmFzZUNhbGxiYWNrSGFuZGxlci5mcm9tTWV0aG9kcyhoYW5kbGVyKTtcbn1cbi8qKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdCA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShgV2hhdCBpcyB0aGUgYW5zd2VyIHRvIHtxdWVzdGlvbn0/YCk7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB0byBwcm9jZXNzIGEgc2VyaWVzIG9mIHF1ZXN0aW9uc1xuICogY29uc3QgY2hhaW4gPSBuZXcgTExNQ2hhaW4oe1xuICogICBsbG06IG5ldyBDaGF0T3BlbkFJKHsgdGVtcGVyYXR1cmU6IDAuOSB9KSxcbiAqICAgcHJvbXB0LFxuICogfSk7XG4gKlxuICogLy8gUHJvY2VzcyBxdWVzdGlvbnMgdXNpbmcgdGhlIGNoYWluXG4gKiBjb25zdCBwcm9jZXNzUXVlc3Rpb25zID0gYXN5bmMgKHF1ZXN0aW9ucykgPT4ge1xuICogICBmb3IgKGNvbnN0IHF1ZXN0aW9uIG9mIHF1ZXN0aW9ucykge1xuICogICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoYWluLmNhbGwoeyBxdWVzdGlvbiB9KTtcbiAqICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICogICB9XG4gKiB9O1xuICpcbiAqIC8vIEV4YW1wbGUgcXVlc3Rpb25zXG4gKiBjb25zdCBxdWVzdGlvbnMgPSBbXG4gKiAgIFwiV2hhdCBpcyB5b3VyIG5hbWU/XCIsXG4gKiAgIFwiV2hhdCBpcyB5b3VyIHF1ZXN0P1wiLFxuICogICBcIldoYXQgaXMgeW91ciBmYXZvcml0ZSBjb2xvcj9cIixcbiAqIF07XG4gKlxuICogLy8gUnVuIHRoZSBleGFtcGxlXG4gKiBwcm9jZXNzUXVlc3Rpb25zKHF1ZXN0aW9ucykuY2F0Y2goY29uc29sZS5lcnJvcik7XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFjZUdyb3VwIHtcbiAgICBjb25zdHJ1Y3Rvcihncm91cE5hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ3JvdXBOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBncm91cE5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hbmFnZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlcihncm91cF9uYW1lLCBpbnB1dHMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2IgPSBuZXcgTGFuZ0NoYWluVHJhY2VyKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjbSA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoW2NiXSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjbT8uaGFuZGxlQ2hhaW5TdGFydCh7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG4gICAgICAgICAgICBpZDogW1wibGFuZ2NoYWluXCIsIFwiY2FsbGJhY2tzXCIsIFwiZ3JvdXBzXCIsIGdyb3VwX25hbWVdLFxuICAgICAgICB9LCBpbnB1dHMgPz8ge30pO1xuICAgICAgICBpZiAoIXJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgcnVuIGdyb3VwIGNhbGxiYWNrIG1hbmFnZXIuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5NYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBzdGFydChpbnB1dHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlcih0aGlzLmdyb3VwTmFtZSwgaW5wdXRzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bk1hbmFnZXIuZ2V0Q2hpbGQoKTtcbiAgICB9XG4gICAgYXN5bmMgZXJyb3IoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLnJ1bk1hbmFnZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZW5kKG91dHB1dCkge1xuICAgICAgICBpZiAodGhpcy5ydW5NYW5hZ2VyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1bk1hbmFnZXIuaGFuZGxlQ2hhaW5FbmQob3V0cHV0ID8/IHt9KTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5mdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFjZUFzR3JvdXAoZ3JvdXBPcHRpb25zLCBlbmNsb3NlZENvZGUsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCB0cmFjZUdyb3VwID0gbmV3IFRyYWNlR3JvdXAoZ3JvdXBPcHRpb25zLm5hbWUsIGdyb3VwT3B0aW9ucyk7XG4gICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyID0gYXdhaXQgdHJhY2VHcm91cC5zdGFydCh7IC4uLmFyZ3MgfSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW5jbG9zZWRDb2RlKGNhbGxiYWNrTWFuYWdlciwgLi4uYXJncyk7XG4gICAgICAgIGF3YWl0IHRyYWNlR3JvdXAuZW5kKF9jb2VyY2VUb0RpY3QocmVzdWx0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lcnJvcihlcnIpO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInY0IiwidXVpZHY0IiwiQmFzZUNhbGxiYWNrSGFuZGxlciIsIkNvbnNvbGVDYWxsYmFja0hhbmRsZXIiLCJnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIiLCJnZXRCdWZmZXJTdHJpbmciLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiTGFuZ0NoYWluVHJhY2VyIiwiY29uc3VtZUNhbGxiYWNrIiwiY29uc29sZSIsIndhcm4iLCJqb2luIiwicGFyc2VDYWxsYmFja0NvbmZpZ0FyZyIsImFyZyIsIkFycmF5IiwiaXNBcnJheSIsImNhbGxiYWNrcyIsIkJhc2VDYWxsYmFja01hbmFnZXIiLCJzZXRIYW5kbGVyIiwiaGFuZGxlciIsInNldEhhbmRsZXJzIiwiQmFzZVJ1bk1hbmFnZXIiLCJjb25zdHJ1Y3RvciIsInJ1bklkIiwiaGFuZGxlcnMiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwidGFncyIsImluaGVyaXRhYmxlVGFncyIsIm1ldGFkYXRhIiwiaW5oZXJpdGFibGVNZXRhZGF0YSIsIl9wYXJlbnRSdW5JZCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJoYW5kbGVUZXh0IiwidGV4dCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJlcnIiLCJlcnJvciIsIm5hbWUiLCJhd2FpdEhhbmRsZXJzIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuIiwiZ2V0Q2hpbGQiLCJ0YWciLCJtYW5hZ2VyIiwiQ2FsbGJhY2tNYW5hZ2VyIiwiYWRkVGFncyIsImFkZE1ldGFkYXRhIiwiaGFuZGxlUmV0cmlldmVyRW5kIiwiZG9jdW1lbnRzIiwiaWdub3JlUmV0cmlldmVyIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4iLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiX3J1bklkIiwiX3RhZ3MiLCJmaWVsZHMiLCJpZ25vcmVMTE0iLCJwcm9tcHQiLCJjb21wbGV0aW9uIiwiaGFuZGxlTExNRXJyb3IiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biIsImhhbmRsZUNoYWluRXJyb3IiLCJrd2FyZ3MiLCJpZ25vcmVDaGFpbiIsImhhbmRsZUNoYWluRW5kIiwiaGFuZGxlQWdlbnRBY3Rpb24iLCJhY3Rpb24iLCJpZ25vcmVBZ2VudCIsImhhbmRsZUFnZW50RW5kIiwiQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1biIsImhhbmRsZVRvb2xFcnJvciIsImhhbmRsZVRvb2xFbmQiLCJwYXJlbnRSdW5JZCIsIm9wdGlvbnMiLCJnZXRQYXJlbnRSdW5JZCIsImhhbmRsZUxMTVN0YXJ0IiwibGxtIiwicHJvbXB0cyIsInVuZGVmaW5lZCIsImV4dHJhUGFyYW1zIiwiX21ldGFkYXRhIiwicnVuTmFtZSIsInJ1bklkXyIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJtZXNzYWdlR3JvdXAiLCJtZXNzYWdlU3RyaW5nIiwiaGFuZGxlQ2hhaW5TdGFydCIsImNoYWluIiwiaW5wdXRzIiwicnVuVHlwZSIsImhhbmRsZVRvb2xTdGFydCIsInRvb2wiLCJpbnB1dCIsImhhbmRsZVJldHJpZXZlclN0YXJ0IiwicmV0cmlldmVyIiwicXVlcnkiLCJhZGRIYW5kbGVyIiwiaW5oZXJpdCIsInB1c2giLCJyZW1vdmVIYW5kbGVyIiwiZmlsdGVyIiwiX2hhbmRsZXIiLCJyZW1vdmVUYWdzIiwiaW5jbHVkZXMiLCJyZW1vdmVNZXRhZGF0YSIsImtleSIsImtleXMiLCJjb3B5IiwiYWRkaXRpb25hbEhhbmRsZXJzIiwiaW5oZXJpdGFibGUiLCJoIiwic29tZSIsImZyb21IYW5kbGVycyIsIkhhbmRsZXIiLCJhc3NpZ24iLCJjb25maWd1cmUiLCJsb2NhbEhhbmRsZXJzIiwibG9jYWxUYWdzIiwibG9jYWxNZXRhZGF0YSIsImNhbGxiYWNrTWFuYWdlciIsImVuc3VyZUhhbmRsZXIiLCJ2ZXJib3NlRW5hYmxlZCIsInZlcmJvc2UiLCJ0cmFjaW5nVjJFbmFibGVkIiwidHJhY2luZ0VuYWJsZWQiLCJwcm90b3R5cGUiLCJjb25zb2xlSGFuZGxlciIsImZyb21NZXRob2RzIiwiVHJhY2VHcm91cCIsImdyb3VwTmFtZSIsImdldFRyYWNlR3JvdXBDYWxsYmFja01hbmFnZXIiLCJncm91cF9uYW1lIiwiY2IiLCJjbSIsInJ1bk1hbmFnZXIiLCJsYyIsInR5cGUiLCJpZCIsIkVycm9yIiwic3RhcnQiLCJlbmQiLCJfY29lcmNlVG9EaWN0IiwiZGVmYXVsdEtleSIsInRyYWNlQXNHcm91cCIsImdyb3VwT3B0aW9ucyIsImVuY2xvc2VkQ29kZSIsImFyZ3MiLCJ0cmFjZUdyb3VwIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/promises.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9wcm9taXNlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFDaEMsSUFBSUM7QUFDSjs7OztDQUlDLEdBQ0QsU0FBU0M7SUFDTCxNQUFNQyxTQUFTLEtBQXNCSCxHQUFHQSwrQ0FBaUIsR0FBR0Esb0NBQVNBO0lBQ3JFLE9BQU8sSUFBSUcsT0FBTztRQUNkRSxXQUFXO1FBQ1hDLGFBQWE7SUFDakI7QUFDSjtBQUNBOzs7O0NBSUMsR0FDTSxlQUFlQyxnQkFBZ0JDLFNBQVMsRUFBRUMsSUFBSTtJQUNqRCxJQUFJQSxTQUFTLE1BQU07UUFDZixNQUFNRDtJQUNWLE9BQ0s7UUFDRCxJQUFJLE9BQU9QLFVBQVUsYUFBYTtZQUM5QkEsUUFBUUM7UUFDWjtRQUNBLEtBQUtELE1BQU1TLEdBQUcsQ0FBQ0Y7SUFDbkI7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLFNBQVNHO0lBQ1osT0FBTyxPQUFPVixVQUFVLGNBQWNBLE1BQU1XLE1BQU0sS0FBS0MsUUFBUUMsT0FBTztBQUMxRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvcHJvbWlzZXMuanM/MzhkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5sZXQgcXVldWU7XG4vKipcbiAqIENyZWF0ZXMgYSBxdWV1ZSB1c2luZyB0aGUgcC1xdWV1ZSBsaWJyYXJ5LiBUaGUgcXVldWUgaXMgY29uZmlndXJlZCB0b1xuICogYXV0by1zdGFydCBhbmQgaGFzIGEgY29uY3VycmVuY3kgb2YgMSwgbWVhbmluZyBpdCB3aWxsIHByb2Nlc3MgdGFza3NcbiAqIG9uZSBhdCBhIHRpbWUuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVF1ZXVlKCkge1xuICAgIGNvbnN0IFBRdWV1ZSA9IFwiZGVmYXVsdFwiIGluIFBRdWV1ZU1vZCA/IFBRdWV1ZU1vZC5kZWZhdWx0IDogUFF1ZXVlTW9kO1xuICAgIHJldHVybiBuZXcgUFF1ZXVlKHtcbiAgICAgICAgYXV0b1N0YXJ0OiB0cnVlLFxuICAgICAgICBjb25jdXJyZW5jeTogMSxcbiAgICB9KTtcbn1cbi8qKlxuICogQ29uc3VtZSBhIHByb21pc2UsIGVpdGhlciBhZGRpbmcgaXQgdG8gdGhlIHF1ZXVlIG9yIHdhaXRpbmcgZm9yIGl0IHRvIHJlc29sdmVcbiAqIEBwYXJhbSBwcm9taXNlIFByb21pc2UgdG8gY29uc3VtZVxuICogQHBhcmFtIHdhaXQgV2hldGhlciB0byB3YWl0IGZvciB0aGUgcHJvbWlzZSB0byByZXNvbHZlIG9yIHJlc29sdmUgaW1tZWRpYXRlbHlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVDYWxsYmFjayhwcm9taXNlRm4sIHdhaXQpIHtcbiAgICBpZiAod2FpdCA9PT0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCBwcm9taXNlRm4oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgcXVldWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHF1ZXVlID0gY3JlYXRlUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgICB2b2lkIHF1ZXVlLmFkZChwcm9taXNlRm4pO1xuICAgIH1cbn1cbi8qKlxuICogV2FpdHMgZm9yIGFsbCBwcm9taXNlcyBpbiB0aGUgcXVldWUgdG8gcmVzb2x2ZS4gSWYgdGhlIHF1ZXVlIGlzXG4gKiB1bmRlZmluZWQsIGl0IGltbWVkaWF0ZWx5IHJlc29sdmVzIGEgcHJvbWlzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF3YWl0QWxsQ2FsbGJhY2tzKCkge1xuICAgIHJldHVybiB0eXBlb2YgcXVldWUgIT09IFwidW5kZWZpbmVkXCIgPyBxdWV1ZS5vbklkbGUoKSA6IFByb21pc2UucmVzb2x2ZSgpO1xufVxuIl0sIm5hbWVzIjpbIlBRdWV1ZU1vZCIsInF1ZXVlIiwiY3JlYXRlUXVldWUiLCJQUXVldWUiLCJkZWZhdWx0IiwiYXV0b1N0YXJ0IiwiY29uY3VycmVuY3kiLCJjb25zdW1lQ2FsbGJhY2siLCJwcm9taXNlRm4iLCJ3YWl0IiwiYWRkIiwiYXdhaXRBbGxDYWxsYmFja3MiLCJvbklkbGUiLCJQcm9taXNlIiwicmVzb2x2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/embeddings.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/embeddings.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */ class Embeddings {\n    constructor(params){\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(params ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2VtYmVkZGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0Q7QUFDdEQ7OztDQUdDLEdBQ00sTUFBTUM7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCOzs7U0FHQyxHQUNEQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUlWLCtEQUFXQSxDQUFDRyxVQUFVLENBQUM7SUFDN0M7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9lbWJlZGRpbmdzLmpzPzY1N2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbi8qKlxuICogQW4gYWJzdHJhY3QgY2xhc3MgdGhhdCBwcm92aWRlcyBtZXRob2RzIGZvciBlbWJlZGRpbmcgZG9jdW1lbnRzIGFuZFxuICogcXVlcmllcyB1c2luZyBMYW5nQ2hhaW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcbiAgICAgICAgICogd2hpY2ggd2lsbCB0aHVzIGJlbmVmaXQgZnJvbSB0aGUgY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHBhcmFtcyA/PyB7fSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFzeW5jQ2FsbGVyIiwiRW1iZWRkaW5ncyIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNhbGxlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/base.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/base.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken)\n/* harmony export */ });\n/* harmony import */ var _caches_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/caches.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...params\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof params.cache === \"object\") {\n            this.cache = params.cache;\n        } else if (params.cache) {\n            this.cache = _caches_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    async getNumTokens(content) {\n        // TODO: Figure out correct value.\n        if (typeof content !== \"string\") {\n            return 0;\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(content.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(content).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(// TODO: Fix when we remove the RunnableLambda backwards compatibility shim.\n    { config, ...callOptions }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE2QztBQUM2QjtBQUNQO0FBQ1o7QUFDQztBQUNSO0FBQ2hELDRDQUE0QztBQUNyQyxNQUFNTywwQkFBMEIsQ0FBQ0M7SUFDcEMsSUFBSUEsVUFBVUMsVUFBVSxDQUFDLHNCQUFzQjtRQUMzQyxPQUFPO0lBQ1g7SUFDQSxJQUFJRCxVQUFVQyxVQUFVLENBQUMsbUJBQW1CO1FBQ3hDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxjQUFjO1FBQ25DLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxXQUFXO1FBQ2hDLE9BQU87SUFDWDtJQUNBLE9BQU9EO0FBQ1gsRUFBRTtBQUNLLE1BQU1FLDBCQUEwQixDQUFDRjtJQUNwQyxPQUFRQTtRQUNKLEtBQUs7WUFDRCxPQUFPO1FBQ1g7WUFDSSxPQUFPO0lBQ2Y7QUFDSixFQUFFO0FBQ0ssTUFBTUcsc0JBQXNCLENBQUNIO0lBQ2hDLE9BQVFELHdCQUF3QkM7UUFDNUIsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDSyxNQUFNSSxxQkFBcUIsT0FBTyxFQUFFQyxNQUFNLEVBQUVMLFNBQVMsRUFBRztJQUMzRCxJQUFJTTtJQUNKLElBQUk7UUFDQUEsWUFBWSxDQUFDLE1BQU1ULG9FQUFn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R0csV0FBVztZQUNkQyxPQUFPLElBQUksQ0FBQ0MsUUFBUTtZQUNwQkMsUUFBUSxJQUFJLENBQUNDLFVBQVU7UUFDM0I7UUFDQSxNQUFNQyxrQkFBa0I5QixPQUFPK0IsT0FBTyxDQUFDaEMsUUFBUWlDLE1BQU0sQ0FBQyxDQUFDLENBQUNDLEdBQUc1QixNQUFNLEdBQUtBLFVBQVVUO1FBQ2hGLE1BQU1zQyxvQkFBb0JKLGdCQUNyQlQsR0FBRyxDQUFDLENBQUMsQ0FBQ2MsS0FBSzlCLE1BQU0sR0FBSyxDQUFDLEVBQUU4QixJQUFJLENBQUMsRUFBRUMsS0FBS0MsU0FBUyxDQUFDaEMsT0FBTyxDQUFDLEVBQ3ZEaUMsSUFBSSxHQUNKQyxJQUFJLENBQUM7UUFDVixPQUFPTDtJQUNYO0lBQ0E7OztLQUdDLEdBQ0RNLFlBQVk7UUFDUixPQUFPO1lBQ0gsR0FBRyxJQUFJLENBQUNsQixrQkFBa0IsRUFBRTtZQUM1QkksT0FBTyxJQUFJLENBQUNDLFFBQVE7WUFDcEJDLFFBQVEsSUFBSSxDQUFDQyxVQUFVO1FBQzNCO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRCxhQUFhWSxZQUFZQyxLQUFLLEVBQUU7UUFDNUIsTUFBTSxJQUFJQyxNQUFNO0lBQ3BCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanM/ZTQxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbk1lbW9yeUNhY2hlIH0gZnJvbSBcIi4uL2NhY2hlcy5qc1wiO1xuaW1wb3J0IHsgU3RyaW5nUHJvbXB0VmFsdWUsIENoYXRQcm9tcHRWYWx1ZSwgfSBmcm9tIFwiLi4vcHJvbXB0X3ZhbHVlcy5qc1wiO1xuaW1wb3J0IHsgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IGVuY29kaW5nRm9yTW9kZWwgfSBmcm9tIFwiLi4vdXRpbHMvdGlrdG9rZW4uanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG4vLyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9qcy10aWt0b2tlblxuZXhwb3J0IGNvbnN0IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC0zLjUtdHVyYm8tMTZrXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC0zLjUtdHVyYm8tMTZrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC0zLjUtdHVyYm8tXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC0zLjUtdHVyYm9cIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTQtMzJrXCIpKSB7XG4gICAgICAgIHJldHVybiBcImdwdC00LTMya1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTRcIjtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsTmFtZTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChtb2RlbE5hbWUpIHtcbiAgICAgICAgY2FzZSBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIjpcbiAgICAgICAgICAgIHJldHVybiA4MTkxO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIDIwNDY7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBnZXRNb2RlbENvbnRleHRTaXplID0gKG1vZGVsTmFtZSkgPT4ge1xuICAgIHN3aXRjaCAoZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4obW9kZWxOYW1lKSkge1xuICAgICAgICBjYXNlIFwiZ3B0LTMuNS10dXJiby0xNmtcIjpcbiAgICAgICAgICAgIHJldHVybiAxNjM4NDtcbiAgICAgICAgY2FzZSBcImdwdC0zLjUtdHVyYm9cIjpcbiAgICAgICAgICAgIHJldHVybiA0MDk2O1xuICAgICAgICBjYXNlIFwiZ3B0LTQtMzJrXCI6XG4gICAgICAgICAgICByZXR1cm4gMzI3Njg7XG4gICAgICAgIGNhc2UgXCJncHQtNFwiOlxuICAgICAgICAgICAgcmV0dXJuIDgxOTI7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWRhdmluY2ktMDAzXCI6XG4gICAgICAgICAgICByZXR1cm4gNDA5NztcbiAgICAgICAgY2FzZSBcInRleHQtY3VyaWUtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcInRleHQtYmFiYmFnZS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwidGV4dC1hZGEtMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgY2FzZSBcImNvZGUtZGF2aW5jaS0wMDJcIjpcbiAgICAgICAgICAgIHJldHVybiA4MDAwO1xuICAgICAgICBjYXNlIFwiY29kZS1jdXNobWFuLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gNDA5NztcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGNhbGN1bGF0ZU1heFRva2VucyA9IGFzeW5jICh7IHByb21wdCwgbW9kZWxOYW1lLCB9KSA9PiB7XG4gICAgbGV0IG51bVRva2VucztcbiAgICB0cnkge1xuICAgICAgICBudW1Ub2tlbnMgPSAoYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbihtb2RlbE5hbWUpKSkuZW5jb2RlKHByb21wdCkubGVuZ3RoO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBudW1iZXIgb2YgdG9rZW5zLCBmYWxsaW5nIGJhY2sgdG8gYXBwcm94aW1hdGUgY291bnRcIik7XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgLy8gZWFjaCB0b2tlbiBpcyB+NCBjaGFyYWN0ZXJzOiBodHRwczovL2hlbHAub3BlbmFpLmNvbS9lbi9hcnRpY2xlcy80OTM2ODU2LXdoYXQtYXJlLXRva2Vucy1hbmQtaG93LXRvLWNvdW50LXRoZW0jXG4gICAgICAgIG51bVRva2VucyA9IE1hdGguY2VpbChwcm9tcHQubGVuZ3RoIC8gNCk7XG4gICAgfVxuICAgIGNvbnN0IG1heFRva2VucyA9IGdldE1vZGVsQ29udGV4dFNpemUobW9kZWxOYW1lKTtcbiAgICByZXR1cm4gbWF4VG9rZW5zIC0gbnVtVG9rZW5zO1xufTtcbmNvbnN0IGdldFZlcmJvc2l0eSA9ICgpID0+IGZhbHNlO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBsYW5ndWFnZSBtb2RlbHMsIGNoYWlucywgdG9vbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ0NoYWluIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGdldCBsY19hdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB2ZXJib3NlOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBzdXBlcihwYXJhbXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0byBwcmludCBvdXQgcmVzcG9uc2UgdGV4dC5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcmJvc2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52ZXJib3NlID0gcGFyYW1zLnZlcmJvc2UgPz8gZ2V0VmVyYm9zaXR5KCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gcGFyYW1zLmNhbGxiYWNrcztcbiAgICAgICAgdGhpcy50YWdzID0gcGFyYW1zLnRhZ3MgPz8gW107XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBwYXJhbXMubWV0YWRhdGEgPz8ge307XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBsYW5ndWFnZSBtb2RlbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTGFuZ3VhZ2VNb2RlbCBleHRlbmRzIEJhc2VMYW5nQ2hhaW4ge1xuICAgIC8qKlxuICAgICAqIEtleXMgdGhhdCB0aGUgbGFuZ3VhZ2UgbW9kZWwgYWNjZXB0cyBhcyBjYWxsIG9wdGlvbnMuXG4gICAgICovXG4gICAgZ2V0IGNhbGxLZXlzKCkge1xuICAgICAgICByZXR1cm4gW1wic3RvcFwiLCBcInRpbWVvdXRcIiwgXCJzaWduYWxcIiwgXCJ0YWdzXCIsIFwibWV0YWRhdGFcIiwgXCJjYWxsYmFja3NcIl07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHsgY2FsbGJhY2tzLCBjYWxsYmFja01hbmFnZXIsIC4uLnBhcmFtcyB9KSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGNhbGxiYWNrczogY2FsbGJhY2tzID8/IGNhbGxiYWNrTWFuYWdlcixcbiAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYXN5bmMgY2FsbGVyIHNob3VsZCBiZSB1c2VkIGJ5IHN1YmNsYXNzZXMgdG8gbWFrZSBhbnkgYXN5bmMgY2FsbHMsXG4gICAgICAgICAqIHdoaWNoIHdpbGwgdGh1cyBiZW5lZml0IGZyb20gdGhlIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAgICAgICAgICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfZW5jb2RpbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuY2FjaGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBwYXJhbXMuY2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLmNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gSW5NZW1vcnlDYWNoZS5nbG9iYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBjb3JyZWN0IHZhbHVlLlxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZhbGxiYWNrIHRvIGFwcHJveGltYXRlIGNhbGN1bGF0aW9uIGlmIHRpa3Rva2VuIGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgbGV0IG51bVRva2VucyA9IE1hdGguY2VpbChjb250ZW50Lmxlbmd0aCAvIDQpO1xuICAgICAgICBpZiAoIXRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VuY29kaW5nID0gYXdhaXQgZW5jb2RpbmdGb3JNb2RlbChcIm1vZGVsTmFtZVwiIGluIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgPyBnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbih0aGlzLm1vZGVsTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgOiBcImdwdDJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2VuY29kaW5nKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG51bVRva2VucyA9IHRoaXMuX2VuY29kaW5nLmVuY29kZShjb250ZW50KS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bVRva2VucztcbiAgICB9XG4gICAgc3RhdGljIF9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRQcm9tcHRWYWx1ZShpbnB1dC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgb2YgdGhlIExMTS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB1bmlxdWUgY2FjaGUga2V5IGZvciBhIHNwZWNpZmljIGNhbGwgdG8gYSBzcGVjaWZpYyBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcGFyYW0gY2FsbE9wdGlvbnMgQ2FsbCBvcHRpb25zIGZvciB0aGUgbW9kZWxcbiAgICAgKiBAcmV0dXJucyBBIHVuaXF1ZSBjYWNoZSBrZXkuXG4gICAgICovXG4gICAgX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsKFxuICAgIC8vIFRPRE86IEZpeCB3aGVuIHdlIHJlbW92ZSB0aGUgUnVubmFibGVMYW1iZGEgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgc2hpbS5cbiAgICB7IGNvbmZpZywgLi4uY2FsbE9wdGlvbnMgfSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgLi4uY2FsbE9wdGlvbnMsXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKS5maWx0ZXIoKFtfLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBzZXJpYWxpemVkRW50cmllcyA9IGZpbHRlcmVkRW50cmllc1xuICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBgJHtrZXl9OiR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApXG4gICAgICAgICAgICAuc29ydCgpXG4gICAgICAgICAgICAuam9pbihcIixcIik7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVkRW50cmllcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogTG9hZCBhbiBMTE0gZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemUoX2RhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlIC50b0pTT04oKSBpbnN0ZWFkXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJJbk1lbW9yeUNhY2hlIiwiU3RyaW5nUHJvbXB0VmFsdWUiLCJDaGF0UHJvbXB0VmFsdWUiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIkFzeW5jQ2FsbGVyIiwiZW5jb2RpbmdGb3JNb2RlbCIsIlJ1bm5hYmxlIiwiZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4iLCJtb2RlbE5hbWUiLCJzdGFydHNXaXRoIiwiZ2V0RW1iZWRkaW5nQ29udGV4dFNpemUiLCJnZXRNb2RlbENvbnRleHRTaXplIiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwicHJvbXB0IiwibnVtVG9rZW5zIiwiZW5jb2RlIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIk1hdGgiLCJjZWlsIiwibWF4VG9rZW5zIiwiZ2V0VmVyYm9zaXR5IiwiQmFzZUxhbmdDaGFpbiIsImxjX2F0dHJpYnV0ZXMiLCJjYWxsYmFja3MiLCJ1bmRlZmluZWQiLCJ2ZXJib3NlIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsIm1ldGFkYXRhIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJjYWxsS2V5cyIsImNhbGxiYWNrTWFuYWdlciIsImNhY2hlIiwiZ2xvYmFsIiwiY2FsbGVyIiwiZ2V0TnVtVG9rZW5zIiwiY29udGVudCIsIl9lbmNvZGluZyIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwiaW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwiLCJjb25maWciLCJjYWxsT3B0aW9ucyIsIl90eXBlIiwiX2xsbVR5cGUiLCJfbW9kZWwiLCJfbW9kZWxUeXBlIiwiZmlsdGVyZWRFbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsIl8iLCJzZXJpYWxpemVkRW50cmllcyIsImtleSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb3J0Iiwiam9pbiIsInNlcmlhbGl6ZSIsImRlc2VyaWFsaXplIiwiX2RhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* binding */ createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js\");\n\n\n\n\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */ function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform (chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\" ? chunk.content : JSON.stringify(chunk.content)));\n        }\n    });\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */ class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLanguageModel {\n    constructor(fields){\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"chat_models\",\n                this._llmType()\n            ]\n        });\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        if (callOptions?.timeout && !callOptions.signal) {\n            callOptions.signal = AbortSignal.timeout(callOptions.timeout);\n        }\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */ async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(options);\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [\n                messages\n            ], runnableConfig.runId, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){\n                    chunk.message.response_metadata = {\n                        ...chunk.generationInfo,\n                        ...chunk.message.response_metadata\n                    };\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    } else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    // TODO: Remove cast after figuring out inheritance\n                    generations: [\n                        [\n                            generationChunk\n                        ]\n                    ]\n                })));\n        }\n    }\n    /** @ignore */ async _generateUncached(messages, parsedOptions, handledOptions) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {\n                ...parsedOptions,\n                promptIndex: i\n            }, runManagers?.[i])));\n        // handle results\n        const generations = [];\n        const llmOutputs = [];\n        await Promise.all(results.map(async (pResult, i)=>{\n            if (pResult.status === \"fulfilled\") {\n                const result = pResult.value;\n                for (const generation of result.generations){\n                    generation.message.response_metadata = {\n                        ...generation.generationInfo,\n                        ...generation.message.response_metadata\n                    };\n                }\n                if (result.generations.length === 1) {\n                    result.generations[0].message.response_metadata = {\n                        ...result.llmOutput,\n                        ...result.generations[0].message.response_metadata\n                    };\n                }\n                generations[i] = result.generations;\n                llmOutputs[i] = result.llmOutput;\n                return runManagers?.[i]?.handleLLMEnd({\n                    generations: [\n                        result.generations\n                    ],\n                    llmOutput: result.llmOutput\n                });\n            } else {\n                // status === \"rejected\"\n                await runManagers?.[i]?.handleLLMError(pResult.reason);\n                return Promise.reject(pResult.reason);\n            }\n        }));\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined\n        };\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1,\n            cached: true\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, handledOptions.runId, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index)=>{\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result;\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason);\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>baseMessages[i]), callOptions, runnableConfig);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async call(messages, options, callbacks) {\n        const result = await this.generate([\n            messages.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)\n        ], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */ async predict(text, options, callbacks) {\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(text);\n        const result = await this.call([\n            message\n        ], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */ class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message\n                }\n            ]\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRGO0FBQ25EO0FBQ007QUFDWTtBQUMzRDs7OztDQUlDLEdBQ00sU0FBU007SUFDWixNQUFNQyxjQUFjLElBQUlDO0lBQ3hCLE9BQU8sSUFBSUMsZ0JBQWdCO1FBQ3ZCQyxXQUFVQyxLQUFLLEVBQUVDLFVBQVU7WUFDdkJBLFdBQVdDLE9BQU8sQ0FBQ04sWUFBWU8sTUFBTSxDQUFDLE9BQU9ILE1BQU1JLE9BQU8sS0FBSyxXQUN6REosTUFBTUksT0FBTyxHQUNiQyxLQUFLQyxTQUFTLENBQUNOLE1BQU1JLE9BQU87UUFDdEM7SUFDSjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsc0JBQXNCZCx1REFBaUJBO0lBQ2hEZSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOLDJDQUEyQztRQUMzQ0MsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQWUsSUFBSSxDQUFDQyxRQUFRO2FBQUc7UUFDeEQ7SUFDSjtJQUNBQyx1Q0FBdUNDLE9BQU8sRUFBRTtRQUM1QyxNQUFNLENBQUNDLGdCQUFnQkMsWUFBWSxHQUFHLEtBQUssQ0FBQ0gsdUNBQXVDQztRQUNuRixJQUFJRSxhQUFhQyxXQUFXLENBQUNELFlBQVlFLE1BQU0sRUFBRTtZQUM3Q0YsWUFBWUUsTUFBTSxHQUFHQyxZQUFZRixPQUFPLENBQUNELFlBQVlDLE9BQU87UUFDaEU7UUFDQSxPQUFPO1lBQUNGO1lBQWdCQztTQUFZO0lBQ3hDO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNSSxPQUFPQyxLQUFLLEVBQUVQLE9BQU8sRUFBRTtR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LFFBQVE3QixPQUFPO29CQUNyQjZCO2dCQUNKO2FBQ0g7UUFDTDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzP2UwMzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlLCBIdW1hbk1lc3NhZ2UsIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUlVOX0tFWSwgfSBmcm9tIFwiLi4vb3V0cHV0cy5qc1wiO1xuaW1wb3J0IHsgQmFzZUxhbmd1YWdlTW9kZWwsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuLyoqXG4gKiBDcmVhdGVzIGEgdHJhbnNmb3JtIHN0cmVhbSBmb3IgZW5jb2RpbmcgY2hhdCBtZXNzYWdlIGNodW5rcy5cbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgQnl0ZXNPdXRwdXRQYXJzZXJ9IGluc3RlYWRcbiAqIEByZXR1cm5zIEEgVHJhbnNmb3JtU3RyZWFtIGluc3RhbmNlIHRoYXQgZW5jb2RlcyBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2hhdE1lc3NhZ2VDaHVua0VuY29kZXJTdHJlYW0oKSB7XG4gICAgY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRleHRFbmNvZGVyLmVuY29kZSh0eXBlb2YgY2h1bmsuY29udGVudCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgID8gY2h1bmsuY29udGVudFxuICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkoY2h1bmsuY29udGVudCkpKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY2hhdCBtb2RlbHMuIEl0IGV4dGVuZHMgdGhlIEJhc2VMYW5ndWFnZU1vZGVsIGNsYXNzIGFuZFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgZ2VuZXJhdGluZyBjaGF0IGJhc2VkIG9uIGlucHV0IG1lc3NhZ2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZUNoYXRNb2RlbCBleHRlbmRzIEJhc2VMYW5ndWFnZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgLy8gT25seSBldmVyIGluc3RhbnRpYXRlZCBpbiBtYWluIExhbmdDaGFpblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpblwiLCBcImNoYXRfbW9kZWxzXCIsIHRoaXMuX2xsbVR5cGUoKV1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSBzdXBlci5fc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKGNhbGxPcHRpb25zPy50aW1lb3V0ICYmICFjYWxsT3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIGNhbGxPcHRpb25zLnNpZ25hbCA9IEFib3J0U2lnbmFsLnRpbWVvdXQoY2FsbE9wdGlvbnMudGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBjaGF0IG1vZGVsIHdpdGggYSBzaW5nbGUgaW5wdXQuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBCYXNlTWVzc2FnZUNodW5rLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBwcm9tcHRWYWx1ZSA9IEJhc2VDaGF0TW9kZWwuX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlUHJvbXB0KFtwcm9tcHRWYWx1ZV0sIG9wdGlvbnMsIG9wdGlvbnM/LmNhbGxiYWNrcyk7XG4gICAgICAgIGNvbnN0IGNoYXRHZW5lcmF0aW9uID0gcmVzdWx0LmdlbmVyYXRpb25zWzBdWzBdO1xuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgY2FzdCBhZnRlciBmaWd1cmluZyBvdXQgaW5oZXJpdGFuY2VcbiAgICAgICAgcmV0dXJuIGNoYXRHZW5lcmF0aW9uLm1lc3NhZ2U7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZXF1aXJlLXlpZWxkXG4gICAgYXN5bmMgKl9zdHJlYW1SZXNwb25zZUNodW5rcyhfbWVzc2FnZXMsIF9vcHRpb25zLCBfcnVuTWFuYWdlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFN1YmNsYXNzIGNoZWNrIHJlcXVpcmVkIHRvIGF2b2lkIGRvdWJsZSBjYWxsYmFja3Mgd2l0aCBkZWZhdWx0IGltcGxlbWVudGF0aW9uXG4gICAgICAgIGlmICh0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyA9PT1cbiAgICAgICAgICAgIEJhc2VDaGF0TW9kZWwucHJvdG90eXBlLl9zdHJlYW1SZXNwb25zZUNodW5rcykge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHByb21wdC50b0NoYXRNZXNzYWdlcygpO1xuICAgICAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUocnVubmFibGVDb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgcnVubmFibGVDb25maWcudGFncywgdGhpcy50YWdzLCBydW5uYWJsZUNvbmZpZy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhjYWxsT3B0aW9ucyksXG4gICAgICAgICAgICAgICAgYmF0Y2hfc2l6ZTogMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIFttZXNzYWdlc10sIHJ1bm5hYmxlQ29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcnVubmFibGVDb25maWcucnVuTmFtZSk7XG4gICAgICAgICAgICBsZXQgZ2VuZXJhdGlvbkNodW5rO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2h1bmsubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgY2h1bmsubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZW5lcmF0aW9uQ2h1bmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25DaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNodW5rID0gZ2VuZXJhdGlvbkNodW5rLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKGVycikpKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgY2FzdCBhZnRlciBmaWd1cmluZyBvdXQgaW5oZXJpdGFuY2VcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW1tnZW5lcmF0aW9uQ2h1bmtdXSxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBhc3luYyBfZ2VuZXJhdGVVbmNhY2hlZChtZXNzYWdlcywgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYmFzZU1lc3NhZ2VzID0gbWVzc2FnZXMubWFwKChtZXNzYWdlTGlzdCkgPT4gbWVzc2FnZUxpc3QubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG4gICAgICAgIC8vIGNyZWF0ZSBjYWxsYmFjayBtYW5hZ2VyIGFuZCBzdGFydCBydW5cbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoaGFuZGxlZE9wdGlvbnMuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgaGFuZGxlZE9wdGlvbnMudGFncywgdGhpcy50YWdzLCBoYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgb3B0aW9uczogcGFyc2VkT3B0aW9ucyxcbiAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZTogMSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBiYXNlTWVzc2FnZXMsIGhhbmRsZWRPcHRpb25zLnJ1bklkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGFuZGxlZE9wdGlvbnMucnVuTmFtZSk7XG4gICAgICAgIC8vIGdlbmVyYXRlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChiYXNlTWVzc2FnZXMubWFwKChtZXNzYWdlTGlzdCwgaSkgPT4gdGhpcy5fZ2VuZXJhdGUobWVzc2FnZUxpc3QsIHsgLi4ucGFyc2VkT3B0aW9ucywgcHJvbXB0SW5kZXg6IGkgfSwgcnVuTWFuYWdlcnM/LltpXSkpKTtcbiAgICAgICAgLy8gaGFuZGxlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgbGxtT3V0cHV0cyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLm1hcChhc3luYyAocFJlc3VsdCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHBSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdlbmVyYXRpb24gb2YgcmVzdWx0LmdlbmVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmdlbmVyYXRpb24uZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5nZW5lcmF0aW9uLm1lc3NhZ2UucmVzcG9uc2VfbWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZ2VuZXJhdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5nZW5lcmF0aW9uc1swXS5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVzdWx0LmxsbU91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlc3VsdC5nZW5lcmF0aW9uc1swXS5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdC5nZW5lcmF0aW9ucztcbiAgICAgICAgICAgICAgICBsbG1PdXRwdXRzW2ldID0gcmVzdWx0LmxsbU91dHB1dDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcnVuTWFuYWdlcnM/LltpXT8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtyZXN1bHQuZ2VuZXJhdGlvbnNdLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQ6IHJlc3VsdC5sbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgPT09IFwicmVqZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXJzPy5baV0/LmhhbmRsZUxMTUVycm9yKHBSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGNyZWF0ZSBjb21iaW5lZCBvdXRwdXRcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICBsbG1PdXRwdXQ6IGxsbU91dHB1dHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyB0aGlzLl9jb21iaW5lTExNT3V0cHV0Py4oLi4ubGxtT3V0cHV0cylcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dCwgUlVOX0tFWSwge1xuICAgICAgICAgICAgdmFsdWU6IHJ1bk1hbmFnZXJzXG4gICAgICAgICAgICAgICAgPyB7IHJ1bklkczogcnVuTWFuYWdlcnM/Lm1hcCgobWFuYWdlcikgPT4gbWFuYWdlci5ydW5JZCkgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlQ2FjaGVkKHsgbWVzc2FnZXMsIGNhY2hlLCBsbG1TdHJpbmdLZXksIHBhcnNlZE9wdGlvbnMsIGhhbmRsZWRPcHRpb25zLCB9KSB7XG4gICAgICAgIGNvbnN0IGJhc2VNZXNzYWdlcyA9IG1lc3NhZ2VzLm1hcCgobWVzc2FnZUxpc3QpID0+IG1lc3NhZ2VMaXN0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICAvLyBjcmVhdGUgY2FsbGJhY2sgbWFuYWdlciBhbmQgc3RhcnQgcnVuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGhhbmRsZWRPcHRpb25zLmNhbGxiYWNrcywgdGhpcy5jYWxsYmFja3MsIGhhbmRsZWRPcHRpb25zLnRhZ3MsIHRoaXMudGFncywgaGFuZGxlZE9wdGlvbnMubWV0YWRhdGEsIHRoaXMubWV0YWRhdGEsIHsgdmVyYm9zZTogdGhpcy52ZXJib3NlIH0pO1xuICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHBhcnNlZE9wdGlvbnMsXG4gICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhwYXJzZWRPcHRpb25zKSxcbiAgICAgICAgICAgIGJhdGNoX3NpemU6IDEsXG4gICAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgYmFzZU1lc3NhZ2VzLCBoYW5kbGVkT3B0aW9ucy5ydW5JZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuICAgICAgICAvLyBnZW5lcmF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcChhc3luYyAoYmFzZU1lc3NhZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBKb2luIGFsbCBjb250ZW50IGludG8gb25lIHN0cmluZyBmb3IgdGhlIHByb21wdCBpbmRleFxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShiYXNlTWVzc2FnZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhY2hlLmxvb2t1cChwcm9tcHQsIGxsbVN0cmluZ0tleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gTWFwIHJ1biBtYW5hZ2VycyB0byB0aGUgcmVzdWx0cyBiZWZvcmUgZmlsdGVyaW5nIG91dCBudWxsIHJlc3VsdHNcbiAgICAgICAgLy8gTnVsbCByZXN1bHRzIGFyZSBqdXN0IGFic2VudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgICAgIC5tYXAoKHJlc3VsdCwgaW5kZXgpID0+ICh7IHJlc3VsdCwgcnVuTWFuYWdlcjogcnVuTWFuYWdlcnM/LltpbmRleF0gfSkpXG4gICAgICAgICAgICAuZmlsdGVyKCh7IHJlc3VsdCB9KSA9PiAocmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCkgfHxcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIik7XG4gICAgICAgIC8vIEhhbmRsZSByZXN1bHRzIGFuZCBjYWxsIHJ1biBtYW5hZ2Vyc1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWNoZWRSZXN1bHRzLm1hcChhc3luYyAoeyByZXN1bHQ6IHByb21pc2VSZXN1bHQsIHJ1bk1hbmFnZXIgfSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJvbWlzZVJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihyZXN1bHRbMF0udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgPT09IFwicmVqZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKHByb21pc2VSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocHJvbWlzZVJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbWlzc2luZ1Byb21wdEluZGljZXMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgY2hhdCBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIGFycmF5cyBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBMTE1SZXN1bHQuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICAvLyBwYXJzZSBjYWxsIG9wdGlvbnNcbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKHBhcnNlZE9wdGlvbnMpO1xuICAgICAgICBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPSBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPz8gY2FsbGJhY2tzO1xuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKGJhc2VNZXNzYWdlcywgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSB0aGlzLl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzIH0gPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZUNhY2hlZCh7XG4gICAgICAgICAgICBtZXNzYWdlczogYmFzZU1lc3NhZ2VzLFxuICAgICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgICBsbG1TdHJpbmdLZXksXG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIGhhbmRsZWRPcHRpb25zOiBydW5uYWJsZUNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsbG1PdXRwdXQgPSB7fTtcbiAgICAgICAgaWYgKG1pc3NpbmdQcm9tcHRJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKG1pc3NpbmdQcm9tcHRJbmRpY2VzLm1hcCgoaSkgPT4gYmFzZU1lc3NhZ2VzW2ldKSwgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlc3VsdHMuZ2VuZXJhdGlvbnMubWFwKGFzeW5jIChnZW5lcmF0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdEluZGV4ID0gbWlzc2luZ1Byb21wdEluZGljZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW3Byb21wdEluZGV4XSA9IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gSm9pbiBhbGwgY29udGVudCBpbnRvIG9uZSBzdHJpbmcgZm9yIHRoZSBwcm9tcHQgaW5kZXhcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGJhc2VNZXNzYWdlc1twcm9tcHRJbmRleF0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnVwZGF0ZShwcm9tcHQsIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBfbW9kZWxUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJiYXNlX2NoYXRfbW9kZWxcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBwcm9tcHQgYmFzZWQgb24gdGhlIGlucHV0IHByb21wdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHByb21wdFZhbHVlcyBBbiBhcnJheSBvZiBCYXNlUHJvbXB0VmFsdWUgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUHJvbXB0KHByb21wdFZhbHVlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBjYWxsIHRvIHRoZSBjaGF0IG1vZGVsLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGwobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlKFttZXNzYWdlcy5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpXSwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSByZXN1bHQuZ2VuZXJhdGlvbnM7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9uc1swXVswXS5tZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIGNhbGwgdG8gdGhlIGNoYXQgbW9kZWwgd2l0aCBhIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0VmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGxQcm9tcHQocHJvbXB0VmFsdWUsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBwcm9tcHRNZXNzYWdlcyA9IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwocHJvbXB0TWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgcHJlZGljdE1lc3NhZ2VzKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBQcmVkaWN0cyB0aGUgbmV4dCBtZXNzYWdlIGJhc2VkIG9uIGEgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHRleHQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNhbGwoW21lc3NhZ2VdLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdC5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIHByZWRpY3Qgd2hlbiBvdXRwdXQgaXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmNvbnRlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyB0aGF0IGV4dGVuZHMgQmFzZUNoYXRNb2RlbCBhbmQgcHJvdmlkZXMgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIG9mIF9nZW5lcmF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNpbXBsZUNoYXRNb2RlbCBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy5fY2FsbChtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQUlNZXNzYWdlKHRleHQpO1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdlbmVyYXRlIHdpdGggYSBzaW1wbGUgY2hhdCBtb2RlbCB3aGVuIG91dHB1dCBpcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZW5lcmF0aW9uczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBSU1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2UiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsIlJVTl9LRVkiLCJCYXNlTGFuZ3VhZ2VNb2RlbCIsIkNhbGxiYWNrTWFuYWdlciIsImNyZWF0ZUNoYXRNZXNzYWdlQ2h1bmtFbmNvZGVyU3RyZWFtIiwidGV4dEVuY29kZXIiLCJUZXh0RW5jb2RlciIsIlRyYW5zZm9ybVN0cmVhbSIsInRyYW5zZm9ybSIsImNodW5rIiwiY29udHJvbGxlciIsImVucXVldWUiLCJlbmNvZGUiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIkJhc2VDaGF0TW9kZWwiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJfbGxtVHlwZSIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zIiwib3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwiY2FsbE9wdGlvbnMiLCJ0aW1lb3V0Iiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJpbnZva2UiLCJpbnB1dCIsInByb21wdFZhbHVlIiwiX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUiLCJyZXN1bHQiLCJnZW5lcmF0ZVByb21wdCIsImNhbGxiYWNrcyIsImNoYXRHZW5lcmF0aW9uIiwiZ2VuZXJhdGlvbnMiLCJtZXNzYWdlIiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwiX21lc3NhZ2VzIiwiX29wdGlvbnMiLCJfcnVuTWFuYWdlciIsIkVycm9yIiwiX3N0cmVhbUl0ZXJhdG9yIiwicHJvdG90eXBlIiwicHJvbXB0IiwibWVzc2FnZXMiLCJ0b0NoYXRNZXNzYWdlcyIsImNhbGxiYWNrTWFuYWdlcl8iLCJjb25maWd1cmUiLCJ0YWdzIiwibWV0YWRhdGEiLCJ2ZXJib3NlIiwiZXh0cmEiLCJpbnZvY2F0aW9uX3BhcmFtcyIsImludm9jYXRpb25QYXJhbXMiLCJiYXRjaF9zaXplIiwicnVuTWFuYWdlcnMiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsInRvSlNPTiIsInJ1bklkIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsImdlbmVyYXRpb25DaHVuayIsInJlc3BvbnNlX21ldGFkYXRhIiwiZ2VuZXJhdGlvbkluZm8iLCJjb25jYXQiLCJlcnIiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicnVuTWFuYWdlciIsImhhbmRsZUxMTUVycm9yIiwiaGFuZGxlTExNRW5kIiwiX2dlbmVyYXRlVW5jYWNoZWQiLCJwYXJzZWRPcHRpb25zIiwiaGFuZGxlZE9wdGlvbnMiLCJiYXNlTWVzc2FnZXMiLCJtZXNzYWdlTGlzdCIsInJlc3VsdHMiLCJhbGxTZXR0bGVkIiwiaSIsIl9nZW5lcmF0ZSIsInByb21wdEluZGV4IiwibGxtT3V0cHV0cyIsInBSZXN1bHQiLCJzdGF0dXMiLCJnZW5lcmF0aW9uIiwibGVuZ3RoIiwibGxtT3V0cHV0IiwicmVhc29uIiwicmVqZWN0Iiwib3V0cHV0IiwiX2NvbWJpbmVMTE1PdXRwdXQiLCJydW5JZHMiLCJtYW5hZ2VyIiwiX2dlbmVyYXRlQ2FjaGVkIiwiY2FjaGUiLCJsbG1TdHJpbmdLZXkiLCJjYWNoZWQiLCJtaXNzaW5nUHJvbXB0SW5kaWNlcyIsImJhc2VNZXNzYWdlIiwiaW5kZXgiLCJ0b1N0cmluZyIsImxvb2t1cCIsInB1c2giLCJjYWNoZWRSZXN1bHRzIiwiZmlsdGVyIiwicHJvbWlzZVJlc3VsdCIsImhhbmRsZUxMTU5ld1Rva2VuIiwidGV4dCIsImdlbmVyYXRlIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RvcCIsIl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbCIsInVwZGF0ZSIsIl9tb2RlbFR5cGUiLCJzZXJpYWxpemUiLCJfdHlwZSIsIl9tb2RlbCIsInByb21wdFZhbHVlcyIsInByb21wdE1lc3NhZ2VzIiwiY2FsbCIsImNhbGxQcm9tcHQiLCJwcmVkaWN0TWVzc2FnZXMiLCJwcmVkaWN0IiwiU2ltcGxlQ2hhdE1vZGVsIiwiX2NhbGwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/map_keys.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/map_keys.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvbWFwX2tleXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUM7QUFDRDtBQUMzQixTQUFTRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUc7SUFDOUIsT0FBT0EsS0FBSyxDQUFDRCxJQUFJLElBQUlILHVDQUFTQSxDQUFDRztBQUNuQztBQUNPLFNBQVNFLFlBQVlGLEdBQUcsRUFBRUMsR0FBRztJQUNoQyxPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUYsc0NBQVNBLENBQUNFO0FBQ25DO0FBQ08sU0FBU0csUUFBUUMsTUFBTSxFQUFFQyxNQUFNLEVBQUVKLEdBQUc7SUFDdkMsTUFBTUssU0FBUyxDQUFDO0lBQ2hCLElBQUssTUFBTU4sT0FBT0ksT0FBUTtRQUN0QixJQUFJRyxPQUFPQyxNQUFNLENBQUNKLFFBQVFKLE1BQU07WUFDNUJNLE1BQU0sQ0FBQ0QsT0FBT0wsS0FBS0MsS0FBSyxHQUFHRyxNQUFNLENBQUNKLElBQUk7UUFDMUM7SUFDSjtJQUNBLE9BQU9NO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcz8wOGUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzbmFrZUNhc2UgZnJvbSBcImRlY2FtZWxpemVcIjtcbmltcG9ydCBjYW1lbENhc2UgZnJvbSBcImNhbWVsY2FzZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIGtleVRvSnNvbihrZXksIG1hcCkge1xuICAgIHJldHVybiBtYXA/LltrZXldIHx8IHNuYWtlQ2FzZShrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGtleUZyb21Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgY2FtZWxDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwS2V5cyhmaWVsZHMsIG1hcHBlciwgbWFwKSB7XG4gICAgY29uc3QgbWFwcGVkID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG4gICAgICAgIGlmIChPYmplY3QuaGFzT3duKGZpZWxkcywga2V5KSkge1xuICAgICAgICAgICAgbWFwcGVkW21hcHBlcihrZXksIG1hcCldID0gZmllbGRzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcHBlZDtcbn1cbiJdLCJuYW1lcyI6WyJzbmFrZUNhc2UiLCJjYW1lbENhc2UiLCJrZXlUb0pzb24iLCJrZXkiLCJtYXAiLCJrZXlGcm9tSnNvbiIsIm1hcEtleXMiLCJmaWVsZHMiLCJtYXBwZXIiLCJtYXBwZWQiLCJPYmplY3QiLCJoYXNPd24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvc2VyaWFsaXphYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFtRDtBQUNuRCxTQUFTRSxZQUFZQyxHQUFHO0lBQ3BCLE9BQU9DLE1BQU1DLE9BQU8sQ0FBQ0YsT0FBTztXQUFJQTtLQUFJLEdBQUc7UUFBRSxHQUFHQSxHQUFHO0lBQUM7QUFDcEQ7QUFDQSxTQUFTRyxlQUFlQyxJQUFJLEVBQUVDLFVBQVU7SUFDcEMsTUFBTUMsU0FBU1AsWUFBWUs7SUFDM0IsS0FBSyxNQUFNLENBQUNHLE1BQU1DLFNBQVMsSUFBSUMsT0FBT0MsT0FBTyxDQUFDTCxZQUFhO1FBQ3ZELE1BQU0sQ0FBQ00sTUFBTSxHQUFHQyxhQUFhLEdBQUdMLEtBQUtNLEtBQUssQ0FBQyxLQUFLQyxPQUFPO1FBQ3ZELDhEQUE4RDtRQUM5RCxJQUFJQyxVQUFVVDtRQUNkLEtBQUssTUFBTVUsUUFBUUosYUFBYUUsT0FBTyxHQUFJO1lBQ3ZDLElBQUlDLE9BQU8sQ0FBQ0MsS0FBSyxLQUFLQyxXQUFXO2dCQUM3QjtZQUNKO1lBQ0FGLE9BQU8sQ0FBQ0MsS0FBSyxHQUFHakIsWUFBWWdCLE9BQU8sQ0FBQ0MsS0FBSztZQUN6Q0QsVUFBVUEsT0FBTyxDQUFDQyxLQUFLO1FBQzNCO1FBQ0EsSUFBSUQsT0FBTyxDQUFDSixLQUFLLEtBQUtNLFdBQVc7WUFDN0JGLE9BQU8sQ0FBQ0osS0FBSyxHQUFHO2dCQUNaTyxJQUFJO2dCQUNKQyxNQUFNO2dCQUNOQyxJQUFJO29CQUFDWjtpQkFBUztZQUNsQjtRQUNKO0lBQ0o7SUFDQSxPQUFPRjtBQUNYO0FBQ0E7OztDQUdDLEdBQ00sU0FBU2UsbUJBQ2hCLG1FQUFtRTtBQUNuRUMsaUJBQWlCO0lBQ2IsZ0VBQWdFO0lBQ2hFLDRFQUE0RTtJQUM1RSxNQUFNQyxjQUFjZCxPQUFPZSxjQUFjLENBQUNGO0lBQzFD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bm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL3NlcmlhbGl6YWJsZS5qcz81MmRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGtleVRvSnNvbiwgbWFwS2V5cyB9IGZyb20gXCIuL21hcF9rZXlzLmpzXCI7XG5mdW5jdGlvbiBzaGFsbG93Q29weShvYmopIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopID8gWy4uLm9ial0gOiB7IC4uLm9iaiB9O1xufVxuZnVuY3Rpb24gcmVwbGFjZVNlY3JldHMocm9vdCwgc2VjcmV0c01hcCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHNoYWxsb3dDb3B5KHJvb3QpO1xuICAgIGZvciAoY29uc3QgW3BhdGgsIHNlY3JldElkXSBvZiBPYmplY3QuZW50cmllcyhzZWNyZXRzTWFwKSkge1xuICAgICAgICBjb25zdCBbbGFzdCwgLi4ucGFydHNSZXZlcnNlXSA9IHBhdGguc3BsaXQoXCIuXCIpLnJldmVyc2UoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnQgPSByZXN1bHQ7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0c1JldmVyc2UucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFtwYXJ0XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50W3BhcnRdID0gc2hhbGxvd0NvcHkoY3VycmVudFtwYXJ0XSk7XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXJ0XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFtsYXN0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjdXJyZW50W2xhc3RdID0ge1xuICAgICAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic2VjcmV0XCIsXG4gICAgICAgICAgICAgICAgaWQ6IFtzZWNyZXRJZF0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIEdldCBhIHVuaXF1ZSBuYW1lIGZvciB0aGUgbW9kdWxlLCByYXRoZXIgdGhhbiBwYXJlbnQgY2xhc3MgaW1wbGVtZW50YXRpb25zLlxuICogU2hvdWxkIG5vdCBiZSBzdWJjbGFzc2VkLCBzdWJjbGFzcyBsY19uYW1lIGFib3ZlIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRfbGNfdW5pcXVlX25hbWUoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG5zZXJpYWxpemFibGVDbGFzcykge1xuICAgIC8vIFwic3VwZXJcIiBoZXJlIHdvdWxkIHJlZmVyIHRvIHRoZSBwYXJlbnQgY2xhc3Mgb2YgU2VyaWFsaXphYmxlLFxuICAgIC8vIHdoZW4gd2Ugd2FudCB0aGUgcGFyZW50IGNsYXNzIG9mIHRoZSBtb2R1bGUgYWN0dWFsbHkgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAgICBjb25zdCBwYXJlbnRDbGFzcyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzZXJpYWxpemFibGVDbGFzcyk7XG4gICAgY29uc3QgbGNOYW1lSXNTdWJjbGFzc2VkID0gdHlwZW9mIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUgPT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAodHlwZW9mIHBhcmVudENsYXNzLmxjX25hbWUgIT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgICAgc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSgpICE9PSBwYXJlbnRDbGFzcy5sY19uYW1lKCkpO1xuICAgIGlmIChsY05hbWVJc1N1YmNsYXNzZWQpIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLmxjX25hbWUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemFibGVDbGFzcy5uYW1lO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTZXJpYWxpemFibGUge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBzZXJpYWxpemFibGUuIE92ZXJyaWRlIHRvIHByb3ZpZGUgYW4gYWxpYXMgb3JcbiAgICAgKiB0byBwcmVzZXJ2ZSB0aGUgc2VyaWFsaXplZCBtb2R1bGUgbmFtZSBpbiBtaW5pZmllZCBlbnZpcm9ubWVudHMuXG4gICAgICpcbiAgICAgKiBJbXBsZW1lbnRlZCBhcyBhIHN0YXRpYyBtZXRob2QgdG8gc3VwcG9ydCBsb2FkaW5nIGxvZ2ljLlxuICAgICAqL1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgc2VyaWFsaXplZCBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlLlxuICAgICAqL1xuICAgIGdldCBsY19pZCgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnRoaXMubGNfbmFtZXNwYWNlLFxuICAgICAgICAgICAgZ2V0X2xjX3VuaXF1ZV9uYW1lKHRoaXMuY29uc3RydWN0b3IpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBzZWNyZXRzLCB3aGljaCB3aWxsIGJlIG9taXR0ZWQgZnJvbSBzZXJpYWxpemF0aW9uLlxuICAgICAqIEtleXMgYXJlIHBhdGhzIHRvIHRoZSBzZWNyZXQgaW4gY29uc3RydWN0b3IgYXJncywgZS5nLiBcImZvby5iYXIuYmF6XCIuXG4gICAgICogVmFsdWVzIGFyZSB0aGUgc2VjcmV0IGlkcywgd2hpY2ggd2lsbCBiZSB1c2VkIHdoZW4gZGVzZXJpYWxpemluZy5cbiAgICAgKi9cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgYWRkaXRpb25hbCBhdHRyaWJ1dGVzIHRvIG1lcmdlIHdpdGggY29uc3RydWN0b3IgYXJncy5cbiAgICAgKiBLZXlzIGFyZSB0aGUgYXR0cmlidXRlIG5hbWVzLCBlLmcuIFwiZm9vXCIuXG4gICAgICogVmFsdWVzIGFyZSB0aGUgYXR0cmlidXRlIHZhbHVlcywgd2hpY2ggd2lsbCBiZSBzZXJpYWxpemVkLlxuICAgICAqIFRoZXNlIGF0dHJpYnV0ZXMgbmVlZCB0byBiZSBhY2NlcHRlZCBieSB0aGUgY29uc3RydWN0b3IgYXMgYXJndW1lbnRzLlxuICAgICAqL1xuICAgIGdldCBsY19hdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBhbGlhc2VzIGZvciBjb25zdHJ1Y3RvciBhcmdzLlxuICAgICAqIEtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGUuZy4gXCJmb29cIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBhbGlhcyB0aGF0IHdpbGwgcmVwbGFjZSB0aGUga2V5IGluIHNlcmlhbGl6YXRpb24uXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGVnLiBtYWtlIGFyZ3VtZW50IG5hbWVzIG1hdGNoIFB5dGhvbi5cbiAgICAgKi9cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioa3dhcmdzLCAuLi5fYXJncykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MgPSBrd2FyZ3MgfHwge307XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxjX3NlcmlhbGl6YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgdGhpcy5sY19rd2FyZ3MgaW5zdGFuY2VvZiBTZXJpYWxpemFibGUgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmxjX2t3YXJncyAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLmxjX2t3YXJncykpIHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdXBwb3J0IHNlcmlhbGl6YXRpb24gb2YgY2xhc3NlcyB3aXRoIGFyZyBub3QgYSBQT0pPXG4gICAgICAgICAgICAvLyBJJ20gYXdhcmUgdGhlIGNoZWNrIGFib3ZlIGlzbid0IGFzIHN0cmljdCBhcyBpdCBjb3VsZCBiZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGlhc2VzID0ge307XG4gICAgICAgIGNvbnN0IHNlY3JldHMgPSB7fTtcbiAgICAgICAgY29uc3Qga3dhcmdzID0gT2JqZWN0LmtleXModGhpcy5sY19rd2FyZ3MpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGFjY1trZXldID0ga2V5IGluIHRoaXMgPyB0aGlzW2tleV0gOiB0aGlzLmxjX2t3YXJnc1trZXldO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICAvLyBnZXQgc2VjcmV0cywgYXR0cmlidXRlcyBhbmQgYWxpYXNlcyBmcm9tIGFsbCBzdXBlcmNsYXNzZXNcbiAgICAgICAgZm9yIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgIGxldCBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpOyBjdXJyZW50OyBjdXJyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGN1cnJlbnQpKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGFsaWFzZXMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfYWxpYXNlc1wiLCB0aGlzKSk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlY3JldHMsIFJlZmxlY3QuZ2V0KGN1cnJlbnQsIFwibGNfc2VjcmV0c1wiLCB0aGlzKSk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGt3YXJncywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hdHRyaWJ1dGVzXCIsIHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbmNsdWRlIGFsbCBzZWNyZXRzIHVzZWQsIGV2ZW4gaWYgbm90IGluIGt3YXJncyxcbiAgICAgICAgLy8gd2lsbCBiZSByZXBsYWNlZCB3aXRoIHNlbnRpbmVsIHZhbHVlIGluIHJlcGxhY2VTZWNyZXRzXG4gICAgICAgIE9iamVjdC5rZXlzKHNlY3JldHMpLmZvckVhY2goKGtleVBhdGgpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcywgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IHJlYWQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIGxldCB3cml0ZSA9IGt3YXJncztcbiAgICAgICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0ga2V5UGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcGFydHNSZXZlcnNlLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiByZWFkKSB8fCByZWFkW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiB3cml0ZSkgfHwgd3JpdGVba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZFtrZXldID09PSBcIm9iamVjdFwiICYmIHJlYWRba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVtrZXldID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyZWFkW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZVtrZXldID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhZCA9IHJlYWRba2V5XTtcbiAgICAgICAgICAgICAgICB3cml0ZSA9IHdyaXRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGFzdCBpbiByZWFkICYmIHJlYWRbbGFzdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHdyaXRlW2xhc3RdID0gd3JpdGVbbGFzdF0gfHwgcmVhZFtsYXN0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwiY29uc3RydWN0b3JcIixcbiAgICAgICAgICAgIGlkOiB0aGlzLmxjX2lkLFxuICAgICAgICAgICAga3dhcmdzOiBtYXBLZXlzKE9iamVjdC5rZXlzKHNlY3JldHMpLmxlbmd0aCA/IHJlcGxhY2VTZWNyZXRzKGt3YXJncywgc2VjcmV0cykgOiBrd2FyZ3MsIGtleVRvSnNvbiwgYWxpYXNlcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRvSlNPTk5vdEltcGxlbWVudGVkKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICB0eXBlOiBcIm5vdF9pbXBsZW1lbnRlZFwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMubGNfaWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImtleVRvSnNvbiIsIm1hcEtleXMiLCJzaGFsbG93Q29weSIsIm9iaiIsIkFycmF5IiwiaXNBcnJheSIsInJlcGxhY2VTZWNyZXRzIiwicm9vdCIsInNlY3JldHNNYXAiLCJyZXN1bHQiLCJwYXRoIiwic2VjcmV0SWQiLCJPYmplY3QiLCJlbnRyaWVzIiwibGFzdCIsInBhcnRzUmV2ZXJzZSIsInNwbGl0IiwicmV2ZXJzZSIsImN1cnJlbnQiLCJwYXJ0IiwidW5kZWZpbmVkIiwibGMiLCJ0eXBlIiwiaWQiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJzZXJpYWxpemFibGVDbGFzcyIsInBhcmVudENsYXNzIiwiZ2V0UHJvdG90eXBlT2YiLCJsY05hbWVJc1N1YmNsYXNzZWQiLCJsY19uYW1lIiwibmFtZSIsIlNlcmlhbGl6YWJsZSIsImxjX2lkIiwibGNfbmFtZXNwYWNlIiwiY29uc3RydWN0b3IiLCJsY19zZWNyZXRzIiwibGNfYXR0cmlidXRlcyIsImxjX2FsaWFzZXMiLCJrd2FyZ3MiLCJfYXJncyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJ0b0pTT04iLCJsY19zZXJpYWxpemFibGUiLCJ0b0pTT05Ob3RJbXBsZW1lbnRlZCIsImFsaWFzZXMiLCJzZWNyZXRzIiwia2V5cyIsInJlZHVjZSIsImFjYyIsImtleSIsImFzc2lnbiIsIlJlZmxlY3QiLCJnZXQiLCJmb3JFYWNoIiwia2V5UGF0aCIsInJlYWQiLCJ3cml0ZSIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/ai.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/ai.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (!(rawToolCalls == null) && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (!(rawToolCalls == null) && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined) {\n            initParams = {\n                ...fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else {\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const toolCallChunk of fields.tool_call_chunks){\n                let parsedArgs = {};\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(toolCallChunk.args ?? \"{}\") ?? {};\n                    if (typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name: toolCallChunk.name ?? \"\",\n                        args: parsedArgs,\n                        id: toolCallChunk.id\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name: toolCallChunk.name,\n                        args: toolCallChunk.args,\n                        id: toolCallChunk.id,\n                        error: \"Malformed args.\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.tool_call_chunks = initParams?.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams?.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams?.invalid_tool_calls ?? this.invalid_tool_calls;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: []\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2FpLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRDtBQUMrQztBQUNoRDtBQUNuRDs7Q0FFQyxHQUNNLE1BQU1PLGtCQUFrQk4saURBQVdBO0lBQ3RDLElBQUlPLGFBQWE7UUFDYiwrQ0FBK0M7UUFDL0MsT0FBTztZQUNILEdBQUcsS0FBSyxDQUFDQSxVQUFVO1lBQ25CQyxZQUFZO1lBQ1pDLG9CQUFvQjtRQUN4QjtJQUNKO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxNQUFNLENBQUU7UUFDSixJQUFJQztRQUNKLElBQUksT0FBT0YsV0FBVyxVQUFVO1lBQzVCRSxhQUFhO2dCQUNUQyxTQUFTSDtnQkFDVEgsWUFBWSxFQUFFO2dCQUNkQyxvQkFBb0IsRUFBRTtnQkFDdEJNLG1CQUFtQkgsVUFBVSxDQUFDO1lBQ2xDO1FBQ0osT0FDSztZQUNEQyxhQUFhRjtZQUNiLE1BQU1LLGVBQWVILFdBQVdFLGlCQUFpQixFQUFFUDtZQUNuRCxNQUFNUyxZQUFZSixXQUFXTCxVQUFVO1lBQ3ZDLElBQUksQ0FBRVEsQ0FBQUEsZ0JBQWdCLElBQUcsS0FDckJBLGFBQWFFLE1BQU0sR0FBRyxLQUNyQkQsQ0FBQUEsY0FBY0UsYUFBYUYsVUFBVUMsTUFBTSxLQUFLLElBQUk7Z0JBQ3JERSxRQUFRQyxJQUFJLENBQUM7b0JBQ1Q7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0gsQ0FBQ0MsSUFBSSxDQUFDO1lBQ1g7WUFDQSxJQUFJO2dCQUNBLElBQUksQ0FBRU4sQ0FBQUEsZ0JBQWdCLElBQUcsS0FBTUMsY0FBY0UsV0FBVztvQkFDcEQsTUFBTSxDQUFDRixXQUFXTSxpQkFBaUIsR0FBR2xCLCtEQUFxQkEsQ0FBQ1c7b0JBQzVESCxXQUFXTCxVQUFVLEdBQUdTLGFBQWEsRUFBRTtvQkFDdkNKLFdBQVdK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LGdCQUFnQixLQUFLakIsYUFDMUI2QixNQUFNWixnQkFBZ0IsS0FBS2pCLFdBQVc7WUFDdEMsTUFBTUgsZUFBZVoscURBQVdBLENBQUMsSUFBSSxDQUFDZ0MsZ0JBQWdCLEVBQUVZLE1BQU1aLGdCQUFnQjtZQUM5RSxJQUFJcEIsaUJBQWlCRyxhQUFhSCxhQUFhRSxNQUFNLEdBQUcsR0FBRztnQkFDdkQrQixlQUFlYixnQkFBZ0IsR0FBR3BCO1lBQ3RDO1FBQ0o7UUFDQSxPQUFPLElBQUltQixlQUFlYztJQUM5QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2FpLmpzPzIxNmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VQYXJ0aWFsSnNvbiB9IGZyb20gXCIuLi91dGlscy9qc29uLmpzXCI7XG5pbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgX21lcmdlTGlzdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdFRvb2xDYWxsUGFyc2VyLCB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIubGNfYWxpYXNlcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IFwidG9vbF9jYWxsc1wiLFxuICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBcImludmFsaWRfdG9vbF9jYWxsc1wiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBsZXQgaW5pdFBhcmFtcztcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyA/PyB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0gZmllbGRzO1xuICAgICAgICAgICAgY29uc3QgcmF3VG9vbENhbGxzID0gaW5pdFBhcmFtcy5hZGRpdGlvbmFsX2t3YXJncz8udG9vbF9jYWxscztcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscztcbiAgICAgICAgICAgIGlmICghKHJhd1Rvb2xDYWxscyA9PSBudWxsKSAmJlxuICAgICAgICAgICAgICAgIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgKHRvb2xDYWxscyA9PT0gdW5kZWZpbmVkIHx8IHRvb2xDYWxscy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFtcbiAgICAgICAgICAgICAgICAgICAgXCJOZXcgTGFuZ0NoYWluIHBhY2thZ2VzIGFyZSBhdmFpbGFibGUgdGhhdCBtb3JlIGVmZmljaWVudGx5IGhhbmRsZVwiLFxuICAgICAgICAgICAgICAgICAgICBcInRvb2wgY2FsbGluZy5cXG5cXG5QbGVhc2UgdXBncmFkZSB5b3VyIHBhY2thZ2VzIHRvIHZlcnNpb25zIHRoYXQgc2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIFwibWVzc2FnZSB0b29sIGNhbGxzLiBlLmcuLCBgeWFybiBhZGQgQGxhbmdjaGFpbi9hbnRocm9waWNgLFwiLFxuICAgICAgICAgICAgICAgICAgICBcInlhcm4gYWRkIEBsYW5nY2hhaW4vb3BlbmFpYCwgZXRjLlwiLFxuICAgICAgICAgICAgICAgIF0uam9pbihcIiBcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIShyYXdUb29sQ2FsbHMgPT0gbnVsbCkgJiYgdG9vbENhbGxzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3Rvb2xDYWxscywgaW52YWxpZFRvb2xDYWxsc10gPSBkZWZhdWx0VG9vbENhbGxQYXJzZXIocmF3VG9vbENhbGxzKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy50b29sX2NhbGxzID0gdG9vbENhbGxzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IGludmFsaWRUb29sQ2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHBhcnNpbmcgZmFpbHNcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFNhZGx5LCBUeXBlU2NyaXB0IG9ubHkgYWxsb3dzIHN1cGVyKCkgY2FsbHMgYXQgcm9vdCBpZiB0aGUgY2xhc3MgaGFzXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aCBpbml0aWFsaXplcnMsIHNvIHdlIGhhdmUgdG8gY2hlY2sgdHlwZXMgdHdpY2UuXG4gICAgICAgIHN1cGVyKGluaXRQYXJhbXMpO1xuICAgICAgICAvLyBUaGVzZSBhcmUgdHlwZWQgYXMgb3B0aW9uYWwgdG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcyBhbmQgYWxsb3cgZm9yIGNhc3RpbmdcbiAgICAgICAgLy8gZnJvbSBCYXNlTWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludmFsaWRfdG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgaW5pdFBhcmFtcyAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzID8/IHRoaXMudG9vbF9jYWxscztcbiAgICAgICAgICAgIHRoaXMuaW52YWxpZF90b29sX2NhbGxzID1cbiAgICAgICAgICAgICAgICBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA/PyB0aGlzLmludmFsaWRfdG9vbF9jYWxscztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FJTWVzc2FnZSh4KSB7XG4gICAgcmV0dXJuIHguX2dldFR5cGUoKSA9PT0gXCJhaVwiO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYW4gQUkgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGxldCBpbml0UGFyYW1zO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmllbGRzLnRvb2xfY2FsbF9jaHVua3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRUb29sQ2FsbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbENhbGxDaHVuayBvZiBmaWVsZHMudG9vbF9jYWxsX2NodW5rcykge1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWRBcmdzID0ge307XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHBhcnNlUGFydGlhbEpzb24odG9vbENhbGxDaHVuay5hcmdzID8/IFwie31cIikgPz8ge307XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2VkQXJncyAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KHBhcnNlZEFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgdG9vbCBjYWxsIGNodW5rIGFyZ3MuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsQ2h1bmsubmFtZSA/PyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogcGFyc2VkQXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbENodW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsQ2h1bmsubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IHRvb2xDYWxsQ2h1bmsuYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbENodW5rLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IGludmFsaWRUb29sQ2FsbHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhZGx5LCBUeXBlU2NyaXB0IG9ubHkgYWxsb3dzIHN1cGVyKCkgY2FsbHMgYXQgcm9vdCBpZiB0aGUgY2xhc3MgaGFzXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aCBpbml0aWFsaXplcnMsIHNvIHdlIGhhdmUgdG8gY2hlY2sgdHlwZXMgdHdpY2UuXG4gICAgICAgIHN1cGVyKGluaXRQYXJhbXMpO1xuICAgICAgICAvLyBNdXN0IHJlZGVjbGFyZSB0b29sIGNhbGwgZmllbGRzIHNpbmNlIHRoZXJlIGlzIG5vIG11bHRpcGxlIGluaGVyaXRhbmNlIGluIEpTLlxuICAgICAgICAvLyBUaGVzZSBhcmUgdHlwZWQgYXMgb3B0aW9uYWwgdG8gYXZvaWQgYnJlYWtpbmcgY2hhbmdlcyBhbmQgYWxsb3cgZm9yIGNhc3RpbmdcbiAgICAgICAgLy8gZnJvbSBCYXNlTWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludmFsaWRfdG9vbF9jYWxsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9jaHVua3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9jaHVua3MgPVxuICAgICAgICAgICAgaW5pdFBhcmFtcz8udG9vbF9jYWxsX2NodW5rcyA/PyB0aGlzLnRvb2xfY2FsbF9jaHVua3M7XG4gICAgICAgIHRoaXMudG9vbF9jYWxscyA9IGluaXRQYXJhbXM/LnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuICAgICAgICB0aGlzLmludmFsaWRfdG9vbF9jYWxscyA9XG4gICAgICAgICAgICBpbml0UGFyYW1zPy5pbnZhbGlkX3Rvb2xfY2FsbHMgPz8gdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHM7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIubGNfYWxpYXNlcyxcbiAgICAgICAgICAgIHRvb2xfY2FsbHM6IFwidG9vbF9jYWxsc1wiLFxuICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBcImludmFsaWRfdG9vbF9jYWxsc1wiLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogXCJ0b29sX2NhbGxfY2h1bmtzXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYWlcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkRmllbGRzID0ge1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy50b29sX2NhbGxfY2h1bmtzICE9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNodW5rLnRvb2xfY2FsbF9jaHVua3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcmF3VG9vbENhbGxzID0gX21lcmdlTGlzdHModGhpcy50b29sX2NhbGxfY2h1bmtzLCBjaHVuay50b29sX2NhbGxfY2h1bmtzKTtcbiAgICAgICAgICAgIGlmIChyYXdUb29sQ2FsbHMgIT09IHVuZGVmaW5lZCAmJiByYXdUb29sQ2FsbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbWJpbmVkRmllbGRzLnRvb2xfY2FsbF9jaHVua3MgPSByYXdUb29sQ2FsbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayhjb21iaW5lZEZpZWxkcyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBhcnNlUGFydGlhbEpzb24iLCJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIl9tZXJnZUxpc3RzIiwiZGVmYXVsdFRvb2xDYWxsUGFyc2VyIiwiQUlNZXNzYWdlIiwibGNfYWxpYXNlcyIsInRvb2xfY2FsbHMiLCJpbnZhbGlkX3Rvb2xfY2FsbHMiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImt3YXJncyIsImluaXRQYXJhbXMiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyYXdUb29sQ2FsbHMiLCJ0b29sQ2FsbHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwid2FybiIsImpvaW4iLCJpbnZhbGlkVG9vbENhbGxzIiwiZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJpc0FJTWVzc2FnZSIsIngiLCJBSU1lc3NhZ2VDaHVuayIsInRvb2xfY2FsbF9jaHVua3MiLCJ0b29sQ2FsbENodW5rIiwicGFyc2VkQXJncyIsImFyZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsInB1c2giLCJuYW1lIiwiaWQiLCJlcnJvciIsImNvbmNhdCIsImNodW5rIiwiY29tYmluZWRGaWVsZHMiLCJyZXNwb25zZV9tZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return [\n            ...firstContent,\n            ...secondContent\n        ];\n    // If the first content is a list and second is a string\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            merged[key] = merged[key] + value;\n        } else if (!Array.isArray(merged[key]) && typeof merged[key] === \"object\") {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>leftItem.index === item.index);\n                if (toMerge !== -1) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVEO0FBQ2hELFNBQVNDLGFBQWFDLFlBQVksRUFBRUMsYUFBYTtJQUNwRCwrQkFBK0I7SUFDL0IsSUFBSSxPQUFPRCxpQkFBaUIsVUFBVTtRQUNsQyxJQUFJLE9BQU9DLGtCQUFrQixVQUFVO1lBQ25DLE9BQU9ELGVBQWVDO1FBQzFCLE9BQ0s7WUFDRCxPQUFPO2dCQUFDO29CQUFFQyxNQUFNO29CQUFRQyxNQUFNSDtnQkFBYTttQkFBTUM7YUFBYztRQUNuRTtJQUNBLHFCQUFxQjtJQUN6QixPQUNLLElBQUlHLE1BQU1DLE9BQU8sQ0FBQ0osZ0JBQWdCO1FBQ25DLE9BQU87ZUFBSUQ7ZUFBaUJDO1NBQWM7SUFDMUMsd0RBQXdEO0lBQzVELE9BQ0s7UUFDRCxpRUFBaUU7UUFDakUsT0FBTztlQUFJRDtZQUFjO2dCQUFFRSxNQUFNO2dCQUFRQyxNQUFNRjtZQUFjO1NBQUU7SUFDbkU7QUFDSjtBQUNBOzs7O0NBSUMsR0FDTSxNQUFNSyxvQkFBb0JSLCtEQUFZQTtJQUN6QyxJQUFJUyxhQUFhO1FBQ2IsK0NBQStDO1FBQy9DLE9BQU87WUFDSEMsbUJBQW1CO1lBQ25CQyxtQkFBbUI7UUFDdkI7SUFDSjtJQUNBOzs7S0FHQyxHQUNELElBQUlOLE9BQU87UUFDUCxPQUFPLE9BQU8sSUFBSSxDQUFDTyxPQUFPLEtBQUssV0FBVyxJQUFJLENBQUNBLE9BQU8sR0FBRztJQUM3RDtJQUNBQyxZQUFZQyxNQUFNLEVBQ2xCLGdCQUFnQixHQUNoQkMsTUFBTSxDQUFFO1FBQ0osSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsNkNBQTZDO1lBQzdDQSxTQUFTO2dCQUNMRixTQUFTRTtnQkFDVEosbUJBQW1CSztnQkFDbkJKLG1CQUFtQixDQUFDO1lBQ3hCO1FB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O0FBQ0E7Ozs7OztDQU1DLEdBQ00sTUFBTWEseUJBQXlCdkM7QUFDdEM7QUFDTyxTQUFTd0MsY0FBY0MsV0FBVztJQUNyQyxPQUFPLE9BQU9BLGFBQWF6QixhQUFhO0FBQzVDO0FBQ08sU0FBUzBCLG1CQUFtQkQsV0FBVztJQUMxQyxPQUFRRCxjQUFjQyxnQkFDbEIsT0FBT0EsWUFBWUUsTUFBTSxLQUFLO0FBQ3RDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Jhc2UuanM/ZTE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbnRlbnQoZmlyc3RDb250ZW50LCBzZWNvbmRDb250ZW50KSB7XG4gICAgLy8gSWYgZmlyc3QgY29udGVudCBpcyBhIHN0cmluZ1xuICAgIGlmICh0eXBlb2YgZmlyc3RDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2Vjb25kQ29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0Q29udGVudCArIHNlY29uZENvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGZpcnN0Q29udGVudCB9LCAuLi5zZWNvbmRDb250ZW50XTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBib3RoIGFyZSBhcnJheXNcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShzZWNvbmRDb250ZW50KSkge1xuICAgICAgICByZXR1cm4gWy4uLmZpcnN0Q29udGVudCwgLi4uc2Vjb25kQ29udGVudF07XG4gICAgICAgIC8vIElmIHRoZSBmaXJzdCBjb250ZW50IGlzIGEgbGlzdCBhbmQgc2Vjb25kIGlzIGEgc3RyaW5nXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UsIGFkZCB0aGUgc2Vjb25kIGNvbnRlbnQgYXMgYSBuZXcgZWxlbWVudCBvZiB0aGUgbGlzdFxuICAgICAgICByZXR1cm4gWy4uLmZpcnN0Q29udGVudCwgeyB0eXBlOiBcInRleHRcIiwgdGV4dDogc2Vjb25kQ29udGVudCB9XTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCB0eXBlcyBvZiBtZXNzYWdlcyBpbiBhIGNvbnZlcnNhdGlvbi4gSXQgaW5jbHVkZXNcbiAqIHByb3BlcnRpZXMgbGlrZSBgY29udGVudGAsIGBuYW1lYCwgYW5kIGBhZGRpdGlvbmFsX2t3YXJnc2AuIEl0IGFsc29cbiAqIGluY2x1ZGVzIG1ldGhvZHMgbGlrZSBgdG9EaWN0KClgIGFuZCBgX2dldFR5cGUoKWAuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogXCJhZGRpdGlvbmFsX2t3YXJnc1wiLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IFwicmVzcG9uc2VfbWV0YWRhdGFcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBVc2Uge0BsaW5rIEJhc2VNZXNzYWdlLmNvbnRlbnR9IGluc3RlYWQuXG4gICAgICovXG4gICAgZ2V0IHRleHQoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5jb250ZW50ID09PSBcInN0cmluZ1wiID8gdGhpcy5jb250ZW50IDogXCJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBrd2FyZ3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcyxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoga3dhcmdzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBkZWZhdWx0IHZhbHVlIGZvciBhZGRpdGlvbmFsX2t3YXJncyBpcyBwYXNzZWQgaW50byBzdXBlcigpIGZvciBzZXJpYWxpemF0aW9uXG4gICAgICAgIGlmICghZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJtZXNzYWdlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbnRlbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBuYW1lIG9mIHRoZSBtZXNzYWdlIHNlbmRlciBpbiBhIG11bHRpLXVzZXIgY2hhdC4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogQWRkaXRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGRpdGlvbmFsX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogUmVzcG9uc2UgbWV0YWRhdGEuIEZvciBleGFtcGxlOiByZXNwb25zZSBoZWFkZXJzLCBsb2dwcm9icywgdG9rZW4gY291bnRzLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXNwb25zZV9tZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZHMubmFtZTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gZmllbGRzLmNvbnRlbnQ7XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MgPSBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3M7XG4gICAgICAgIHRoaXMucmVzcG9uc2VfbWV0YWRhdGEgPSBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGE7XG4gICAgfVxuICAgIHRvRGljdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMuX2dldFR5cGUoKSxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMudG9KU09OKClcbiAgICAgICAgICAgICAgICAua3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09wZW5BSVRvb2xDYWxsQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIHZhbHVlLmV2ZXJ5KCh2KSA9PiB0eXBlb2Ygdi5pbmRleCA9PT0gXCJudW1iZXJcIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9tZXJnZURpY3RzKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmxlZnQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJpZ2h0XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgY29uc3QgbWVyZ2VkID0geyAuLi5sZWZ0IH07XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmlnaHQpKSB7XG4gICAgICAgIGlmIChtZXJnZWRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSAhPT0gdHlwZW9mIHZhbHVlIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSAhPT0gQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmllbGRbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbWVzc2FnZSBjaHVuaywgYnV0IHdpdGggYSBkaWZmZXJlbnQgdHlwZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VkW2tleV0gKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgJiYgdHlwZW9mIG1lcmdlZFtrZXldID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZURpY3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gX21lcmdlTGlzdHMobWVyZ2VkW2tleV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXJnZWRba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuayBhbmQgdmFsdWUgaGFzIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbn1cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlTGlzdHMobGVmdCwgcmlnaHQpIHtcbiAgICBpZiAobGVmdCA9PT0gdW5kZWZpbmVkICYmIHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAobGVmdCA9PT0gdW5kZWZpbmVkIHx8IHJpZ2h0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQgfHwgcmlnaHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBbLi4ubGVmdF07XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByaWdodCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgXCJpbmRleFwiIGluIGl0ZW0gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbS5pbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvTWVyZ2UgPSBtZXJnZWQuZmluZEluZGV4KChsZWZ0SXRlbSkgPT4gbGVmdEl0ZW0uaW5kZXggPT09IGl0ZW0uaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICh0b01lcmdlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRbdG9NZXJnZV0gPSBfbWVyZ2VEaWN0cyhtZXJnZWRbdG9NZXJnZV0sIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuICogbWVzc2FnZSBjaHVua3MuIEl0IGluY2x1ZGVzIGEgbWV0aG9kIGBfbWVyZ2Vfa3dhcmdzX2RpY3QoKWAgZm9yIG1lcmdpbmdcbiAqIGFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgZnJvbSBhbm90aGVyIGBCYXNlTWVzc2FnZUNodW5rYCBpbnRvIHRoaXNcbiAqIG9uZS4gSXQgYWxzbyBvdmVycmlkZXMgdGhlIGBfX2FkZF9fKClgIG1ldGhvZCB0byBzdXBwb3J0IGNvbmNhdGVuYXRpb25cbiAqIG9mIGBCYXNlTWVzc2FnZUNodW5rYCBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2VMaWtlPy5fZ2V0VHlwZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2VDaHVuayhtZXNzYWdlTGlrZSkge1xuICAgIHJldHVybiAoaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkgJiZcbiAgICAgICAgdHlwZW9mIG1lc3NhZ2VMaWtlLmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiKTtcbn1cbiJdLCJuYW1lcyI6WyJTZXJpYWxpemFibGUiLCJtZXJnZUNvbnRlbnQiLCJmaXJzdENvbnRlbnQiLCJzZWNvbmRDb250ZW50IiwidHlwZSIsInRleHQiLCJBcnJheSIsImlzQXJyYXkiLCJCYXNlTWVzc2FnZSIsImxjX2FsaWFzZXMiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiY29udGVudCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm5hbWUiLCJ0b0RpY3QiLCJfZ2V0VHlwZSIsImRhdGEiLCJ0b0pTT04iLCJpc09wZW5BSVRvb2xDYWxsQXJyYXkiLCJldmVyeSIsInYiLCJpbmRleCIsIl9tZXJnZURpY3RzIiwibGVmdCIsInJpZ2h0IiwibWVyZ2VkIiwia2V5IiwiZW50cmllcyIsIkVycm9yIiwiX21lcmdlTGlzdHMiLCJjb25zb2xlIiwid2FybiIsInVuZGVmaW5lZCIsIml0ZW0iLCJ0b01lcmdlIiwiZmluZEluZGV4IiwibGVmdEl0ZW0iLCJwdXNoIiwiQmFzZU1lc3NhZ2VDaHVuayIsImlzQmFzZU1lc3NhZ2UiLCJtZXNzYWdlTGlrZSIsImlzQmFzZU1lc3NhZ2VDaHVuayIsImNvbmNhdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/chat.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/chat.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2NoYXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksb0JBQW9CSixpREFBV0E7SUFDeEMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLE9BQU9DLG9CQUFvQjtRQUN2QixPQUFPRjtJQUNYO0lBQ0FHLFlBQVlDLE1BQU0sRUFBRUMsSUFBSSxDQUFFO1FBQ3RCLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDLE1BQU1BO1lBQUs7UUFDM0M7UUFDQSxLQUFLLENBQUNEO1FBQ05HLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDUCxJQUFJLEdBQUdELE9BQU9DLElBQUk7SUFDM0I7SUFDQVEsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLE9BQU9DLFdBQVdDLE9BQU8sRUFBRTtRQUN2QixPQUFPQSxRQUFRRixRQUFRLE9BQU87SUFDbEM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1HLHlCQUF5Qm5CLHNEQUFnQkE7SUFDbEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBRSxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1AsSUFBSSxHQUFHRCxPQUFPQyxJQUFJO0lBQzNCO0lBQ0FRLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUksT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixpQkFBaUI7WUFDeEJWLFNBQVNSLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1EsT0FBTyxFQUFFWSxNQUFNWixPQUFPO1lBQ2pEYSxtQkFBbUJwQixxREFBV0EsQ0FBQyxJQUFJLENBQUNvQixpQkFBaUIsRUFBRUQsTUFBTUMsaUJBQWlCO1lBQzlFQyxtQkFBbUJyQixxREFBV0EsQ0FBQyxJQUFJLENBQUNxQixpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFZixNQUFNLElBQUksQ0FBQ0EsSUFBSTtRQUNuQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvY2hhdC5qcz80NWI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYXQgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NoYXRNZXNzYWdlQ2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBDaGF0TWVzc2FnZTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgc3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGNoYXQgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0TWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHJvbGU6IHRoaXMucm9sZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiQ2hhdE1lc3NhZ2UiLCJsY19uYW1lIiwiX2NoYXRNZXNzYWdlQ2xhc3MiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsInJvbGUiLCJjb250ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsIm1lc3NhZ2UiLCJDaGF0TWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/function.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/function.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2Z1bmN0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLHdCQUF3QkosaURBQVdBO0lBQzVDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLElBQUksQ0FBRTtRQUNGLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDLE1BQU1BO1lBQUs7UUFDM0M7UUFDQSxLQUFLLENBQUNEO0lBQ1Y7SUFDQUcsV0FBVztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMsNkJBQTZCVixzREFBZ0JBO0lBQ3RELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUssV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBRSxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLHFCQUFxQjtZQUM1QkYsU0FBU1Asc0RBQVlBLENBQUMsSUFBSSxDQUFDTyxPQUFPLEVBQUVJLE1BQU1KLE9BQU87WUFDakRLLG1CQUFtQlgscURBQVdBLENBQUMsSUFBSSxDQUFDVyxpQkFBaUIsRUFBRUQsTUFBTUMsaUJBQWlCO1lBQzlFQyxtQkFBbUJaLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1ksaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RVAsTUFBTSxJQUFJLENBQUNBLElBQUksSUFBSTtRQUN2QjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvZnVuY3Rpb24uanM/OGE2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBmdW5jdGlvbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lOiBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBmdW5jdGlvbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkXG4gKiB3aXRoIG90aGVyIGZ1bmN0aW9uIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgPz8gXCJcIixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiRnVuY3Rpb25NZXNzYWdlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwibmFtZSIsImNvbnRlbnQiLCJfZ2V0VHlwZSIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/human.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/human.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2h1bWFuLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLHFCQUFxQkosaURBQVdBO0lBQ3pDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsV0FBVztRQUNQLE9BQU87SUFDWDtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMsMEJBQTBCTixzREFBZ0JBO0lBQ25ELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBRSxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLGtCQUFrQjtZQUN6QkcsU0FBU1Isc0RBQVlBLENBQUMsSUFBSSxDQUFDUSxPQUFPLEVBQUVELE1BQU1DLE9BQU87WUFDakRDLG1CQUFtQlIscURBQVdBLENBQUMsSUFBSSxDQUFDUSxpQkFBaUIsRUFBRUYsTUFBTUUsaUJBQWlCO1lBQzlFQyxtQkFBbUJULHFEQUFXQSxDQUFDLElBQUksQ0FBQ1MsaUJBQWlCLEVBQUVILE1BQU1HLGlCQUFpQjtRQUNsRjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaHVtYW4uanM/MTFlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBodW1hbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgSHVtYW5NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJIdW1hbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImh1bWFuXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBodW1hbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGh1bWFuIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgSHVtYW5NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSHVtYW5NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImh1bWFuXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIkh1bWFuTWVzc2FnZSIsImxjX25hbWUiLCJfZ2V0VHlwZSIsIkh1bWFuTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJjb250ZW50IiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.convertToChunk),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIToolCallArray),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)\n/* harmony export */ });\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n// TODO: Use a star export when we deprecate the\n// existing \"ToolCall\" type in \"base.js\".\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0U7QUFDQTtBQUNJO0FBQ0g7QUFDQztBQUNEO0FBQzNCLGdEQUFnRDtBQUNoRCx5Q0FBeUM7QUFDa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanM/YThiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9haS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY2hhdC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2h1bWFuLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3V0aWxzLmpzXCI7XG4vLyBUT0RPOiBVc2UgYSBzdGFyIGV4cG9ydCB3aGVuIHdlIGRlcHJlY2F0ZSB0aGVcbi8vIGV4aXN0aW5nIFwiVG9vbENhbGxcIiB0eXBlIGluIFwiYmFzZS5qc1wiLlxuZXhwb3J0IHsgVG9vbE1lc3NhZ2UsIFRvb2xNZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vdG9vbC5qc1wiO1xuIl0sIm5hbWVzIjpbIlRvb2xNZXNzYWdlIiwiVG9vbE1lc3NhZ2VDaHVuayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/system.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/system.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3N5c3RlbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxzQkFBc0JKLGlEQUFXQTtJQUMxQyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDJCQUEyQk4sc0RBQWdCQTtJQUNwRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixtQkFBbUI7WUFDMUJHLFNBQVNSLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1EsT0FBTyxFQUFFRCxNQUFNQyxPQUFPO1lBQ2pEQyxtQkFBbUJSLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1EsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RUMsbUJBQW1CVCxxREFBV0EsQ0FBQyxJQUFJLENBQUNTLGlCQUFpQixFQUFFSCxNQUFNRyxpQkFBaUI7UUFDbEY7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3N5c3RlbS5qcz9iNjNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIHN5c3RlbSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3lzdGVtTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBzeXN0ZW0gbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBzeXN0ZW0gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3lzdGVtTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIlN5c3RlbU1lc3NhZ2UiLCJsY19uYW1lIiwiX2dldFR5cGUiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_id: this.tool_call_id\n        });\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3Rvb2wuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLG9CQUFvQkosaURBQVdBO0lBQ3hDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsK0NBQStDO1FBQy9DLE9BQU87WUFBRUMsY0FBYztRQUFlO0lBQzFDO0lBQ0FDLFlBQVlDLE1BQU0sRUFBRUYsWUFBWSxFQUFFRyxJQUFJLENBQUU7UUFDcEMsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUM7Z0JBQU1ILGNBQWNBO1lBQWE7UUFDakU7UUFDQSxLQUFLLENBQUNFO1FBQ05HLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNWLFlBQVksR0FBR0UsT0FBT0YsWUFBWTtJQUMzQztJQUNBVyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0EsT0FBT0MsV0FBV0MsT0FBTyxFQUFFO1FBQ3ZCLE9BQU9BLFFBQVFGLFFBQVEsT0FBTztJQUNsQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcseUJBQXlCcEIsc0RBQWdCQTtJQUNsRE8sWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsWUFBWSxHQUFHRSxPQUFPRixZQUFZO0lBQzNDO0lBQ0EsT0FBT0YsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBYSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FJLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsaUJBQWlCO1lBQ3hCVixTQUFTVCxzREFBWUEsQ0FBQyxJQUFJLENBQUNTLE9BQU8sRUFBRVksTUFBTVosT0FBTztZQUNqRGEsbUJBQW1CckIscURBQVdBLENBQUMsSUFBSSxDQUFDcUIsaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CdEIscURBQVdBLENBQUMsSUFBSSxDQUFDc0IsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RWxCLGNBQWMsSUFBSSxDQUFDQSxZQUFZO1FBQ25DO0lBQ0o7QUFDSjtBQUNPLFNBQVNtQixzQkFDaEIsOERBQThEO0FBQzlEQyxZQUFZO0lBQ1IsTUFBTUMsWUFBWSxFQUFFO0lBQ3BCLE1BQU1DLG1CQUFtQixFQUFFO0lBQzNCLEtBQUssTUFBTUMsWUFBWUgsYUFBYztRQUNqQyxJQUFJLENBQUNHLFNBQVNDLFFBQVEsRUFBRTtZQUNwQjtRQUNKLE9BQ0s7WUFDRCxNQUFNQyxlQUFlRixTQUFTQyxRQUFRLENBQUNyQixJQUFJO1lBQzNDLElBQUk7Z0JBQ0EsTUFBTXVCLGVBQWVDLEtBQUtDLEtBQUssQ0FBQ0wsU0FBU0MsUUFBUSxDQUFDSyxTQUFTO2dCQUMzRCxNQUFNQyxTQUFTO29CQUNYM0IsTUFBTXNCLGdCQUFnQjtvQkFDdEJNLE1BQU1MLGdCQUFnQixDQUFDO29CQUN2Qk0sSUFBSVQsU0FBU1MsRUFBRTtnQkFDbkI7Z0JBQ0FYLFVBQVVZLElBQUksQ0FBQ0g7WUFDbkIsRUFDQSxPQUFPSSxPQUFPO2dCQUNWWixpQkFBaUJXLElBQUksQ0FBQztvQkFDbEI5QixNQUFNc0I7b0JBQ05NLE1BQU1SLFNBQVNDLFFBQVEsQ0FBQ0ssU0FBUztvQkFDakNHLElBQUlULFNBQVNTLEVBQUU7b0JBQ2ZFLE9BQU87Z0JBQ1g7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO1FBQUNiO1FBQVdDO0tBQWlCO0FBQ3hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3Rvb2wuanM/ZmM3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlTWVzc2FnZSwgQmFzZU1lc3NhZ2VDaHVuaywgbWVyZ2VDb250ZW50LCBfbWVyZ2VEaWN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIFJlcHJlc2VudHMgYSB0b29sIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sTWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9vbE1lc3NhZ2VcIjtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7IHRvb2xfY2FsbF9pZDogXCJ0b29sX2NhbGxfaWRcIiB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHRvb2xfY2FsbF9pZCwgbmFtZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgbmFtZSwgdG9vbF9jYWxsX2lkOiB0b29sX2NhbGxfaWQgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbnN0YW5jZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwidG9vbFwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgdG9vbCBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkXG4gKiB3aXRoIG90aGVyIHRvb2wgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9pZCA9IGZpZWxkcy50b29sX2NhbGxfaWQ7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdGhpcy50b29sX2NhbGxfaWQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0VG9vbENhbGxQYXJzZXIoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucmF3VG9vbENhbGxzKSB7XG4gICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgY29uc3QgaW52YWxpZFRvb2xDYWxscyA9IFtdO1xuICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgcmF3VG9vbENhbGxzKSB7XG4gICAgICAgIGlmICghdG9vbENhbGwuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25BcmdzID0gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3M6IGZ1bmN0aW9uQXJncyB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdG9vbENhbGxzLnB1c2gocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGludmFsaWRUb29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJnczogdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIk1hbGZvcm1lZCBhcmdzLlwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbdG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXTtcbn1cbiJdLCJuYW1lcyI6WyJCYXNlTWVzc2FnZSIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJtZXJnZUNvbnRlbnQiLCJfbWVyZ2VEaWN0cyIsIlRvb2xNZXNzYWdlIiwibGNfbmFtZSIsImxjX2FsaWFzZXMiLCJ0b29sX2NhbGxfaWQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIm5hbWUiLCJjb250ZW50IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsIm1lc3NhZ2UiLCJUb29sTWVzc2FnZUNodW5rIiwiY29uY2F0IiwiY2h1bmsiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIiwiZGVmYXVsdFRvb2xDYWxsUGFyc2VyIiwicmF3VG9vbENhbGxzIiwidG9vbENhbGxzIiwiaW52YWxpZFRvb2xDYWxscyIsInRvb2xDYWxsIiwiZnVuY3Rpb24iLCJmdW5jdGlvbk5hbWUiLCJmdW5jdGlvbkFyZ3MiLCJKU09OIiwicGFyc2UiLCJhcmd1bWVudHMiLCJwYXJzZWQiLCJhcmdzIiwiaWQiLCJwdXNoIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/utils.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/utils.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    const [type, content] = messageLike;\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n            content\n        });\n    } else if (type === \"ai\" || type === \"assistant\") {\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage({\n            content\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage({\n            content\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        string_messages.push(`${role}: ${nameStr}${m.content}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_6__.ToolMessage(storedMessage.data);\n        case \"chat\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n            ...message\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDa0I7QUFDVDtBQUNZO0FBQ0w7QUFDWTtBQUMvQjtBQUNqQyxTQUFTWSwyQkFBMkJDLFdBQVc7SUFDbEQsSUFBSSxPQUFPQSxnQkFBZ0IsVUFBVTtRQUNqQyxPQUFPLElBQUlaLG1EQUFZQSxDQUFDWTtJQUM1QixPQUNLLElBQUliLHVEQUFhQSxDQUFDYSxjQUFjO1FBQ2pDLE9BQU9BO0lBQ1g7SUFDQSxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR0Y7SUFDeEIsSUFBSUMsU0FBUyxXQUFXQSxTQUFTLFFBQVE7UUFDckMsT0FBTyxJQUFJYixtREFBWUEsQ0FBQztZQUFFYztRQUFRO0lBQ3RDLE9BQ0ssSUFBSUQsU0FBUyxRQUFRQSxTQUFTLGFBQWE7UUFDNUMsT0FBTyxJQUFJWCw2Q0FBU0EsQ0FBQztZQUFFWTtRQUFRO0lBQ25DLE9BQ0ssSUFBSUQsU0FBUyxVQUFVO1FBQ3hCLE9BQU8sSUFBSVQscURBQWFBLENBQUM7WUFBRVU7UUFBUTtJQUN2QyxPQUNLO1FBQ0QsTUFBTSxJQUFJQyxNQUFNLENBQUMsdUdBQXVHLENBQUM7SUFDN0g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLFNBQVNDLGdCQUFnQkMsUUFBUSxFQUFFQyxjQUFjLE9BQU8sRUFBRUMsV0FBVyxJQUFJO0lBQzVFLE1BQU1DLGtCQUFrQixFQUFFO0lBQzFCLEtBQUssTUFBTUMsS0FBS0osU0FBVTtRQUN0QixJQUFJSztRQUNKLElBQUlELEVBQUVFLFFBQVEsT0FBTyxTQUFTO1lBQzFCRCxPQUFPSjtRQUNYLE9BQ0ssSUFBSUcsRUFBRUUsUUFBUSxPQUFPLE1BQU07WUFDNUJELE9BQU9IO1FBQ1gsT0FDSyxJQUFJRSxFQUFFRSxRQUFRLE9BQU8sVUFBVTtZQUNo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QSxDQUFDO1lBQUUsR0FBRzBCLE9BQU87UUFBQztJQUMzQyxPQUNLLElBQUloQixTQUFTLFVBQVU7UUFDeEIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSVIsMERBQWtCQSxDQUFDO1lBQUUsR0FBR3dCLE9BQU87UUFBQztJQUMvQyxPQUNLLElBQUloQixTQUFTLFlBQVk7UUFDMUIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSUosOERBQW9CQSxDQUFDO1lBQUUsR0FBR29CLE9BQU87UUFBQztJQUM3QyxtRUFBbUU7SUFDdkUsT0FDSyxJQUFJdkIsaURBQVdBLENBQUNvQyxVQUFVLENBQUNiLFVBQVU7UUFDdEMsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSXRCLHNEQUFnQkEsQ0FBQztZQUFFLEdBQUdzQixPQUFPO1FBQUM7SUFDN0MsT0FDSztRQUNELE1BQU0sSUFBSWQsTUFBTTtJQUNwQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L21lc3NhZ2VzL3V0aWxzLmpzPzFkYzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBIdW1hbk1lc3NhZ2UsIEh1bWFuTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vaHVtYW4uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZSwgQUlNZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9haS5qc1wiO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZSwgU3lzdGVtTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4vc3lzdGVtLmpzXCI7XG5pbXBvcnQgeyBDaGF0TWVzc2FnZSwgQ2hhdE1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbk1lc3NhZ2UsIEZ1bmN0aW9uTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBUb29sTWVzc2FnZSB9IGZyb20gXCIuL3Rvb2wuanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUxpa2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobWVzc2FnZUxpa2UpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZUxpa2U7XG4gICAgfVxuICAgIGNvbnN0IFt0eXBlLCBjb250ZW50XSA9IG1lc3NhZ2VMaWtlO1xuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIgfHwgdHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImFpXCIgfHwgdHlwZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZSh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvZXJjZSBtZXNzYWdlIGZyb20gYXJyYXk6IG9ubHkgaHVtYW4sIEFJLCBvciBzeXN0ZW0gbWVzc2FnZSBjb2VyY2lvbiBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJ5IG1lbW9yeSBjbGFzc2VzIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIGNoYXQgbWVzc2FnZSBoaXN0b3J5LCBiYXNlZCBvbiB0aGUgbWVzc2FnZSBjb250ZW50IGFuZCByb2xlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QnVmZmVyU3RyaW5nKG1lc3NhZ2VzLCBodW1hblByZWZpeCA9IFwiSHVtYW5cIiwgYWlQcmVmaXggPSBcIkFJXCIpIHtcbiAgICBjb25zdCBzdHJpbmdfbWVzc2FnZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG0gb2YgbWVzc2FnZXMpIHtcbiAgICAgICAgbGV0IHJvbGU7XG4gICAgICAgIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAgICAgcm9sZSA9IGh1bWFuUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJhaVwiKSB7XG4gICAgICAgICAgICByb2xlID0gYWlQcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJTeXN0ZW1cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiRnVuY3Rpb25cIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJUb29sXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImdlbmVyaWNcIikge1xuICAgICAgICAgICAgcm9sZSA9IG0ucm9sZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuc3VwcG9ydGVkIG1lc3NhZ2UgdHlwZTogJHttLl9nZXRUeXBlKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZVN0ciA9IG0ubmFtZSA/IGAke20ubmFtZX0sIGAgOiBcIlwiO1xuICAgICAgICBzdHJpbmdfbWVzc2FnZXMucHVzaChgJHtyb2xlfTogJHtuYW1lU3RyfSR7bS5jb250ZW50fWApO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nX21lc3NhZ2VzLmpvaW4oXCJcXG5cIik7XG59XG4vKipcbiAqIE1hcHMgbWVzc2FnZXMgZnJvbSBhbiBvbGRlciBmb3JtYXQgKFYxKSB0byB0aGUgY3VycmVudCBgU3RvcmVkTWVzc2FnZWBcbiAqIGZvcm1hdC4gSWYgdGhlIG1lc3NhZ2UgaXMgYWxyZWFkeSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgaXQgaXNcbiAqIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGl0IHRyYW5zZm9ybXMgdGhlIFYxIG1lc3NhZ2UgaW50byBhXG4gKiBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb24gaXMgaW1wb3J0YW50IGZvciBtYWludGFpbmluZ1xuICogY29tcGF0aWJpbGl0eSB3aXRoIG9sZGVyIG1lc3NhZ2UgZm9ybWF0cy5cbiAqL1xuZnVuY3Rpb24gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBtYXBwZXIgd2hlbiB3ZSBkZXByZWNhdGUgdGhlIG9sZCBtZXNzYWdlIGZvcm1hdC5cbiAgICBpZiAobWVzc2FnZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB2MU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdjFNZXNzYWdlLnR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogdjFNZXNzYWdlLnRleHQsXG4gICAgICAgICAgICAgICAgcm9sZTogdjFNZXNzYWdlLnJvbGUsXG4gICAgICAgICAgICAgICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IHN0b3JlZE1lc3NhZ2UgPSBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgc3dpdGNoIChzdG9yZWRNZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImh1bWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiYWlcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJzeXN0ZW1cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEubmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFtZSBtdXN0IGJlIGRlZmluZWQgZm9yIGZ1bmN0aW9uIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInRvb2xcIjpcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEudG9vbF9jYWxsX2lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb29sIGNhbGwgSUQgbXVzdCBiZSBkZWZpbmVkIGZvciB0b29sIG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwiY2hhdFwiOiB7XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLnJvbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJvbGUgbXVzdCBiZSBkZWZpbmVkIGZvciBjaGF0IG1lc3NhZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bmV4cGVjdGVkIHR5cGU6ICR7c3RvcmVkTWVzc2FnZS50eXBlfWApO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiAqIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCB1c2VzIHRoZSBgbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlYFxuICogZnVuY3Rpb24gdG8gZW5zdXJlIGFsbCBtZXNzYWdlcyBhcmUgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIHRoZW5cbiAqIGNyZWF0ZXMgbmV3IGluc3RhbmNlcyBvZiB0aGUgYXBwcm9wcmlhdGUgYEJhc2VNZXNzYWdlYCBzdWJjbGFzcyBiYXNlZFxuICogb24gdGhlIHR5cGUgb2YgZWFjaCBtZXNzYWdlLiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJlcGFyZSBzdG9yZWRcbiAqIG1lc3NhZ2VzIGZvciB1c2UgaW4gYSBjaGF0IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcChtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgb2YgYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgZG9lcyB0aGlzIGJ5IGNhbGxpbmcgdGhlIGB0b0RpY3RgIG1ldGhvZFxuICogb24gZWFjaCBgQmFzZU1lc3NhZ2VgLCB3aGljaCByZXR1cm5zIGEgYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uXG4gKiBpcyB1c2VkIHRvIHByZXBhcmUgY2hhdCBtZXNzYWdlcyBmb3Igc3RvcmFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKChtZXNzYWdlKSA9PiBtZXNzYWdlLnRvRGljdCgpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9DaHVuayhtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBpZiAodHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgIH1cbiAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gbWVzc2FnZSB0eXBlLlwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNCYXNlTWVzc2FnZSIsIkh1bWFuTWVzc2FnZSIsIkh1bWFuTWVzc2FnZUNodW5rIiwiQUlNZXNzYWdlIiwiQUlNZXNzYWdlQ2h1bmsiLCJTeXN0ZW1NZXNzYWdlIiwiU3lzdGVtTWVzc2FnZUNodW5rIiwiQ2hhdE1lc3NhZ2UiLCJDaGF0TWVzc2FnZUNodW5rIiwiRnVuY3Rpb25NZXNzYWdlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJUb29sTWVzc2FnZSIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwibWVzc2FnZUxpa2UiLCJ0eXBlIiwiY29udGVudCIsIkVycm9yIiwiZ2V0QnVmZmVyU3RyaW5nIiwibWVzc2FnZXMiLCJodW1hblByZWZpeCIsImFpUHJlZml4Iiwic3RyaW5nX21lc3NhZ2VzIiwibSIsInJvbGUiLCJfZ2V0VHlwZSIsIm5hbWVTdHIiLCJuYW1lIiwicHVzaCIsImpvaW4iLCJtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UiLCJtZXNzYWdlIiwiZGF0YSIsInVuZGVmaW5lZCIsInYxTWVzc2FnZSIsInRleHQiLCJ0b29sX2NhbGxfaWQiLCJtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSIsInN0b3JlZE1lc3NhZ2UiLCJtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzIiwibWFwIiwibWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyIsInRvRGljdCIsImNvbnZlcnRUb0NodW5rIiwiaXNJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/outputs.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/outputs.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsVUFBVSxRQUFRO0FBQy9COztDQUVDLEdBQ00sTUFBTUM7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLDhEQUE4RDtRQUM5REwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsSUFBSSxHQUFHUCxPQUFPTyxJQUFJO1FBQ3ZCLElBQUksQ0FBQ0MsY0FBYyxHQUFHUixPQUFPUSxjQUFjO0lBQy9DO0lBQ0FDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSVosZ0JBQWdCO1lBQ3ZCUyxNQUFNLElBQUksQ0FBQ0EsSUFBSSxHQUFHRyxNQUFNSCxJQUFJO1lBQzVCQyxnQkFBZ0I7Z0JBQ1osR0FBRyxJQUFJLENBQUNBLGNBQWM7Z0JBQ3RCLEdBQUdFLE1BQU1GLGNBQWM7WUFDM0I7UUFDSjtJQUNKO0FBQ0o7QUFDTyxNQUFNRyw0QkFBNEJiO0lBQ3JDQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ00sT0FBTyxHQUFHWixPQUFPWSxPQUFPO0lBQ2pDO0lBQ0FILE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUMsb0JBQW9CO1lBQzNCSixNQUFNLElBQUksQ0FBQ0EsSUFBSSxHQUFHRyxNQUFNSCxJQUFJO1lBQzVCQyxnQkFBZ0I7Z0JBQ1osR0FBRyxJQUFJLENBQUNBLGNBQWM7Z0JBQ3RCLEdBQUdFLE1BQU1GLGNBQWM7WUFDM0I7WUFDQUksU0FBUyxJQUFJLENBQUNBLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDQyxNQUFNRSxPQUFPO1FBQzlDO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRzLmpzP2RlYTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IFJVTl9LRVkgPSBcIl9fcnVuXCI7XG4vKipcbiAqIENodW5rIG9mIGEgc2luZ2xlIGdlbmVyYXRpb24uIFVzZWQgZm9yIHN0cmVhbWluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdlbmVyYXRpb25DaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRleHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2VuZXJhdGlvbkluZm9cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50ZXh0ID0gZmllbGRzLnRleHQ7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGlvbkluZm8gPSBmaWVsZHMuZ2VuZXJhdGlvbkluZm87XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHQgKyBjaHVuay50ZXh0LFxuICAgICAgICAgICAgZ2VuZXJhdGlvbkluZm86IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgICAgIC4uLmNodW5rLmdlbmVyYXRpb25JbmZvLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENoYXRHZW5lcmF0aW9uQ2h1bmsgZXh0ZW5kcyBHZW5lcmF0aW9uQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGZpZWxkcy5tZXNzYWdlO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCArIGNodW5rLnRleHQsXG4gICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLmNvbmNhdChjaHVuay5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJVTl9LRVkiLCJHZW5lcmF0aW9uQ2h1bmsiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkluZm8iLCJjb25jYXQiLCJjaHVuayIsIkNoYXRHZW5lcmF0aW9uQ2h1bmsiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/prompt_values.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/prompt_values.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdF92YWx1ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNEO0FBQ2U7QUFDckU7O0NBRUMsR0FDTSxNQUFNRyx3QkFBd0JILCtEQUFZQTtBQUNqRDtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1JLDBCQUEwQkQ7SUFDbkMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLLENBQUM7WUFBRUE7UUFBTTtRQUNkQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztnQkFBQztnQkFBa0I7YUFBZ0I7UUFDOUM7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87UUFDWDtRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0EsS0FBSyxHQUFHQTtJQUNqQjtJQUNBTSxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUNOLEtBQUs7SUFDckI7SUFDQU8saUJBQWlCO1FBQ2IsT0FBTztZQUFDLElBQUliLDREQUFZQSxDQUFDLElBQUksQ0FBQ00sS0FBSztTQUFFO0lBQ3pDO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNUSx3QkFBd0JaO0lBQ2pDLE9BQU9FLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWVUsTUFBTSxDQUFFO1FBQ2hCLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsU0FBUztZQUN2Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVHLFVBQVVIO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDWSxRQUFRLEdBQUdILE9BQU9HLFFBQVE7SUFDbkM7SUFDQU4sV0FBVztRQUNQLE9BQU9YLG1FQUFlQSxDQUFDLElBQUksQ0FBQ2lCLFFBQVE7SUFDeEM7SUFDQUwsaUJBQWlCO1FBQ2IsT0FBTyxJQUFJLENBQUNLLFFBQVE7SUFDeEI7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLHlCQUF5QmpCO0lBQ2xDLE9BQU9FLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsWUFBWVUsTUFBTSxDQUFFO1FBQ2hCLElBQUksQ0FBRSxlQUFjQSxNQUFLLEdBQUk7WUFDekIsNkNBQTZDO1lBQzdDQSxTQUFTO2dCQUFFSyxVQUFVTDtZQUFPO1FBQ2hDO1FBQ0EsS0FBSyxDQUFDQTtRQUNOUixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztnQkFBQztnQkFBa0I7YUFBZ0I7UUFDOUM7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87UUFDWDtRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLFlBQVksR0FDWkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNjLFFBQVEsR0FBR0wsT0FBT0ssUUFBUTtJQUNuQztJQUNBUixXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUNRLFFBQVEsQ0FBQ0MsR0FBRztJQUM1QjtJQUNBUixpQkFBaUI7UUFDYixPQUFPO1lBQ0gsSUFBSWIsNERBQVlBLENBQUM7Z0JBQ2JzQixTQUFTO29CQUNMO3dCQUNJQyxNQUFNO3dCQUNOQyxXQUFXOzRCQUNQQyxRQUFRLElBQUksQ0FBQ0wsUUFBUSxDQUFDSyxNQUFNOzRCQUM1QkosS0FBSyxJQUFJLENBQUNELFFBQVEsQ0FBQ0MsR0FBRzt3QkFDMUI7b0JBQ0o7aUJBQ0g7WUFDTDtTQUNIO0lBQ0w7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRfdmFsdWVzLmpzP2VmNjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSwgZ2V0QnVmZmVyU3RyaW5nLCB9IGZyb20gXCIuL21lc3NhZ2VzL2luZGV4LmpzXCI7XG4vKipcbiAqIEJhc2UgUHJvbXB0VmFsdWUgY2xhc3MuIEFsbCBwcm9tcHQgdmFsdWVzIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VQcm9tcHRWYWx1ZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBwcm9tcHQgdmFsdWUgYXMgYSBzdHJpbmcuIEl0IGV4dGVuZHMgdGhlIEJhc2VQcm9tcHRWYWx1ZVxuICogY2xhc3MgYW5kIG92ZXJyaWRlcyB0aGUgdG9TdHJpbmcgYW5kIHRvQ2hhdE1lc3NhZ2VzIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJpbmdQcm9tcHRWYWx1ZSBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN0cmluZ1Byb21wdFZhbHVlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHN1cGVyKHsgdmFsdWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICB0b0NoYXRNZXNzYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtuZXcgSHVtYW5NZXNzYWdlKHRoaXMudmFsdWUpXTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGNoYXQgcHJvbXB0IHZhbHVlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFZhbHVlIGFuZCBpbmNsdWRlcyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0UHJvbXB0VmFsdWUgZXh0ZW5kcyBCYXNlUHJvbXB0VmFsdWUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGF0UHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBtZXNzYWdlczogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWVzc2FnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IGZpZWxkcy5tZXNzYWdlcztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBnZXRCdWZmZXJTdHJpbmcodGhpcy5tZXNzYWdlcyk7XG4gICAgfVxuICAgIHRvQ2hhdE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhbiBpbWFnZSBwcm9tcHQgdmFsdWUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlUHJvbXB0VmFsdWUgYW5kIGluY2x1ZGVzIGFuIEltYWdlVVJMIGluc3RhbmNlLlxuICovXG5leHBvcnQgY2xhc3MgSW1hZ2VQcm9tcHRWYWx1ZSBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkltYWdlUHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICghKFwiaW1hZ2VVcmxcIiBpbiBmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgaW1hZ2VVcmw6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRfdmFsdWVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImltYWdlVXJsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBAaWdub3JlICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBmaWVsZHMuaW1hZ2VVcmw7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZVVybC51cmw7XG4gICAgfVxuICAgIHRvQ2hhdE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3IEh1bWFuTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB0aGlzLmltYWdlVXJsLmRldGFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuaW1hZ2VVcmwudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIF07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIkh1bWFuTWVzc2FnZSIsImdldEJ1ZmZlclN0cmluZyIsIkJhc2VQcm9tcHRWYWx1ZSIsIlN0cmluZ1Byb21wdFZhbHVlIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInRvU3RyaW5nIiwidG9DaGF0TWVzc2FnZXMiLCJDaGF0UHJvbXB0VmFsdWUiLCJmaWVsZHMiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsIkltYWdlUHJvbXB0VmFsdWUiLCJpbWFnZVVybCIsInVybCIsImNvbnRlbnQiLCJ0eXBlIiwiaW1hZ2VfdXJsIiwiZGV0YWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/base.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/base.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/graph.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks: fields.fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this._streamIterator(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options)));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            output = await func.call(this, input, config, runManager);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            outputs = await func.call(this, inputs, optionsList, runManagers, batchOptions);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n            const streamLogHandler = runManager?.handlers.find(isLogStreamHandler);\n            let iterator = pipe.output;\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = await streamLogHandler.tapOutputIterable(runManager.runId, pipe.output);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.inheritableHandlers.push(logStreamCallbackHandler);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    /**\n     * Generate a stream of events emitted by the internal steps of the runnable.\n     *\n     * Use to create an iterator over StreamEvents that provide real-time information\n     * about the progress of the runnable, including StreamEvents from intermediate\n     * results.\n     *\n     * A StreamEvent is a dictionary with the following schema:\n     *\n     * - `event`: string - Event names are of the format: on_[runnable_type]_(start|stream|end).\n     * - `name`: string - The name of the runnable that generated the event.\n     * - `run_id`: string - Randomly generated ID associated with the given execution of\n     *   the runnable that emitted the event. A child runnable that gets invoked as part of the execution of a\n     *   parent runnable is assigned its own unique ID.\n     * - `tags`: string[] - The tags of the runnable that generated the event.\n     * - `metadata`: Record<string, any> - The metadata of the runnable that generated the event.\n     * - `data`: Record<string, any>\n     *\n     * Below is a table that illustrates some events that might be emitted by various\n     * chains. Metadata fields have been omitted from the table for brevity.\n     * Chain definitions have been included after the table.\n     *\n     * | event                | name             | chunk                              | input                                         | output                                          |\n     * |----------------------|------------------|------------------------------------|-----------------------------------------------|-------------------------------------------------|\n     * | on_llm_start         | [model name]     |                                    | {'input': 'hello'}                            |                                                 |\n     * | on_llm_stream        | [model name]     | 'Hello' OR AIMessageChunk(\"hello\") |                                               |                                                 |\n     * | on_llm_end           | [model name]     |                                    | 'Hello human!'                                |\n     * | on_chain_start       | format_docs      |                                    |                                               |                                                 |\n     * | on_chain_stream      | format_docs      | \"hello world!, goodbye world!\"     |                                               |                                                 |\n     * | on_chain_end         | format_docs      |                                    | [Document(...)]                               | \"hello world!, goodbye world!\"                  |\n     * | on_tool_start        | some_tool        |                                    | {\"x\": 1, \"y\": \"2\"}                            |                                                 |\n     * | on_tool_stream       | some_tool        |   {\"x\": 1, \"y\": \"2\"}               |                                               |                                                 |\n     * | on_tool_end          | some_tool        |                                    |                                               | {\"x\": 1, \"y\": \"2\"}                              |\n     * | on_retriever_start   | [retriever name] |                                    | {\"query\": \"hello\"}                            |                                                 |\n     * | on_retriever_chunk   | [retriever name] |  {documents: [...]}                |                                               |                                                 |\n     * | on_retriever_end     | [retriever name] |                                    | {\"query\": \"hello\"}                            | {documents: [...]}                              |\n     * | on_prompt_start      | [template_name]  |                                    | {\"question\": \"hello\"}                         |                                                 |\n     * | on_prompt_end        | [template_name]  |                                    | {\"question\": \"hello\"}                         | ChatPromptValue(messages: [SystemMessage, ...]) |\n     */ async *streamEvents(input, options, streamOptions) {\n        if (options.version !== \"v1\") {\n            throw new Error(`Only version \"v1\" of the events schema is currently supported.`);\n        }\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_8__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *streamEvents(input, options, streamOptions) {\n        yield* this.bound.streamEvents(input, {\n            ...await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs),\n            version: options.version\n        }, streamOptions);\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            onFailedAttempt: (error)=>this.onFailedAttempt(error, input),\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            firstException.input = remainingInputs[i];\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onFailedAttempt: (error)=>this.onFailedAttempt(error, error.input),\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                nextStepInput = await step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                nextStepInputs = await step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            await Promise.all(Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const { key, result, gen } = await Promise.race(tasks.values());\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(config, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...config,\n                        config\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            }));\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(options?.callbacks, undefined, options?.tags, undefined, options?.metadata);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFDSztBQUM4QjtBQUMrQjtBQUNuQztBQUNxRTtBQUNDO0FBQ3RFO0FBQ1c7QUFDQztBQUNTO0FBQ3pDO0FBQ25DLDhEQUE4RDtBQUN2RCxTQUFTdUIsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQzNDLE9BQU9ELFNBQ0gsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUNmLHVEQUF1RDtJQUN2RCxDQUFFQSxDQUFBQSxpQkFBaUJJLElBQUcsS0FDdEIsT0FBT0osVUFBVSxXQUNmQSxRQUNBO1FBQUUsQ0FBQ0MsV0FBVyxFQUFFRDtJQUFNO0FBQ2hDO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUssaUJBQWlCdkIsK0RBQVlBO0lBQ3RDd0IsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBYSxRQUFRQyxNQUFNLEVBQUU7UUFDWixNQUFNQyxPQUNOLDhEQUE4RDtRQUM5RCxJQUFJLENBQUNBLElBQUksSUFBSSxJQUFJLENBQUNULFdBQVcsQ0FBQ1UsT0FBTyxNQUFNLElBQUksQ0FBQ1YsV0FBVyxDQUFDUyxJQUFJO1FBQ2hFLE9BQU9ELFNBQVMsQ0FBQyxFQUFFQyxLQUFLLEVBQUVELE9BQU8sQ0FBQyxHQUFHQztJQUN6QztJQUNBOzs7O0tBSUMsR0FDREUsS0FBS0MsTUFBTSxFQUFFO1FB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QUFDaVAsSUFBTUEsQ0FBQyxDQUFDLEVBQUUsS0FBS3JOO1lBQzVCLE9BQU9vTixPQUFPeFAsTUFBTSxLQUFLLElBQUlvQyxZQUFZaEUsT0FBT2tDLFdBQVcsQ0FBQ2tQO1FBQ2hFO0lBQ0o7SUFDQSxNQUFNL04sT0FBT0gsS0FBSyxFQUFFdkIsT0FBTyxFQUFFO1FBQ3pCLE9BQU8sSUFBSSxDQUFDNEMsZUFBZSxDQUFDLElBQUksQ0FBQzRNLEtBQUssQ0FBQzFRLElBQUksQ0FBQyxJQUFJLEdBQUd5QyxPQUFPdkI7SUFDOUQ7SUFDQSxPQUFPdU4sV0FBV2xILFNBQVMsRUFBRTtRQUN6QixXQUFXLE1BQU1oQyxTQUFTZ0MsVUFBVztZQUNqQyxNQUFNb0osU0FBUyxNQUFNLElBQUksQ0FBQ0QsS0FBSyxDQUFDbkw7WUFDaEMsSUFBSW9MLFdBQVdwTixXQUFXO2dCQUN0QixNQUFNb047WUFDVjtRQUNKO0lBQ0o7SUFDQXJKLFVBQVVDLFNBQVMsRUFBRXJHLE9BQU8sRUFBRTtRQUMxQixPQUFPLElBQUksQ0FBQzZELDBCQUEwQixDQUFDd0MsV0FBVyxJQUFJLENBQUNrSCxVQUFVLENBQUN6TyxJQUFJLENBQUMsSUFBSSxHQUFHa0I7SUFDbEY7SUFDQSxNQUFNK0IsT0FBT1IsS0FBSyxFQUFFdkIsT0FBTyxFQUFFO1FBQ3pCLGdCQUFnQnFHO1lBQ1osTUFBTTlFO1FBQ1Y7UUFDQSxNQUFNUyxtQkFBbUIsSUFBSWhGLHFFQUF1QkEsQ0FBQyxJQUFJLENBQUNvSixTQUFTLENBQUNDLGFBQWFyRztRQUNqRixNQUFNZ0MsaUJBQWlCQyxLQUFLO1FBQzVCLE9BQU9yRixvRUFBc0JBLENBQUNzRixrQkFBa0IsQ0FBQ0Y7SUFDckQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvYmFzZS5qcz84YjliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgcFJldHJ5IGZyb20gXCJwLXJldHJ5XCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIFJ1bkxvZywgUnVuTG9nUGF0Y2gsIH0gZnJvbSBcIi4uL3RyYWNlcnMvbG9nX3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLCBjb25jYXQsIGF0ZWUsIHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAsIEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwLCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IERFRkFVTFRfUkVDVVJTSU9OX0xJTUlULCBlbnN1cmVDb25maWcsIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZywgbWVyZ2VDb25maWdzLCBwYXRjaENvbmZpZywgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgUm9vdExpc3RlbmVyc1RyYWNlciB9IGZyb20gXCIuLi90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanNcIjtcbmltcG9ydCB7IF9Sb290RXZlbnRGaWx0ZXIsIGlzUnVubmFibGVJbnRlcmZhY2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gXCIuL2dyYXBoLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiZcbiAgICAgICAgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vKipcbiAqIEEgUnVubmFibGUgaXMgYSBnZW5lcmljIHVuaXQgb2Ygd29yayB0aGF0IGNhbiBiZSBpbnZva2VkLCBiYXRjaGVkLCBzdHJlYW1lZCwgYW5kL29yXG4gKiB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfcnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB0aGlzLm5hbWUgPz8gdGhpcy5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPz8gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICByZXR1cm4gc3VmZml4ID8gYCR7bmFtZX0ke3N1ZmZpeH1gIDogbmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBhcmd1bWVudHMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIGFwcGx5IHRoZSBib3VuZCBhcmdzLlxuICAgICAqL1xuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoeyBib3VuZDogdGhpcywga3dhcmdzLCBjb25maWc6IHt9IH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgUnVubmFibGUgdGhhdCBtYXBzIGEgbGlzdCBvZiBpbnB1dHMgdG8gYSBsaXN0IG9mIG91dHB1dHMsXG4gICAgICogYnkgY2FsbGluZyBpbnZva2UoKSB3aXRoIGVhY2ggaW5wdXQuXG4gICAgICovXG4gICAgbWFwKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHsgYm91bmQ6IHRoaXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCByZXRyeSBsb2dpYyB0byBhbiBleGlzdGluZyBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVSZXRyeSB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgcmV0cnkgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlUmV0cnkoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIG1heEF0dGVtcHROdW1iZXI6IGZpZWxkcz8uc3RvcEFmdGVyQXR0ZW1wdCxcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgY29uZmlnIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE5ldyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdG8gYXR0YWNoIHRvIHRoZSBuZXcgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHdpdGggYSBjb25maWcgbWF0Y2hpbmcgd2hhdCdzIHBhc3NlZC5cbiAgICAgKi9cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBydW5uYWJsZSBmcm9tIHRoZSBjdXJyZW50IG9uZSB0aGF0IHdpbGwgdHJ5IGludm9raW5nXG4gICAgICogb3RoZXIgcGFzc2VkIGZhbGxiYWNrIHJ1bm5hYmxlcyBpZiB0aGUgaW5pdGlhbCBpbnZvY2F0aW9uIGZhaWxzLlxuICAgICAqIEBwYXJhbSBmaWVsZHMuZmFsbGJhY2tzIE90aGVyIHJ1bm5hYmxlcyB0byBjYWxsIGlmIHRoZSBydW5uYWJsZSBlcnJvcnMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzLlxuICAgICAqL1xuICAgIHdpdGhGYWxsYmFja3MoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3Moe1xuICAgICAgICAgICAgcnVubmFibGU6IHRoaXMsXG4gICAgICAgICAgICBmYWxsYmFja3M6IGZpZWxkcy5mYWxsYmFja3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucywgbGVuZ3RoID0gMCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhc3NlZCBcIm9wdGlvbnNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBpbnB1dHMsIGJ1dCBnb3QgJHtvcHRpb25zLmxlbmd0aH0gb3B0aW9ucyBmb3IgJHtsZW5ndGh9IGlucHV0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID4gMSAmJiAhQXJyYXkuaXNBcnJheShvcHRpb25zKSAmJiBvcHRpb25zLnJ1bklkKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJQcm92aWRlZCBydW5JZCB3aWxsIGJlIHVzZWQgb25seSBmb3IgdGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJhdGNoLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNlcXVlbnQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZmlsdGVyKChba2V5XSkgPT4ga2V5ICE9PSBcInJ1bklkXCIpKTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBlbnN1cmVDb25maWcoaSA9PT0gMCA/IG9wdGlvbnMgOiBzdWJzZXF1ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKCkgPT4gZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBtYXhDb25jdXJyZW5jeSA9IGNvbmZpZ0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGNhbGxlciA9IG5ldyBBc3luY0NhbGxlcih7XG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeSxcbiAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGJhdGNoQ2FsbHMgPSBpbnB1dHMubWFwKChpbnB1dCwgaSkgPT4gY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmludm9rZShpbnB1dCwgY29uZmlnTGlzdFtpXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYmF0Y2hDYWxscyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc3RyZWFtaW5nIGltcGxlbWVudGF0aW9uLlxuICAgICAqIFN1YmNsYXNzZXMgc2hvdWxkIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGlmIHRoZXkgc3VwcG9ydCBzdHJlYW1pbmcgb3V0cHV0LlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgKl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBvdXRwdXQgaW4gY2h1bmtzLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gdGhhdCBpcyBhbHNvIGFuIGl0ZXJhYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBCdWZmZXIgdGhlIGZpcnN0IHN0cmVhbWVkIGNodW5rIHRvIGFsbG93IGZvciBpbml0aWFsIGVycm9yc1xuICAgICAgICAvLyB0byBzdXJmYWNlIGltbWVkaWF0ZWx5LlxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBlbnN1cmVDb25maWcob3B0aW9ucykpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbiAgICBfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGxldCBydW5uYWJsZUNvbmZpZztcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVubmFibGVDb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyh7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBvcHRpb25zLmNhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICB0YWdzOiBvcHRpb25zLnRhZ3MsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IG9wdGlvbnMubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgcnVuTmFtZTogb3B0aW9ucy5ydW5OYW1lLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogb3B0aW9ucy5jb25maWd1cmFibGUsXG4gICAgICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IG9wdGlvbnMucmVjdXJzaW9uTGltaXQsXG4gICAgICAgICAgICAgICAgbWF4Q29uY3VycmVuY3k6IG9wdGlvbnMubWF4Q29uY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgcnVuSWQ6IG9wdGlvbnMucnVuSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsT3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuY2FsbGJhY2tzO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMudGFncztcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLm1ldGFkYXRhO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucnVuTmFtZTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLmNvbmZpZ3VyYWJsZTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJlY3Vyc2lvbkxpbWl0O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5ydW5JZDtcbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICBhc3luYyBfY2FsbFdpdGhDb25maWcoZnVuYywgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIGNvbmZpZy5ydW5JZCwgY29uZmlnPy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5ydW5JZDtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgaGFuZGxlcyBiYXRjaGluZyBhbmQgY29uZmlndXJhdGlvbiBmb3IgYSBydW5uYWJsZVxuICAgICAqIEl0IHRha2VzIGEgZnVuY3Rpb24sIGlucHV0IHZhbHVlcywgYW5kIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24sIGFuZFxuICAgICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGlucHV0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdmFsdWVzIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgX2JhdGNoV2l0aENvbmZpZyhmdW5jLCBpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9uc0xpc3QubWFwKGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZykpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKGFzeW5jIChjYWxsYmFja01hbmFnZXIsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVN0YXJ0UmVzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCBvcHRpb25zTGlzdFtpXS5ydW5JZCwgb3B0aW9uc0xpc3RbaV0ucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9wdGlvbnNMaXN0W2ldLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCkpO1xuICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnNMaXN0W2ldLnJ1bklkO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0YXJ0UmVzO1xuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBvdXRwdXRzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0cyA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dHMsIG9wdGlvbnNMaXN0LCBydW5NYW5hZ2VycywgYmF0Y2hPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpKSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gdHJhbnNmb3JtIGFuIEl0ZXJhdG9yIG9mIElucHV0IHZhbHVlcyBpbnRvIGFuIEl0ZXJhdG9yIG9mXG4gICAgICogT3V0cHV0IHZhbHVlcywgd2l0aCBjYWxsYmFja3MuXG4gICAgICogVXNlIHRoaXMgdG8gaW1wbGVtZW50IGBzdHJlYW0oKWAgb3IgYHRyYW5zZm9ybSgpYCBpbiBSdW5uYWJsZSBzdWJjbGFzc2VzLlxuICAgICAqL1xuICAgIGFzeW5jICpfdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdHJhbnNmb3JtZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXQ7XG4gICAgICAgIGxldCBmaW5hbElucHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIHdyYXBJbnB1dEZvclRyYWNpbmcoKSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGlucHV0R2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsSW5wdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSBjb25jYXQoZmluYWxJbnB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBydW5NYW5hZ2VyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGlwZSA9IGF3YWl0IHBpcGVHZW5lcmF0b3JXaXRoU2V0dXAodHJhbnNmb3JtZXIuYmluZCh0aGlzKSwgd3JhcElucHV0Rm9yVHJhY2luZygpLCBhc3luYyAoKSA9PiBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHsgaW5wdXQ6IFwiXCIgfSwgY29uZmlnLnJ1bklkLCBjb25maWcucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKSwgY29uZmlnKTtcbiAgICAgICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgICAgICBydW5NYW5hZ2VyID0gcGlwZS5zZXR1cDtcbiAgICAgICAgICAgIGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvZ0hhbmRsZXIgPSBydW5NYW5hZ2VyPy5oYW5kbGVycy5maW5kKGlzTG9nU3RyZWFtSGFuZGxlcik7XG4gICAgICAgICAgICBsZXQgaXRlcmF0b3IgPSBwaXBlLm91dHB1dDtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBhd2FpdCBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIHBpcGUub3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgZ2V0R3JhcGgoXykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgaW5wdXQgc2NoZW1hIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3QgaW5wdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1JbnB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBydW5uYWJsZU5vZGUgPSBncmFwaC5hZGROb2RlKHRoaXMpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgb3V0cHV0IHNjaGVtYXMgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBvdXRwdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1PdXRwdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShpbnB1dE5vZGUsIHJ1bm5hYmxlTm9kZSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgc2VxdWVuY2UgdGhhdCBydW5zIGVhY2ggaW5kaXZpZHVhbCBydW5uYWJsZSBpbiBzZXJpZXMsXG4gICAgICogcGlwaW5nIHRoZSBvdXRwdXQgb2Ygb25lIHJ1bm5hYmxlIGludG8gYW5vdGhlciBydW5uYWJsZSBvciBydW5uYWJsZS1saWtlLlxuICAgICAqIEBwYXJhbSBjb2VyY2VhYmxlIEEgcnVubmFibGUsIGZ1bmN0aW9uLCBvciBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBmdW5jdGlvbnMgb3IgcnVubmFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICBmaXJzdDogdGhpcyxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGljayBrZXlzIGZyb20gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgcGljayhrZXlzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBuZXcgZmllbGRzIHRvIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzc2lnbihtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlQXNzaWduKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNmb3JtLCB3aGljaCBidWZmZXJzIGlucHV0IGFuZCB0aGVuIGNhbGxzIHN0cmVhbS5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IGNhbiBzdGFydCBwcm9kdWNpbmcgb3V0cHV0IHdoaWxlXG4gICAgICogaW5wdXQgaXMgc3RpbGwgYmVpbmcgZ2VuZXJhdGVkLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbENodW5rO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgZ2F0aGVyaW5nIGZhaWxzLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBhbGwgb3V0cHV0IGZyb20gYSBydW5uYWJsZSwgYXMgcmVwb3J0ZWQgdG8gdGhlIGNhbGxiYWNrIHN5c3RlbS5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBpbm5lciBydW5zIG9mIExMTXMsIFJldHJpZXZlcnMsIFRvb2xzLCBldGMuXG4gICAgICogT3V0cHV0IGlzIHN0cmVhbWVkIGFzIExvZyBvYmplY3RzLCB3aGljaCBpbmNsdWRlIGEgbGlzdCBvZlxuICAgICAqIGpzb25wYXRjaCBvcHMgdGhhdCBkZXNjcmliZSBob3cgdGhlIHN0YXRlIG9mIHRoZSBydW4gaGFzIGNoYW5nZWQgaW4gZWFjaFxuICAgICAqIHN0ZXAsIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIHJ1bi5cbiAgICAgKiBUaGUganNvbnBhdGNoIG9wcyBjYW4gYmUgYXBwbGllZCBpbiBvcmRlciB0byBjb25zdHJ1Y3Qgc3RhdGUuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gc3RyZWFtT3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwib3JpZ2luYWxcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKGNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2gobG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbVByb21pc2UgPSB0aGlzLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlU3RyZWFtUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJ1bm5hYmxlU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL3N0cmVhbWVkX291dHB1dC8tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlID0gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBsb2c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgc3RyZWFtIG9mIGV2ZW50cyBlbWl0dGVkIGJ5IHRoZSBpbnRlcm5hbCBzdGVwcyBvZiB0aGUgcnVubmFibGUuXG4gICAgICpcbiAgICAgKiBVc2UgdG8gY3JlYXRlIGFuIGl0ZXJhdG9yIG92ZXIgU3RyZWFtRXZlbnRzIHRoYXQgcHJvdmlkZSByZWFsLXRpbWUgaW5mb3JtYXRpb25cbiAgICAgKiBhYm91dCB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIHJ1bm5hYmxlLCBpbmNsdWRpbmcgU3RyZWFtRXZlbnRzIGZyb20gaW50ZXJtZWRpYXRlXG4gICAgICogcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEEgU3RyZWFtRXZlbnQgaXMgYSBkaWN0aW9uYXJ5IHdpdGggdGhlIGZvbGxvd2luZyBzY2hlbWE6XG4gICAgICpcbiAgICAgKiAtIGBldmVudGA6IHN0cmluZyAtIEV2ZW50IG5hbWVzIGFyZSBvZiB0aGUgZm9ybWF0OiBvbl9bcnVubmFibGVfdHlwZV1fKHN0YXJ0fHN0cmVhbXxlbmQpLlxuICAgICAqIC0gYG5hbWVgOiBzdHJpbmcgLSBUaGUgbmFtZSBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYHJ1bl9pZGA6IHN0cmluZyAtIFJhbmRvbWx5IGdlbmVyYXRlZCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGV4ZWN1dGlvbiBvZlxuICAgICAqICAgdGhlIHJ1bm5hYmxlIHRoYXQgZW1pdHRlZCB0aGUgZXZlbnQuIEEgY2hpbGQgcnVubmFibGUgdGhhdCBnZXRzIGludm9rZWQgYXMgcGFydCBvZiB0aGUgZXhlY3V0aW9uIG9mIGFcbiAgICAgKiAgIHBhcmVudCBydW5uYWJsZSBpcyBhc3NpZ25lZCBpdHMgb3duIHVuaXF1ZSBJRC5cbiAgICAgKiAtIGB0YWdzYDogc3RyaW5nW10gLSBUaGUgdGFncyBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYG1ldGFkYXRhYDogUmVjb3JkPHN0cmluZywgYW55PiAtIFRoZSBtZXRhZGF0YSBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYGRhdGFgOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgICpcbiAgICAgKiBCZWxvdyBpcyBhIHRhYmxlIHRoYXQgaWxsdXN0cmF0ZXMgc29tZSBldmVudHMgdGhhdCBtaWdodCBiZSBlbWl0dGVkIGJ5IHZhcmlvdXNcbiAgICAgKiBjaGFpbnMuIE1ldGFkYXRhIGZpZWxkcyBoYXZlIGJlZW4gb21pdHRlZCBmcm9tIHRoZSB0YWJsZSBmb3IgYnJldml0eS5cbiAgICAgKiBDaGFpbiBkZWZpbml0aW9ucyBoYXZlIGJlZW4gaW5jbHVkZWQgYWZ0ZXIgdGhlIHRhYmxlLlxuICAgICAqXG4gICAgICogfCBldmVudCAgICAgICAgICAgICAgICB8IG5hbWUgICAgICAgICAgICAgfCBjaHVuayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW5wdXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3V0cHV0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAgKiB8IG9uX2xsbV9zdGFydCAgICAgICAgIHwgW21vZGVsIG5hbWVdICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7J2lucHV0JzogJ2hlbGxvJ30gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9sbG1fc3RyZWFtICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAnSGVsbG8nIE9SIEFJTWVzc2FnZUNodW5rKFwiaGVsbG9cIikgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9sbG1fZW5kICAgICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgJ0hlbGxvIGh1bWFuIScgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX2NoYWluX3N0YXJ0ICAgICAgIHwgZm9ybWF0X2RvY3MgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9zdHJlYW0gICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCBcImhlbGxvIHdvcmxkISwgZ29vZGJ5ZSB3b3JsZCFcIiAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9lbmQgICAgICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgW0RvY3VtZW50KC4uLildICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgXCJoZWxsbyB3b3JsZCEsIGdvb2RieWUgd29ybGQhXCIgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl90b29sX3N0YXJ0ICAgICAgICB8IHNvbWVfdG9vbCAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fdG9vbF9zdHJlYW0gICAgICAgfCBzb21lX3Rvb2wgICAgICAgIHwgICB7XCJ4XCI6IDEsIFwieVwiOiBcIjJcIn0gICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Rvb2xfZW5kICAgICAgICAgIHwgc29tZV90b29sICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJ4XCI6IDEsIFwieVwiOiBcIjJcIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfc3RhcnQgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlcnlcIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3JldHJpZXZlcl9jaHVuayAgIHwgW3JldHJpZXZlciBuYW1lXSB8ICB7ZG9jdW1lbnRzOiBbLi4uXX0gICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfZW5kICAgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlcnlcIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtkb2N1bWVudHM6IFsuLi5dfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Byb21wdF9zdGFydCAgICAgIHwgW3RlbXBsYXRlX25hbWVdICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJxdWVzdGlvblwiOiBcImhlbGxvXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcHJvbXB0X2VuZCAgICAgICAgfCBbdGVtcGxhdGVfbmFtZV0gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXN0aW9uXCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgfCBDaGF0UHJvbXB0VmFsdWUobWVzc2FnZXM6IFtTeXN0ZW1NZXNzYWdlLCAuLi5dKSB8XG4gICAgICovXG4gICAgYXN5bmMgKnN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy52ZXJzaW9uICE9PSBcInYxXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25seSB2ZXJzaW9uIFwidjFcIiBvZiB0aGUgZXZlbnRzIHNjaGVtYSBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBydW5Mb2c7XG4gICAgICAgIGxldCBoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCByb290VGFncyA9IGNvbmZpZy50YWdzID8/IFtdO1xuICAgICAgICBjb25zdCByb290TWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgPz8ge307XG4gICAgICAgIGNvbnN0IHJvb3ROYW1lID0gY29uZmlnLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCk7XG4gICAgICAgIGNvbnN0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciA9IG5ldyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIoe1xuICAgICAgICAgICAgLi4uc3RyZWFtT3B0aW9ucyxcbiAgICAgICAgICAgIGF1dG9DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICBfc2NoZW1hRm9ybWF0OiBcInN0cmVhbWluZ19ldmVudHNcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJvb3RFdmVudEZpbHRlciA9IG5ldyBfUm9vdEV2ZW50RmlsdGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW0gPSB0aGlzLl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoIXJ1bkxvZykge1xuICAgICAgICAgICAgICAgIHJ1bkxvZyA9IFJ1bkxvZy5mcm9tUnVuTG9nUGF0Y2gobG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJ1bkxvZyA9IHJ1bkxvZy5jb25jYXQobG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5Mb2cuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgZXJyb3I6IFwic3RyZWFtRXZlbnRzXCIgc3RhdGUgaXMgbWlzc2luZy4gUGxlYXNlIG9wZW4gYSBidWcgcmVwb3J0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gWWllbGQgdGhlIHN0YXJ0IGV2ZW50IGZvciB0aGUgcm9vdCBydW5uYWJsZSBpZiBpdCBoYXNuJ3QgYmVlbiBzZWVuLlxuICAgICAgICAgICAgLy8gVGhlIHJvb3QgcnVuIGlzIG5ldmVyIGZpbHRlcmVkIG91dFxuICAgICAgICAgICAgaWYgKCFoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0geyAuLi5ydW5Mb2cuc3RhdGUgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBzdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0YXJ0YCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9vdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXRocyA9IGxvZy5vcHNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChvcCkgPT4gb3AucGF0aC5zdGFydHNXaXRoKFwiL2xvZ3MvXCIpKVxuICAgICAgICAgICAgICAgIC5tYXAoKG9wKSA9PiBvcC5wYXRoLnNwbGl0KFwiL1wiKVsyXSk7XG4gICAgICAgICAgICBjb25zdCBkZWR1cGVkUGF0aHMgPSBbLi4ubmV3IFNldChwYXRocyldO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYXRoIG9mIGRlZHVwZWRQYXRocykge1xuICAgICAgICAgICAgICAgIGxldCBldmVudFR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dFbnRyeSA9IHJ1bkxvZy5zdGF0ZS5sb2dzW3BhdGhdO1xuICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5lbmRfdGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gXCJzdHJlYW1cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gXCJlbmRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluY2x1ZGUgdGhlIGlucHV0cyB3aXRoIHRoZSBzdGFydCBldmVudCBpZiB0aGV5IGFyZSBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzdWFsbHkgdGhleSB3aWxsIE5PVCBiZSBhdmFpbGFibGUgZm9yIGNvbXBvbmVudHMgdGhhdCBvcGVyYXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIHN0cmVhbXMsIHNpbmNlIHRob3NlIGNvbXBvbmVudHMgc3RyZWFtIHRoZSBpbnB1dCBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3Qga25vdyBpdHMgZmluYWwgdmFsdWUgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlID09PSBcImVuZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dCA9IGxvZ0VudHJ5LmlucHV0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLm91dHB1dCA9IGxvZ0VudHJ5LmZpbmFsX291dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlID09PSBcInN0cmVhbVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtDb3VudCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBjaHVuayBvZiBzdHJlYW1lZCBvdXRwdXQsIGdvdCAke2NodW5rQ291bnR9IGluc3RlYWQuIEVuY291bnRlcmVkIGluOiBcIiR7bG9nRW50cnkubmFtZX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7IGNodW5rOiBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXRbMF0gfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHN0cmVhbSwgd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlLlxuICAgICAgICAgICAgICAgICAgICAvLyBBbmQgdGhpcyBhdm9pZHMgZHVwbGljYXRlcyBhcyB3ZWxsIVxuICAgICAgICAgICAgICAgICAgICBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7bG9nRW50cnkudHlwZX1fJHtldmVudFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbG9nRW50cnkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBsb2dFbnRyeS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogbG9nRW50cnkudGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IGxvZ0VudHJ5Lm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCB3ZSB0YWtlIGNhcmUgb2YgdGhlIHN0cmVhbWluZyBvdXRwdXQgZnJvbSB0aGUgcm9vdCBjaGFpblxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW55LlxuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gcnVuTG9nO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnN0cmVhbWVkX291dHB1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtDb3VudCA9IHN0YXRlLnN0cmVhbWVkX291dHB1dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBjaHVuayBvZiBzdHJlYW1lZCBvdXRwdXQsIGdvdCAke2NodW5rQ291bnR9IGluc3RlYWQuIEVuY291bnRlcmVkIGluOiBcIiR7c3RhdGUubmFtZX1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geyBjaHVuazogc3RhdGUuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHN0cmVhbSwgd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlLlxuICAgICAgICAgICAgICAgIHN0YXRlLnN0cmVhbWVkX291dHB1dCA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fc3RyZWFtYCxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBzdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogcm9vdFRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGV2ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IHJ1bkxvZz8uc3RhdGU7XG4gICAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCB5aWVsZCB0aGUgZW5kIGV2ZW50IGZvciB0aGUgcm9vdCBydW5uYWJsZS5cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9lbmRgLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgdGFnczogcm9vdFRhZ3MsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogc3RhdGUuZmluYWxfb3V0cHV0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlLnR5cGUpKVxuICAgICAgICAgICAgICAgIHlpZWxkIGV2ZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGlzUnVubmFibGUodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIGlzUnVubmFibGVJbnRlcmZhY2UodGhpbmcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIGNvbmZpZ0ZhY3RvcmllczogW1xuICAgICAgICAgICAgICAgIChjb25maWcpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJvb3RMaXN0ZW5lcnNUcmFjZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGRlbGVnYXRlcyBjYWxscyB0byBhbm90aGVyIHJ1bm5hYmxlIHdpdGggYSBzZXQgb2Yga3dhcmdzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVCaW5kaW5nIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUJpbmRpbmdcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdGYWN0b3JpZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICAgICAgdGhpcy5rd2FyZ3MgPSBmaWVsZHMua3dhcmdzO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGZpZWxkcy5jb25maWc7XG4gICAgICAgIHRoaXMuY29uZmlnRmFjdG9yaWVzID0gZmllbGRzLmNvbmZpZ0ZhY3RvcmllcztcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuZ2V0TmFtZShzdWZmaXgpO1xuICAgIH1cbiAgICBhc3luYyBfbWVyZ2VDb25maWcoLi4ub3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIC4uLm9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbWVyZ2VDb25maWdzKGNvbmZpZywgLi4uKHRoaXMuY29uZmlnRmFjdG9yaWVzXG4gICAgICAgICAgICA/IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuY29uZmlnRmFjdG9yaWVzLm1hcChhc3luYyAoY29uZmlnRmFjdG9yeSkgPT4gYXdhaXQgY29uZmlnRmFjdG9yeShjb25maWcpKSlcbiAgICAgICAgICAgIDogW10pKTtcbiAgICB9XG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB7IC4uLnRoaXMua3dhcmdzLCAuLi5rd2FyZ3MgfSxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLndpdGhSZXRyeShmaWVsZHMpLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuaW52b2tlKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMpXG4gICAgICAgICAgICA/IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChpbmRpdmlkdWFsT3B0aW9uKSA9PiB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcoaW5kaXZpZHVhbE9wdGlvbiksIHRoaXMua3dhcmdzKSkpXG4gICAgICAgICAgICA6IGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIG1lcmdlZE9wdGlvbnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQuX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5zdHJlYW0oaW5wdXQsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKTtcbiAgICB9XG4gICAgYXN5bmMgKnRyYW5zZm9ybShcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5ib3VuZC50cmFuc2Zvcm0oZ2VuZXJhdG9yLCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jICpzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQuc3RyZWFtRXZlbnRzKGlucHV0LCB7XG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpLFxuICAgICAgICAgICAgdmVyc2lvbjogb3B0aW9ucy52ZXJzaW9uLFxuICAgICAgICB9LCBzdHJlYW1PcHRpb25zKTtcbiAgICB9XG4gICAgc3RhdGljIGlzUnVubmFibGVCaW5kaW5nKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdGhpbmdcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpbmcuYm91bmQgJiYgUnVubmFibGUuaXNSdW5uYWJsZSh0aGluZy5ib3VuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZVxuICogd2l0aCBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVFYWNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUVhY2hcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZHMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIGt3YXJncyBUaGUgYXJndW1lbnRzIHRvIGJpbmQgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBSdW5uYWJsZUVhY2hgIGNsYXNzIHRoYXQgaXMgYm91bmQgd2l0aCB0aGUgc3BlY2lmaWVkIGFyZ3VtZW50cy5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC5iaW5kKGt3YXJncyksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0cywgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0cywgY29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCBhbmQgY29uZmlndXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWd1cmF0aW9uIHRvIGludm9rZSB0aGUgcnVubmFibGUgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaW52b2tlKGlucHV0cywgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmJhdGNoKGlucHV0cywgcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgbGlmZWN5Y2xlIGxpc3RlbmVycyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogVGhlIFJ1biBvYmplY3QgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJ1biwgaW5jbHVkaW5nIGl0cyBpZCxcbiAgICAgKiB0eXBlLCBpbnB1dCwgb3V0cHV0LCBlcnJvciwgc3RhcnRUaW1lLCBlbmRUaW1lLCBhbmQgYW55IHRhZ3Mgb3IgbWV0YWRhdGFcbiAgICAgKiBhZGRlZCB0byB0aGUgcnVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFRoZSBvYmplY3QgY29udGFpbmluZyB0aGUgY2FsbGJhY2sgZnVuY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25TdGFydCAtIENhbGxlZCBiZWZvcmUgdGhlIHJ1bm5hYmxlIHN0YXJ0cyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FbmQgLSBDYWxsZWQgYWZ0ZXIgdGhlIHJ1bm5hYmxlIGZpbmlzaGVzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVycm9yIC0gQ2FsbGVkIGlmIHRoZSBydW5uYWJsZSB0aHJvd3MgYW4gZXJyb3IsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICovXG4gICAgd2l0aExpc3RlbmVycyh7IG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVFYWNoKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLndpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBydW5uYWJsZXMgdGhhdCBjYW4gYmUgcmV0cmllZCBhXG4gKiBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVSZXRyeSBleHRlbmRzIFJ1bm5hYmxlQmluZGluZyB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUmV0cnlcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heEF0dGVtcHROdW1iZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogKCkgPT4geyB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heEF0dGVtcHROdW1iZXIgPSBmaWVsZHMubWF4QXR0ZW1wdE51bWJlciA/PyB0aGlzLm1heEF0dGVtcHROdW1iZXI7XG4gICAgICAgIHRoaXMub25GYWlsZWRBdHRlbXB0ID0gZmllbGRzLm9uRmFpbGVkQXR0ZW1wdCA/PyB0aGlzLm9uRmFpbGVkQXR0ZW1wdDtcbiAgICB9XG4gICAgX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IHRhZyA9IGF0dGVtcHQgPiAxID8gYHJldHJ5OmF0dGVtcHQ6JHthdHRlbXB0fWAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWcsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCh0YWcpIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgcmV0dXJuIHBSZXRyeSgoYXR0ZW1wdE51bWJlcikgPT4gc3VwZXIuaW52b2tlKGlucHV0LCB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZywgcnVuTWFuYWdlcikpLCB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBpbnB1dCksXG4gICAgICAgICAgICByZXRyaWVzOiBNYXRoLm1heCh0aGlzLm1heEF0dGVtcHROdW1iZXIgLSAxLCAwKSxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IGludm9rZXMgdGhlIHJ1bm5hYmxlIHdpdGggdGhlIHNwZWNpZmllZCBpbnB1dCwgcnVuIG1hbmFnZXIsXG4gICAgICogYW5kIGNvbmZpZy4gSXQgaGFuZGxlcyB0aGUgcmV0cnkgbG9naWMgYnkgY2F0Y2hpbmcgYW55IGVycm9ycyBhbmRcbiAgICAgKiByZWN1cnNpdmVseSBpbnZva2luZyBpdHNlbGYgd2l0aCB0aGUgdXBkYXRlZCBjb25maWcgZm9yIHRoZSBuZXh0IHJldHJ5XG4gICAgICogYXR0ZW1wdC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIHJ1bk1hbmFnZXIgVGhlIHJ1biBtYW5hZ2VyIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlnIGZvciB0aGUgcnVubmFibGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jIF9iYXRjaChpbnB1dHMsIGNvbmZpZ3MsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0c01hcCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcFJldHJ5KGFzeW5jIChhdHRlbXB0TnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nSW5kZXhlcyA9IGlucHV0c1xuICAgICAgICAgICAgICAgICAgICAubWFwKChfLCBpKSA9PiBpKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChpKSA9PiByZXN1bHRzTWFwW2kudG9TdHJpbmcoKV0gPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSBpbnN0YW5jZW9mIEVycm9yKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbnB1dHMgPSByZW1haW5pbmdJbmRleGVzLm1hcCgoaSkgPT4gaW5wdXRzW2ldKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaGVkQ29uZmlncyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiB0aGlzLl9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHROdW1iZXIsIGNvbmZpZ3M/LltpXSwgcnVuTWFuYWdlcnM/LltpXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzdXBlci5iYXRjaChyZW1haW5pbmdJbnB1dHMsIHBhdGNoZWRDb25maWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmJhdGNoT3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRXhjZXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdE1hcEluZGV4ID0gcmVtYWluaW5nSW5kZXhlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEV4Y2VwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RFeGNlcHRpb24gPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbi5pbnB1dCA9IHJlbWFpbmluZ0lucHV0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZXJyb3IpID0+IHRoaXMub25GYWlsZWRBdHRlbXB0KGVycm9yLCBlcnJvci5pbnB1dCksXG4gICAgICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKSlcbiAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gcmVzdWx0c01hcFtwYXJzZUludChrZXksIDEwKV0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEEgc2VxdWVuY2Ugb2YgcnVubmFibGVzLCB3aGVyZSB0aGUgb3V0cHV0IG9mIGVhY2ggaXMgdGhlIGlucHV0IG9mIHRoZSBuZXh0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbcHJvbXB0VGVtcGxhdGUsIG5ldyBDaGF0T3BlbkFJKHt9KV0pO1xuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVTZXF1ZW5jZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVTZXF1ZW5jZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWlkZGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG4gICAgICAgIHRoaXMubWlkZGxlID0gZmllbGRzLm1pZGRsZSA/PyB0aGlzLm1pZGRsZTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZmllbGRzLmxhc3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgIH1cbiAgICBnZXQgc3RlcHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsU3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGVdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsU3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gaW5pdGlhbFN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXQgPSBhd2FpdCBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGNhbid0IGRldGVjdCB0aGF0IHRoZSBsYXN0IG91dHB1dCBvZiB0aGUgc2VxdWVuY2UgcmV0dXJucyBSdW5PdXRwdXQsIHNvIGNhbGwgaXQgb3V0IG9mIHRoZSBsb29wIGhlcmVcbiAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gYXdhaXQgdGhpcy5sYXN0Lmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke3RoaXMuc3RlcHMubGVuZ3RofWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBmaW5hbE91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY29uZmlnTGlzdC5tYXAoZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dHMgPSBpbnB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gdGhpcy5zdGVwc1tpXTtcbiAgICAgICAgICAgICAgICBuZXh0U3RlcElucHV0cyA9IGF3YWl0IHN0ZXAuYmF0Y2gobmV4dFN0ZXBJbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFJ1bk1hbmFnZXIgPSBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBjaGlsZFJ1bk1hbmFnZXIgfSk7XG4gICAgICAgICAgICAgICAgfSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QobmV4dFN0ZXBJbnB1dHMsIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICByZXR1cm4gbmV4dFN0ZXBJbnB1dHM7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgeyBydW5JZCwgLi4ub3RoZXJPcHRpb25zIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3RoZXJPcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgY29uc3Qgc3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgICAgIGxldCBjb25jYXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBpbnB1dEdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZmluYWxHZW5lcmF0b3IgPSBzdGVwc1swXS50cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IoKSwgcGF0Y2hDb25maWcob3RoZXJPcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6MWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBzdGVwc1tpXTtcbiAgICAgICAgICAgICAgICBmaW5hbEdlbmVyYXRvciA9IGF3YWl0IHN0ZXAudHJhbnNmb3JtKGZpbmFsR2VuZXJhdG9yLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGZpbmFsR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuICogYW5kIHJldHVybnMgYSBtYXBwaW5nIG9mIHRoZWlyIG91dHB1dHMuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWFwQ2hhaW4gPSBSdW5uYWJsZU1hcC5mcm9tKHtcbiAqICAgam9rZTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiKS5waXBlKFxuICogICAgIG5ldyBDaGF0QW50aHJvcGljKHt9KSxcbiAqICAgKSxcbiAqICAgcG9lbTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwid3JpdGUgYSAyLWxpbmUgcG9lbSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogfSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXBDaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyXCIgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTWFwIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZU1hcFwiO1xuICAgIH1cbiAgICBnZXRTdGVwc0tleXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0ZXBzKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RlcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGVwcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMuc3RlcHMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oc3RlcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHtcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICB9LCBjb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXModGhpcy5zdGVwcykubWFwKGFzeW5jIChba2V5LCBydW5uYWJsZV0pID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gc2hhbGxvdyBjb3B5IHN0ZXBzIHRvIGlnbm9yZSBjaGFuZ2VzIHdoaWxlIGl0ZXJhdGluZ1xuICAgICAgICBjb25zdCBzdGVwcyA9IHsgLi4udGhpcy5zdGVwcyB9O1xuICAgICAgICAvLyBlYWNoIHN0ZXAgZ2V0cyBhIGNvcHkgb2YgdGhlIGlucHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IGlucHV0Q29waWVzID0gYXRlZShnZW5lcmF0b3IsIE9iamVjdC5rZXlzKHN0ZXBzKS5sZW5ndGgpO1xuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIGVhY2ggb3V0cHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IHRhc2tzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhzdGVwcykubWFwKChba2V5LCBydW5uYWJsZV0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbiA9IHJ1bm5hYmxlLnRyYW5zZm9ybShpbnB1dENvcGllc1tpXSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyB5aWVsZCBjaHVua3MgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLFxuICAgICAgICAvLyBzdGFydGluZyBuZXcgaXRlcmF0aW9ucyBhcyBuZWVkZWQsXG4gICAgICAgIC8vIHVudGlsIGFsbCBpdGVyYXRvcnMgYXJlIGRvbmVcbiAgICAgICAgd2hpbGUgKHRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCByZXN1bHQsIGdlbiB9ID0gYXdhaXQgUHJvbWlzZS5yYWNlKHRhc2tzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHsgW2tleV06IHJlc3VsdC52YWx1ZSB9O1xuICAgICAgICAgICAgICAgIHRhc2tzLnNldChrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoeyBrZXksIGdlbiwgcmVzdWx0IH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgY2FsbGFibGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUxhbWJkYSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVMYW1iZGFcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkucnVuKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG91dHB1dCA9IGF3YWl0IHRoaXMuZnVuYyhpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgb3V0cHV0Lmludm9rZShpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY2hpbGRDb25maWcucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRJbnN0YW5jZSgpLnJ1bihjb25maWcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmZ1bmMoZmluYWxDaHVuaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBvdXRwdXQuc3RyZWFtKGZpbmFsQ2h1bmssIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVQYXJhbGxlbCBleHRlbmRzIFJ1bm5hYmxlTWFwIHtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSB0aGF0IGNhbiBmYWxsYmFjayB0byBvdGhlciBSdW5uYWJsZXMgaWYgaXQgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhGYWxsYmFja3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlV2l0aEZhbGxiYWNrc1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSBmaWVsZHMuZmFsbGJhY2tzO1xuICAgIH1cbiAgICAqcnVubmFibGVzKCkge1xuICAgICAgICB5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuICAgICAgICBmb3IgKGNvbnN0IGZhbGxiYWNrIG9mIHRoaXMuZmFsbGJhY2tzKSB7XG4gICAgICAgICAgICB5aWVsZCBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUob3B0aW9ucz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIG9wdGlvbnM/LnRhZ3MsIHVuZGVmaW5lZCwgb3B0aW9ucz8ubWV0YWRhdGEpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcob3RoZXJPcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpO1xuICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSBhd2FpdCBydW5uYWJsZS5iYXRjaChpbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4gcGF0Y2hDb25maWcoY29uZmlnTGlzdFtqXSwge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCksXG4gICAgICAgICAgICAgICAgfSkpLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaSkgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzW2ldLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaXJzdEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpKSk7XG4gICAgICAgIHRocm93IGZpcnN0RXJyb3I7XG4gICAgfVxufVxuLy8gVE9ETzogRmlndXJlIG91dCB3aHkgdGhlIGNvbXBpbGVyIG5lZWRzIGhlbHAgZWxpbWluYXRpbmcgRXJyb3IgYXMgYSBSdW5PdXRwdXQgdHlwZVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpIHtcbiAgICBpZiAodHlwZW9mIGNvZXJjZWFibGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHsgZnVuYzogY29lcmNlYWJsZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoUnVubmFibGUuaXNSdW5uYWJsZShjb2VyY2VhYmxlKSkge1xuICAgICAgICByZXR1cm4gY29lcmNlYWJsZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoY29lcmNlYWJsZSkgJiYgdHlwZW9mIGNvZXJjZWFibGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgcnVubmFibGVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICBydW5uYWJsZXNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHtcbiAgICAgICAgICAgIHN0ZXBzOiBydW5uYWJsZXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIFJ1bm5hYmxlLCBmdW5jdGlvbiBvciBvYmplY3QuXFxuSW5zdGVhZCBnb3QgYW4gdW5zdXBwb3J0ZWQgdHlwZS5gKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVBc3NpZ24gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQXNzaWduXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChmaWVsZHMgaW5zdGFuY2VvZiBSdW5uYWJsZU1hcCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IG1hcHBlcjogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXBwZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBmaWVsZHMubWFwcGVyO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyUmVzdWx0ID0gYXdhaXQgdGhpcy5tYXBwZXIuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgLi4ubWFwcGVyUmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gY29sbGVjdCBtYXBwZXIga2V5c1xuICAgICAgICBjb25zdCBtYXBwZXJLZXlzID0gdGhpcy5tYXBwZXIuZ2V0U3RlcHNLZXlzKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB0d28gaW5wdXQgZ2Vucywgb25lIGZvciB0aGUgbWFwcGVyLCBvbmUgZm9yIHRoZSBpbnB1dFxuICAgICAgICBjb25zdCBbZm9yUGFzc3Rocm91Z2gsIGZvck1hcHBlcl0gPSBhdGVlKGdlbmVyYXRvcik7XG4gICAgICAgIC8vIGNyZWF0ZSBtYXBwZXIgb3V0cHV0IGdlblxuICAgICAgICBjb25zdCBtYXBwZXJPdXRwdXQgPSB0aGlzLm1hcHBlci50cmFuc2Zvcm0oZm9yTWFwcGVyLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBtYXBwZXJcbiAgICAgICAgY29uc3QgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UgPSBtYXBwZXJPdXRwdXQubmV4dCgpO1xuICAgICAgICAvLyB5aWVsZCB0aGUgcGFzc3Rocm91Z2hcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBmb3JQYXNzdGhyb3VnaCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGNodW5rKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGVBc3NpZ24gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIG9iamVjdHMgYXMgaW5wdXQsIGdvdCAke3R5cGVvZiBjaHVua31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrZXldKSA9PiAhbWFwcGVyS2V5cy5pbmNsdWRlcyhrZXkpKSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVyZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB5aWVsZCB0aGUgbWFwcGVyIG91dHB1dFxuICAgICAgICB5aWVsZCAoYXdhaXQgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UpLnZhbHVlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG1hcHBlck91dHB1dCkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVQaWNrIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVBpY2tcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGtleXM6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtleXMgPSBmaWVsZHMua2V5cztcbiAgICB9XG4gICAgYXN5bmMgX3BpY2soaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmtleXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFt0aGlzLmtleXNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGlja2VkID0gdGhpcy5rZXlzXG4gICAgICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiBba2V5LCBpbnB1dFtrZXldXSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2WzFdICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHBpY2tlZC5sZW5ndGggPT09IDAgPyB1bmRlZmluZWQgOiBPYmplY3QuZnJvbUVudHJpZXMocGlja2VkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX3BpY2suYmluZCh0aGlzKSwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IGF3YWl0IHRoaXMuX3BpY2soY2h1bmspO1xuICAgICAgICAgICAgaWYgKHBpY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgcGlja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgb3B0aW9ucykpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInoiLCJwUmV0cnkiLCJDYWxsYmFja01hbmFnZXIiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJSdW5Mb2ciLCJSdW5Mb2dQYXRjaCIsIlNlcmlhbGl6YWJsZSIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJjb25jYXQiLCJhdGVlIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJlbnN1cmVDb25maWciLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwYXRjaENvbmZpZyIsIkFzeW5jQ2FsbGVyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsIl9Sb290RXZlbnRGaWx0ZXIiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsIkdyYXBoIiwiX2NvZXJjZVRvRGljdCIsInZhbHVlIiwiZGVmYXVsdEtleSIsIkFycmF5IiwiaXNBcnJheSIsIkRhdGUiLCJSdW5uYWJsZSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJnZXROYW1lIiwic3VmZml4IiwibmFtZSIsImxjX25hbWUiLCJiaW5kIiwia3dhcmdzIiwiUnVubmFibGVCaW5kaW5nIiwiYm91bmQiLCJjb25maWciLCJtYXAiLCJSdW5uYWJsZUVhY2giLCJ3aXRoUmV0cnkiLCJmaWVsZHMiLCJSdW5uYWJsZVJldHJ5IiwibWF4QXR0ZW1wdE51bWJlciIsInN0b3BBZnRlckF0dGVtcHQiLCJ3aXRoQ29uZmlnIiwid2l0aEZhbGxiYWNrcyIsIlJ1bm5hYmxlV2l0aEZhbGxiYWNrcyIsInJ1bm5hYmxlIiwiZmFsbGJhY2tzIiwiX2dldE9wdGlvbnNMaXN0Iiwib3B0aW9ucyIsImxlbmd0aCIsIkVycm9yIiwicnVuSWQiLCJjb25zb2xlIiwid2FybiIsInN1YnNlcXVlbnQiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJrZXkiLCJmcm9tIiwiXyIsImkiLCJiYXRjaCIsImlucHV0cyIsImJhdGNoT3B0aW9ucyIsImNvbmZpZ0xpc3QiLCJtYXhDb25jdXJyZW5jeSIsImNhbGxlciIsIm9uRmFpbGVkQXR0ZW1wdCIsImUiLCJiYXRjaENhbGxzIiwiaW5wdXQiLCJjYWxsIiwicmVzdWx0IiwiaW52b2tlIiwicmV0dXJuRXhjZXB0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJfc3RyZWFtSXRlcmF0b3IiLCJzdHJlYW0iLCJ3cmFwcGVkR2VuZXJhdG9yIiwic2V0dXAiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwidW5kZWZpbmVkIiwiY2FsbGJhY2tzIiwidGFncyIsIm1ldGFkYXRhIiwicnVuTmFtZSIsInJlY3Vyc2lvbkxpbWl0IiwiY2FsbE9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJmdW5jIiwiY2FsbGJhY2tNYW5hZ2VyXyIsInJ1bk1hbmFnZXIiLCJoYW5kbGVDaGFpblN0YXJ0IiwidG9KU09OIiwicnVuVHlwZSIsIm91dHB1dCIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsImhhbmRsZVN0YXJ0UmVzIiwib3V0cHV0cyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJpc0xvZ1N0cmVhbUhhbmRsZXIiLCJoYW5kbGVyIiwic3RyZWFtTG9nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsIml0ZXJhdG9yIiwidGFwT3V0cHV0SXRlcmFibGUiLCJnZXRHcmFwaCIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJmaXJzdCIsImxhc3QiLCJfY29lcmNlVG9SdW5uYWJsZSIsInBpY2siLCJrZXlzIiwiUnVubmFibGVQaWNrIiwiYXNzaWduIiwibWFwcGluZyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVNYXAiLCJzdGVwcyIsInRyYW5zZm9ybSIsImdlbmVyYXRvciIsImZpbmFsQ2h1bmsiLCJzdHJlYW1Mb2ciLCJzdHJlYW1PcHRpb25zIiwibG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiX3NjaGVtYUZvcm1hdCIsIl9zdHJlYW1Mb2ciLCJjb3BpZWRDYWxsYmFja3MiLCJjb3B5IiwiaW5oZXJpdGFibGVIYW5kbGVycyIsInB1c2giLCJydW5uYWJsZVN0cmVhbVByb21pc2UiLCJjb25zdW1lUnVubmFibGVTdHJlYW0iLCJydW5uYWJsZVN0cmVhbSIsInBhdGNoIiwib3BzIiwib3AiLCJwYXRoIiwid3JpdGVyIiwid3JpdGUiLCJjbG9zZSIsInJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UiLCJsb2ciLCJzdHJlYW1FdmVudHMiLCJ2ZXJzaW9uIiwicnVuTG9nIiwiaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50Iiwicm9vdFRhZ3MiLCJyb290TWV0YWRhdGEiLCJyb290TmFtZSIsInJvb3RFdmVudEZpbHRlciIsImxvZ1N0cmVhbSIsImZyb21SdW5Mb2dQYXRjaCIsInN0YXRlIiwiZXZlbnQiLCJydW5faWQiLCJpZCIsInR5cGUiLCJkYXRhIiwiaW5jbHVkZUV2ZW50IiwicGF0aHMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWR1cGVkUGF0aHMiLCJTZXQiLCJldmVudFR5cGUiLCJsb2dFbnRyeSIsImxvZ3MiLCJlbmRfdGltZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImNodW5rQ291bnQiLCJpc1J1bm5hYmxlIiwidGhpbmciLCJ3aXRoTGlzdGVuZXJzIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsImNvbmZpZ0ZhY3RvcmllcyIsIl9tZXJnZUNvbmZpZyIsImNvbmZpZ0ZhY3RvcnkiLCJtZXJnZWRPcHRpb25zIiwiaW5kaXZpZHVhbE9wdGlvbiIsImlzUnVubmFibGVCaW5kaW5nIiwiX2ludm9rZSIsImdldENoaWxkIiwiX3BhdGNoQ29uZmlnRm9yUmV0cnkiLCJhdHRlbXB0IiwidGFnIiwiYXR0ZW1wdE51bWJlciIsImVycm9yIiwicmV0cmllcyIsIk1hdGgiLCJtYXgiLCJyYW5kb21pemUiLCJfYmF0Y2giLCJjb25maWdzIiwicmVzdWx0c01hcCIsInJlbWFpbmluZ0luZGV4ZXMiLCJ0b1N0cmluZyIsInJlbWFpbmluZ0lucHV0cyIsInBhdGNoZWRDb25maWdzIiwicmVzdWx0cyIsImZpcnN0RXhjZXB0aW9uIiwicmVzdWx0TWFwSW5kZXgiLCJzb3J0IiwiYSIsImIiLCJwYXJzZUludCIsIm1pZGRsZSIsIm5leHRTdGVwSW5wdXQiLCJpbml0aWFsU3RlcHMiLCJzdGVwIiwibmV4dFN0ZXBJbnB1dHMiLCJqIiwiY2hpbGRSdW5NYW5hZ2VyIiwib3RoZXJPcHRpb25zIiwiY29uY2F0U3VwcG9ydGVkIiwiZmluYWxHZW5lcmF0b3IiLCJjdXJyZW50TGFzdE5vZGUiLCJmb3JFYWNoIiwiaW5kZXgiLCJzdGVwR3JhcGgiLCJ0cmltRmlyc3ROb2RlIiwidHJpbUxhc3ROb2RlIiwiZXh0ZW5kIiwic3RlcEZpcnN0Tm9kZSIsImZpcnN0Tm9kZSIsImxhc3ROb2RlIiwiaXNSdW5uYWJsZVNlcXVlbmNlIiwicnVubmFibGVzIiwic2xpY2UiLCJnZXRTdGVwc0tleXMiLCJfdHJhbnNmb3JtIiwiaW5wdXRDb3BpZXMiLCJ0YXNrcyIsIk1hcCIsImdlbiIsIm5leHQiLCJ0aGVuIiwic2l6ZSIsInJhY2UiLCJ2YWx1ZXMiLCJkZWxldGUiLCJkb25lIiwic2V0IiwiUnVubmFibGVMYW1iZGEiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2hpbGRDb25maWciLCJnZXRJbnN0YW5jZSIsInJ1biIsInJlcyIsIlJ1bm5hYmxlUGFyYWxsZWwiLCJmYWxsYmFjayIsImNvbmZpZ3VyZSIsImZpcnN0RXJyb3IiLCJtYXBwZXIiLCJtYXBwZXJSZXN1bHQiLCJtYXBwZXJLZXlzIiwiZm9yUGFzc3Rocm91Z2giLCJmb3JNYXBwZXIiLCJtYXBwZXJPdXRwdXQiLCJmaXJzdE1hcHBlckNodW5rUHJvbWlzZSIsImZpbHRlcmVkIiwiaW5jbHVkZXMiLCJfcGljayIsInBpY2tlZCIsInYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/config.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/config.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n *\n * Note: To make sure async local storage loading works correctly, this\n * should not be called with a default or prepopulated config argument.\n */ function ensureConfig(config) {\n    const loadedConfig = config ?? _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    let empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (loadedConfig) {\n        empty = {\n            ...empty,\n            ...loadedConfig\n        };\n    }\n    if (loadedConfig?.configurable) {\n        for (const key of Object.keys(loadedConfig.configurable)){\n            if (PRIMITIVES.has(typeof loadedConfig.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = loadedConfig.configurable[key];\n            }\n        }\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9jb25maWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwRTtBQUNFO0FBQ3JFLE1BQU1HLDBCQUEwQixHQUFHO0FBQ25DLGVBQWVDLDRCQUE0QkMsTUFBTTtJQUNwRCxPQUFPTCxrRUFBZUEsQ0FBQ00sU0FBUyxDQUFDRCxRQUFRRSxXQUFXQyxXQUFXSCxRQUFRSSxNQUFNRCxXQUFXSCxRQUFRSztBQUNwRztBQUNPLFNBQVNDLGFBQWEsR0FBR0MsT0FBTztJQUNuQyxnRkFBZ0Y7SUFDaEYsb0VBQW9FO0lBQ3BFLE1BQU1DLE9BQU8sQ0FBQztJQUNkLEtBQUssTUFBTUMsV0FBV0YsUUFBUUcsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQSxHQUFJO1FBQzlDLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxTQUFVO1lBQ3BDLElBQUlHLFFBQVEsWUFBWTtnQkFDcEJKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFFBQVE7Z0JBQ3JCLE1BQU1HLFdBQVdQLElBQUksQ0FBQ0ksSUFBSSxJQUFJLEVBQUU7Z0JBQ2hDSixJQUFJLENBQUNJLElBQUksR0FBRzt1QkFBSSxJQUFJSSxJQUFJRCxTQUFTRSxNQUFNLENBQUNSLE9BQU8sQ0FBQ0csSUFBSSxJQUFJLEVBQUU7aUJBQUc7WUFDakUsT0FDSyxJQUFJQSxRQUFRLGdCQUFnQjtnQkFDN0JKLElBQUksQ0FBQ0ksSUFBSSxHQUFHO29CQUFFLEdBQUdKLElBQUksQ0FBQ0ksSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLGFBQWE7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SUFBSSxDQUFDd0IsTUFBTS9CLFFBQVEsRUFBRTtvQkFDakIrQixNQUFNL0IsUUFBUSxHQUFHLENBQUM7Z0JBQ3RCO2dCQUNBK0IsTUFBTS9CLFFBQVEsQ0FBQ08sSUFBSSxHQUFHcUIsYUFBYU0sWUFBWSxDQUFDM0IsSUFBSTtZQUN4RDtRQUNKO0lBQ0o7SUFDQSxPQUFPd0I7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU0ssWUFBWXpDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRUUsU0FBUyxFQUFFd0MsY0FBYyxFQUFFTCxjQUFjLEVBQUVNLE9BQU8sRUFBRUosWUFBWSxFQUFFRCxLQUFLLEVBQUcsR0FBRyxDQUFDLENBQUM7SUFDdEgsTUFBTU0sWUFBWVosYUFBYWhDO0lBQy9CLElBQUlFLGNBQWNDLFdBQVc7UUFDekI7OztTQUdDLEdBQ0QsT0FBT3lDLFVBQVVELE9BQU87UUFDeEJDLFVBQVUxQyxTQUFTLEdBQUdBO0lBQzFCO0lBQ0EsSUFBSW1DLG1CQUFtQmxDLFdBQVc7UUFDOUJ5QyxVQUFVUCxjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSUssbUJBQW1CdkMsV0FBVztRQUM5QnlDLFVBQVVGLGNBQWMsR0FBR0E7SUFDL0I7SUFDQSxJQUFJQyxZQUFZeEMsV0FBVztRQUN2QnlDLFVBQVVELE9BQU8sR0FBR0E7SUFDeEI7SUFDQSxJQUFJSixpQkFBaUJwQyxXQUFXO1FBQzVCeUMsVUFBVUwsWUFBWSxHQUFHO1lBQUUsR0FBR0ssVUFBVUwsWUFBWTtZQUFFLEdBQUdBLFlBQVk7UUFBQztJQUMxRTtJQUNBLElBQUlELFVBQVVuQyxXQUFXO1FBQ3JCLE9BQU95QyxVQUFVTixLQUFLO0lBQzFCO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvY29uZmlnLmpzP2RmYjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCBlbnN1cmVIYW5kbGVyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9IGZyb20gXCIuLi9zaW5nbGV0b25zL2luZGV4LmpzXCI7XG5leHBvcnQgY29uc3QgREVGQVVMVF9SRUNVUlNJT05fTElNSVQgPSAyNTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQ29uZmlncyguLi5jb25maWdzKSB7XG4gICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gY2FsbCBlbnN1cmVDb25maWcgb24gdGhlIGVtcHR5IHN0YXRlIGhlcmUgYXMgdGhpcyBtYXkgY2F1c2VcbiAgICAvLyBkb3VibGUgbG9hZGluZyBvZiBjYWxsYmFja3MgaWYgYXN5bmMgbG9jYWwgc3RvcmFnZSBpcyBiZWluZyB1c2VkLlxuICAgIGNvbnN0IGNvcHkgPSB7fTtcbiAgICBmb3IgKGNvbnN0IG9wdGlvbnMgb2YgY29uZmlncy5maWx0ZXIoKGMpID0+ICEhYykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwibWV0YWRhdGFcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJ0YWdzXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlS2V5cyA9IGNvcHlba2V5XSA/PyBbXTtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSBbLi4ubmV3IFNldChiYXNlS2V5cy5jb25jYXQob3B0aW9uc1trZXldID8/IFtdKSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNvbmZpZ3VyYWJsZVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcImNhbGxiYWNrc1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUNhbGxiYWNrcyA9IGNvcHkuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVkQ2FsbGJhY2tzID0gb3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgLy8gY2FsbGJhY2tzIGNhbiBiZSBlaXRoZXIgdW5kZWZpbmVkLCBBcnJheTxoYW5kbGVyPiBvciBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgLy8gc28gbWVyZ2luZyB0d28gY2FsbGJhY2tzIHZhbHVlcyBoYXMgNiBjYXNlc1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3ZpZGVkQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBiYXNlQ2FsbGJhY2tzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IGJhc2VDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBwcm92aWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvdmlkZWRDYWxsYmFja3MgaXMgYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gcHJvdmlkZWRDYWxsYmFja3MuY29weSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VDYWxsYmFja3MgaXMgYWxzbyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbmV3IENhbGxiYWNrTWFuYWdlcihwcm92aWRlZENhbGxiYWNrcy5fcGFyZW50UnVuSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyczogYmFzZUNhbGxiYWNrcy5oYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhYmxlSGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogQXJyYXkuZnJvbShuZXcgU2V0KGJhc2VDYWxsYmFja3MudGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MudGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZVRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJhc2VDYWxsYmFja3MubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3ZpZGVkQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVkS2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGNvcHlbdHlwZWRLZXldID0gb3B0aW9uc1t0eXBlZEtleV0gPz8gY29weVt0eXBlZEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvcHk7XG59XG5jb25zdCBQUklNSVRJVkVTID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJib29sZWFuXCJdKTtcbi8qKlxuICogRW5zdXJlIHRoYXQgYSBwYXNzZWQgY29uZmlnIGlzIGFuIG9iamVjdCB3aXRoIGFsbCByZXF1aXJlZCBrZXlzIHByZXNlbnQuXG4gKlxuICogTm90ZTogVG8gbWFrZSBzdXJlIGFzeW5jIGxvY2FsIHN0b3JhZ2UgbG9hZGluZyB3b3JrcyBjb3JyZWN0bHksIHRoaXNcbiAqIHNob3VsZCBub3QgYmUgY2FsbGVkIHdpdGggYSBkZWZhdWx0IG9yIHByZXBvcHVsYXRlZCBjb25maWcgYXJndW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVDb25maWcoY29uZmlnKSB7XG4gICAgY29uc3QgbG9hZGVkQ29uZmlnID0gY29uZmlnID8/IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24uZ2V0SW5zdGFuY2UoKS5nZXRTdG9yZSgpO1xuICAgIGxldCBlbXB0eSA9IHtcbiAgICAgICAgdGFnczogW10sXG4gICAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgICAgY2FsbGJhY2tzOiB1bmRlZmluZWQsXG4gICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAyNSxcbiAgICAgICAgcnVuSWQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgIGlmIChsb2FkZWRDb25maWcpIHtcbiAgICAgICAgZW1wdHkgPSB7IC4uLmVtcHR5LCAuLi5sb2FkZWRDb25maWcgfTtcbiAgICB9XG4gICAgaWYgKGxvYWRlZENvbmZpZz8uY29uZmlndXJhYmxlKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGxvYWRlZENvbmZpZy5jb25maWd1cmFibGUpKSB7XG4gICAgICAgICAgICBpZiAoUFJJTUlUSVZFUy5oYXModHlwZW9mIGxvYWRlZENvbmZpZy5jb25maWd1cmFibGVba2V5XSkgJiZcbiAgICAgICAgICAgICAgICAhZW1wdHkubWV0YWRhdGE/LltrZXldKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbXB0eS5tZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbXB0eS5tZXRhZGF0YVtrZXldID0gbG9hZGVkQ29uZmlnLmNvbmZpZ3VyYWJsZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbXB0eTtcbn1cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgcGF0Y2hlcyBydW5uYWJsZSBjb25maWdzIHdpdGggdXBkYXRlZCBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hDb25maWcoY29uZmlnID0ge30sIHsgY2FsbGJhY2tzLCBtYXhDb25jdXJyZW5jeSwgcmVjdXJzaW9uTGltaXQsIHJ1bk5hbWUsIGNvbmZpZ3VyYWJsZSwgcnVuSWQsIH0gPSB7fSkge1xuICAgIGNvbnN0IG5ld0NvbmZpZyA9IGVuc3VyZUNvbmZpZyhjb25maWcpO1xuICAgIGlmIChjYWxsYmFja3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UncmUgcmVwbGFjaW5nIGNhbGxiYWNrcyB3ZSBuZWVkIHRvIHVuc2V0IHJ1bk5hbWVcbiAgICAgICAgICogc2luY2UgdGhhdCBzaG91bGQgYXBwbHkgb25seSB0byB0aGUgc2FtZSBydW4gYXMgdGhlIG9yaWdpbmFsIGNhbGxiYWNrc1xuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlIG5ld0NvbmZpZy5ydW5OYW1lO1xuICAgICAgICBuZXdDb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgIH1cbiAgICBpZiAocmVjdXJzaW9uTGltaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucmVjdXJzaW9uTGltaXQgPSByZWN1cnNpb25MaW1pdDtcbiAgICB9XG4gICAgaWYgKG1heENvbmN1cnJlbmN5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVuY3k7XG4gICAgfVxuICAgIGlmIChydW5OYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLnJ1bk5hbWUgPSBydW5OYW1lO1xuICAgIH1cbiAgICBpZiAoY29uZmlndXJhYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSA9IHsgLi4ubmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSwgLi4uY29uZmlndXJhYmxlIH07XG4gICAgfVxuICAgIGlmIChydW5JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSBuZXdDb25maWcucnVuSWQ7XG4gICAgfVxuICAgIHJldHVybiBuZXdDb25maWc7XG59XG4iXSwibmFtZXMiOlsiQ2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCIsImdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyIsImNvbmZpZyIsImNvbmZpZ3VyZSIsImNhbGxiYWNrcyIsInVuZGVmaW5lZCIsInRhZ3MiLCJtZXRhZGF0YSIsIm1lcmdlQ29uZmlncyIsImNvbmZpZ3MiLCJjb3B5Iiwib3B0aW9ucyIsImZpbHRlciIsImMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwiYmFzZUtleXMiLCJTZXQiLCJjb25jYXQiLCJiYXNlQ2FsbGJhY2tzIiwicHJvdmlkZWRDYWxsYmFja3MiLCJBcnJheSIsImlzQXJyYXkiLCJtYW5hZ2VyIiwiY2FsbGJhY2siLCJhZGRIYW5kbGVyIiwiX3BhcmVudFJ1bklkIiwiaGFuZGxlcnMiLCJpbmhlcml0YWJsZUhhbmRsZXJzIiwiZnJvbSIsImluaGVyaXRhYmxlVGFncyIsInR5cGVkS2V5IiwiUFJJTUlUSVZFUyIsImVuc3VyZUNvbmZpZyIsImxvYWRlZENvbmZpZyIsImdldEluc3RhbmNlIiwiZ2V0U3RvcmUiLCJlbXB0eSIsInJlY3Vyc2lvbkxpbWl0IiwicnVuSWQiLCJjb25maWd1cmFibGUiLCJoYXMiLCJwYXRjaENvbmZpZyIsIm1heENvbmN1cnJlbmN5IiwicnVuTmFtZSIsIm5ld0NvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/graph.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/graph.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph),\n/* harmony export */   nodeDataStr: () => (/* binding */ nodeDataStr)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/utils.js\");\n\n\n\nconst MAX_DATA_DISPLAY_NAME_LENGTH = 42;\nfunction nodeDataStr(node) {\n    if (!(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id)) {\n        return node.id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        try {\n            let data = node.data.toString();\n            if (data.startsWith(\"<\") || data[0] !== data[0].toUpperCase() || data.split(\"\\n\").length > 1) {\n                data = node.data.getName();\n            } else if (data.length > MAX_DATA_DISPLAY_NAME_LENGTH) {\n                data = `${data.substring(0, MAX_DATA_DISPLAY_NAME_LENGTH)}...`;\n            }\n            return data.startsWith(\"Runnable\") ? data.slice(\"Runnable\".length) : data;\n        } catch (error) {\n            return node.data.getName();\n        }\n    } else {\n        return node.data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data is implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>edge.data ? {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target],\n                    data: edge.data\n                } : {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                })\n        };\n    }\n    addNode(data, id) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id || (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        const targets = new Set(this.edges.map((edge)=>edge.target));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!targets.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    lastNode() {\n        const sources = new Set(this.edges.map((edge)=>edge.source));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!sources.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    extend(graph) {\n        // Add all nodes from the other graph, taking care to avoid duplicates\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[key] = value;\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...graph.edges\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode) {\n            const outgoingEdges = this.edges.filter((edge)=>edge.source === firstNode.id);\n            if (Object.keys(this.nodes).length === 1 || outgoingEdges.length === 1) {\n                this.removeNode(firstNode);\n            }\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode) {\n            const incomingEdges = this.edges.filter((edge)=>edge.target === lastNode.id);\n            if (Object.keys(this.nodes).length === 1 || incomingEdges.length === 1) {\n                this.removeNode(lastNode);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9ncmFwaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUQ7QUFDRztBQUNQO0FBQ2pELE1BQU1NLCtCQUErQjtBQUM5QixTQUFTQyxZQUFZQyxJQUFJO0lBQzVCLElBQUksQ0FBQ0osZ0RBQU1BLENBQUNJLEtBQUtDLEVBQUUsR0FBRztRQUNsQixPQUFPRCxLQUFLQyxFQUFFO0lBQ2xCLE9BQ0ssSUFBSUosOERBQW1CQSxDQUFDRyxLQUFLRSxJQUFJLEdBQUc7UUFDckMsSUFBSTtZQUNBLElBQUlBLE9BQU9GLEtBQUtFLElBQUksQ0FBQ0MsUUFBUTtZQUM3QixJQUFJRCxLQUFLRSxVQUFVLENBQUMsUUFDaEJGLElBQUksQ0FBQyxFQUFFLEtBQUtBLElBQUksQ0FBQyxFQUFFLENBQUNHLFdBQVcsTUFDL0JILEtBQUtJLEtBQUssQ0FBQyxNQUFNQyxNQUFNLEdBQUcsR0FBRztnQkFDN0JMLE9BQU9GLEtBQUtFLElBQUksQ0FBQ00sT0FBTztZQUM1QixPQUNLLElBQUlOLEtBQUtLLE1BQU0sR0FBR1QsOEJBQThCO2dCQUNqREksT0FBTyxDQUFDLEVBQUVBLEtBQUtPLFNBQVMsQ0FBQyxHQUFHWCw4QkFBOEIsR0FBRyxDQUFDO1lBQ2xFO1lBQ0EsT0FBT0ksS0FBS0UsVUFBVSxDQUFDLGNBQWNGLEtBQUtRLEtBQUssQ0FBQyxXQUFXSCxNQUFNLElBQUlMO1FBQ3pFLEVBQ0EsT0FBT1MsT0FBTztZQUNWLE9BQU9YLEtBQUtFLElBQUksQ0FBQ00sT0FBTztRQUM1QjtJQUNKLE9BQ0s7UUFDRCxPQUFPUixLQUFLRSxJQUFJLENBQUNVLElBQUksSUFBSTtJQUM3QjtBQUNKO0FBQ0EsU0FBU0MsYUFBYWIsSUFBSTtJQUN0QixzQ0FBc0M7SUFDdEMsSUFBSUgsOERBQW1CQSxDQUFDRyxLQUFLRSxJQUFJLEdBQUc7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Ym90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGguanM/ZjZiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiem9kLXRvLWpzb24tc2NoZW1hXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQsIHZhbGlkYXRlIGFzIGlzVXVpZCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmNvbnN0IE1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEggPSA0MjtcbmV4cG9ydCBmdW5jdGlvbiBub2RlRGF0YVN0cihub2RlKSB7XG4gICAgaWYgKCFpc1V1aWQobm9kZS5pZCkpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaWQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUnVubmFibGVJbnRlcmZhY2Uobm9kZS5kYXRhKSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBub2RlLmRhdGEudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXJ0c1dpdGgoXCI8XCIpIHx8XG4gICAgICAgICAgICAgICAgZGF0YVswXSAhPT0gZGF0YVswXS50b1VwcGVyQ2FzZSgpIHx8XG4gICAgICAgICAgICAgICAgZGF0YS5zcGxpdChcIlxcblwiKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG5vZGUuZGF0YS5nZXROYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLmxlbmd0aCA+IE1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gYCR7ZGF0YS5zdWJzdHJpbmcoMCwgTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCl9Li4uYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhLnN0YXJ0c1dpdGgoXCJSdW5uYWJsZVwiKSA/IGRhdGEuc2xpY2UoXCJSdW5uYWJsZVwiLmxlbmd0aCkgOiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuZGF0YS5nZXROYW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlLmRhdGEubmFtZSA/PyBcIlVua25vd25TY2hlbWFcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBub2RlRGF0YUpzb24obm9kZSkge1xuICAgIC8vIGlmIG5vZGUuZGF0YSBpcyBpbXBsZW1lbnRzIFJ1bm5hYmxlXG4gICAgaWYgKGlzUnVubmFibGVJbnRlcmZhY2Uobm9kZS5kYXRhKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJydW5uYWJsZVwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiBub2RlLmRhdGEubGNfaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogbm9kZS5kYXRhLmdldE5hbWUoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogXCJzY2hlbWFcIixcbiAgICAgICAgICAgIGRhdGE6IHsgLi4uem9kVG9Kc29uU2NoZW1hKG5vZGUuZGF0YS5zY2hlbWEpLCB0aXRsZTogbm9kZS5kYXRhLm5hbWUgfSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgR3JhcGgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2Rlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVkZ2VzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gQ29udmVydCB0aGUgZ3JhcGggdG8gYSBKU09OLXNlcmlhbGl6YWJsZSBmb3JtYXQuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IHN0YWJsZU5vZGVJZHMgPSB7fTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlLCBpKSA9PiB7XG4gICAgICAgICAgICBzdGFibGVOb2RlSWRzW25vZGUuaWRdID0gaXNVdWlkKG5vZGUuaWQpID8gaSA6IG5vZGUuaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9kZXM6IE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykubWFwKChub2RlKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlkOiBzdGFibGVOb2RlSWRzW25vZGUuaWRdLFxuICAgICAgICAgICAgICAgIC4uLm5vZGVEYXRhSnNvbihub2RlKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGVkZ2VzOiB0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4gZWRnZS5kYXRhXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3RhYmxlTm9kZUlkc1tlZGdlLnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogc3RhYmxlTm9kZUlkc1tlZGdlLnRhcmdldF0sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGVkZ2UuZGF0YSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc3RhYmxlTm9kZUlkc1tlZGdlLnNvdXJjZV0sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogc3RhYmxlTm9kZUlkc1tlZGdlLnRhcmdldF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFkZE5vZGUoZGF0YSwgaWQpIHtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ub2Rlc1tpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb2RlIHdpdGggaWQgJHtpZH0gYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlSWQgPSBpZCB8fCB1dWlkdjQoKTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHsgaWQ6IG5vZGVJZCwgZGF0YSB9O1xuICAgICAgICB0aGlzLm5vZGVzW25vZGVJZF0gPSBub2RlO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBub2RlcyBtYXBcbiAgICAgICAgZGVsZXRlIHRoaXMubm9kZXNbbm9kZS5pZF07XG4gICAgICAgIC8vIEZpbHRlciBvdXQgZWRnZXMgY29ubmVjdGVkIHRvIHRoZSBub2RlXG4gICAgICAgIHRoaXMuZWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS5zb3VyY2UgIT09IG5vZGUuaWQgJiYgZWRnZS50YXJnZXQgIT09IG5vZGUuaWQpO1xuICAgIH1cbiAgICBhZGRFZGdlKHNvdXJjZSwgdGFyZ2V0LCBkYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVzW3NvdXJjZS5pZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb3VyY2Ugbm9kZSAke3NvdXJjZS5pZH0gbm90IGluIGdyYXBoYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubm9kZXNbdGFyZ2V0LmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBub2RlICR7dGFyZ2V0LmlkfSBub3QgaW4gZ3JhcGhgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlZGdlID0geyBzb3VyY2U6IHNvdXJjZS5pZCwgdGFyZ2V0OiB0YXJnZXQuaWQsIGRhdGEgfTtcbiAgICAgICAgdGhpcy5lZGdlcy5wdXNoKGVkZ2UpO1xuICAgICAgICByZXR1cm4gZWRnZTtcbiAgICB9XG4gICAgZmlyc3ROb2RlKCkge1xuICAgICAgICBjb25zdCB0YXJnZXRzID0gbmV3IFNldCh0aGlzLmVkZ2VzLm1hcCgoZWRnZSkgPT4gZWRnZS50YXJnZXQpKTtcbiAgICAgICAgY29uc3QgZm91bmQgPSBbXTtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRhcmdldHMuaGFzKG5vZGUuaWQpKSB7XG4gICAgICAgICAgICAgICAgZm91bmQucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3VuZFswXTtcbiAgICB9XG4gICAgbGFzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZXMgPSBuZXcgU2V0KHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiBlZGdlLnNvdXJjZSkpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghc291cmNlcy5oYXMobm9kZS5pZCkpIHtcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kWzBdO1xuICAgIH1cbiAgICBleHRlbmQoZ3JhcGgpIHtcbiAgICAgICAgLy8gQWRkIGFsbCBub2RlcyBmcm9tIHRoZSBvdGhlciBncmFwaCwgdGFraW5nIGNhcmUgdG8gYXZvaWQgZHVwbGljYXRlc1xuICAgICAgICBPYmplY3QuZW50cmllcyhncmFwaC5ub2RlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkZCBhbGwgZWRnZXMgZnJvbSB0aGUgb3RoZXIgZ3JhcGhcbiAgICAgICAgdGhpcy5lZGdlcyA9IFsuLi50aGlzLmVkZ2VzLCAuLi5ncmFwaC5lZGdlc107XG4gICAgfVxuICAgIHRyaW1GaXJzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0Tm9kZSA9IHRoaXMuZmlyc3ROb2RlKCk7XG4gICAgICAgIGlmIChmaXJzdE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nRWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS5zb3VyY2UgPT09IGZpcnN0Tm9kZS5pZCk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5ub2RlcykubGVuZ3RoID09PSAxIHx8IG91dGdvaW5nRWRnZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGZpcnN0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJpbUxhc3ROb2RlKCkge1xuICAgICAgICBjb25zdCBsYXN0Tm9kZSA9IHRoaXMubGFzdE5vZGUoKTtcbiAgICAgICAgaWYgKGxhc3ROb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBpbmNvbWluZ0VkZ2VzID0gdGhpcy5lZGdlcy5maWx0ZXIoKGVkZ2UpID0+IGVkZ2UudGFyZ2V0ID09PSBsYXN0Tm9kZS5pZCk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5ub2RlcykubGVuZ3RoID09PSAxIHx8IGluY29taW5nRWRnZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGxhc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ6b2RUb0pzb25TY2hlbWEiLCJ2NCIsInV1aWR2NCIsInZhbGlkYXRlIiwiaXNVdWlkIiwiaXNSdW5uYWJsZUludGVyZmFjZSIsIk1BWF9EQVRBX0RJU1BMQVlfTkFNRV9MRU5HVEgiLCJub2RlRGF0YVN0ciIsIm5vZGUiLCJpZCIsImRhdGEiLCJ0b1N0cmluZyIsInN0YXJ0c1dpdGgiLCJ0b1VwcGVyQ2FzZSIsInNwbGl0IiwibGVuZ3RoIiwiZ2V0TmFtZSIsInN1YnN0cmluZyIsInNsaWNlIiwiZXJyb3IiLCJuYW1lIiwibm9kZURhdGFKc29uIiwidHlwZSIsImxjX2lkIiwic2NoZW1hIiwidGl0bGUiLCJHcmFwaCIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRvSlNPTiIsInN0YWJsZU5vZGVJZHMiLCJ2YWx1ZXMiLCJub2RlcyIsImZvckVhY2giLCJpIiwibWFwIiwiZWRnZXMiLCJlZGdlIiwic291cmNlIiwidGFyZ2V0IiwiYWRkTm9kZSIsInVuZGVmaW5lZCIsIkVycm9yIiwibm9kZUlkIiwicmVtb3ZlTm9kZSIsImZpbHRlciIsImFkZEVkZ2UiLCJwdXNoIiwiZmlyc3ROb2RlIiwidGFyZ2V0cyIsIlNldCIsImZvdW5kIiwiaGFzIiwibGFzdE5vZGUiLCJzb3VyY2VzIiwiZXh0ZW5kIiwiZ3JhcGgiLCJlbnRyaWVzIiwia2V5IiwidHJpbUZpcnN0Tm9kZSIsIm91dGdvaW5nRWRnZXMiLCJrZXlzIiwidHJpbUxhc3ROb2RlIiwiaW5jb21pbmdFZGdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/utils.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/utils.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLDhEQUE4RDtBQUN2RCxTQUFTQSxvQkFBb0JDLEtBQUs7SUFDckMsT0FBT0EsUUFBUUEsTUFBTUMsV0FBVyxHQUFHO0FBQ3ZDO0FBQ0E7Ozs7OztDQU1DLEdBQ00sTUFBTUM7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxZQUFZLEdBQUdQLE9BQU9PLFlBQVk7UUFDdkMsSUFBSSxDQUFDQyxZQUFZLEdBQUdSLE9BQU9RLFlBQVk7UUFDdkMsSUFBSSxDQUFDQyxXQUFXLEdBQUdULE9BQU9TLFdBQVc7UUFDckMsSUFBSSxDQUFDQyxZQUFZLEdBQUdWLE9BQU9VLFlBQVk7UUFDdkMsSUFBSSxDQUFDQyxZQUFZLEdBQUdYLE9BQU9XLFlBQVk7UUFDdkMsSUFBSSxDQUFDQyxXQUFXLEdBQUdaLE9BQU9ZLFdBQVc7SUFDekM7SUFDQUMsYUFBYUMsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDMUIsSUFBSUMsVUFBVSxJQUFJLENBQUNULFlBQVksS0FBS1UsYUFDaEMsSUFBSSxDQUFDVCxZQUFZLEtBQUtTLGFBQ3RCLElBQUksQ0FBQ1IsV0FBVyxLQUFLUTtRQUN6QixNQUFNQyxZQUFZSixNQUFNSyxJQUFJLElBQUksRUFBRTtRQUNsQyxJQUFJLElBQUksQ0FBQ1osWUFBWSxLQUFLVSxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLElBQUksQ0FBQ1QsWUFBWSxDQUFDYSxRQUFRLENBQUNOLE1BQU1PLElBQUk7UUFDOUQ7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLUyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLElBQUksQ0FBQ1IsWUFBWSxDQUFDWSxRQUFRLENBQUNMO1FBQ3BEO1FBQ0EsSUFBSSxJQUFJLENBQUNOLFdBQVcsS0FBS1EsV0FBVztZQUNoQ0QsVUFDSUEsV0FBV0UsVUFBVUksSUFBSSxDQUFDLENBQUNDLE1BQVEsSUFBSSxDQUFDZCxXQUFXLEVBQUVXLFNBQVNHO1FBQ3RFO1FBQ0EsSUFBSSxJQUFJLENBQUNiLFlBQVksS0FBS08sV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxDQUFDLElBQUksQ0FBQ04sWUFBWSxDQUFDVSxRQUFRLENBQUNOLE1BQU1PLElBQUk7UUFDL0Q7UUFDQSxJQUFJLElBQUksQ0FBQ1YsWUFBWSxLQUFLTSxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTCxZQUFZLENBQUNTLFFBQVEsQ0FBQ0w7UUFDckQ7UUFDQSxJQUFJLElBQUksQ0FBQ0gsV0FBVyxLQUFLSyxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVTSxLQUFLLENBQUMsQ0FBQ0QsTUFBUSxDQUFDLElBQUksQ0FBQ1gsV0FBVyxFQUFFUSxTQUFTRztRQUN4RTtRQUNBLE9BQU9QO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvdXRpbHMuanM/OTczNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIGlzUnVubmFibGVJbnRlcmZhY2UodGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgPyB0aGluZy5sY19ydW5uYWJsZSA6IGZhbHNlO1xufVxuLyoqXG4gKiBVdGlsaXR5IHRvIGZpbHRlciB0aGUgcm9vdCBldmVudCBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICogVGhpcyBpcyBzaW1wbHkgYmluZGluZyB0aGUgYXJndW1lbnRzIHRvIHRoZSBuYW1lc3BhY2UgdG8gbWFrZSBzYXZlIG9uXG4gKiBhIGJpdCBvZiB0eXBpbmcgaW4gdGhlIHN0cmVhbUV2ZW50cyBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBUT0RPOiBSZWZhY3RvciBhbmQgcmVtb3ZlLlxuICovXG5leHBvcnQgY2xhc3MgX1Jvb3RFdmVudEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzLmluY2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9IGZpZWxkcy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHMuZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcy5leGNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVRhZ3MgPSBmaWVsZHMuZXhjbHVkZVRhZ3M7XG4gICAgfVxuICAgIGluY2x1ZGVFdmVudChldmVudCwgcm9vdFR5cGUpIHtcbiAgICAgICAgbGV0IGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVOYW1lcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID09PSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGV2ZW50VGFncyA9IGV2ZW50LnRhZ3MgPz8gW107XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHwgZXZlbnRUYWdzLnNvbWUoKHRhZykgPT4gdGhpcy5pbmNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhldmVudC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZVR5cGVzLmluY2x1ZGVzKHJvb3RUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIGV2ZW50VGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzUnVubmFibGVJbnRlcmZhY2UiLCJ0aGluZyIsImxjX3J1bm5hYmxlIiwiX1Jvb3RFdmVudEZpbHRlciIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImluY2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImluY2x1ZGVUYWdzIiwiZXhjbHVkZU5hbWVzIiwiZXhjbHVkZVR5cGVzIiwiZXhjbHVkZVRhZ3MiLCJpbmNsdWRlRXZlbnQiLCJldmVudCIsInJvb3RUeXBlIiwiaW5jbHVkZSIsInVuZGVmaW5lZCIsImV2ZW50VGFncyIsInRhZ3MiLCJpbmNsdWRlcyIsIm5hbWUiLCJzb21lIiwidGFnIiwiZXZlcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/singletons/index.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/singletons/index.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ class MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        callback();\n    }\n}\nclass AsyncLocalStorageProvider {\n    constructor(){\n        Object.defineProperty(this, \"asyncLocalStorage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockAsyncLocalStorage()\n        });\n        Object.defineProperty(this, \"hasBeenInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    getInstance() {\n        return this.asyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        if (!this.hasBeenInitialized) {\n            this.hasBeenInitialized = true;\n            this.asyncLocalStorage = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxxREFBcUQsR0FDOUMsTUFBTUE7SUFDVEMsV0FBVztRQUNQLE9BQU9DO0lBQ1g7SUFDQUMsSUFBSUMsTUFBTSxFQUFFQyxRQUFRLEVBQUU7UUFDbEJBO0lBQ0o7QUFDSjtBQUNBLE1BQU1DO0lBQ0ZDLGFBQWM7UUFDVkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFDN0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sSUFBSWI7UUFDZjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHNCQUFzQjtZQUM5Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQUMsY0FBYztRQUNWLE9BQU8sSUFBSSxDQUFDQyxpQkFBaUI7SUFDakM7SUFDQUMseUJBQXlCQyxRQUFRLEVBQUU7UUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQ0Msa0JBQWtCLEVBQUU7WUFDMUIsSUFBSSxDQUFDQSxrQkFBa0IsR0FBRztZQUMxQixJQUFJLENBQUNILGlCQUFpQixHQUFHRTtRQUM3QjtJQUNKO0FBQ0o7QUFDQSxNQUFNRSxxQ0FBcUMsSUFBSWI7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzP2Q2MTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuZXhwb3J0IGNsYXNzIE1vY2tBc3luY0xvY2FsU3RvcmFnZSB7XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJ1bihfc3RvcmUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFzeW5jTG9jYWxTdG9yYWdlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTW9ja0FzeW5jTG9jYWxTdG9yYWdlKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhc0JlZW5Jbml0aWFsaXplZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY0xvY2FsU3RvcmFnZTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNCZWVuSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzQmVlbkluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYXN5bmNMb2NhbFN0b3JhZ2UgPSBpbnN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNvbnN0IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gPSBuZXcgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlcigpO1xuZXhwb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiB9O1xuIl0sIm5hbWVzIjpbIk1vY2tBc3luY0xvY2FsU3RvcmFnZSIsImdldFN0b3JlIiwidW5kZWZpbmVkIiwicnVuIiwiX3N0b3JlIiwiY2FsbGJhY2siLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZ2V0SW5zdGFuY2UiLCJhc3luY0xvY2FsU3RvcmFnZSIsImluaXRpYWxpemVHbG9iYWxJbnN0YW5jZSIsImluc3RhbmNlIiwiaGFzQmVlbkluaXRpYWxpemVkIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId) {\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) + runId;\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    async _startTrace(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        await this.onRunCreate?.(storedRun);\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0RDtBQUM1RCw4REFBOEQ7QUFDOUQsU0FBU0MsY0FBY0MsS0FBSyxFQUFFQyxVQUFVO0lBQ3BDLE9BQU9ELFNBQVMsQ0FBQ0UsTUFBTUMsT0FBTyxDQUFDSCxVQUFVLE9BQU9BLFVBQVUsV0FDcERBLFFBQ0E7UUFBRSxDQUFDQyxXQUFXLEVBQUVEO0lBQU07QUFDaEM7QUFDQSxTQUFTSSxxQkFBcUJDLEtBQUs7SUFDL0IsT0FBT0EsTUFBTUMsT0FBTyxDQUFDLFVBQVU7QUFDbkM7QUFDQSxTQUFTQywyQkFBMkJDLEtBQUssRUFBRUMsS0FBSztJQUM1QyxPQUFRTCxxQkFBcUIsQ0FBQyxFQUFFLElBQUlNLEtBQUtGLE9BQU9HLFdBQVcsR0FBR0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUM1RUg7QUFDUjtBQUNPLE1BQU1JLG1CQUFtQmYsbUVBQW1CQTtJQUMvQ2dCLFlBQVlDLE9BQU8sQ0FBRTtRQUNqQixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVnJCLE9BQU8sSUFBSXNCO1FBQ2Y7SUFDSjtJQUNBQyxPQUFPO1FBQ0gsT0FBTyxJQUFJO0lBQ2Y7SUFDQUMsZUFBZUMsS0FBSyxFQUFFO1FBQ2xCLHVEQUF1RDtRQUN2RCxJQUFJQSxpQkFBaUJDLE9BQU87WUFDeEIsT0FBT0QsTUFBTUUsT0FBTyxHQUFJRixDQUFBQSxPQUFPRyxRQUFRLENBQUMsSUFBSSxFQUFFSCxNQUFNRyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUM7UUFDbkU7UUFDQSxJQUFJLE9BQU9ILFVBQVUsVUFBVTtZQUMzQixPQUFPQTtRQUNYO1FBQ0EsT0FB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TUFBTTBCLE1BQU0sSUFBSSxDQUFDTyxNQUFNLENBQUNDLEdBQUcsQ0FBQ2xDO1FBQzVCLElBQUksQ0FBQzBCLE9BQU9BLEtBQUtzQyxhQUFhLFNBQVM7WUFDbkM7UUFDSjtRQUNBdEMsSUFBSW1DLE1BQU0sQ0FBQ3JDLElBQUksQ0FBQztZQUNaK0IsTUFBTTtZQUNOTyxNQUFNLElBQUk3RCxPQUFPQyxXQUFXO1lBQzVCaUYsUUFBUTtnQkFBRTRCO1lBQUs7UUFDbkI7UUFDQSxNQUFNLElBQUksQ0FBQ0MsTUFBTSxHQUFHdEY7SUFDeEI7SUFDQSxNQUFNdUYsa0JBQWtCQyxLQUFLLEVBQUVDLEdBQUcsRUFBRW5ILEtBQUssRUFBRWlGLFlBQVksRUFBRUMsS0FBSyxFQUFFa0MsTUFBTSxFQUFFO1FBQ3BFLE1BQU0xRixNQUFNLElBQUksQ0FBQ08sTUFBTSxDQUFDQyxHQUFHLENBQUNsQztRQUM1QixJQUFJLENBQUMwQixPQUFPQSxLQUFLc0MsYUFBYSxPQUFPO1lBQ2pDLE1BQU0sSUFBSS9DLE1BQU0sQ0FBQyx5REFBeUQsQ0FBQztRQUMvRTtRQUNBUyxJQUFJbUMsTUFBTSxDQUFDckMsSUFBSSxDQUFDO1lBQ1orQixNQUFNO1lBQ05PLE1BQU0sSUFBSTdELE9BQU9DLFdBQVc7WUFDNUJpRixRQUFRO2dCQUFFK0I7Z0JBQU9DO2dCQUFLRSxPQUFPRCxRQUFRQztZQUFNO1FBQy9DO1FBQ0EsTUFBTSxJQUFJLENBQUNDLGFBQWEsR0FBRzVGLEtBQUt3RixPQUFPO1lBQUVHLE9BQU9ELFFBQVFDO1FBQU07UUFDOUQsT0FBTzNGO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2Jhc2UuanM/MTA4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvYmFzZS5qc1wiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG5mdW5jdGlvbiBzdHJpcE5vbkFscGhhbnVtZXJpYyhpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9bLTouXS9nLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUb0RvdHRlZE9yZGVyRm9ybWF0KGVwb2NoLCBydW5JZCkge1xuICAgIHJldHVybiAoc3RyaXBOb25BbHBoYW51bWVyaWMoYCR7bmV3IERhdGUoZXBvY2gpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgLTEpfTAwMFpgKSArXG4gICAgICAgIHJ1bklkKTtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlVHJhY2VyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoX2ZpZWxkcykge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5NYXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0cmluZ2lmeUVycm9yKGVycm9yKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlICsgKGVycm9yPy5zdGFjayA/IGBcXG5cXG4ke2Vycm9yLnN0YWNrfWAgOiBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke2Vycm9yfWA7XG4gICAgfVxuICAgIF9hZGRDaGlsZFJ1bihwYXJlbnRSdW4sIGNoaWxkUnVuKSB7XG4gICAgICAgIHBhcmVudFJ1bi5jaGlsZF9ydW5zLnB1c2goY2hpbGRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBfc3RhcnRUcmFjZShydW4pIHtcbiAgICAgICAgY29uc3QgY3VycmVudERvdHRlZE9yZGVyID0gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQocnVuLnN0YXJ0X3RpbWUsIHJ1bi5pZCk7XG4gICAgICAgIGNvbnN0IHN0b3JlZFJ1biA9IHsgLi4ucnVuIH07XG4gICAgICAgIGlmIChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSB0aGlzLnJ1bk1hcC5nZXQoc3RvcmVkUnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgc3RvcmVkUnVuKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyID0gTWF0aC5tYXgocGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciwgc3RvcmVkUnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcik7XG4gICAgICAgICAgICAgICAgc3RvcmVkUnVuLnRyYWNlX2lkID0gcGFyZW50UnVuLnRyYWNlX2lkO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRSdW4uZG90dGVkX29yZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkUnVuLmRvdHRlZF9vcmRlciA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RG90dGVkT3JkZXIsXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbihcIi5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoYFBhcmVudCBydW4gd2l0aCBVVUlEICR7c3RvcmVkUnVuLnBhcmVudF9ydW5faWR9IGhhcyBubyBkb3R0ZWQgb3JkZXIuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIG5hdHVyYWxseSBmb3IgY2FsbGJhY2tzIGFkZGVkIHdpdGhpbiBhIHJ1blxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZGVidWcoXG4gICAgICAgICAgICAgICAgLy8gICBgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gbm90IGZvdW5kLmBcbiAgICAgICAgICAgICAgICAvLyApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RvcmVkUnVuLnRyYWNlX2lkID0gc3RvcmVkUnVuLmlkO1xuICAgICAgICAgICAgc3RvcmVkUnVuLmRvdHRlZF9vcmRlciA9IGN1cnJlbnREb3R0ZWRPcmRlcjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJ1bk1hcC5zZXQoc3RvcmVkUnVuLmlkLCBzdG9yZWRSdW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuQ3JlYXRlPy4oc3RvcmVkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgX2VuZFRyYWNlKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRSdW4gPSBydW4ucGFyZW50X3J1bl9pZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucnVuTWFwLmdldChydW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgIGlmIChwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdFJ1bihydW4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLmRlbGV0ZShydW4uaWQpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUnVuVXBkYXRlPy4ocnVuKTtcbiAgICB9XG4gICAgX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHBhcmVudFJ1bklkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ydW5NYXAuZ2V0KHBhcmVudFJ1bklkKTtcbiAgICAgICAgLy8gSWYgYSBydW4gaGFzIG5vIHBhcmVudCB0aGVuIGV4ZWN1dGlvbiBvcmRlciBpcyAxXG4gICAgICAgIGlmICghcGFyZW50UnVuKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciArIDE7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQsIHBhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgZmluYWxFeHRyYVBhcmFtcyA9IG1ldGFkYXRhXG4gICAgICAgICAgICA/IHsgLi4uZXh0cmFQYXJhbXMsIG1ldGFkYXRhIH1cbiAgICAgICAgICAgIDogZXh0cmFQYXJhbXM7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gbGxtLmlkW2xsbS5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGxsbSxcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IHByb21wdHMgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJsbG1cIixcbiAgICAgICAgICAgIGV4dHJhOiBmaW5hbEV4dHJhUGFyYW1zID8/IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGF0TW9kZWxTdGFydChsbG0sIG1lc3NhZ2VzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGFcbiAgICAgICAgICAgID8geyAuLi5leHRyYVBhcmFtcywgbWV0YWRhdGEgfVxuICAgICAgICAgICAgOiBleHRyYVBhcmFtcztcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBsbG0uaWRbbGxtLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgbWVzc2FnZXMgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJsbG1cIixcbiAgICAgICAgICAgIGV4dHJhOiBmaW5hbEV4dHJhUGFyYW1zID8/IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSBvdXRwdXQ7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkxMTUVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImxsbVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBMTE0gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpblN0YXJ0KGNoYWluLCBpbnB1dHMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIHJ1blR5cGUsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBjaGFpbi5pZFtjaGFpbi5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IGNoYWluLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHMsXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBydW5UeXBlID8/IFwiY2hhaW5cIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpblN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FbmQob3V0cHV0cywgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1bikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSBfY29lcmNlVG9EaWN0KG91dHB1dHMsIFwib3V0cHV0XCIpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChrd2FyZ3M/LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBydW4uaW5wdXRzID0gX2NvZXJjZVRvRGljdChrd2FyZ3MuaW5wdXRzLCBcImlucHV0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMub25DaGFpbkVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyb3IsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYWluIHJ1biB0byBlbmQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGt3YXJncz8uaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUb29sU3RhcnQodG9vbCwgaW5wdXQsIHJ1bklkLCBwYXJlbnRSdW5JZCwgdGFncywgbWV0YWRhdGEsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uX29yZGVyID0gdGhpcy5fZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpO1xuICAgICAgICBjb25zdCBzdGFydF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyB0b29sLmlkW3Rvb2wuaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiB0b29sLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgaW5wdXQgfSxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xTdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFbmQob3V0cHV0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0geyBvdXRwdXQgfTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbEVuZD8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHRvb2wgcnVuIHRvIGVuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24sIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zID0gYWdlbnRSdW4uYWN0aW9ucyB8fCBbXTtcbiAgICAgICAgYWdlbnRSdW4uYWN0aW9ucy5wdXNoKGFjdGlvbik7XG4gICAgICAgIGFnZW50UnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiYWdlbnRfYWN0aW9uXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgYWN0aW9uIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQWdlbnRBY3Rpb24/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24sIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImFnZW50X2VuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IGFjdGlvbiB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkFnZW50RW5kPy4ocnVuKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IHJldHJpZXZlci5pZFtyZXRyaWV2ZXIuaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiByZXRyaWV2ZXIsXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBxdWVyeSB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJyZXRyaWV2ZXJcIixcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IFtdLFxuICAgICAgICAgICAgZXh0cmE6IG1ldGFkYXRhID8geyBtZXRhZGF0YSB9IDoge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJTdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVuZChkb2N1bWVudHMsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJldHJpZXZlciBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5vdXRwdXRzID0geyBkb2N1bWVudHMgfTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwicmV0cmlldmVyXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJldHJpZXZlciBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlckVycm9yPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVGV4dCh0ZXh0LCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgdGV4dCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRleHQ/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1OZXdUb2tlbih0b2tlbiwgaWR4LCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBcInJ1bklkXCIgcHJvdmlkZWQgdG8gXCJoYW5kbGVMTE1OZXdUb2tlblwiIGNhbGxiYWNrLmApO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcIm5ld190b2tlblwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAga3dhcmdzOiB7IHRva2VuLCBpZHgsIGNodW5rOiBmaWVsZHM/LmNodW5rIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNTmV3VG9rZW4/LihydW4sIHRva2VuLCB7IGNodW5rOiBmaWVsZHM/LmNodW5rIH0pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiX2NvZXJjZVRvRGljdCIsInZhbHVlIiwiZGVmYXVsdEtleSIsIkFycmF5IiwiaXNBcnJheSIsInN0cmlwTm9uQWxwaGFudW1lcmljIiwiaW5wdXQiLCJyZXBsYWNlIiwiY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQiLCJlcG9jaCIsInJ1bklkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJCYXNlVHJhY2VyIiwiY29uc3RydWN0b3IiLCJfZmllbGRzIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJNYXAiLCJjb3B5Iiwic3RyaW5naWZ5RXJyb3IiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInN0YWNrIiwiX2FkZENoaWxkUnVuIiwicGFyZW50UnVuIiwiY2hpbGRSdW4iLCJjaGlsZF9ydW5zIiwicHVzaCIsIl9zdGFydFRyYWNlIiwicnVuIiwiY3VycmVudERvdHRlZE9yZGVyIiwic3RhcnRfdGltZSIsImlkIiwic3RvcmVkUnVuIiwicGFyZW50X3J1bl9pZCIsInVuZGVmaW5lZCIsInJ1bk1hcCIsImdldCIsImNoaWxkX2V4ZWN1dGlvbl9vcmRlciIsIk1hdGgiLCJtYXgiLCJ0cmFjZV9pZCIsImRvdHRlZF9vcmRlciIsImpvaW4iLCJzZXQiLCJvblJ1bkNyZWF0ZSIsIl9lbmRUcmFjZSIsInBlcnNpc3RSdW4iLCJkZWxldGUiLCJvblJ1blVwZGF0ZSIsIl9nZXRFeGVjdXRpb25PcmRlciIsInBhcmVudFJ1bklkIiwiaGFuZGxlTExNU3RhcnQiLCJsbG0iLCJwcm9tcHRzIiwiZXh0cmFQYXJhbXMiLCJ0YWdzIiwibWV0YWRhdGEiLCJuYW1lIiwiZXhlY3V0aW9uX29yZGVyIiwibm93IiwiZmluYWxFeHRyYVBhcmFtcyIsImxlbmd0aCIsInNlcmlhbGl6ZWQiLCJldmVudHMiLCJ0aW1lIiwiaW5wdXRzIiwicnVuX3R5cGUiLCJleHRyYSIsIm9uTExNU3RhcnQiLCJoYW5kbGVDaGF0TW9kZWxTdGFydCIsIm1lc3NhZ2VzIiwiaGFuZGxlTExNRW5kIiwib3V0cHV0IiwiZW5kX3RpbWUiLCJvdXRwdXRzIiwib25MTE1FbmQiLCJoYW5kbGVMTE1FcnJvciIsIm9uTExNRXJyb3IiLCJoYW5kbGVDaGFpblN0YXJ0IiwiY2hhaW4iLCJydW5UeXBlIiwib25DaGFpblN0YXJ0IiwiaGFuZGxlQ2hhaW5FbmQiLCJfcGFyZW50UnVuSWQiLCJfdGFncyIsImt3YXJncyIsIm9uQ2hhaW5FbmQiLCJoYW5kbGVDaGFpbkVycm9yIiwib25DaGFpbkVycm9yIiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9vbCIsIm9uVG9vbFN0YXJ0IiwiaGFuZGxlVG9vbEVuZCIsIm9uVG9vbEVuZCIsImhhbmRsZVRvb2xFcnJvciIsIm9uVG9vbEVycm9yIiwiaGFuZGxlQWdlbnRBY3Rpb24iLCJhY3Rpb24iLCJhZ2VudFJ1biIsImFjdGlvbnMiLCJvbkFnZW50QWN0aW9uIiwiaGFuZGxlQWdlbnRFbmQiLCJvbkFnZW50RW5kIiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJyZXRyaWV2ZXIiLCJxdWVyeSIsIm9uUmV0cmlldmVyU3RhcnQiLCJoYW5kbGVSZXRyaWV2ZXJFbmQiLCJkb2N1bWVudHMiLCJvblJldHJpZXZlckVuZCIsImhhbmRsZVJldHJpZXZlckVycm9yIiwib25SZXRyaWV2ZXJFcnJvciIsImhhbmRsZVRleHQiLCJ0ZXh0Iiwib25UZXh0IiwiaGFuZGxlTExNTmV3VG9rZW4iLCJ0b2tlbiIsImlkeCIsImZpZWxkcyIsImNodW5rIiwib25MTE1OZXdUb2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/console.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/console.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${run.inputs.input?.trim()}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${run.outputs?.output?.trim()}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvY29uc29sZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUM7QUFDTTtBQUN2QyxTQUFTRSxLQUFLQyxLQUFLLEVBQUVDLElBQUk7SUFDckIsT0FBTyxDQUFDLEVBQUVELE1BQU1FLElBQUksQ0FBQyxFQUFFRCxLQUFLLEVBQUVELE1BQU1HLEtBQUssQ0FBQyxDQUFDO0FBQy9DO0FBQ0EsU0FBU0MsaUJBQWlCQyxHQUFHLEVBQUVDLFFBQVE7SUFDbkMsSUFBSTtRQUNBLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ0gsS0FBSyxNQUFNO0lBQ3JDLEVBQ0EsT0FBT0ksS0FBSztRQUNSLE9BQU9IO0lBQ1g7QUFDSjtBQUNBLFNBQVNJLFFBQVFDLEdBQUc7SUFDaEIsSUFBSSxDQUFDQSxJQUFJQyxRQUFRLEVBQ2IsT0FBTztJQUNYLE1BQU1GLFVBQVVDLElBQUlDLFFBQVEsR0FBR0QsSUFBSUUsVUFBVTtJQUM3QyxJQUFJSCxVQUFVLE1BQU07UUFDaEIsT0FBTyxDQUFDLEVBQUVBLFFBQVEsRUFBRSxDQUFDO0lBQ3pCO0lBQ0EsT0FBTyxDQUFDLEVBQUUsQ0FBQ0EsVUFBVSxJQUFHLEVBQUdJLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QztBQUNBLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdsQix3Q0FBTUE7QUFDeEI7Ozs7Ozs7Ozs7Ozs7O0NBY0MsR0FDTSxNQUFNbUIsK0JBQStCbEIsZ0RBQVVBO0lBQ2xEbUIsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBOzs7OztLQUtDLEdBQ0RDLFdBQVdDLElBQUksRUFBRTtRQUNiLE9BQU9DLFFBQVFD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QUNEZSxjQUFjakUsR0FBRyxFQUFFO1FBQ2YsTUFBTWtFLFdBQVdsRTtRQUNqQixNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNK0QsSUFBSSxFQUFFLGtCQUFrQixFQUFFLEVBQUUzQixPQUFPLHlCQUF5QixFQUFFL0MsaUJBQWlCeUUsU0FBU0UsT0FBTyxDQUFDRixTQUFTRSxPQUFPLENBQUNqQyxNQUFNLEdBQUcsRUFBRSxFQUFFLFlBQVksQ0FBQztJQUN6SztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvY29uc29sZS5qcz83MDc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzdHlsZXMgZnJvbSBcImFuc2ktc3R5bGVzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZnVuY3Rpb24gd3JhcChzdHlsZSwgdGV4dCkge1xuICAgIHJldHVybiBgJHtzdHlsZS5vcGVufSR7dGV4dH0ke3N0eWxlLmNsb3NlfWA7XG59XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KG9iaiwgZmFsbGJhY2spIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxufVxuZnVuY3Rpb24gZWxhcHNlZChydW4pIHtcbiAgICBpZiAoIXJ1bi5lbmRfdGltZSlcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgY29uc3QgZWxhcHNlZCA9IHJ1bi5lbmRfdGltZSAtIHJ1bi5zdGFydF90aW1lO1xuICAgIGlmIChlbGFwc2VkIDwgMTAwMCkge1xuICAgICAgICByZXR1cm4gYCR7ZWxhcHNlZH1tc2A7XG4gICAgfVxuICAgIHJldHVybiBgJHsoZWxhcHNlZCAvIDEwMDApLnRvRml4ZWQoMil9c2A7XG59XG5jb25zdCB7IGNvbG9yIH0gPSBzdHlsZXM7XG4vKipcbiAqIEEgdHJhY2VyIHRoYXQgbG9ncyBhbGwgZXZlbnRzIHRvIHRoZSBjb25zb2xlLiBJdCBleHRlbmRzIGZyb20gdGhlXG4gKiBgQmFzZVRyYWNlcmAgY2xhc3MgYW5kIG92ZXJyaWRlcyBpdHMgbWV0aG9kcyB0byBwcm92aWRlIGN1c3RvbSBsb2dnaW5nXG4gKiBmdW5jdGlvbmFsaXR5LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqXG4gKiBjb25zdCBsbG0gPSBuZXcgQ2hhdEFudGhyb3BpYyh7XG4gKiAgIHRlbXBlcmF0dXJlOiAwLFxuICogICB0YWdzOiBbXCJleGFtcGxlXCIsIFwiY2FsbGJhY2tzXCIsIFwiY29uc3RydWN0b3JcIl0sXG4gKiAgIGNhbGxiYWNrczogW25ldyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyKCldLFxuICogfSk7XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25zb2xlQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiY29uc29sZV9jYWxsYmFja19oYW5kbGVyXCJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIHBlcnNpc3QgdGhlIHJ1bi4gSW4gdGhpcyBjYXNlLCBpdCBzaW1wbHkgcmV0dXJucyBhXG4gICAgICogcmVzb2x2ZWQgcHJvbWlzZSBhcyB0aGVyZSdzIG5vIHBlcnNpc3RlbmNlIGxvZ2ljLlxuICAgICAqIEBwYXJhbSBfcnVuIFRoZSBydW4gdG8gcGVyc2lzdC5cbiAgICAgKiBAcmV0dXJucyBBIHJlc29sdmVkIHByb21pc2UuXG4gICAgICovXG4gICAgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gdXRpbGl0eSBtZXRob2RzXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gZ2V0IGFsbCB0aGUgcGFyZW50IHJ1bnMgb2YgYSBnaXZlbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcnVuIHdob3NlIHBhcmVudHMgYXJlIHRvIGJlIHJldHJpZXZlZC5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBwYXJlbnQgcnVucy5cbiAgICAgKi9cbiAgICBnZXRQYXJlbnRzKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRzID0gW107XG4gICAgICAgIGxldCBjdXJyZW50UnVuID0gcnVuO1xuICAgICAgICB3aGlsZSAoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLnJ1bk1hcC5nZXQoY3VycmVudFJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgICAgICBjdXJyZW50UnVuID0gcGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGdldCBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVuJ3MgbGluZWFnZSwgd2hpY2hcbiAgICAgKiBpcyB1c2VkIGluIGxvZ2dpbmcuXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcnVuIHdob3NlIGxpbmVhZ2UgaXMgdG8gYmUgcmV0cmlldmVkLlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW4ncyBsaW5lYWdlLlxuICAgICAqL1xuICAgIGdldEJyZWFkY3J1bWJzKHJ1bikge1xuICAgICAgICBjb25zdCBwYXJlbnRzID0gdGhpcy5nZXRQYXJlbnRzKHJ1bikucmV2ZXJzZSgpO1xuICAgICAgICBjb25zdCBzdHJpbmcgPSBbLi4ucGFyZW50cywgcnVuXVxuICAgICAgICAgICAgLm1hcCgocGFyZW50LCBpLCBhcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHtwYXJlbnQuZXhlY3V0aW9uX29yZGVyfToke3BhcmVudC5ydW5fdHlwZX06JHtwYXJlbnQubmFtZX1gO1xuICAgICAgICAgICAgcmV0dXJuIGkgPT09IGFyci5sZW5ndGggLSAxID8gd3JhcChzdHlsZXMuYm9sZCwgbmFtZSkgOiBuYW1lO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCIgPiBcIik7XG4gICAgICAgIHJldHVybiB3cmFwKGNvbG9yLmdyZXksIHN0cmluZyk7XG4gICAgfVxuICAgIC8vIGxvZ2dpbmcgbWV0aG9kc1xuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYSBjaGFpbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgY2hhaW4gcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5TdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltjaGFpbi9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIENoYWluIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSBjaGFpbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgY2hhaW4gcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbY2hhaW4vZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBDaGFpbiBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbb3V0cHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyBhbnkgZXJyb3JzIG9mIGEgY2hhaW4gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIGNoYWluIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkNoYWluRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW2NoYWluL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gQ2hhaW4gcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTVN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFwicHJvbXB0c1wiIGluIHJ1bi5pbnB1dHNcbiAgICAgICAgICAgID8geyBwcm9tcHRzOiBydW4uaW5wdXRzLnByb21wdHMubWFwKChwKSA9PiBwLnRyaW0oKSkgfVxuICAgICAgICAgICAgOiBydW4uaW5wdXRzO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltsbG0vc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBMTE0gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShpbnB1dHMsIFwiW2lucHV0c11cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGFuIExMTSBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgTExNIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltsbG0vZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBMTE0gcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW3Jlc3BvbnNlXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNRXJyb3IocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5yZWQsIFwiW2xsbS9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIExMTSBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBzdGFydGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblRvb2xTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIlt0b29sL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgVG9vbCBydW4gd2l0aCBpbnB1dDogXCIke3J1bi5pbnB1dHMuaW5wdXQ/LnRyaW0oKX1cImApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblRvb2xFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIlt0b29sL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgVG9vbCBydW4gd2l0aCBvdXRwdXQ6IFwiJHtydW4ub3V0cHV0cz8ub3V0cHV0Py50cmltKCl9XCJgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSB0b29sIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSB0b29sIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblRvb2xFcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbdG9vbC9lcnJvcl1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIFRvb2wgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIHN0YXJ0IG9mIGEgcmV0cmlldmVyIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSByZXRyaWV2ZXIgcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5ncmVlbiwgXCJbcmV0cmlldmVyL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgUmV0cmlldmVyIHJ1biB3aXRoIGlucHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYSByZXRyaWV2ZXIgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uUmV0cmlldmVyRW5kKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuY3lhbiwgXCJbcmV0cmlldmVyL2VuZF1cIil9IFske2NydW1ic31dIFske2VsYXBzZWQocnVuKX1dIEV4aXRpbmcgUmV0cmlldmVyIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltvdXRwdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSByZXRyaWV2ZXIgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJFcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbcmV0cmlldmVyL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gUmV0cmlldmVyIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBhY3Rpb24gc2VsZWN0ZWQgYnkgdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJ1biBpbiB3aGljaCB0aGUgYWdlbnQgYWN0aW9uIG9jY3VycmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkFnZW50QWN0aW9uKHJ1bikge1xuICAgICAgICBjb25zdCBhZ2VudFJ1biA9IHJ1bjtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmJsdWUsIFwiW2FnZW50L2FjdGlvbl1cIil9IFske2NydW1ic31dIEFnZW50IHNlbGVjdGVkIGFjdGlvbjogJHt0cnlKc29uU3RyaW5naWZ5KGFnZW50UnVuLmFjdGlvbnNbYWdlbnRSdW4uYWN0aW9ucy5sZW5ndGggLSAxXSwgXCJbYWN0aW9uXVwiKX1gKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsic3R5bGVzIiwiQmFzZVRyYWNlciIsIndyYXAiLCJzdHlsZSIsInRleHQiLCJvcGVuIiwiY2xvc2UiLCJ0cnlKc29uU3RyaW5naWZ5Iiwib2JqIiwiZmFsbGJhY2siLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyIiwiZWxhcHNlZCIsInJ1biIsImVuZF90aW1lIiwic3RhcnRfdGltZSIsInRvRml4ZWQiLCJjb2xvciIsIkNvbnNvbGVDYWxsYmFja0hhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJwZXJzaXN0UnVuIiwiX3J1biIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0UGFyZW50cyIsInBhcmVudHMiLCJjdXJyZW50UnVuIiwicGFyZW50X3J1bl9pZCIsInBhcmVudCIsInJ1bk1hcCIsImdldCIsInB1c2giLCJnZXRCcmVhZGNydW1icyIsInJldmVyc2UiLCJzdHJpbmciLCJtYXAiLCJpIiwiYXJyIiwibmFtZSIsImV4ZWN1dGlvbl9vcmRlciIsInJ1bl90eXBlIiwibGVuZ3RoIiwiYm9sZCIsImpvaW4iLCJncmV5Iiwib25DaGFpblN0YXJ0IiwiY3J1bWJzIiwiY29uc29sZSIsImxvZyIsImdyZWVuIiwiaW5wdXRzIiwib25DaGFpbkVuZCIsImN5YW4iLCJvdXRwdXRzIiwib25DaGFpbkVycm9yIiwicmVkIiwiZXJyb3IiLCJvbkxMTVN0YXJ0IiwicHJvbXB0cyIsInAiLCJ0cmltIiwib25MTE1FbmQiLCJvbkxMTUVycm9yIiwib25Ub29sU3RhcnQiLCJpbnB1dCIsIm9uVG9vbEVuZCIsIm91dHB1dCIsIm9uVG9vbEVycm9yIiwib25SZXRyaWV2ZXJTdGFydCIsIm9uUmV0cmlldmVyRW5kIiwib25SZXRyaWV2ZXJFcnJvciIsIm9uQWdlbnRBY3Rpb24iLCJhZ2VudFJ1biIsImJsdWUiLCJhY3Rpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/initialize.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/initialize.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTracingCallbackHandler: () => (/* binding */ getTracingCallbackHandler),\n/* harmony export */   getTracingV2CallbackHandler: () => (/* binding */ getTracingV2CallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer_langchain_v1.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\");\n\n\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */ async function getTracingCallbackHandler(session) {\n    const tracer = new _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__.LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    } else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */ async function getTracingV2CallbackHandler() {\n    return new _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__.LangChainTracer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvaW5pdGlhbGl6ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ0s7QUFDN0Q7Ozs7Ozs7O0NBUUMsR0FDTSxlQUFlRSwwQkFBMEJDLE9BQU87SUFDbkQsTUFBTUMsU0FBUyxJQUFJSCxzRUFBaUJBO0lBQ3BDLElBQUlFLFNBQVM7UUFDVCxNQUFNQyxPQUFPQyxXQUFXLENBQUNGO0lBQzdCLE9BQ0s7UUFDRCxNQUFNQyxPQUFPRSxrQkFBa0I7SUFDbkM7SUFDQSxPQUFPRjtBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNNLGVBQWVHO0lBQ2xCLE9BQU8sSUFBSVAsaUVBQWVBO0FBQzlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvaW5pdGlhbGl6ZS5qcz9lNjQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExhbmdDaGFpblRyYWNlciB9IGZyb20gXCIuL3RyYWNlcl9sYW5nY2hhaW4uanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlclYxIH0gZnJvbSBcIi4vdHJhY2VyX2xhbmdjaGFpbl92MS5qc1wiO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgdGhlIFYyIGhhbmRsZXIgaW5zdGVhZC5cbiAqXG4gKiBGdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgYExhbmdDaGFpblRyYWNlclYxYC4gSWYgYSBzZXNzaW9uXG4gKiBpcyBwcm92aWRlZCwgaXQgbG9hZHMgdGhhdCBzZXNzaW9uIGludG8gdGhlIHRyYWNlcjsgb3RoZXJ3aXNlLCBpdCBsb2Fkc1xuICogYSBkZWZhdWx0IHNlc3Npb24uXG4gKiBAcGFyYW0gc2Vzc2lvbiBPcHRpb25hbCBzZXNzaW9uIHRvIGxvYWQgaW50byB0aGUgdHJhY2VyLlxuICogQHJldHVybnMgQW4gaW5zdGFuY2Ugb2YgYExhbmdDaGFpblRyYWNlclYxYC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWNpbmdDYWxsYmFja0hhbmRsZXIoc2Vzc2lvbikge1xuICAgIGNvbnN0IHRyYWNlciA9IG5ldyBMYW5nQ2hhaW5UcmFjZXJWMSgpO1xuICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgIGF3YWl0IHRyYWNlci5sb2FkU2Vzc2lvbihzZXNzaW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGF3YWl0IHRyYWNlci5sb2FkRGVmYXVsdFNlc3Npb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYWNlcjtcbn1cbi8qKlxuICogRnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIGBMYW5nQ2hhaW5UcmFjZXJgLiBJdCBkb2VzIG5vdFxuICogbG9hZCBhbnkgc2Vzc2lvbiBkYXRhLlxuICogQHJldHVybnMgQW4gaW5zdGFuY2Ugb2YgYExhbmdDaGFpblRyYWNlcmAuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBMYW5nQ2hhaW5UcmFjZXIoKTtcbn1cbiJdLCJuYW1lcyI6WyJMYW5nQ2hhaW5UcmFjZXIiLCJMYW5nQ2hhaW5UcmFjZXJWMSIsImdldFRyYWNpbmdDYWxsYmFja0hhbmRsZXIiLCJzZXNzaW9uIiwidHJhY2VyIiwibG9hZFNlc3Npb24iLCJsb2FkRGVmYXVsdFNlc3Npb24iLCJnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/initialize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_index_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk(token);\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvbG9nX3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWdFO0FBQ3pCO0FBQ3FCO0FBQ047QUFDdEQ7Ozs7OztDQU1DLEdBQ00sTUFBTUk7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE9BQU87WUFDL0JDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsR0FBRyxHQUFHUCxPQUFPTyxHQUFHLElBQUksRUFBRTtJQUMvQjtJQUNBQyxPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLENBQUMsR0FBR2E7UUFDOUIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSUksT0FBTztZQUNkSjtZQUNBSyxPQUFPRixNQUFNLENBQUNBLE9BQU9HLE1BQU0sR0FBRyxFQUFFLENBQUNDLFdBQVc7UUFDaEQ7SUFDSjtBQUNKO0FBQ08sTUFBTUgsZUFBZWI7SUFDeEJDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxLQUFLLEdBQUdaLE9BQU9ZLEtBQUs7SUFDN0I7SUFDQUosT0FBT0MsS0FBSyxFQUFFO1FBQ1YsTUFBTUYsTUFBTSxJQUFJLENBQUNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNRixHQUFHO1FBQ3JDLE1BQU1HLFNBQVNoQiwyRUFB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ekUsR0FBRyxFQUFFMEUsS0FBSyxFQUFFQyxNQUFNLEVBQUU7UUFDcEMsTUFBTUwsVUFBVSxJQUFJLENBQUNwQixhQUFhLENBQUNsRCxJQUFJcUMsRUFBRSxDQUFDO1FBQzFDLElBQUlpQyxZQUFZOUQsV0FBVztZQUN2QjtRQUNKO1FBQ0Esb0JBQW9CO1FBQ3BCLE1BQU1vRSxjQUFjNUUsSUFBSUcsTUFBTSxDQUFDMEUsUUFBUSxLQUFLckU7UUFDNUMsSUFBSXNFO1FBQ0osSUFBSUYsYUFBYTtZQUNiLElBQUloRSxzQkFBc0IrRCxRQUFRM0IsUUFBUTtnQkFDdEM4QixzQkFBc0JILFFBQVEzQjtZQUNsQyxPQUNLO2dCQUNEOEIsc0JBQXNCLElBQUluRyw4REFBY0EsQ0FBQytGO1lBQzdDO1FBQ0osT0FDSztZQUNESSxzQkFBc0JKO1FBQzFCO1FBQ0EsTUFBTTVFLFFBQVEsSUFBSWxCLFlBQVk7WUFDMUJTLEtBQUs7Z0JBQ0Q7b0JBQ0krRCxJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxzQkFBc0IsQ0FBQztvQkFDOUNsRixPQUFPc0Y7Z0JBQ1g7Z0JBQ0E7b0JBQ0l0QixJQUFJO29CQUNKQyxNQUFNLENBQUMsTUFBTSxFQUFFaUIsUUFBUSxrQkFBa0IsQ0FBQztvQkFDMUNsRixPQUFPMEY7Z0JBQ1g7YUFDSDtRQUNMO1FBQ0EsTUFBTSxJQUFJLENBQUNuRCxNQUFNLENBQUN3QixLQUFLLENBQUNyRDtJQUM1QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvbG9nX3N0cmVhbS5qcz9jYzFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwcGx5UGF0Y2gsIH0gZnJvbSBcIi4uL3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0gfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBBSU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBMaXN0IG9mIGpzb25wYXRjaCBKU09OUGF0Y2hPcGVyYXRpb25zLCB3aGljaCBkZXNjcmliZSBob3cgdG8gY3JlYXRlIHRoZSBydW4gc3RhdGVcbiAqIGZyb20gYW4gZW1wdHkgZGljdC4gVGhpcyBpcyB0aGUgbWluaW1hbCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbG9nLCBkZXNpZ25lZCB0b1xuICogYmUgc2VyaWFsaXplZCBhcyBKU09OIGFuZCBzZW50IG92ZXIgdGhlIHdpcmUgdG8gcmVjb25zdHJ1Y3QgdGhlIGxvZyBvbiB0aGUgb3RoZXJcbiAqIHNpZGUuIFJlY29uc3RydWN0aW9uIG9mIHRoZSBzdGF0ZSBjYW4gYmUgZG9uZSB3aXRoIGFueSBqc29ucGF0Y2gtY29tcGxpYW50IGxpYnJhcnksXG4gKiBzZWUgaHR0cHM6Ly9qc29ucGF0Y2guY29tIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgUnVuTG9nUGF0Y2gge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vcHMgPSBmaWVsZHMub3BzID8/IFtdO1xuICAgIH1cbiAgICBjb25jYXQob3RoZXIpIHtcbiAgICAgICAgY29uc3Qgb3BzID0gdGhpcy5vcHMuY29uY2F0KG90aGVyLm9wcyk7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IGFwcGx5UGF0Y2goe30sIG9wcyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5Mb2coe1xuICAgICAgICAgICAgb3BzLFxuICAgICAgICAgICAgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Mb2cgZXh0ZW5kcyBSdW5Mb2dQYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBmaWVsZHMuc3RhdGU7XG4gICAgfVxuICAgIGNvbmNhdChvdGhlcikge1xuICAgICAgICBjb25zdCBvcHMgPSB0aGlzLm9wcy5jb25jYXQob3RoZXIub3BzKTtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh0aGlzLnN0YXRlLCBvdGhlci5vcHMpO1xuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7IG9wcywgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUnVuTG9nUGF0Y2gocGF0Y2gpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh7fSwgcGF0Y2gub3BzKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7XG4gICAgICAgICAgICBvcHM6IHBhdGNoLm9wcyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdLm5ld0RvY3VtZW50LFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEV4dHJhY3Qgc3RhbmRhcmRpemVkIGlucHV0cyBmcm9tIGEgcnVuLlxuICpcbiAqIFN0YW5kYXJkaXplcyB0aGUgaW5wdXRzIGJhc2VkIG9uIHRoZSB0eXBlIG9mIHRoZSBydW5uYWJsZSB1c2VkLlxuICpcbiAqIEBwYXJhbSBydW4gLSBSdW4gb2JqZWN0XG4gKiBAcGFyYW0gc2NoZW1hRm9ybWF0IC0gVGhlIHNjaGVtYSBmb3JtYXQgdG8gdXNlLlxuICpcbiAqIEByZXR1cm5zIFZhbGlkIGlucHV0cyBhcmUgb25seSBkaWN0LiBCeSBjb252ZW50aW9ucywgaW5wdXRzIGFsd2F5cyByZXByZXNlbnRlZFxuICogaW52b2NhdGlvbiB1c2luZyBuYW1lZCBhcmd1bWVudHMuXG4gKiBBIG51bGwgbWVhbnMgdGhhdCB0aGUgaW5wdXQgaXMgbm90IHlldCBrbm93biFcbiAqL1xuYXN5bmMgZnVuY3Rpb24gX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuICAgIGlmIChzY2hlbWFGb3JtYXQgPT09IFwib3JpZ2luYWxcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEbyBub3QgYXNzaWduIGlucHV0cyB3aXRoIG9yaWdpbmFsIHNjaGVtYSBkcm9wIHRoZSBrZXkgZm9yIG5vdy4gXCIgK1xuICAgICAgICAgICAgXCJXaGVuIGlucHV0cyBhcmUgYWRkZWQgdG8gc3RyZWFtTG9nIHRoZXkgc2hvdWxkIGJlIGFkZGVkIHdpdGggXCIgK1xuICAgICAgICAgICAgXCJzdGFuZGFyZGl6ZWQgc2NoZW1hIGZvciBzdHJlYW1pbmcgZXZlbnRzLlwiKTtcbiAgICB9XG4gICAgY29uc3QgeyBpbnB1dHMgfSA9IHJ1bjtcbiAgICBpZiAoW1wicmV0cmlldmVyXCIsIFwibGxtXCIsIFwicHJvbXB0XCJdLmluY2x1ZGVzKHJ1bi5ydW5fdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0cztcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKGlucHV0cykubGVuZ3RoID09PSAxICYmIGlucHV0cz8uaW5wdXQgPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gbmV3IHN0eWxlIGNoYWluc1xuICAgIC8vIFRoZXNlIG5lc3QgYW4gYWRkaXRpb25hbCAnaW5wdXQnIGtleSBpbnNpZGUgdGhlICdpbnB1dHMnIHRvIG1ha2Ugc3VyZVxuICAgIC8vIHRoZSBpbnB1dCBpcyBhbHdheXMgYSBkaWN0LiBXZSBuZWVkIHRvIHVucGFjayBhbmQgdXNlciB0aGUgaW5uZXIgdmFsdWUuXG4gICAgLy8gV2Ugc2hvdWxkIHRyeSB0byBmaXggdGhpcyBpbiBSdW5uYWJsZXMgYW5kIGNhbGxiYWNrcy90cmFjZXJzXG4gICAgLy8gUnVubmFibGVzIHNob3VsZCBiZSB1c2luZyBhIG51bGwgdHlwZSBoZXJlIG5vdCBhIHBsYWNlaG9sZGVyXG4gICAgLy8gZGljdC5cbiAgICByZXR1cm4gaW5wdXRzLmlucHV0O1xufVxuYXN5bmMgZnVuY3Rpb24gX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCBzY2hlbWFGb3JtYXQpIHtcbiAgICBjb25zdCB7IG91dHB1dHMgfSA9IHJ1bjtcbiAgICBpZiAoc2NoZW1hRm9ybWF0ID09PSBcIm9yaWdpbmFsXCIpIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBvbGQgc2NoZW1hLCB3aXRob3V0IHN0YW5kYXJkaXppbmcgYW55dGhpbmdcbiAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgfVxuICAgIGlmIChbXCJyZXRyaWV2ZXJcIiwgXCJsbG1cIiwgXCJwcm9tcHRcIl0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkge1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgaGFja3kgY2hlY2tcbiAgICBpZiAob3V0cHV0cyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIE9iamVjdC5rZXlzKG91dHB1dHMpLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICBvdXRwdXRzPy5vdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gb3V0cHV0cy5vdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRzO1xufVxuZnVuY3Rpb24gaXNDaGF0R2VuZXJhdGlvbkNodW5rKHgpIHtcbiAgICByZXR1cm4geCAhPT0gdW5kZWZpbmVkICYmIHgubWVzc2FnZSAhPT0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDbGFzcyB0aGF0IGV4dGVuZHMgdGhlIGBCYXNlVHJhY2VyYCBjbGFzcyBmcm9tIHRoZVxuICogYGxhbmdjaGFpbi5jYWxsYmFja3MudHJhY2Vycy5iYXNlYCBtb2R1bGUuIEl0IHJlcHJlc2VudHMgYSBjYWxsYmFja1xuICogaGFuZGxlciB0aGF0IGxvZ3MgdGhlIGV4ZWN1dGlvbiBvZiBydW5zIGFuZCBlbWl0cyBgUnVuTG9nYCBpbnN0YW5jZXMgdG8gYVxuICogYFJ1bkxvZ1N0cmVhbWAuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlLCAuLi5maWVsZHMgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF1dG9DbG9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9zY2hlbWFGb3JtYXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwib3JpZ2luYWxcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9vdElkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtleU1hcEJ5UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb3VudGVyTWFwQnlSdW5OYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHJhbnNmb3JtU3RyZWFtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndyaXRlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWNlaXZlU3RyZWFtXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibG9nX3N0cmVhbV90cmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hdXRvQ2xvc2UgPSBmaWVsZHM/LmF1dG9DbG9zZSA/PyB0cnVlO1xuICAgICAgICB0aGlzLmluY2x1ZGVOYW1lcyA9IGZpZWxkcz8uaW5jbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9IGZpZWxkcz8uaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzPy5pbmNsdWRlVGFncztcbiAgICAgICAgdGhpcy5leGNsdWRlTmFtZXMgPSBmaWVsZHM/LmV4Y2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5leGNsdWRlVHlwZXMgPSBmaWVsZHM/LmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcz8uZXhjbHVkZVRhZ3M7XG4gICAgICAgIHRoaXMuX3NjaGVtYUZvcm1hdCA9IGZpZWxkcz8uX3NjaGVtYUZvcm1hdCA/PyB0aGlzLl9zY2hlbWFGb3JtYXQ7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtU3RyZWFtID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuICAgICAgICB0aGlzLndyaXRlciA9IHRoaXMudHJhbnNmb3JtU3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xuICAgICAgICB0aGlzLnJlY2VpdmVTdHJlYW0gPSBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbSh0aGlzLnRyYW5zZm9ybVN0cmVhbS5yZWFkYWJsZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVTdHJlYW07XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4oX3J1bikge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbGVnYWN5IG1ldGhvZCBvbmx5IGNhbGxlZCBvbmNlIGZvciBhbiBlbnRpcmUgcnVuIHRyZWVcbiAgICAgICAgLy8gYW5kIGlzIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICB9XG4gICAgX2luY2x1ZGVSdW4ocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgPT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVuVGFncyA9IHJ1bi50YWdzID8/IFtdO1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKHJ1bi5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVHlwZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1bl90eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlIHx8XG4gICAgICAgICAgICAgICAgICAgIHJ1blRhZ3MuZmluZCgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVOYW1lcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocnVuLnJ1bl90eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFncyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID1cbiAgICAgICAgICAgICAgICBpbmNsdWRlICYmIHJ1blRhZ3MuZXZlcnkoKHRhZykgPT4gIXRoaXMuZXhjbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlO1xuICAgIH1cbiAgICBhc3luYyAqdGFwT3V0cHV0SXRlcmFibGUocnVuSWQsIG91dHB1dCkge1xuICAgICAgICAvLyBUYXAgYW4gb3V0cHV0IGFzeW5jIGl0ZXJhdG9yIHRvIHN0cmVhbSBpdHMgdmFsdWVzIHRvIHRoZSBsb2cuXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygb3V0cHV0KSB7XG4gICAgICAgICAgICAvLyByb290IHJ1biBpcyBoYW5kbGVkIGluIC5zdHJlYW1Mb2coKVxuICAgICAgICAgICAgaWYgKHJ1bklkICE9PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHdlIGNhbid0IGZpbmQgdGhlIHJ1biBzaWxlbnRseSBpZ25vcmVcbiAgICAgICAgICAgICAgICAvLyBlZy4gYmVjYXVzZSB0aGlzIHJ1biB3YXNuJ3QgaW5jbHVkZWQgaW4gdGhlIGxvZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5TWFwQnlSdW5JZFtydW5JZF07XG4gICAgICAgICAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7a2V5fS9zdHJlYW1lZF9vdXRwdXQvLWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBpZiAodGhpcy5yb290SWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yb290SWQgPSBydW4uaWQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXQ6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsX291dHB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ3M6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faW5jbHVkZVJ1bihydW4pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSArPSAxO1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMuY291bnRlck1hcEJ5UnVuTmFtZVtydW4ubmFtZV07XG4gICAgICAgIHRoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdID1cbiAgICAgICAgICAgIGNvdW50ID09PSAxID8gcnVuLm5hbWUgOiBgJHtydW4ubmFtZX06JHtjb3VudH1gO1xuICAgICAgICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICBuYW1lOiBydW4ubmFtZSxcbiAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgIHRhZ3M6IHJ1bi50YWdzID8/IFtdLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHJ1bi5leHRyYT8ubWV0YWRhdGEgPz8ge30sXG4gICAgICAgICAgICBzdGFydF90aW1lOiBuZXcgRGF0ZShydW4uc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICBzdHJlYW1lZF9vdXRwdXRfc3RyOiBbXSxcbiAgICAgICAgICAgIGZpbmFsX291dHB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kX3RpbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuX3NjaGVtYUZvcm1hdCA9PT0gXCJzdHJlYW1pbmdfZXZlbnRzXCIpIHtcbiAgICAgICAgICAgIGxvZ0VudHJ5LmlucHV0cyA9IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRJbnB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHt0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXX1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbG9nRW50cnksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBydW5OYW1lID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF07XG4gICAgICAgICAgICBpZiAocnVuTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3BzID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVwbGFjZVwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9pbnB1dHNgLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vZmluYWxfb3V0cHV0YCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocnVuLmVuZF90aW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9lbmRfdGltZWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7IG9wcyB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChydW4uaWQgPT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogXCIvZmluYWxfb3V0cHV0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF3YWl0IF9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dG9DbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvbkxMTU5ld1Rva2VuKHJ1biwgdG9rZW4sIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW5OYW1lID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF07XG4gICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgaGFja1xuICAgICAgICBjb25zdCBpc0NoYXRNb2RlbCA9IHJ1bi5pbnB1dHMubWVzc2FnZXMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHN0cmVhbWVkT3V0cHV0VmFsdWU7XG4gICAgICAgIGlmIChpc0NoYXRNb2RlbCkge1xuICAgICAgICAgICAgaWYgKGlzQ2hhdEdlbmVyYXRpb25DaHVuayhrd2FyZ3M/LmNodW5rKSkge1xuICAgICAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSBrd2FyZ3M/LmNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IG5ldyBBSU1lc3NhZ2VDaHVuayh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0Y2ggPSBuZXcgUnVuTG9nUGF0Y2goe1xuICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0X3N0ci8tYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRva2VuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogYC9sb2dzLyR7cnVuTmFtZX0vc3RyZWFtZWRfb3V0cHV0Ly1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RyZWFtZWRPdXRwdXRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiYXBwbHlQYXRjaCIsIkJhc2VUcmFjZXIiLCJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiQUlNZXNzYWdlQ2h1bmsiLCJSdW5Mb2dQYXRjaCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm9wcyIsImNvbmNhdCIsIm90aGVyIiwic3RhdGVzIiwiUnVuTG9nIiwic3RhdGUiLCJsZW5ndGgiLCJuZXdEb2N1bWVudCIsImZyb21SdW5Mb2dQYXRjaCIsInBhdGNoIiwiX2dldFN0YW5kYXJkaXplZElucHV0cyIsInJ1biIsInNjaGVtYUZvcm1hdCIsIkVycm9yIiwiaW5wdXRzIiwiaW5jbHVkZXMiLCJydW5fdHlwZSIsImtleXMiLCJpbnB1dCIsInVuZGVmaW5lZCIsIl9nZXRTdGFuZGFyZGl6ZWRPdXRwdXRzIiwib3V0cHV0cyIsIm91dHB1dCIsImlzQ2hhdEdlbmVyYXRpb25DaHVuayIsIngiLCJtZXNzYWdlIiwiTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiX2F3YWl0SGFuZGxlciIsImF1dG9DbG9zZSIsImluY2x1ZGVOYW1lcyIsImluY2x1ZGVUeXBlcyIsImluY2x1ZGVUYWdzIiwiZXhjbHVkZU5hbWVzIiwiZXhjbHVkZVR5cGVzIiwiZXhjbHVkZVRhZ3MiLCJfc2NoZW1hRm9ybWF0IiwidHJhbnNmb3JtU3RyZWFtIiwiVHJhbnNmb3JtU3RyZWFtIiwid3JpdGVyIiwiZ2V0V3JpdGVyIiwicmVjZWl2ZVN0cmVhbSIsImZyb21SZWFkYWJsZVN0cmVhbSIsInJlYWRhYmxlIiwiU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInBlcnNpc3RSdW4iLCJfcnVuIiwiX2luY2x1ZGVSdW4iLCJpZCIsInJvb3RJZCIsInJ1blRhZ3MiLCJ0YWdzIiwiaW5jbHVkZSIsIm5hbWUiLCJmaW5kIiwidGFnIiwiZXZlcnkiLCJ0YXBPdXRwdXRJdGVyYWJsZSIsInJ1bklkIiwiY2h1bmsiLCJrZXkiLCJrZXlNYXBCeVJ1bklkIiwid3JpdGUiLCJvcCIsInBhdGgiLCJvblJ1bkNyZWF0ZSIsInR5cGUiLCJzdHJlYW1lZF9vdXRwdXQiLCJmaW5hbF9vdXRwdXQiLCJsb2dzIiwiY291bnRlck1hcEJ5UnVuTmFtZSIsImNvdW50IiwibG9nRW50cnkiLCJtZXRhZGF0YSIsImV4dHJhIiwic3RhcnRfdGltZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN0cmVhbWVkX291dHB1dF9zdHIiLCJlbmRfdGltZSIsIm9uUnVuVXBkYXRlIiwicnVuTmFtZSIsInB1c2giLCJjbG9zZSIsIm9uTExNTmV3VG9rZW4iLCJ0b2tlbiIsImt3YXJncyIsImlzQ2hhdE1vZGVsIiwibWVzc2FnZXMiLCJzdHJlYW1lZE91dHB1dFZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1QztBQUNoQyxNQUFNQyw0QkFBNEJELGdEQUFVQTtJQUMvQ0UsWUFBWSxFQUFFQyxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUcsQ0FBRTtRQUM5QyxLQUFLLENBQUM7WUFBRUMsZUFBZTtRQUFLO1FBQzVCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBLDRCQUE0QixHQUM1QkwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNWLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNXLFVBQVUsR0FBR1Y7UUFDbEIsSUFBSSxDQUFDVyxRQUFRLEdBQUdWO1FBQ2hCLElBQUksQ0FBQ1csVUFBVSxHQUFHVjtJQUN0QjtJQUNBOzs7O0tBSUMsR0FDRFcsV0FBV0MsQ0FBQyxFQUFFO1FBQ1YsT0FBT0MsUUFBUUMsT0FBTztJQUMxQjtJQUNBLE1BQU1DLFlBQVlDLEdBQUcsRUFBRTtRQUNuQixJQUFJLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2I7UUFDSjtRQUNBLElBQUksQ0FBQ0EsTUFBTSxHQUFHRCxJQUFJRSxFQUFFO1FBQ3BCLElBQUksSUFBSSxDQUFDVixVQUFVLEVBQUU7WUFDakIsSUFBSSxJQUFJLENBQUNBLFVBQVUsQ0FBQ1csTUFBTSxLQUFLLEdBQUc7Z0JBQzlCLE1BQU0sSUFBSSxDQUFDWCxVQUFVLENBQUNRO1lBQzFCLE9BQ0ssSUFBSSxJQUFJLENBQUNSLFVBQVUsQ0FBQ1csTUFBTSxLQUFLLEdBQUc7Z0JBQ25DLE1BQU0sSUFBSSxDQUFDWCxVQUFVLENBQUNRLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtZQUMxQztRQUNKO0lBQ0o7SUFDQSxNQUFNdUIsWUFBWUosR0FBRyxFQUFFO1FBQ25CLElBQUlBLElBQUlFLEVBQUUsS0FBSyxJQUFJLENBQUNELE1BQU0sRUFBRTtZQUN4QjtRQUNKO1FBQ0EsSUFBSSxDQUFDRCxJQUFJSyxLQUFLLEVBQUU7WUFDWixJQUFJLElBQUksQ0FBQ1osUUFBUSxFQUFFO2dCQUNmLElBQUksSUFBSSxDQUFDQSxRQUFRLENBQUNVLE1BQU0sS0FBSyxHQUFHO29CQUM1QixNQUFNLElBQUksQ0FBQ1YsUUFBUSxDQUFDTztnQkFDeEIsT0FDSyxJQUFJLElBQUksQ0FBQ1AsUUFBUSxDQUFDVSxNQUFNLEtBQUssR0FBRztvQkFDakMsTUFBTSxJQUFJLENBQUNWLFFBQVEsQ0FBQ08sS0FBSyxJQUFJLENBQUNuQixNQUFNO2dCQUN4QztZQUNKO1FBQ0osT0FDSyxJQUFJLElBQUksQ0FBQ2EsVUFBVSxFQUFFO1lBQ3RCLElBQUksSUFBSSxDQUFDQSxVQUFVLENBQUNTLE1BQU0sS0FBSyxHQUFHO2dCQUM5QixNQUFNLElBQUksQ0FBQ1QsVUFBVSxDQUFDTTtZQUMxQixPQUNLLElBQUksSUFBSSxDQUFDTixVQUFVLENBQUNTLE1BQU0sS0FBSyxHQUFHO2dCQUNuQyxNQUFNLElBQUksQ0FBQ1QsVUFBVSxDQUFDTSxLQUFLLElBQUksQ0FBQ25CLE1BQU07WUFDMUM7UUFDSjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzPzQ3ZTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCBjbGFzcyBSb290TGlzdGVuZXJzVHJhY2VyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoeyBjb25maWcsIG9uU3RhcnQsIG9uRW5kLCBvbkVycm9yLCB9KSB7XG4gICAgICAgIHN1cGVyKHsgX2F3YWl0SGFuZGxlcjogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJSb290TGlzdGVuZXJzVHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgUnVuJ3MgSUQuIFR5cGUgVVVJRCAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZ09uU3RhcnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25FbmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25FcnJvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5hcmdPblN0YXJ0ID0gb25TdGFydDtcbiAgICAgICAgdGhpcy5hcmdPbkVuZCA9IG9uRW5kO1xuICAgICAgICB0aGlzLmFyZ09uRXJyb3IgPSBvbkVycm9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGEgbGVnYWN5IG1ldGhvZCBvbmx5IGNhbGxlZCBvbmNlIGZvciBhbiBlbnRpcmUgcnVuIHRyZWVcbiAgICAgKiB0aGVyZWZvcmUgbm90IHVzZWZ1bCBoZXJlXG4gICAgICogQHBhcmFtIHtSdW59IF8gTm90IHVzZWRcbiAgICAgKi9cbiAgICBwZXJzaXN0UnVuKF8pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290SWQgPSBydW4uaWQ7XG4gICAgICAgIGlmICh0aGlzLmFyZ09uU3RhcnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uU3RhcnQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPblN0YXJ0KHJ1bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmFyZ09uU3RhcnQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPblN0YXJ0KHJ1biwgdGhpcy5jb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuVXBkYXRlKHJ1bikge1xuICAgICAgICBpZiAocnVuLmlkICE9PSB0aGlzLnJvb3RJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcnVuLmVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVuZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRW5kLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRW5kKHJ1bik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25FbmQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FbmQocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25FcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FcnJvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRXJyb3IocnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25FcnJvci5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uRXJyb3IocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVRyYWNlciIsIlJvb3RMaXN0ZW5lcnNUcmFjZXIiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm9uU3RhcnQiLCJvbkVuZCIsIm9uRXJyb3IiLCJfYXdhaXRIYW5kbGVyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFyZ09uU3RhcnQiLCJhcmdPbkVuZCIsImFyZ09uRXJyb3IiLCJwZXJzaXN0UnVuIiwiXyIsIlByb21pc2UiLCJyZXNvbHZlIiwib25SdW5DcmVhdGUiLCJydW4iLCJyb290SWQiLCJpZCIsImxlbmd0aCIsIm9uUnVuVXBkYXRlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1DO0FBQzZDO0FBQ3pDO0FBQ2hDLE1BQU1JLHdCQUF3QkQsZ0RBQVVBO0lBQzNDRSxZQUFZQyxTQUFTLENBQUMsQ0FBQyxDQUFFO1FBQ3JCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxNQUFNLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxNQUFNLEVBQUUsR0FBR1Q7UUFDM0MsSUFBSSxDQUFDUSxXQUFXLEdBQ1pBLGVBQ0liLHFFQUFzQkEsQ0FBQyx3QkFDdkJBLHFFQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNZLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDRSxNQUFNLEdBQUdBLFVBQVUsSUFBSWYsNkNBQU1BLENBQUMsQ0FBQztJQUN4QztJQUNBLE1BQU1nQixpQkFBaUJDLEdBQUcsRUFBRUMsYUFBYUMsU0FBUyxFQUFFO1FBQ2hELE9BQU87WUFDSCxHQUFHRixHQUFHO1lBQ05HLE9BQU87Z0JBQ0gsR0FBR0gsSUFBSUcsS0FBSztnQkFDWkMsU0FBUyxNQUFNbkIsb0VBQXFCQTtZQUN4QztZQUNBb0IsWUFBWUg7WUFDWkksY0FBYyxJQUFJLENBQUNULFdBQVc7WUFDOUJVLHNCQUFzQlAsSUFBSVEsYUFBYSxHQUFHTixZQUFZRDtRQUMxRDtJQUNKO0lBQ0EsTUFBTVEsV0FBV0MsSUFBSSxFQUFFLENBQUU7SUFDekIsTUFBTUMsWUFBWVgsR0FBRyxFQUFFO1FBQ25CLE1BQU1ZLGVBQWUsTUFBTSxJQUFJLENBQUNiLGdCQUFnQixDQUFDQyxLQUFLLElBQUksQ0FBQ0osU0FBUztRQUNwRSxNQUFNLElBQUksQ0FBQ0UsTUFBTSxDQUFDZSxTQUFTLENBQUNEO0lBQ2hDO0lBQ0EsTUFBTUUsWUFBWWQsR0FBRyxFQUFFO1FBQ25CLE1BQU1lLFlBQVk7WUFDZEMsVUFBVWhCLElBQUlnQixRQUFRO1lBQ3RCQyxPQUFPakIsSUFBSWlCLEtBQUs7WUFDaEJDLFNBQVNsQixJQUFJa0IsT0FBTztZQUNwQkMsUUFBUW5CLElBQUltQixNQUFNO1lBQ2xCQyxRQUFRcEIsSUFBSW9CLE1BQU07WUFDbEJDLFVBQVVyQixJQUFJcUIsUUFBUTtZQUN0QkMsY0FBY3RCLElBQUlzQixZQUFZO1lBQzlCZCxlQUFlUixJQUFJUSxhQUFhO1FBQ3BDO1FBQ0EsTUFBTSxJQUFJLENBQUNWLE1BQU0sQ0FBQ3lCLFNBQVMsQ0FBQ3ZCLElBQUl3QixFQUFFLEVBQUVUO0lBQ3hDO0lBQ0FVLE9BQU9ELEVBQUUsRUFBRTtRQUNQLE9BQU8sSUFBSSxDQUFDRSxNQUFNLENBQUNDLEdBQUcsQ0FBQ0g7SUFDM0I7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW4uanM/MDA3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwibGFuZ3NtaXRoXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlLCBnZXRSdW50aW1lRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9qZWN0TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgZXhhbXBsZUlkLCBwcm9qZWN0TmFtZSwgY2xpZW50IH0gPSBmaWVsZHM7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPVxuICAgICAgICAgICAgcHJvamVjdE5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1BST0pFQ1RcIikgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1NFU1NJT05cIik7XG4gICAgICAgIHRoaXMuZXhhbXBsZUlkID0gZXhhbXBsZUlkO1xuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudCA/PyBuZXcgQ2xpZW50KHt9KTtcbiAgICB9XG4gICAgYXN5bmMgX2NvbnZlcnRUb0NyZWF0ZShydW4sIGV4YW1wbGVfaWQgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJ1bixcbiAgICAgICAgICAgIGV4dHJhOiB7XG4gICAgICAgICAgICAgICAgLi4ucnVuLmV4dHJhLFxuICAgICAgICAgICAgICAgIHJ1bnRpbWU6IGF3YWl0IGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoaWxkX3J1bnM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlc3Npb25fbmFtZTogdGhpcy5wcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHJlZmVyZW5jZV9leGFtcGxlX2lkOiBydW4ucGFyZW50X3J1bl9pZCA/IHVuZGVmaW5lZCA6IGV4YW1wbGVfaWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4oX3J1bikgeyB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHBlcnNpc3RlZFJ1biA9IGF3YWl0IHRoaXMuX2NvbnZlcnRUb0NyZWF0ZShydW4sIHRoaXMuZXhhbXBsZUlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuY3JlYXRlUnVuKHBlcnNpc3RlZFJ1bik7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuVXBkYXRlKHJ1bikge1xuICAgICAgICBjb25zdCBydW5VcGRhdGUgPSB7XG4gICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgZXJyb3I6IHJ1bi5lcnJvcixcbiAgICAgICAgICAgIG91dHB1dHM6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgZXZlbnRzOiBydW4uZXZlbnRzLFxuICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IHJ1bi50cmFjZV9pZCxcbiAgICAgICAgICAgIGRvdHRlZF9vcmRlcjogcnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHJ1bi5wYXJlbnRfcnVuX2lkLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC51cGRhdGVSdW4ocnVuLmlkLCBydW5VcGRhdGUpO1xuICAgIH1cbiAgICBnZXRSdW4oaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFwLmdldChpZCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkNsaWVudCIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJCYXNlVHJhY2VyIiwiTGFuZ0NoYWluVHJhY2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZXhhbXBsZUlkIiwicHJvamVjdE5hbWUiLCJjbGllbnQiLCJfY29udmVydFRvQ3JlYXRlIiwicnVuIiwiZXhhbXBsZV9pZCIsInVuZGVmaW5lZCIsImV4dHJhIiwicnVudGltZSIsImNoaWxkX3J1bnMiLCJzZXNzaW9uX25hbWUiLCJyZWZlcmVuY2VfZXhhbXBsZV9pZCIsInBhcmVudF9ydW5faWQiLCJwZXJzaXN0UnVuIiwiX3J1biIsIm9uUnVuQ3JlYXRlIiwicGVyc2lzdGVkUnVuIiwiY3JlYXRlUnVuIiwib25SdW5VcGRhdGUiLCJydW5VcGRhdGUiLCJlbmRfdGltZSIsImVycm9yIiwib3V0cHV0cyIsImV2ZW50cyIsImlucHV0cyIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwidXBkYXRlUnVuIiwiaWQiLCJnZXRSdW4iLCJydW5NYXAiLCJnZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracerV1: () => (/* binding */ LangChainTracerV1)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n/** @deprecated Use LangChainTracer instead. */ class LangChainTracerV1 extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? await this.loadDefaultSession();\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map((x)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs\n            };\n            runResult = llmRun;\n        } else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = chainRun;\n        } else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = toolRun;\n        } else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        } else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        } else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        } else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = await response.json();\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbl92MS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ0U7QUFDbEI7QUFDdkMsNkNBQTZDLEdBQ3RDLE1BQU1HLDBCQUEwQkQsZ0RBQVVBO0lBQzdDRSxhQUFjO1FBQ1YsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9ULHFFQUFzQkEsQ0FBQyx5QkFBeUI7UUFDM0Q7UUFDQUksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUNILGdCQUFnQjtZQUNwQjtRQUNKO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsTUFBTUMsU0FBU1YscUVBQXNCQSxDQUFDO1FBQ3RDLElBQUlVLFFBQVE7WUFDUixJQUFJLENBQUNDLE9BQU8sQ0FBQyxZQUFZLEdBQUdEO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNRSxXQUFXQyxXQUFXLEVBQUU7UUFDMUIsTUFBTUMsZ0JBQWdCO1lBQ2xCQyxZQUFZQyxLQUFLQyxHQUFHO1lBQ3BCQyxNQUFNTDtRQUNWO1FBQ0EsTUFBTU0sVUFBVSxNQUFNLElBQUksQ0FBQ0MsY0FBYyxDQUFDTjtRQUMxQyxJQUFJLENBQUNLLE9BQU8sR0FBR0E7UUFDZixPQUFPQTtJQUNYO0lBQ0Es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WUMsS0FBS0MsR0FBRztZQUN4QjtZQUNBLElBQUksQ0FBQ0UsT0FBTyxHQUFHdUQ7WUFDZixPQUFPQTtRQUNYO1FBQ0EsTUFBTUMsT0FBUSxNQUFNaEMsU0FBUzhCLElBQUk7UUFDakMsSUFBSUUsS0FBS0MsTUFBTSxLQUFLLEdBQUc7WUFDbkJGLGdCQUFnQjtnQkFDWnJDLElBQUk7Z0JBQ0p0QixZQUFZQyxLQUFLQyxHQUFHO1lBQ3hCO1lBQ0EsSUFBSSxDQUFDRSxPQUFPLEdBQUd1RDtZQUNmLE9BQU9BO1FBQ1g7UUFDQSxDQUFDQSxjQUFjLEdBQUdDO1FBQ2xCLElBQUksQ0FBQ3hELE9BQU8sR0FBR3VEO1FBQ2YsT0FBT0E7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbl92MS5qcz85NDY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKiogQGRlcHJlY2F0ZWQgVXNlIExhbmdDaGFpblRyYWNlciBpbnN0ZWFkLiAqL1xuZXhwb3J0IGNsYXNzIExhbmdDaGFpblRyYWNlclYxIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwibGFuZ2NoYWluX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmRwb2ludFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9FTkRQT0lOVFwiKSB8fCBcImh0dHA6Ly9sb2NhbGhvc3Q6MTk4NFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWFkZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXNzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKGFwaUtleSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJzW1wieC1hcGkta2V5XCJdID0gYXBpS2V5O1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG5ld1Nlc3Npb24oc2Vzc2lvbk5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNyZWF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBuYW1lOiBzZXNzaW9uTmFtZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMucGVyc2lzdFNlc3Npb24oc2Vzc2lvbkNyZWF0ZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH1cbiAgICBhc3luYyBsb2FkU2Vzc2lvbihzZXNzaW9uTmFtZSkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Nlc3Npb25zP25hbWU9JHtzZXNzaW9uTmFtZX1gO1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KTtcbiAgICB9XG4gICAgYXN5bmMgbG9hZERlZmF1bHRTZXNzaW9uKCkge1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Nlc3Npb25zP25hbWU9ZGVmYXVsdGA7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpO1xuICAgIH1cbiAgICBhc3luYyBjb252ZXJ0VjJSdW5Ub1J1bihydW4pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbiA/PyAoYXdhaXQgdGhpcy5sb2FkRGVmYXVsdFNlc3Npb24oKSk7XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSBydW4uc2VyaWFsaXplZDtcbiAgICAgICAgbGV0IHJ1blJlc3VsdDtcbiAgICAgICAgaWYgKHJ1bi5ydW5fdHlwZSA9PT0gXCJsbG1cIikge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0cyA9IHJ1bi5pbnB1dHMucHJvbXB0c1xuICAgICAgICAgICAgICAgID8gcnVuLmlucHV0cy5wcm9tcHRzXG4gICAgICAgICAgICAgICAgOiBydW4uaW5wdXRzLm1lc3NhZ2VzLm1hcCgoeCkgPT4gZ2V0QnVmZmVyU3RyaW5nKHgpKTtcbiAgICAgICAgICAgIGNvbnN0IGxsbVJ1biA9IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHJ1bi5leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICAgICAgcHJvbXB0cyxcbiAgICAgICAgICAgICAgICByZXNwb25zZTogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnVuUmVzdWx0ID0gbGxtUnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bi5ydW5fdHlwZSA9PT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZF9ydW5zID0gYXdhaXQgUHJvbWlzZS5hbGwocnVuLmNoaWxkX3J1bnMubWFwKChjaGlsZF9ydW4pID0+IHRoaXMuY29udmVydFYyUnVuVG9SdW4oY2hpbGRfcnVuKSkpO1xuICAgICAgICAgICAgY29uc3QgY2hhaW5SdW4gPSB7XG4gICAgICAgICAgICAgICAgdXVpZDogcnVuLmlkLFxuICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IHJ1bi5zdGFydF90aW1lLFxuICAgICAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyOiBydW4uZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogcnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLFxuICAgICAgICAgICAgICAgIHR5cGU6IHJ1bi5ydW5fdHlwZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgICAgICAgICAgIGlucHV0czogcnVuLmlucHV0cyxcbiAgICAgICAgICAgICAgICBvdXRwdXRzOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgICAgICBjaGlsZF9sbG1fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwibGxtXCIpLFxuICAgICAgICAgICAgICAgIGNoaWxkX2NoYWluX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImNoYWluXCIpLFxuICAgICAgICAgICAgICAgIGNoaWxkX3Rvb2xfcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwidG9vbFwiKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5SZXN1bHQgPSBjaGFpblJ1bjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydW4ucnVuX3R5cGUgPT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZF9ydW5zID0gYXdhaXQgUHJvbWlzZS5hbGwocnVuLmNoaWxkX3J1bnMubWFwKChjaGlsZF9ydW4pID0+IHRoaXMuY29udmVydFYyUnVuVG9SdW4oY2hpbGRfcnVuKSkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbFJ1biA9IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHJ1bi5leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICAgICAgdG9vbF9pbnB1dDogcnVuLmlucHV0cy5pbnB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHJ1bi5vdXRwdXRzPy5vdXRwdXQsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBKU09OLnN0cmluZ2lmeShzZXJpYWxpemVkKSxcbiAgICAgICAgICAgICAgICBjaGlsZF9sbG1fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwibGxtXCIpLFxuICAgICAgICAgICAgICAgIGNoaWxkX2NoYWluX3J1bnM6IGNoaWxkX3J1bnMuZmlsdGVyKChjaGlsZF9ydW4pID0+IGNoaWxkX3J1bi50eXBlID09PSBcImNoYWluXCIpLFxuICAgICAgICAgICAgICAgIGNoaWxkX3Rvb2xfcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwidG9vbFwiKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5SZXN1bHQgPSB0b29sUnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHJ1biB0eXBlOiAke3J1bi5ydW5fdHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVuUmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0UnVuKHJ1bikge1xuICAgICAgICBsZXQgZW5kcG9pbnQ7XG4gICAgICAgIGxldCB2MVJ1bjtcbiAgICAgICAgaWYgKHJ1bi5ydW5fdHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2MVJ1biA9IGF3YWl0IHRoaXMuY29udmVydFYyUnVuVG9SdW4ocnVuKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHYxUnVuID0gcnVuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2MVJ1bi50eXBlID09PSBcImxsbVwiKSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L2xsbS1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2MVJ1bi50eXBlID09PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vY2hhaW4tcnVuc2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmRwb2ludCA9IGAke3RoaXMuZW5kcG9pbnR9L3Rvb2wtcnVuc2A7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbmRwb2ludCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHYxUnVuKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwZXJzaXN0IHJ1bjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwZXJzaXN0U2Vzc2lvbihzZXNzaW9uQ3JlYXRlKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnNgO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkNyZWF0ZSksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcGVyc2lzdCBzZXNzaW9uOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSwgdXNpbmcgZGVmYXVsdCBzZXNzaW9uLmApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICAuLi5zZXNzaW9uQ3JlYXRlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IChhd2FpdCByZXNwb25zZS5qc29uKCkpLmlkLFxuICAgICAgICAgICAgLi4uc2Vzc2lvbkNyZWF0ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgc2Vzc2lvbjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIHRyYWNlclNlc3Npb24gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSB0cmFjZXJTZXNzaW9uO1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNlclNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcCA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xuICAgICAgICBpZiAocmVzcC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRyYWNlclNlc3Npb24gPSB7XG4gICAgICAgICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNlc3Npb24gPSB0cmFjZXJTZXNzaW9uO1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNlclNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgW3RyYWNlclNlc3Npb25dID0gcmVzcDtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIHRyYWNlclNlc3Npb247XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImdldEJ1ZmZlclN0cmluZyIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJCYXNlVHJhY2VyIiwiTGFuZ0NoYWluVHJhY2VyVjEiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJhcGlLZXkiLCJoZWFkZXJzIiwibmV3U2Vzc2lvbiIsInNlc3Npb25OYW1lIiwic2Vzc2lvbkNyZWF0ZSIsInN0YXJ0X3RpbWUiLCJEYXRlIiwibm93IiwibmFtZSIsInNlc3Npb24iLCJwZXJzaXN0U2Vzc2lvbiIsImxvYWRTZXNzaW9uIiwiZW5kcG9pbnQiLCJfaGFuZGxlU2Vzc2lvblJlc3BvbnNlIiwibG9hZERlZmF1bHRTZXNzaW9uIiwiY29udmVydFYyUnVuVG9SdW4iLCJydW4iLCJzZXJpYWxpemVkIiwicnVuUmVzdWx0IiwicnVuX3R5cGUiLCJwcm9tcHRzIiwiaW5wdXRzIiwibWVzc2FnZXMiLCJtYXAiLCJ4IiwibGxtUnVuIiwidXVpZCIsImlkIiwiZW5kX3RpbWUiLCJleGVjdXRpb25fb3JkZXIiLCJjaGlsZF9leGVjdXRpb25fb3JkZXIiLCJ0eXBlIiwic2Vzc2lvbl9pZCIsInJlc3BvbnNlIiwib3V0cHV0cyIsImNoaWxkX3J1bnMiLCJQcm9taXNlIiwiYWxsIiwiY2hpbGRfcnVuIiwiY2hhaW5SdW4iLCJjaGlsZF9sbG1fcnVucyIsImZpbHRlciIsImNoaWxkX2NoYWluX3J1bnMiLCJjaGlsZF90b29sX3J1bnMiLCJ0b29sUnVuIiwidG9vbF9pbnB1dCIsImlucHV0Iiwib3V0cHV0IiwiYWN0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsIkVycm9yIiwicGVyc2lzdFJ1biIsInYxUnVuIiwidW5kZWZpbmVkIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5Iiwib2siLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsInRyYWNlclNlc3Npb24iLCJyZXNwIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkI7QUFDRztBQUNoQyxNQUFNRSxrQkFBa0I7SUFDcEI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCw4REFBOEQ7QUFDOUQsTUFBTUMsOEJBQThCLENBQUNDO0lBQ2pDLElBQUlBLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGFBQ3pCRixNQUFNQyxPQUFPLENBQUNDLFVBQVUsQ0FBQyxpQkFDekJGLE1BQU1HLElBQUksS0FBSyxjQUFjO1FBQzdCLE1BQU1IO0lBQ1Y7SUFDQSw4REFBOEQ7SUFDOUQsSUFBSUEsT0FBT0ksU0FBUyxnQkFBZ0I7UUFDaEMsTUFBTUo7SUFDVjtJQUNBLE1BQU1LLFNBQ04sOERBQThEO0lBQzlETCxPQUFPTSxVQUFVRCxVQUFVTCxPQUFPSztJQUNsQyxJQUFJQSxVQUFVUCxnQkFBZ0JTLFFBQVEsQ0FBQyxDQUFDRixTQUFTO1FBQzdDLE1BQU1MO0lBQ1Y7SUFDQSw4REFBOEQ7SUFDOUQsSUFBSUEsT0FBT0EsT0FBT0ksU0FBUyxzQkFBc0I7UUFDN0MsTUFBTUksTUFBTSxJQUFJQyxNQUFNVCxPQUFPQztRQUM3Qk8sSUFBSUwsSUFBSSxHQUFHO1FBQ1gsTUFBTUs7SUFDVjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7OztDQVlDLEdBQ00sTUFBTUU7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLGNBQWMsR0FBR1AsT0FBT08sY0FBYyxJQUFJQztRQUMvQyxJQUFJLENBQUNDLFVBQVUsR0FBR1QsT0FBT1MsVUFBVSxJQUFJO1FBQ3ZDLElBQUksQ0FBQ0MsZUFBZSxHQUNoQlYsT0FBT1UsZUFBZSxJQUFJdkI7UUFDOUIsTUFBTXdCLFNBQVMsS0FBc0IxQixHQUFHQSwrQ0FBaUIsR0FBR0Esb0NBQVNBO1FBQ3JFLElBQUksQ0FBQzRCLEtBQUssR0FBRyxJQUFJRixPQUFPO1lBQUVHLGFBQWEsSUFBSSxDQUFDUCxjQUFjO1FBQUM7SUFDL0Q7SUFDQSw4REFBOEQ7SUFDOURRLEtBQUtDLFFBQVEsRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNKLEtBQUssQ0FBQ0ssR0FBRyxDQUFDLElBQU1sQyxvQ0FBTUEsQ0FBQyxJQUFNZ0MsWUFBWUMsTUFBTUUsS0FBSyxDQUFDLENBQUMvQjtvQkFDOUQsdURBQXVEO29CQUN2RCxJQUFJQSxpQkFBaUJTLE9BQU87d0JBQ3hCLE1BQU1UO29CQUNWLE9BQ0s7d0JBQ0QsTUFBTSxJQUFJUyxNQUFNVDtvQkFDcEI7Z0JBQ0osSUFBSTtnQkFDQXNCLGlCQUFpQixJQUFJLENBQUNBLGVBQWU7Z0JBQ3JDVSxTQUFTLElBQUksQ0FBQ1gsVUFBVTtnQkFDeEJZLFdBQVc7WUFHZixJQUFJO1lBQUVDLGdCQUFnQjtRQUFLO0lBQy9CO0lBQ0EsOERBQThEO0lBQzlEQyxnQkFBZ0JDLE9BQU8sRUFBRVIsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUN4QyxtREFBbUQ7UUFDbkQsd0VBQXdFO1FBQ3hFLElBQUlPLFFBQVFDLE1BQU0sRUFBRTtZQUNoQixPQUFPQyxRQUFRQyxJQUFJLENBQUM7Z0JBQ2hCLElBQUksQ0FBQ1osSUFBSSxDQUFDQyxhQUFhQztnQkFDdkIsSUFBSVMsUUFBUSxDQUFDRSxHQUFHQztvQkFDWkwsUUFBUUMsTUFBTSxFQUFFSyxpQkFBaUIsU0FBUzt3QkFDdENELE9BQU8sSUFBSWhDLE1BQU07b0JBQ3JCO2dCQUNKO2FBQ0g7UUFDTDtRQUNBLE9BQU8sSUFBSSxDQUFDa0IsSUFBSSxDQUFDQyxhQUFhQztJQUNsQztJQUNBYyxNQUFNLEdBQUdkLElBQUksRUFBRTtRQUNYLE9BQU8sSUFBSSxDQUFDRixJQUFJLENBQUMsSUFBTWdCLFNBQVNkLE1BQU1lLElBQUksQ0FBQyxDQUFDQyxNQUFTQSxJQUFJQyxFQUFFLEdBQUdELE1BQU1QLFFBQVFHLE1BQU0sQ0FBQ0k7SUFDdkY7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanM/NDVlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcFJldHJ5IGZyb20gXCJwLXJldHJ5XCI7XG5pbXBvcnQgUFF1ZXVlTW9kIGZyb20gXCJwLXF1ZXVlXCI7XG5jb25zdCBTVEFUVVNfTk9fUkVUUlkgPSBbXG4gICAgNDAwLFxuICAgIDQwMSxcbiAgICA0MDIsXG4gICAgNDAzLFxuICAgIDQwNCxcbiAgICA0MDUsXG4gICAgNDA2LFxuICAgIDQwNyxcbiAgICA0MDksIC8vIENvbmZsaWN0XG5dO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmNvbnN0IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciA9IChlcnJvcikgPT4ge1xuICAgIGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJDYW5jZWxcIikgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZS5zdGFydHNXaXRoKFwiQWJvcnRFcnJvclwiKSB8fFxuICAgICAgICBlcnJvci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoZXJyb3I/LmNvZGUgPT09IFwiRUNPTk5BQk9SVEVEXCIpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IHN0YXR1cyA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPz8gZXJyb3I/LnN0YXR1cztcbiAgICBpZiAoc3RhdHVzICYmIFNUQVRVU19OT19SRVRSWS5pbmNsdWRlcygrc3RhdHVzKSkge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoZXJyb3I/LmVycm9yPy5jb2RlID09PSBcImluc3VmZmljaWVudF9xdW90YVwiKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihlcnJvcj8ubWVzc2FnZSk7XG4gICAgICAgIGVyci5uYW1lID0gXCJJbnN1ZmZpY2llbnRRdW90YUVycm9yXCI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59O1xuLyoqXG4gKiBBIGNsYXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gbWFrZSBhc3luYyBjYWxscyB3aXRoIGNvbmN1cnJlbmN5IGFuZCByZXRyeSBsb2dpYy5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgbWFraW5nIGNhbGxzIHRvIGFueSBraW5kIG9mIFwiZXhwZW5zaXZlXCIgZXh0ZXJuYWwgcmVzb3VyY2UsXG4gKiBiZSBpdCBiZWNhdXNlIGl0J3MgcmF0ZS1saW1pdGVkLCBzdWJqZWN0IHRvIG5ldHdvcmsgaXNzdWVzLCBldGMuXG4gKlxuICogQ29uY3VycmVudCBjYWxscyBhcmUgbGltaXRlZCBieSB0aGUgYG1heENvbmN1cnJlbmN5YCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzXG4gKiB0byBgSW5maW5pdHlgLiBUaGlzIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgYWxsIGNhbGxzIHdpbGwgYmUgbWFkZSBpbiBwYXJhbGxlbC5cbiAqXG4gKiBSZXRyaWVzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4UmV0cmllc2AgcGFyYW1ldGVyLCB3aGljaCBkZWZhdWx0cyB0byA2LiBUaGlzXG4gKiBtZWFucyB0aGF0IGJ5IGRlZmF1bHQsIGVhY2ggY2FsbCB3aWxsIGJlIHJldHJpZWQgdXAgdG8gNiB0aW1lcywgd2l0aCBhblxuICogZXhwb25lbnRpYWwgYmFja29mZiBiZXR3ZWVuIGVhY2ggYXR0ZW1wdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW5jQ2FsbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4Q29uY3VycmVuY3lcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4UmV0cmllc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkZhaWxlZEF0dGVtcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicXVldWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXhDb25jdXJyZW5jeSA9IHBhcmFtcy5tYXhDb25jdXJyZW5jeSA/PyBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5tYXhSZXRyaWVzID0gcGFyYW1zLm1heFJldHJpZXMgPz8gNjtcbiAgICAgICAgdGhpcy5vbkZhaWxlZEF0dGVtcHQgPVxuICAgICAgICAgICAgcGFyYW1zLm9uRmFpbGVkQXR0ZW1wdCA/PyBkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXI7XG4gICAgICAgIGNvbnN0IFBRdWV1ZSA9IFwiZGVmYXVsdFwiIGluIFBRdWV1ZU1vZCA/IFBRdWV1ZU1vZC5kZWZhdWx0IDogUFF1ZXVlTW9kO1xuICAgICAgICB0aGlzLnF1ZXVlID0gbmV3IFBRdWV1ZSh7IGNvbmN1cnJlbmN5OiB0aGlzLm1heENvbmN1cnJlbmN5IH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuYWRkKCgpID0+IHBSZXRyeSgoKSA9PiBjYWxsYWJsZSguLi5hcmdzKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwge1xuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiB0aGlzLm9uRmFpbGVkQXR0ZW1wdCxcbiAgICAgICAgICAgIHJldHJpZXM6IHRoaXMubWF4UmV0cmllcyxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vIElmIG5lZWRlZCB3ZSBjYW4gY2hhbmdlIHNvbWUgb2YgdGhlIGRlZmF1bHRzIGhlcmUsXG4gICAgICAgICAgICAvLyBidXQgdGhleSdyZSBxdWl0ZSBzZW5zaWJsZS5cbiAgICAgICAgfSksIHsgdGhyb3dPblRpbWVvdXQ6IHRydWUgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbFdpdGhPcHRpb25zKG9wdGlvbnMsIGNhbGxhYmxlLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIE5vdGUgdGhpcyBkb2Vzbid0IGNhbmNlbCB0aGUgdW5kZXJseWluZyByZXF1ZXN0LFxuICAgICAgICAvLyB3aGVuIGF2YWlsYWJsZSBwcmVmZXIgdG8gdXNlIHRoZSBzaWduYWwgb3B0aW9uIG9mIHRoZSB1bmRlcmx5aW5nIGNhbGxcbiAgICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGwoY2FsbGFibGUsIC4uLmFyZ3MpLFxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQWJvcnRFcnJvclwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyk7XG4gICAgfVxuICAgIGZldGNoKC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbCgoKSA9PiBmZXRjaCguLi5hcmdzKS50aGVuKChyZXMpID0+IChyZXMub2sgPyByZXMgOiBQcm9taXNlLnJlamVjdChyZXMpKSkpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwUmV0cnkiLCJQUXVldWVNb2QiLCJTVEFUVVNfTk9fUkVUUlkiLCJkZWZhdWx0RmFpbGVkQXR0ZW1wdEhhbmRsZXIiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGFydHNXaXRoIiwibmFtZSIsImNvZGUiLCJzdGF0dXMiLCJyZXNwb25zZSIsImluY2x1ZGVzIiwiZXJyIiwiRXJyb3IiLCJBc3luY0NhbGxlciIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIm1heENvbmN1cnJlbmN5IiwiSW5maW5pdHkiLCJtYXhSZXRyaWVzIiwib25GYWlsZWRBdHRlbXB0IiwiUFF1ZXVlIiwiZGVmYXVsdCIsInF1ZXVlIiwiY29uY3VycmVuY3kiLCJjYWxsIiwiY2FsbGFibGUiLCJhcmdzIiwiYWRkIiwiY2F0Y2giLCJyZXRyaWVzIiwicmFuZG9taXplIiwidGhyb3dPblRpbWVvdXQiLCJjYWxsV2l0aE9wdGlvbnMiLCJvcHRpb25zIiwic2lnbmFsIiwiUHJvbWlzZSIsInJhY2UiLCJfIiwicmVqZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/chunk_array.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/chunk_array.js ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* binding */ chunkArray)\n/* harmony export */ });\nconst chunkArray = (arr, chunkSize)=>arr.reduce((chunks, elem, index)=>{\n        const chunkIndex = Math.floor(index / chunkSize);\n        const chunk = chunks[chunkIndex] || [];\n        // eslint-disable-next-line no-param-reassign\n        chunks[chunkIndex] = chunk.concat([\n            elem\n        ]);\n        return chunks;\n    }, []);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2NodW5rX2FycmF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxhQUFhLENBQUNDLEtBQUtDLFlBQWNELElBQUlFLE1BQU0sQ0FBQyxDQUFDQyxRQUFRQyxNQUFNQztRQUNwRSxNQUFNQyxhQUFhQyxLQUFLQyxLQUFLLENBQUNILFFBQVFKO1FBQ3RDLE1BQU1RLFFBQVFOLE1BQU0sQ0FBQ0csV0FBVyxJQUFJLEVBQUU7UUFDdEMsNkNBQTZDO1FBQzdDSCxNQUFNLENBQUNHLFdBQVcsR0FBR0csTUFBTUMsTUFBTSxDQUFDO1lBQUNOO1NBQUs7UUFDeEMsT0FBT0Q7SUFDWCxHQUFHLEVBQUUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9jaHVua19hcnJheS5qcz83NzFhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjaHVua0FycmF5ID0gKGFyciwgY2h1bmtTaXplKSA9PiBhcnIucmVkdWNlKChjaHVua3MsIGVsZW0sIGluZGV4KSA9PiB7XG4gICAgY29uc3QgY2h1bmtJbmRleCA9IE1hdGguZmxvb3IoaW5kZXggLyBjaHVua1NpemUpO1xuICAgIGNvbnN0IGNodW5rID0gY2h1bmtzW2NodW5rSW5kZXhdIHx8IFtdO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGNodW5rc1tjaHVua0luZGV4XSA9IGNodW5rLmNvbmNhdChbZWxlbV0pO1xuICAgIHJldHVybiBjaHVua3M7XG59LCBbXSk7XG4iXSwibmFtZXMiOlsiY2h1bmtBcnJheSIsImFyciIsImNodW5rU2l6ZSIsInJlZHVjZSIsImNodW5rcyIsImVsZW0iLCJpbmRleCIsImNodW5rSW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJjaHVuayIsImNvbmNhdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFPLE1BQU1BLFlBQVksSUFBTSxNQUE2QixJQUFJLENBQXNDLENBQUM7QUFDaEcsTUFBTUcsY0FBYyxJQUFNLE9BQU9DLGVBQWUsWUFDbkRBLFdBQVdDLFdBQVcsSUFDdEJELFdBQVdDLFdBQVcsQ0FBQ0MsSUFBSSxLQUFLLDZCQUE2QjtBQUMxRCxNQUFNQyxVQUFVLElBQU0sTUFBMEQsSUFDbEYsT0FBT0MsY0FBYyxlQUNqQkEsQ0FBQUEsVUFBVUMsU0FBUyxDQUFDQyxRQUFRLENBQUMsY0FDMUJGLFVBQVVDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLFFBQU8sRUFBSTtBQUNwRCx5REFBeUQ7QUFDekQsNkJBQTZCO0FBQ3RCLE1BQU1DLFNBQVMsSUFBTSxPQUFPQyxTQUFTLFlBQVk7QUFDeEQsZ0RBQWdEO0FBQ3pDLE1BQU1DLFNBQVMsSUFBTSxPQUFPQyxZQUFZLGVBQzNDLE9BQU9BLFFBQVFDLFFBQVEsS0FBSyxlQUM1QixPQUFPRCxRQUFRQyxRQUFRLENBQUNDLElBQUksS0FBSyxlQUNqQyxDQUFDTCxTQUFTO0FBQ1AsTUFBTU0sU0FBUztJQUNsQixJQUFJQztJQUNKLElBQUlsQixhQUFhO1FBQ2JrQixNQUFNO0lBQ1YsT0FDSyxJQUFJTCxVQUFVO1FBQ2ZLLE1BQU07SUFDVixPQUNLLElBQUlmLGVBQWU7UUFDcEJlLE1BQU07SUFDVixPQUNLLElBQUlYLFdBQVc7UUFDaEJXLE1BQU07SUFDVixPQUNLLElBQUlQLFVBQVU7UUFDZk8sTUFBTTtJQUNWLE9BQ0s7UUFDREEsTUFBTTtJQUNWO0lBQ0EsT0FBT0E7QUFDWCxFQUFFO0FBQ0YsSUFBSUM7QUFDRyxlQUFlQztJQUNsQixJQUFJRCx1QkFBdUJFLFdBQVc7UUFDbEMsTUFBTUgsTUFBTUQ7UUFDWkUscUJBQXFCO1lBQ2pCRyxTQUFTO1lBQ1RDLFNBQVNMO1FBQ2I7SUFDSjtJQUNBLE9BQU9DO0FBQ1g7QUFDTyxTQUFTSyx1QkFBdUJsQixJQUFJO0lBQ3ZDLHFGQUFxRjtJQUNyRiwwREFBMEQ7SUFDMUQsSUFBSTtRQUNBLE9BQU8sT0FBT1EsWUFBWSxjQUVsQkEsUUFBUUksR0FBRyxFQUFFLENBQUNaLEtBQUssR0FDckJlO0lBQ1YsRUFDQSxPQUFPSSxHQUFHO1FBQ04sT0FBT0o7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Vudi5qcz9hYzViIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpc0Jyb3dzZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCI7XG5leHBvcnQgY29uc3QgaXNXZWJXb3JrZXIgPSAoKSA9PiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIiAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IgJiZcbiAgICBnbG9iYWxUaGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiRGVkaWNhdGVkV29ya2VyR2xvYmFsU2NvcGVcIjtcbmV4cG9ydCBjb25zdCBpc0pzRG9tID0gKCkgPT4gKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93Lm5hbWUgPT09IFwibm9kZWpzXCIpIHx8XG4gICAgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJOb2RlLmpzXCIpIHx8XG4gICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKFwianNkb21cIikpKTtcbi8vIFN1cGFiYXNlIEVkZ2UgRnVuY3Rpb24gcHJvdmlkZXMgYSBgRGVub2AgZ2xvYmFsIG9iamVjdFxuLy8gd2l0aG91dCBgdmVyc2lvbmAgcHJvcGVydHlcbmV4cG9ydCBjb25zdCBpc0Rlbm8gPSAoKSA9PiB0eXBlb2YgRGVubyAhPT0gXCJ1bmRlZmluZWRcIjtcbi8vIE1hcmsgbm90LWFzLW5vZGUgaWYgaW4gU3VwYWJhc2UgRWRnZSBGdW5jdGlvblxuZXhwb3J0IGNvbnN0IGlzTm9kZSA9ICgpID0+IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgIWlzRGVubygpO1xuZXhwb3J0IGNvbnN0IGdldEVudiA9ICgpID0+IHtcbiAgICBsZXQgZW52O1xuICAgIGlmIChpc0Jyb3dzZXIoKSkge1xuICAgICAgICBlbnYgPSBcImJyb3dzZXJcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNOb2RlKCkpIHtcbiAgICAgICAgZW52ID0gXCJub2RlXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzV2ViV29ya2VyKCkpIHtcbiAgICAgICAgZW52ID0gXCJ3ZWJ3b3JrZXJcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNKc0RvbSgpKSB7XG4gICAgICAgIGVudiA9IFwianNkb21cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNEZW5vKCkpIHtcbiAgICAgICAgZW52ID0gXCJkZW5vXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbnYgPSBcIm90aGVyXCI7XG4gICAgfVxuICAgIHJldHVybiBlbnY7XG59O1xubGV0IHJ1bnRpbWVFbnZpcm9ubWVudDtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSdW50aW1lRW52aXJvbm1lbnQoKSB7XG4gICAgaWYgKHJ1bnRpbWVFbnZpcm9ubWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGVudiA9IGdldEVudigpO1xuICAgICAgICBydW50aW1lRW52aXJvbm1lbnQgPSB7XG4gICAgICAgICAgICBsaWJyYXJ5OiBcImxhbmdjaGFpbi1qc1wiLFxuICAgICAgICAgICAgcnVudGltZTogZW52LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcnVudGltZUVudmlyb25tZW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVudmlyb25tZW50VmFyaWFibGUobmFtZSkge1xuICAgIC8vIENlcnRhaW4gRGVubyBzZXR1cHMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB5b3UgdHJ5IHRvIGFjY2VzcyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbGFuZ2NoYWluLWFpL2xhbmdjaGFpbmpzL2lzc3Vlcy8xNDEyXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm9jZXNzLWVudlxuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Py5bbmFtZV1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJpc0Jyb3dzZXIiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImlzV2ViV29ya2VyIiwiZ2xvYmFsVGhpcyIsImNvbnN0cnVjdG9yIiwibmFtZSIsImlzSnNEb20iLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbmNsdWRlcyIsImlzRGVubyIsIkRlbm8iLCJpc05vZGUiLCJwcm9jZXNzIiwidmVyc2lvbnMiLCJub2RlIiwiZ2V0RW52IiwiZW52IiwicnVudGltZUVudmlyb25tZW50IiwiZ2V0UnVudGltZUVudmlyb25tZW50IiwidW5kZWZpbmVkIiwibGlicmFyeSIsInJ1bnRpbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThCO0FBQ0U7QUFDc0c7QUFDdEk7O0NBRUMsR0FDcUM7QUFDZ0c7QUFDdEksaUVBQWU7SUFDWCxHQUFHTSx5Q0FBSTtJQUNQLGFBQWE7SUFDYkwsY0FBY0EseURBQUFBO0lBQ2RFLFNBQVNBLHlEQUFBQTtJQUNUQyxtQkFBbUJBLGtFQUFBQTtJQUNuQkMscUJBQXFCQSxvRUFBQUE7QUFDekIsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9pbmRleC5qcz9lZDZhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL3NyYy9jb3JlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zcmMvZHVwbGV4LmpzXCI7XG5leHBvcnQgeyBQYXRjaEVycm9yIGFzIEpzb25QYXRjaEVycm9yLCBfZGVlcENsb25lIGFzIGRlZXBDbG9uZSwgZXNjYXBlUGF0aENvbXBvbmVudCwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCB9IGZyb20gXCIuL3NyYy9oZWxwZXJzLmpzXCI7XG4vKipcbiAqIERlZmF1bHQgZXhwb3J0IGZvciBiYWNrd2FyZHMgY29tcGF0XG4gKi9cbmltcG9ydCAqIGFzIGNvcmUgZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmltcG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAuLi5jb3JlLFxuICAgIC8vIC4uLmR1cGxleCxcbiAgICBKc29uUGF0Y2hFcnJvcixcbiAgICBkZWVwQ2xvbmUsXG4gICAgZXNjYXBlUGF0aENvbXBvbmVudCxcbiAgICB1bmVzY2FwZVBhdGhDb21wb25lbnQsXG59O1xuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJKc29uUGF0Y2hFcnJvciIsIl9kZWVwQ2xvbmUiLCJkZWVwQ2xvbmUiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiY29yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvY29yZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsY0FBYztBQUN5RjtBQUNoRyxNQUFNSyxpQkFBaUJMLG1EQUFVQSxDQUFDO0FBQ2xDLE1BQU1NLFlBQVlMLG1EQUFVQSxDQUFDO0FBQ3BDOzs7OztDQUtDLEdBQ0QsMENBQTBDLEdBQzFDLE1BQU1NLFNBQVM7SUFDWEMsS0FBSyxTQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsUUFBUTtRQUM3QkYsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7UUFBUztJQUNuQztJQUNBRyxRQUFRLFNBQVVMLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2hDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QixPQUFPRCxHQUFHLENBQUNDLElBQUk7UUFDZixPQUFPO1lBQUVHLGFBQWFGO1lBQVVJO1FBQVE7SUFDNUM7SUFDQUMsU0FBUyxTQUFVUCxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsUUFBUTtRQUNqQyxJQUFJSSxVQUFVTixHQUFHLENBQUNDLElBQUk7UUFDdEJELEdBQUcsQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQ0UsS0FBSztRQUNyQixPQUFPO1lBQUVDLGFBQWFGO1lBQVVJO1FBQVE7SUFDNUM7SUFDQUUsTUFBTSxTQUFVUixHQUFHLEVBQUVDLEdBQUcsRUFBRUMsUUFBUTtRQUM5Qjs7b0NBRTRCLEdBQzVCLElBQUlJLFVBQVVHLGtCQUFrQlAsVUFBVSxJQUFJLENBQUNRLElBQUk7UUFDbkQsSUFBSUosU0FBUztZQUNUQSxVQUFVZCx1REFBVUEsQ0FBQ2M7UUFDekI7UUFDQSxNQUFNSyxnQkFBZ0JDLGVBQWVWLFVBQVU7WUFDM0NX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TUFBTUEsS0FBS0MsTUFBTUE7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzPzY5NWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IFBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUsIGlzSW50ZWdlciwgdW5lc2NhcGVQYXRoQ29tcG9uZW50LCBoYXNVbmRlZmluZWQsIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuZXhwb3J0IGNvbnN0IEpzb25QYXRjaEVycm9yID0gUGF0Y2hFcnJvcjtcbmV4cG9ydCBjb25zdCBkZWVwQ2xvbmUgPSBfZGVlcENsb25lO1xuLyogV2UgdXNlIGEgSmF2YXNjcmlwdCBoYXNoIHRvIHN0b3JlIGVhY2hcbiBmdW5jdGlvbi4gRWFjaCBoYXNoIGVudHJ5IChwcm9wZXJ0eSkgdXNlc1xuIHRoZSBvcGVyYXRpb24gaWRlbnRpZmllcnMgc3BlY2lmaWVkIGluIHJmYzY5MDIuXG4gSW4gdGhpcyB3YXksIHdlIGNhbiBtYXAgZWFjaCBwYXRjaCBvcGVyYXRpb25cbiB0byBpdHMgZGVkaWNhdGVkIGZ1bmN0aW9uIGluIGVmZmljaWVudCB3YXkuXG4gKi9cbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gb2JqZWN0ICovXG5jb25zdCBvYmpPcHMgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIG9ialtrZXldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcbiAgICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdmFyIHJlbW92ZWQgPSBvYmpba2V5XTtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgLyogaW4gY2FzZSBtb3ZlIHRhcmdldCBvdmVyd3JpdGVzIGFuIGV4aXN0aW5nIHZhbHVlLFxuICAgICAgICByZXR1cm4gdGhlIHJlbW92ZWQgdmFsdWUsIHRoaXMgY2FuIGJlIHRheGluZyBwZXJmb3JtYW5jZS13aXNlLFxuICAgICAgICBhbmQgaXMgcG90ZW50aWFsbHkgdW5uZWVkZWQgKi9cbiAgICAgICAgbGV0IHJlbW92ZWQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5wYXRoKTtcbiAgICAgICAgaWYgKHJlbW92ZWQpIHtcbiAgICAgICAgICAgIHJlbW92ZWQgPSBfZGVlcENsb25lKHJlbW92ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVmFsdWUgPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwge1xuICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICBwYXRoOiB0aGlzLmZyb20sXG4gICAgICAgIH0pLnJlbW92ZWQ7XG4gICAgICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgICAgICAgIHZhbHVlOiBvcmlnaW5hbFZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBjb3B5OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlVG9Db3B5ID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHRoaXMuZnJvbSk7XG4gICAgICAgIC8vIGVuZm9yY2UgY29weSBieSB2YWx1ZSBzbyBmdXJ0aGVyIG9wZXJhdGlvbnMgZG9uJ3QgYWZmZWN0IHNvdXJjZSAoc2VlIGlzc3VlICMxNzcpXG4gICAgICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKHZhbHVlVG9Db3B5KSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgIH0sXG4gICAgdGVzdDogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHRlc3Q6IF9hcmVFcXVhbHMob2JqW2tleV0sIHRoaXMudmFsdWUpIH07XG4gICAgfSxcbiAgICBfZ2V0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbn07XG4vKiBUaGUgb3BlcmF0aW9ucyBhcHBsaWNhYmxlIHRvIGFuIGFycmF5LiBNYW55IGFyZSB0aGUgc2FtZSBhcyBmb3IgdGhlIG9iamVjdCAqL1xudmFyIGFyck9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChpc0ludGVnZXIoaSkpIHtcbiAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMCwgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBhcnJheSBwcm9wc1xuICAgICAgICAgICAgYXJyW2ldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIG1heSBiZSBuZWVkZWQgd2hlbiB1c2luZyAnLScgaW4gYW4gYXJyYXlcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCBpbmRleDogaSB9O1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZExpc3QgPSBhcnIuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQ6IHJlbW92ZWRMaXN0WzBdIH07XG4gICAgfSxcbiAgICByZXBsYWNlOiBmdW5jdGlvbiAoYXJyLCBpLCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IGFycltpXTtcbiAgICAgICAgYXJyW2ldID0gdGhpcy52YWx1ZTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50LCByZW1vdmVkIH07XG4gICAgfSxcbiAgICBtb3ZlOiBvYmpPcHMubW92ZSxcbiAgICBjb3B5OiBvYmpPcHMuY29weSxcbiAgICB0ZXN0OiBvYmpPcHMudGVzdCxcbiAgICBfZ2V0OiBvYmpPcHMuX2dldCxcbn07XG4vKipcbiAqIFJldHJpZXZlcyBhIHZhbHVlIGZyb20gYSBKU09OIGRvY3VtZW50IGJ5IGEgSlNPTiBwb2ludGVyLlxuICogUmV0dXJucyB0aGUgdmFsdWUuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBnZXQgdGhlIHZhbHVlIGZyb21cbiAqIEBwYXJhbSBwb2ludGVyIGFuIGVzY2FwZWQgSlNPTiBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSByZXRyaWV2ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCBwb2ludGVyKSB7XG4gICAgaWYgKHBvaW50ZXIgPT0gXCJcIikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQ7XG4gICAgfVxuICAgIHZhciBnZXRPcmlnaW5hbERlc3RpbmF0aW9uID0geyBvcDogXCJfZ2V0XCIsIHBhdGg6IHBvaW50ZXIgfTtcbiAgICBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGdldE9yaWdpbmFsRGVzdGluYXRpb24udmFsdWU7XG59XG4vKipcbiAqIEFwcGx5IGEgc2luZ2xlIEpTT04gUGF0Y2ggT3BlcmF0aW9uIG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgb3BlcmF0aW9uLlxuICogSXQgbW9kaWZpZXMgdGhlIGBkb2N1bWVudGAgYW5kIGBvcGVyYXRpb25gIG9iamVjdHMgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBqc29ucGF0Y2guX2RlZXBDbG9uZShvcGVyYXRpb24pKWAuXG4gKlxuICogQHBhcmFtIGRvY3VtZW50IFRoZSBkb2N1bWVudCB0byBwYXRjaFxuICogQHBhcmFtIG9wZXJhdGlvbiBUaGUgb3BlcmF0aW9uIHRvIGFwcGx5XG4gKiBAcGFyYW0gdmFsaWRhdGVPcGVyYXRpb24gYGZhbHNlYCBpcyB3aXRob3V0IHZhbGlkYXRpb24sIGB0cnVlYCB0byB1c2UgZGVmYXVsdCBqc29ucGF0Y2gncyB2YWxpZGF0aW9uLCBvciB5b3UgY2FuIHBhc3MgYSBgdmFsaWRhdGVPcGVyYXRpb25gIGNhbGxiYWNrIHRvIGJlIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0gbXV0YXRlRG9jdW1lbnQgV2hldGhlciB0byBtdXRhdGUgdGhlIG9yaWdpbmFsIGRvY3VtZW50IG9yIGNsb25lIGl0IGJlZm9yZSBhcHBseWluZ1xuICogQHBhcmFtIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgV2hldGhlciB0byBiYW4gbW9kaWZpY2F0aW9ucyB0byBgX19wcm90b19fYCwgZGVmYXVsdHMgdG8gYHRydWVgLlxuICogQHJldHVybiBge25ld0RvY3VtZW50LCByZXN1bHR9YCBhZnRlciB0aGUgb3BlcmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgb3BlcmF0aW9uLCB2YWxpZGF0ZU9wZXJhdGlvbiA9IGZhbHNlLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlLCBpbmRleCA9IDApIHtcbiAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZU9wZXJhdGlvbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlT3BlcmF0aW9uKG9wZXJhdGlvbiwgMCwgZG9jdW1lbnQsIG9wZXJhdGlvbi5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRvcihvcGVyYXRpb24sIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qIFJPT1QgT1BFUkFUSU9OUyAqL1xuICAgIGlmIChvcGVyYXRpb24ucGF0aCA9PT0gXCJcIikge1xuICAgICAgICBsZXQgcmV0dXJuVmFsdWUgPSB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCB9O1xuICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09PSBcImFkZFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG9wZXJhdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IG9wZXJhdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDsgLy9kb2N1bWVudCB3ZSByZW1vdmVkXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIiB8fCBvcGVyYXRpb24ub3AgPT09IFwiY29weVwiKSB7XG4gICAgICAgICAgICAvLyBpdCdzIGEgbW92ZSBvciBjb3B5IHRvIHJvb3RcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIG9wZXJhdGlvbi5mcm9tKTsgLy8gZ2V0IHRoZSB2YWx1ZSBieSBqc29uLXBvaW50ZXIgaW4gYGZyb21gIGZpZWxkXG4gICAgICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09PSBcIm1vdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIHJlcG9ydCByZW1vdmVkIGl0ZW1cbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS5yZW1vdmVkID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikge1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUudGVzdCA9IF9hcmVFcXVhbHMoZG9jdW1lbnQsIG9wZXJhdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgICAgICAgIC8vIGEgcmVtb3ZlIG9uIHJvb3RcbiAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwiX2dldFwiKSB7XG4gICAgICAgICAgICBvcGVyYXRpb24udmFsdWUgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIGJhZCBvcGVyYXRpb24gKi9cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgb3BgIHByb3BlcnR5IGlzIG5vdCBvbmUgb2Ygb3BlcmF0aW9ucyBkZWZpbmVkIGluIFJGQy02OTAyXCIsIFwiT1BFUkFUSU9OX09QX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSAvKiBFTkQgUk9PVCBPUEVSQVRJT05TICovXG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghbXV0YXRlRG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50ID0gX2RlZXBDbG9uZShkb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aCA9IG9wZXJhdGlvbi5wYXRoIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IGtleXMgPSBwYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbGV0IG9iaiA9IGRvY3VtZW50O1xuICAgICAgICBsZXQgdCA9IDE7IC8vc2tpcCBlbXB0eSBlbGVtZW50IC0gaHR0cDovL2pzcGVyZi5jb20vdG8tc2hpZnQtb3Itbm90LXRvLXNoaWZ0XG4gICAgICAgIGxldCBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgbGV0IGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQga2V5O1xuICAgICAgICBsZXQgdmFsaWRhdGVGdW5jdGlvbjtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWxpZGF0ZU9wZXJhdGlvbiA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0ZU9wZXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24gPSB2YWxpZGF0b3I7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGtleSA9IGtleXNbdF07XG4gICAgICAgICAgICBpZiAoa2V5ICYmIGtleS5pbmRleE9mKFwiflwiKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHVuZXNjYXBlUGF0aENvbXBvbmVudChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgJiZcbiAgICAgICAgICAgICAgICAoa2V5ID09IFwiX19wcm90b19fXCIgfHxcbiAgICAgICAgICAgICAgICAgICAgKGtleSA9PSBcInByb3RvdHlwZVwiICYmIHQgPiAwICYmIGtleXNbdCAtIDFdID09IFwiY29uc3RydWN0b3JcIikpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkpTT04tUGF0Y2g6IG1vZGlmeWluZyBgX19wcm90b19fYCBvciBgY29uc3RydWN0b3IvcHJvdG90eXBlYCBwcm9wIGlzIGJhbm5lZCBmb3Igc2VjdXJpdHkgcmVhc29ucywgaWYgdGhpcyB3YXMgb24gcHVycG9zZSwgcGxlYXNlIHNldCBgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9uc2AgZmxhZyBmYWxzZSBhbmQgcGFzcyBpdCB0byB0aGlzIGZ1bmN0aW9uLiBNb3JlIGluZm8gaW4gZmFzdC1qc29uLXBhdGNoIFJFQURNRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhdGhGcmFnbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1BhdGhGcmFnbWVudCA9IGtleXMuc2xpY2UoMCwgdCkuam9pbihcIi9cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSBsZW4gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1BhdGhGcmFnbWVudCA9IG9wZXJhdGlvbi5wYXRoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ1BhdGhGcmFnbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUZ1bmN0aW9uKG9wZXJhdGlvbiwgMCwgZG9jdW1lbnQsIGV4aXN0aW5nUGF0aEZyYWdtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBvYmoubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmICFpc0ludGVnZXIoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiRXhwZWN0ZWQgYW4gdW5zaWduZWQgYmFzZS0xMCBpbnRlZ2VyIHZhbHVlLCBtYWtpbmcgdGhlIG5ldyByZWZlcmVuY2VkIHZhbHVlIHRoZSBhcnJheSBlbGVtZW50IHdpdGggdGhlIHplcm8tYmFzZWQgaW5kZXhcIiwgXCJPUEVSQVRJT05fUEFUSF9JTExFR0FMX0FSUkFZX0lOREVYXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBvbmx5IHBhcnNlIGtleSB3aGVuIGl0J3MgYW4gaW50ZWdlciBmb3IgYGFyci5wcm9wYCB0byB3b3JrXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB+fmtleTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodCA+PSBsZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiAmJiBrZXkgPiBvYmoubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUaGUgc3BlY2lmaWVkIGluZGV4IE1VU1QgTk9UIGJlIGdyZWF0ZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIHRoZSBhcnJheVwiLCBcIk9QRVJBVElPTl9WQUxVRV9PVVRfT0ZfQk9VTkRTXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IGFyck9wc1tvcGVyYXRpb24ub3BdLmNhbGwob3BlcmF0aW9uLCBvYmosIGtleSwgZG9jdW1lbnQpOyAvLyBBcHBseSBwYXRjaFxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IG9iak9wc1tvcGVyYXRpb24ub3BdLmNhbGwob3BlcmF0aW9uLCBvYmosIGtleSwgZG9jdW1lbnQpOyAvLyBBcHBseSBwYXRjaFxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuVmFsdWUudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBtb3JlIGtleXMgaW4gdGhlIHBhdGgsIGJ1dCB0aGUgbmV4dCB2YWx1ZSBpc24ndCBhIG5vbi1udWxsIG9iamVjdCxcbiAgICAgICAgICAgIC8vIHRocm93IGFuIE9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRSBlcnJvciBpbnN0ZWFkIG9mIGl0ZXJhdGluZyBhZ2Fpbi5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbiAmJiB0IDwgbGVuICYmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gb3BlcmF0aW9uIGF0IHRoZSBkZXNpcmVkIHBhdGhcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSBhIGZ1bGwgSlNPTiBQYXRjaCBhcnJheSBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB7bmV3RG9jdW1lbnQsIHJlc3VsdH0gb2YgdGhlIHBhdGNoLlxuICogSXQgbW9kaWZpZXMgdGhlIGBkb2N1bWVudGAgb2JqZWN0IGFuZCBgcGF0Y2hgIC0gaXQgZ2V0cyB0aGUgdmFsdWVzIGJ5IHJlZmVyZW5jZS5cbiAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGF2b2lkIHRvdWNoaW5nIHlvdXIgdmFsdWVzLCBjbG9uZSB0aGVtOlxuICogYGpzb25wYXRjaC5hcHBseVBhdGNoKGRvY3VtZW50LCBqc29ucGF0Y2guX2RlZXBDbG9uZShwYXRjaCkpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gcGF0Y2ggVGhlIHBhdGNoIHRvIGFwcGx5XG4gKiBAcGFyYW0gdmFsaWRhdGVPcGVyYXRpb24gYGZhbHNlYCBpcyB3aXRob3V0IHZhbGlkYXRpb24sIGB0cnVlYCB0byB1c2UgZGVmYXVsdCBqc29ucGF0Y2gncyB2YWxpZGF0aW9uLCBvciB5b3UgY2FuIHBhc3MgYSBgdmFsaWRhdGVPcGVyYXRpb25gIGNhbGxiYWNrIHRvIGJlIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0gbXV0YXRlRG9jdW1lbnQgV2hldGhlciB0byBtdXRhdGUgdGhlIG9yaWdpbmFsIGRvY3VtZW50IG9yIGNsb25lIGl0IGJlZm9yZSBhcHBseWluZ1xuICogQHBhcmFtIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgV2hldGhlciB0byBiYW4gbW9kaWZpY2F0aW9ucyB0byBgX19wcm90b19fYCwgZGVmYXVsdHMgdG8gYHRydWVgLlxuICogQHJldHVybiBBbiBhcnJheSBvZiBge25ld0RvY3VtZW50LCByZXN1bHR9YCBhZnRlciB0aGUgcGF0Y2hcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2goZG9jdW1lbnQsIHBhdGNoLCB2YWxpZGF0ZU9wZXJhdGlvbiwgbXV0YXRlRG9jdW1lbnQgPSB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zID0gdHJ1ZSkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGF0Y2gpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJQYXRjaCBzZXF1ZW5jZSBtdXN0IGJlIGFuIGFycmF5XCIsIFwiU0VRVUVOQ0VfTk9UX0FOX0FSUkFZXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghbXV0YXRlRG9jdW1lbnQpIHtcbiAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheShwYXRjaC5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBwYXRjaC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbXV0YXRlRG9jdW1lbnQgYXJndW1lbnQgYmVjYXVzZSBpZiBpdCB3YXMgdHJ1ZSwgd2UgYWxyZWFkeSBkZWVwIGNsb25lZCB0aGUgb2JqZWN0LCB3ZSdsbCBqdXN0IHBhc3MgYHRydWVgXG4gICAgICAgIHJlc3VsdHNbaV0gPSBhcHBseU9wZXJhdGlvbihkb2N1bWVudCwgcGF0Y2hbaV0sIHZhbGlkYXRlT3BlcmF0aW9uLCB0cnVlLCBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zLCBpKTtcbiAgICAgICAgZG9jdW1lbnQgPSByZXN1bHRzW2ldLm5ld0RvY3VtZW50OyAvLyBpbiBjYXNlIHJvb3Qgd2FzIHJlcGxhY2VkXG4gICAgfVxuICAgIHJlc3VsdHMubmV3RG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBkb2N1bWVudC5cbiAqIFN1aXRhYmxlIGFzIGEgcmVkdWNlci5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEByZXR1cm4gVGhlIHVwZGF0ZWQgZG9jdW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UmVkdWNlcihkb2N1bWVudCwgb3BlcmF0aW9uLCBpbmRleCkge1xuICAgIGNvbnN0IG9wZXJhdGlvblJlc3VsdCA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24pO1xuICAgIGlmIChvcGVyYXRpb25SZXN1bHQudGVzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gZmFpbGVkIHRlc3RcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG9wZXJhdGlvblJlc3VsdC5uZXdEb2N1bWVudDtcbn1cbi8qKlxuICogVmFsaWRhdGVzIGEgc2luZ2xlIG9wZXJhdGlvbi4gQ2FsbGVkIGZyb20gYGpzb25wYXRjaC52YWxpZGF0ZWAuIFRocm93cyBgSnNvblBhdGNoRXJyb3JgIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gKiBAcGFyYW0ge29iamVjdH0gb3BlcmF0aW9uIC0gb3BlcmF0aW9uIG9iamVjdCAocGF0Y2gpXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBpbmRleCBvZiBvcGVyYXRpb24gaW4gdGhlIHNlcXVlbmNlXG4gKiBAcGFyYW0ge29iamVjdH0gW2RvY3VtZW50XSAtIG9iamVjdCB3aGVyZSB0aGUgb3BlcmF0aW9uIGlzIHN1cHBvc2VkIHRvIGJlIGFwcGxpZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbZXhpc3RpbmdQYXRoRnJhZ21lbnRdIC0gY29tZXMgYWxvbmcgd2l0aCBgZG9jdW1lbnRgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0b3Iob3BlcmF0aW9uLCBpbmRleCwgZG9jdW1lbnQsIGV4aXN0aW5nUGF0aEZyYWdtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBvcGVyYXRpb24gIT09IFwib2JqZWN0XCIgfHxcbiAgICAgICAgb3BlcmF0aW9uID09PSBudWxsIHx8XG4gICAgICAgIEFycmF5LmlzQXJyYXkob3BlcmF0aW9uKSkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gaXMgbm90IGFuIG9iamVjdFwiLCBcIk9QRVJBVElPTl9OT1RfQU5fT0JKRUNUXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIW9iak9wc1tvcGVyYXRpb24ub3BdKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgb3BgIHByb3BlcnR5IGlzIG5vdCBvbmUgb2Ygb3BlcmF0aW9ucyBkZWZpbmVkIGluIFJGQy02OTAyXCIsIFwiT1BFUkFUSU9OX09QX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygb3BlcmF0aW9uLnBhdGggIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBwYXRoYCBwcm9wZXJ0eSBpcyBub3QgYSBzdHJpbmdcIiwgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3BlcmF0aW9uLnBhdGguaW5kZXhPZihcIi9cIikgIT09IDAgJiYgb3BlcmF0aW9uLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBwYXRocyB0aGF0IGFyZW4ndCBlbXB0eSBzdHJpbmcgc2hvdWxkIHN0YXJ0IHdpdGggXCIvXCJcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKCdPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IG11c3Qgc3RhcnQgd2l0aCBcIi9cIicsIFwiT1BFUkFUSU9OX1BBVEhfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpICYmXG4gICAgICAgIHR5cGVvZiBvcGVyYXRpb24uZnJvbSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYGZyb21gIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBtb3ZlYCBhbmQgYGNvcHlgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX0ZST01fUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgb3BlcmF0aW9uLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX1JFUVVJUkVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJhZGRcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJ0ZXN0XCIpICYmXG4gICAgICAgIGhhc1VuZGVmaW5lZChvcGVyYXRpb24udmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgdmFsdWVgIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IChhcHBsaWNhYmxlIGluIGBhZGRgLCBgcmVwbGFjZWAgYW5kIGB0ZXN0YCBvcGVyYXRpb25zKVwiLCBcIk9QRVJBVElPTl9WQUxVRV9DQU5OT1RfQ09OVEFJTl9VTkRFRklORURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChkb2N1bWVudCkge1xuICAgICAgICBpZiAob3BlcmF0aW9uLm9wID09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHZhciBwYXRoTGVuID0gb3BlcmF0aW9uLnBhdGguc3BsaXQoXCIvXCIpLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1BhdGhMZW4gPSBleGlzdGluZ1BhdGhGcmFnbWVudC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKHBhdGhMZW4gIT09IGV4aXN0aW5nUGF0aExlbiArIDEgJiYgcGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiQ2Fubm90IHBlcmZvcm0gYW4gYGFkZGAgb3BlcmF0aW9uIGF0IHRoZSBkZXNpcmVkIHBhdGhcIiwgXCJPUEVSQVRJT05fUEFUSF9DQU5OT1RfQUREXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwicmVwbGFjZVwiIHx8XG4gICAgICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwicmVtb3ZlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ucGF0aCAhPT0gZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGF0IGEgcGF0aCB0aGF0IGRvZXMgbm90IGV4aXN0XCIsIFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHVlID0ge1xuICAgICAgICAgICAgICAgIG9wOiBcIl9nZXRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBvcGVyYXRpb24uZnJvbSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IHZhbGlkYXRlKFtleGlzdGluZ1ZhbHVlXSwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSB0aGUgb3BlcmF0aW9uIGZyb20gYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fRlJPTV9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzZXF1ZW5jZSBvZiBvcGVyYXRpb25zLiBJZiBgZG9jdW1lbnRgIHBhcmFtZXRlciBpcyBwcm92aWRlZCwgdGhlIHNlcXVlbmNlIGlzIGFkZGl0aW9uYWxseSB2YWxpZGF0ZWQgYWdhaW5zdCB0aGUgb2JqZWN0IGRvY3VtZW50LlxuICogSWYgZXJyb3IgaXMgZW5jb3VudGVyZWQsIHJldHVybnMgYSBKc29uUGF0Y2hFcnJvciBvYmplY3RcbiAqIEBwYXJhbSBzZXF1ZW5jZVxuICogQHBhcmFtIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7SnNvblBhdGNoRXJyb3J8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoc2VxdWVuY2UsIGRvY3VtZW50LCBleHRlcm5hbFZhbGlkYXRvcikge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzZXF1ZW5jZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgICAgICAvL2Nsb25lIGRvY3VtZW50IGFuZCBzZXF1ZW5jZSBzbyB0aGF0IHdlIGNhbiBzYWZlbHkgdHJ5IGFwcGx5aW5nIG9wZXJhdGlvbnNcbiAgICAgICAgICAgIGFwcGx5UGF0Y2goX2RlZXBDbG9uZShkb2N1bWVudCksIF9kZWVwQ2xvbmUoc2VxdWVuY2UpLCBleHRlcm5hbFZhbGlkYXRvciB8fCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVybmFsVmFsaWRhdG9yID0gZXh0ZXJuYWxWYWxpZGF0b3IgfHwgdmFsaWRhdG9yO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXF1ZW5jZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGV4dGVybmFsVmFsaWRhdG9yKHNlcXVlbmNlW2ldLCBpLCBkb2N1bWVudCwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEpzb25QYXRjaEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZXBvYmVyZXpraW4vZmFzdC1kZWVwLWVxdWFsXG4vLyBNSVQgTGljZW5zZVxuLy8gQ29weXJpZ2h0IChjKSAyMDE3IEV2Z2VueSBQb2JlcmV6a2luXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbi8vIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4vLyBTT0ZUV0FSRS5cbmV4cG9ydCBmdW5jdGlvbiBfYXJlRXF1YWxzKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBiID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgdmFyIGFyckEgPSBBcnJheS5pc0FycmF5KGEpLCBhcnJCID0gQXJyYXkuaXNBcnJheShiKSwgaSwgbGVuZ3RoLCBrZXk7XG4gICAgICAgIGlmIChhcnJBICYmIGFyckIpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICAgICAgaWYgKCFfYXJlRXF1YWxzKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJyQSAhPSBhcnJCKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICBpZiAoIWIuaGFzT3duUHJvcGVydHkoa2V5c1tpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtrZXldLCBiW2tleV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYjtcbn1cbiJdLCJuYW1lcyI6WyJQYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImlzSW50ZWdlciIsInVuZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc1VuZGVmaW5lZCIsIkpzb25QYXRjaEVycm9yIiwiZGVlcENsb25lIiwib2JqT3BzIiwiYWRkIiwib2JqIiwia2V5IiwiZG9jdW1lbnQiLCJ2YWx1ZSIsIm5ld0RvY3VtZW50IiwicmVtb3ZlIiwicmVtb3ZlZCIsInJlcGxhY2UiLCJtb3ZlIiwiZ2V0VmFsdWVCeVBvaW50ZXIiLCJwYXRoIiwib3JpZ2luYWxWYWx1ZSIsImFwcGx5T3BlcmF0aW9uIiwib3AiLCJmcm9tIiwiY29weSIsInZhbHVlVG9Db3B5IiwidGVzdCIsIl9hcmVFcXVhbHMiLCJfZ2V0IiwiYXJyT3BzIiwiYXJyIiwiaSIsInNwbGljZSIsImluZGV4IiwicmVtb3ZlZExpc3QiLCJwb2ludGVyIiwiZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbiIsIm9wZXJhdGlvbiIsInZhbGlkYXRlT3BlcmF0aW9uIiwibXV0YXRlRG9jdW1lbnQiLCJiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zIiwidmFsaWRhdG9yIiwicmV0dXJuVmFsdWUiLCJrZXlzIiwic3BsaXQiLCJ0IiwibGVuIiwibGVuZ3RoIiwiZXhpc3RpbmdQYXRoRnJhZ21lbnQiLCJ1bmRlZmluZWQiLCJ2YWxpZGF0ZUZ1bmN0aW9uIiwiaW5kZXhPZiIsIlR5cGVFcnJvciIsInNsaWNlIiwiam9pbiIsIkFycmF5IiwiaXNBcnJheSIsImNhbGwiLCJhcHBseVBhdGNoIiwicGF0Y2giLCJyZXN1bHRzIiwiYXBwbHlSZWR1Y2VyIiwib3BlcmF0aW9uUmVzdWx0IiwicGF0aExlbiIsImV4aXN0aW5nUGF0aExlbiIsImV4aXN0aW5nVmFsdWUiLCJlcnJvciIsInZhbGlkYXRlIiwibmFtZSIsInNlcXVlbmNlIiwiZXh0ZXJuYWxWYWxpZGF0b3IiLCJlIiwiYSIsImIiLCJhcnJBIiwiYXJyQiIsIk9iamVjdCIsImhhc093blByb3BlcnR5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvZHVwbGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLGNBQWM7QUFDZCx1Q0FBdUM7QUFDdkM7Ozs7Q0FJQyxHQUM0RjtBQUN0RDtBQUN2QyxJQUFJSyxhQUFhLElBQUlDO0FBQ3JCLE1BQU1DO0lBQ0ZDLFlBQVlDLEdBQUcsQ0FBRTtRQUNiQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE9BQU87WUFDL0JDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sSUFBSUM7UUFDZjtRQUNBTixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ04sR0FBRyxHQUFHQTtJQUNmO0FBQ0o7QUFDQSxNQUFNUTtJQUNGVCxZQUFZVSxRQUFRLEVBQUVDLFFBQVEsQ0FBRTtRQUM1QlQsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNHLFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDQyxRQUFRLEdBQUdBO0lBQ3BCO0FBQ0o7QUFDQSxTQUFTQyxVQUFVWCxHQUFHO0lBQ2xCLE9BQU9KLFdBQVdnQixHQUFHLENBQUNaO0FBQzFCO0FBQ0EsU0FBU2Esc0JBQXNCQyxNQUFNLEVBQUVMLFFBQVE7SUFDM0MsT0FBT0ssT0FBT0MsU0FBUyxDQUFDSCxHQUFHLENBQUNIO0FBQ2hDO0FBQ0EsU0FBU08seUJBQXlCRixNQUFNLEVBQUVKLFFBQVE7SUFDOUNJLE9BQU9DLFNBQVMsQ0FBQ0UsTUFBTSxDQUFDUCxTQUFTRCxRQUFRO0FBQzdDO0FBQ0E7O0NBRUMsR0FDTSxTQUFTUyxVQUFVQyxJQUFJLEVBQUVULFFBQVE7SUFDcENBLFNBQVNRLFNBQVM7QUFDdEI7QUFDQTs7Q0FFQyxHQUNNLFNBQVNFLFFBQVFwQixHQUFHLEVBQUVTLFFBQVE7SUFDakMsSUFBSVksVUFBVSxFQUFFO0lBQ2hCLElBQUlYO0lBQ0osSUFBSUksU0FBU0gsVUFBVVg7SUFDdkIsSUFBSSxDQUFDYyxRQUFRO1FBQ1RBLFNBQVMsSUFBSWhCLE9BQU9FO1FBQ3BCSixXQUFXMEIsR0FBRyxDQUFDdEIsS0FBS2M7SUFDeEIsT0FDSztRQUNELE1BQU1TLGVBQWVWLHNCQUFzQkMsUUFBUUw7UUFDbkRDLFdBQVdhLGdCQUFnQkEsYUFBYWIsUUFBUTtJQUNwRDtJQUNBLElBQUlBLFVBQVU7UUFDVixPQUFPQTtJQUNYO0lBQ0FBLFdBQVcsQ0FBQztJQUNaSSxPQUFPUixLQUFLLEdBQUdmLHVEQUFVQSxDQUFDUztJQUMxQixJQUFJUyxVQUFVO1FBQ1ZDLFNBQVNELFFBQVEsR0FBR0E7UUFDcEJDLFNBQVNjLElBQUksR0FBRztRQUNoQixJQUFJQyxhQUFhO1lBQ2JDLFNBQVNoQjtRQUNiO1FBQ0EsSUFBSWlCLFlBQVk7WUFDWkMsYUFBYWxCLFNBQVNjLElBQUk7WUFDMUJkLFNBQVNjLElBQUksR0FBR0ssV0FBV0o7UUFDL0I7UUFDQSxJQUFJLEtBQTZCLEVBQUUsRUFPbEM7SUFDTDtJQUNBZixTQUFTVyxPQUFPLEdBQUdBO0lBQ25CWCxTQUFTc0IsTUFBTSxHQUFHaEM7SUFDbEJVLFNBQVNRLFNBQVMsR0FBRztRQUNqQlEsU0FBU2hCO1FBQ1RrQixhQUFhbEIsU0FBU2MsSUFBSTtRQUMxQlIseUJBQXlCRixRQUFRSjtRQUNqQyxJQUFJLEtBQTZCLEVBQUUsRUFNbEM7SUFDTDtJQUNBSSxPQUFPQyxTQUFTLENBQUNPLEdBQUcsQ0FBQ2IsVUFBVSxJQUFJRCxhQUFhQyxVQUFVQztJQUMxRCxPQUFPQTtBQUNYO0FBQ0E7O0NBRUMsR0FDTSxTQUFTZ0IsU0FBU2hCLFFBQVEsRUFBRXdCLGFBQWEsS0FBSztJQUNqRCxJQUFJcEIsU0FBU2xCLFdBQVdnQixHQUFHLENBQUNGLFNBQVNzQixNQUFNO0lBQzNDRyxVQUFVckIsT0FBT1IsS0FBSyxFQUFFSSxTQUFTc0IsTUFBTSxFQUFFdEIsU0FBU1csT0FBTyxFQUFFLElBQUlhO0lBQy9ELElBQUl4QixTQUFTVyxPQUFPLENBQUNlLE1BQU0sRUFBRTtRQUN6QnpDLG9EQUFVQSxDQUFDbUIsT0FBT1IsS0FBSyxFQUFFSSxTQUFTVyxPQUFPO0lBQzdDO0lBQ0EsSUFBSWdCLE9BQU8zQixTQUFTVyxPQUFPO0lBQzNCLElBQUlnQixLQUFLRCxNQUFNLEdBQUcsR0FBRztRQUNqQjFCLFNBQVNXLE9BQU8sR0FBRyxFQUFFO1FBQ3JCLElBQUlYLFNBQVNELFFBQVEsRUFBRTtZQUNuQkMsU0FBU0QsUUFBUSxDQUFDNEI7UUFDdEI7SUFDSjtJQUNBLE9BQU9BO0FBQ1g7QUFDQSxrRkFBa0Y7QUFDbEYsU0FBU0YsVUFBVXJCLE1BQU0sRUFBRWQsR0FBRyxFQUFFcUIsT0FBTyxFQUFFaUIsSUFBSSxFQUFFSixVQUFVO0lBQ3JELElBQUlsQyxRQUFRYyxRQUFRO1FBQ2hCO0lBQ0o7SUFDQSxJQUFJLE9BQU9kLElBQUl1QyxNQUFNLEtBQUssWUFBWTtRQUNsQ3ZDLE1BQU1BLElBQUl1QyxNQUFNO0lBQ3BCO0lBQ0EsSUFBSUMsVUFBVWhELHdEQUFXQSxDQUFDUTtJQUMxQixJQUFJeUMsVUFBVWpELHdEQUFXQSxDQUFDc0I7SUFDMUIsSUFBSTRCLFVBQVU7SUFDZCxJQUFJQyxVQUFVO0lBQ2QsOEhBQThIO0lBQzlILElBQUssSUFBSUMsSUFBSUgsUUFBUUwsTUFBTSxHQUFHLEdBQUdRLEtBQUssR0FBR0EsSUFBSztRQUMxQyxJQUFJQyxNQUFNSixPQUFPLENBQUNHLEVBQUU7UUFDcEIsSUFBSUUsU0FBU2hDLE1BQU0sQ0FBQytCLElBQUk7UUFDeEIsSUFBSW5ELDJEQUFjQSxDQUFDTSxLQUFLNkMsUUFDcEIsQ0FBRTdDLENBQUFBLEdBQUcsQ0FBQzZDLElBQUksS0FBS0UsYUFDWEQsV0FBV0MsYUFDWEMsTUFBTUMsT0FBTyxDQUFDakQsU0FBUyxLQUFJLEdBQUk7WUFDbkMsSUFBSWtELFNBQVNsRCxHQUFHLENBQUM2QyxJQUFJO1lBQ3JCLElBQUksT0FBT0MsVUFBVSxZQUNqQkEsVUFBVSxRQUNWLE9BQU9JLFVBQVUsWUFDakJBLFVBQVUsUUFDVkYsTUFBTUMsT0FBTyxDQUFDSCxZQUFZRSxNQUFNQyxPQUFPLENBQUNDLFNBQVM7Z0JBQ2pEZixVQUFVVyxRQUFRSSxRQUFRN0IsU0FBU2lCLE9BQU8sTUFBTTdDLGdFQUFtQkEsQ0FBQ29ELE1BQU1YO1lBQzlFLE9BQ0s7Z0JBQ0QsSUFBSVksV0FBV0ksUUFBUTtvQkFDbkJSLFVBQVU7b0JBQ1YsSUFBSVIsWUFBWTt3QkFDWmIsUUFBUThCLElBQUksQ0FBQzs0QkFDVEMsSUFBSTs0QkFDSmQsTUFBTUEsT0FBTyxNQUFNN0MsZ0VBQW1CQSxDQUFDb0Q7NEJBQ3ZDdkMsT0FBT2YsdURBQVVBLENBQUN1RDt3QkFDdEI7b0JBQ0o7b0JBQ0F6QixRQUFROEIsSUFBSSxDQUFDO3dCQUNUQyxJQUFJO3dCQUNKZCxNQUFNQSxPQUFPLE1BQU03QyxnRUFBbUJBLENBQUNvRDt3QkFDdkN2QyxPQUFPZix1REFBVUEsQ0FBQzJEO29CQUN0QjtnQkFDSjtZQUNKO1FBQ0osT0FDSyxJQUFJRixNQUFNQyxPQUFPLENBQUNuQyxZQUFZa0MsTUFBTUMsT0FBTyxDQUFDakQsTUFBTTtZQUNuRCxJQUFJa0MsWUFBWTtnQkFDWmIsUUFBUThCLElBQUksQ0FBQztvQkFDVEMsSUFBSTtvQkFDSmQsTUFBTUEsT0FBTyxNQUFNN0MsZ0VBQW1CQSxDQUFDb0Q7b0JBQ3ZDdkMsT0FBT2YsdURBQVVBLENBQUN1RDtnQkFDdEI7WUFDSjtZQUNBekIsUUFBUThCLElBQUksQ0FBQztnQkFDVEMsSUFBSTtnQkFDSmQsTUFBTUEsT0FBTyxNQUFNN0MsZ0VBQW1CQSxDQUFDb0Q7WUFDM0M7WUFDQUYsVUFBVSxNQUFNLDRCQUE0QjtRQUNoRCxPQUNLO1lBQ0QsSUFBSVQsWUFBWTtnQkFDWmIsUUFBUThCLElBQUksQ0FBQztvQkFBRUMsSUFBSTtvQkFBUWQ7b0JBQU1oQyxPQUFPUTtnQkFBTztZQUNuRDtZQUNBTyxRQUFROEIsSUFBSSxDQUFDO2dCQUFFQyxJQUFJO2dCQUFXZDtnQkFBTWhDLE9BQU9OO1lBQUk7WUFDL0MwQyxVQUFVO1FBQ2Q7SUFDSjtJQUNBLElBQUksQ0FBQ0MsV0FBV0gsUUFBUUosTUFBTSxJQUFJSyxRQUFRTCxNQUFNLEVBQUU7UUFDOUM7SUFDSjtJQUNBLElBQUssSUFBSVEsSUFBSSxHQUFHQSxJQUFJSixRQUFRSixNQUFNLEVBQUVRLElBQUs7UUFDckMsSUFBSUMsTUFBTUwsT0FBTyxDQUFDSSxFQUFFO1FBQ3BCLElBQUksQ0FBQ2xELDJEQUFjQSxDQUFDb0IsUUFBUStCLFFBQVE3QyxHQUFHLENBQUM2QyxJQUFJLEtBQUtFLFdBQVc7WUFDeEQxQixRQUFROEIsSUFBSSxDQUFDO2dCQUNUQyxJQUFJO2dCQUNKZCxNQUFNQSxPQUFPLE1BQU03QyxnRUFBbUJBLENBQUNvRDtnQkFDdkN2QyxPQUFPZix1REFBVUEsQ0FBQ1MsR0FBRyxDQUFDNkMsSUFBSTtZQUM5QjtRQUNKO0lBQ0o7QUFDSjtBQUNBOztDQUVDLEdBQ00sU0FBU1EsUUFBUUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVyQixhQUFhLEtBQUs7SUFDcEQsSUFBSWIsVUFBVSxFQUFFO0lBQ2hCYyxVQUFVbUIsT0FBT0MsT0FBT2xDLFNBQVMsSUFBSWE7SUFDckMsT0FBT2I7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qcz8zZTBkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIGJlY2F1c2Ugb2YgRVNNIGltcG9ydCBpc3N1ZXNcbi8qIVxuICogaHR0cHM6Ly9naXRodWIuY29tL1N0YXJjb3VudGVyLUphY2svSlNPTi1QYXRjaFxuICogKGMpIDIwMTMtMjAyMSBKb2FjaGltIFdlc3RlclxuICogTUlUIGxpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgX2RlZXBDbG9uZSwgX29iamVjdEtleXMsIGVzY2FwZVBhdGhDb21wb25lbnQsIGhhc093blByb3BlcnR5LCB9IGZyb20gXCIuL2hlbHBlcnMuanNcIjtcbmltcG9ydCB7IGFwcGx5UGF0Y2ggfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG52YXIgYmVmb3JlRGljdCA9IG5ldyBXZWFrTWFwKCk7XG5jbGFzcyBNaXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYmpcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgTWFwKClcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgIH1cbn1cbmNsYXNzIE9ic2VydmVySW5mbyB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIG9ic2VydmVyKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhbGxiYWNrXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ic2VydmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1pcnJvcihvYmopIHtcbiAgICByZXR1cm4gYmVmb3JlRGljdC5nZXQob2JqKTtcbn1cbmZ1bmN0aW9uIGdldE9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG1pcnJvci5vYnNlcnZlcnMuZ2V0KGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZU9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIG9ic2VydmVyKSB7XG4gICAgbWlycm9yLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIuY2FsbGJhY2spO1xufVxuLyoqXG4gKiBEZXRhY2ggYW4gb2JzZXJ2ZXIgZnJvbSBhbiBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVub2JzZXJ2ZShyb290LCBvYnNlcnZlcikge1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZSgpO1xufVxuLyoqXG4gKiBPYnNlcnZlcyBjaGFuZ2VzIG1hZGUgdG8gYW4gb2JqZWN0LCB3aGljaCBjYW4gdGhlbiBiZSByZXRyaWV2ZWQgdXNpbmcgZ2VuZXJhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmUob2JqLCBjYWxsYmFjaykge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgdmFyIG9ic2VydmVyO1xuICAgIHZhciBtaXJyb3IgPSBnZXRNaXJyb3Iob2JqKTtcbiAgICBpZiAoIW1pcnJvcikge1xuICAgICAgICBtaXJyb3IgPSBuZXcgTWlycm9yKG9iaik7XG4gICAgICAgIGJlZm9yZURpY3Quc2V0KG9iaiwgbWlycm9yKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVySW5mbyA9IGdldE9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIGNhbGxiYWNrKTtcbiAgICAgICAgb2JzZXJ2ZXIgPSBvYnNlcnZlckluZm8gJiYgb2JzZXJ2ZXJJbmZvLm9ic2VydmVyO1xuICAgIH1cbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH1cbiAgICBvYnNlcnZlciA9IHt9O1xuICAgIG1pcnJvci52YWx1ZSA9IF9kZWVwQ2xvbmUob2JqKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgb2JzZXJ2ZXIuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG51bGw7XG4gICAgICAgIHZhciBkaXJ0eUNoZWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZ2VuZXJhdGUob2JzZXJ2ZXIpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZmFzdENoZWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG9ic2VydmVyLm5leHQpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IHNldFRpbWVvdXQoZGlydHlDaGVjayk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAvL25vdCBOb2RlXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZhc3RDaGVjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IHBhdGNoZXM7XG4gICAgb2JzZXJ2ZXIub2JqZWN0ID0gb2JqO1xuICAgIG9ic2VydmVyLnVub2JzZXJ2ZSA9ICgpID0+IHtcbiAgICAgICAgZ2VuZXJhdGUob2JzZXJ2ZXIpO1xuICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgIHJlbW92ZU9ic2VydmVyRnJvbU1pcnJvcihtaXJyb3IsIG9ic2VydmVyKTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgbWlycm9yLm9ic2VydmVycy5zZXQoY2FsbGJhY2ssIG5ldyBPYnNlcnZlckluZm8oY2FsbGJhY2ssIG9ic2VydmVyKSk7XG4gICAgcmV0dXJuIG9ic2VydmVyO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhbiBhcnJheSBvZiBwYXRjaGVzIGZyb20gYW4gb2JzZXJ2ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlKG9ic2VydmVyLCBpbnZlcnRpYmxlID0gZmFsc2UpIHtcbiAgICB2YXIgbWlycm9yID0gYmVmb3JlRGljdC5nZXQob2JzZXJ2ZXIub2JqZWN0KTtcbiAgICBfZ2VuZXJhdGUobWlycm9yLnZhbHVlLCBvYnNlcnZlci5vYmplY3QsIG9ic2VydmVyLnBhdGNoZXMsIFwiXCIsIGludmVydGlibGUpO1xuICAgIGlmIChvYnNlcnZlci5wYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICBhcHBseVBhdGNoKG1pcnJvci52YWx1ZSwgb2JzZXJ2ZXIucGF0Y2hlcyk7XG4gICAgfVxuICAgIHZhciB0ZW1wID0gb2JzZXJ2ZXIucGF0Y2hlcztcbiAgICBpZiAodGVtcC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9ic2VydmVyLnBhdGNoZXMgPSBbXTtcbiAgICAgICAgaWYgKG9ic2VydmVyLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jYWxsYmFjayh0ZW1wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGVtcDtcbn1cbi8vIERpcnR5IGNoZWNrIGlmIG9iaiBpcyBkaWZmZXJlbnQgZnJvbSBtaXJyb3IsIGdlbmVyYXRlIHBhdGNoZXMgYW5kIHVwZGF0ZSBtaXJyb3JcbmZ1bmN0aW9uIF9nZW5lcmF0ZShtaXJyb3IsIG9iaiwgcGF0Y2hlcywgcGF0aCwgaW52ZXJ0aWJsZSkge1xuICAgIGlmIChvYmogPT09IG1pcnJvcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JqLnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIG9iaiA9IG9iai50b0pTT04oKTtcbiAgICB9XG4gICAgdmFyIG5ld0tleXMgPSBfb2JqZWN0S2V5cyhvYmopO1xuICAgIHZhciBvbGRLZXlzID0gX29iamVjdEtleXMobWlycm9yKTtcbiAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuICAgIHZhciBkZWxldGVkID0gZmFsc2U7XG4gICAgLy9pZiBldmVyIFwibW92ZVwiIG9wZXJhdGlvbiBpcyBpbXBsZW1lbnRlZCBoZXJlLCBtYWtlIHN1cmUgdGhpcyB0ZXN0IHJ1bnMgT0s6IFwic2hvdWxkIG5vdCBnZW5lcmF0ZSB0aGUgc2FtZSBwYXRjaCB0d2ljZSAobW92ZSlcIlxuICAgIGZvciAodmFyIHQgPSBvbGRLZXlzLmxlbmd0aCAtIDE7IHQgPj0gMDsgdC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBvbGRLZXlzW3RdO1xuICAgICAgICB2YXIgb2xkVmFsID0gbWlycm9yW2tleV07XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkgJiZcbiAgICAgICAgICAgICEob2JqW2tleV0gPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvYmopID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWwgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2xkVmFsID09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBvbGRWYWwgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBuZXdWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG5ld1ZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShvbGRWYWwpID09PSBBcnJheS5pc0FycmF5KG5ld1ZhbCkpIHtcbiAgICAgICAgICAgICAgICBfZ2VuZXJhdGUob2xkVmFsLCBuZXdWYWwsIHBhdGNoZXMsIHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSwgaW52ZXJ0aWJsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsICE9PSBuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInRlc3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShuZXdWYWwpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtaXJyb3IpID09PSBBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXRoICsgXCIvXCIgKyBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9sZFZhbCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlZCA9IHRydWU7IC8vIHByb3BlcnR5IGhhcyBiZWVuIGRlbGV0ZWRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpbnZlcnRpYmxlKSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHsgb3A6IFwidGVzdFwiLCBwYXRoLCB2YWx1ZTogbWlycm9yIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHsgb3A6IFwicmVwbGFjZVwiLCBwYXRoLCB2YWx1ZTogb2JqIH0pO1xuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFkZWxldGVkICYmIG5ld0tleXMubGVuZ3RoID09IG9sZEtleXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCBuZXdLZXlzLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBuZXdLZXlzW3RdO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5KG1pcnJvciwga2V5KSAmJiBvYmpba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvYmpba2V5XSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSB0aGUgZGlmZmVyZW5jZXMgaW4gdHdvIG9iamVjdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmUodHJlZTEsIHRyZWUyLCBpbnZlcnRpYmxlID0gZmFsc2UpIHtcbiAgICB2YXIgcGF0Y2hlcyA9IFtdO1xuICAgIF9nZW5lcmF0ZSh0cmVlMSwgdHJlZTIsIHBhdGNoZXMsIFwiXCIsIGludmVydGlibGUpO1xuICAgIHJldHVybiBwYXRjaGVzO1xufVxuIl0sIm5hbWVzIjpbIl9kZWVwQ2xvbmUiLCJfb2JqZWN0S2V5cyIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsImFwcGx5UGF0Y2giLCJiZWZvcmVEaWN0IiwiV2Vha01hcCIsIk1pcnJvciIsImNvbnN0cnVjdG9yIiwib2JqIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIk1hcCIsIk9ic2VydmVySW5mbyIsImNhbGxiYWNrIiwib2JzZXJ2ZXIiLCJnZXRNaXJyb3IiLCJnZXQiLCJnZXRPYnNlcnZlckZyb21NaXJyb3IiLCJtaXJyb3IiLCJvYnNlcnZlcnMiLCJyZW1vdmVPYnNlcnZlckZyb21NaXJyb3IiLCJkZWxldGUiLCJ1bm9ic2VydmUiLCJyb290Iiwib2JzZXJ2ZSIsInBhdGNoZXMiLCJzZXQiLCJvYnNlcnZlckluZm8iLCJuZXh0IiwiZGlydHlDaGVjayIsImdlbmVyYXRlIiwiZmFzdENoZWNrIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvYmplY3QiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW52ZXJ0aWJsZSIsIl9nZW5lcmF0ZSIsImxlbmd0aCIsInRlbXAiLCJwYXRoIiwidG9KU09OIiwibmV3S2V5cyIsIm9sZEtleXMiLCJjaGFuZ2VkIiwiZGVsZXRlZCIsInQiLCJrZXkiLCJvbGRWYWwiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJuZXdWYWwiLCJwdXNoIiwib3AiLCJjb21wYXJlIiwidHJlZTEiLCJ0cmVlMiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQ0QsTUFBTUEsa0JBQWtCQyxPQUFPQyxTQUFTLENBQUNDLGNBQWM7QUFDaEQsU0FBU0EsZUFBZUMsR0FBRyxFQUFFQyxHQUFHO0lBQ25DLE9BQU9MLGdCQUFnQk0sSUFBSSxDQUFDRixLQUFLQztBQUNyQztBQUNPLFNBQVNFLFlBQVlILEdBQUc7SUFDM0IsSUFBSUksTUFBTUMsT0FBTyxDQUFDTCxNQUFNO1FBQ3BCLE1BQU1NLE9BQU8sSUFBSUYsTUFBTUosSUFBSU8sTUFBTTtRQUNqQyxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUYsS0FBS0MsTUFBTSxFQUFFQyxJQUFLO1lBQ2xDRixJQUFJLENBQUNFLEVBQUUsR0FBRyxLQUFLQTtRQUNuQjtRQUNBLE9BQU9GO0lBQ1g7SUFDQSxJQUFJVCxPQUFPUyxJQUFJLEVBQUU7UUFDYixPQUFPVCxPQUFPUyxJQUFJLENBQUNOO0lBQ3ZCO0lBQ0EsSUFBSU0sT0FBTyxFQUFFO0lBQ2IsSUFBSyxJQUFJRyxLQUFLVCxJQUFLO1FBQ2YsSUFBSUQsZUFBZUMsS0FBS1MsSUFBSTtZQUN4QkgsS0FBS0ksSUFBSSxDQUFDRDtRQUNkO0lBQ0o7SUFDQSxPQUFPSDtBQUNYO0FBQ0E7Ozs7O0NBS0MsR0FDTSxTQUFTSyxXQUFXWCxHQUFHO0lBQzFCLE9BQVEsT0FBT0E7UUFDWCxLQUFLO1lBQ0QsT0FBT1ksS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxTQUFTLENBQUNkLE9BQU8scUVBQXFFO1FBQ2pILEtBQUs7WUFDRCxPQUFPLE1BQU0sb0RBQW9EO1FBQ3JFO1lBQ0ksT0FBT0EsS0FBSyw2QkFBNkI7SUFDakQ7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UUFDaEMsSUFBSSxPQUFPcUMsVUFBVSxhQUFhO1lBQzlCRCxhQUFhM0IsSUFBSSxDQUFDLENBQUMsRUFBRVQsSUFBSSxFQUFFLEVBQUVxQyxNQUFNLENBQUM7UUFDeEM7SUFDSjtJQUNBLE9BQU9ELGFBQWFFLElBQUksQ0FBQztBQUM3QjtBQUNPLE1BQU1DLG1CQUFtQlg7SUFDNUJZLFlBQVlOLE9BQU8sRUFBRU8sSUFBSSxFQUFFQyxLQUFLLEVBQUVDLFNBQVMsRUFBRUMsSUFBSSxDQUFFO1FBQy9DLEtBQUssQ0FBQ1gsMkJBQTJCQyxTQUFTO1lBQUVPO1lBQU1DO1lBQU9DO1lBQVdDO1FBQUs7UUFDekVoRCxPQUFPaUQsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWCxPQUFPSTtRQUNYO1FBQ0E3QyxPQUFPaUQsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWCxPQUFPSztRQUNYO1FBQ0E5QyxPQUFPaUQsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWCxPQUFPTTtRQUNYO1FBQ0EvQyxPQUFPaUQsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWCxPQUFPTztRQUNYO1FBQ0FoRCxPQUFPcUQsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXcEQsU0FBUyxHQUFHLG9FQUFvRTtRQUN2SCxJQUFJLENBQUNxQyxPQUFPLEdBQUdELDJCQUEyQkMsU0FBUztZQUMvQ087WUFDQUM7WUFDQUM7WUFDQUM7UUFDSjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzPzI4YTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxNy0yMDIyIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZWRcbiAqL1xuY29uc3QgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICAgIHJldHVybiBfaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX29iamVjdEtleXMob2JqKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBjb25zdCBrZXlzID0gbmV3IEFycmF5KG9iai5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGtleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGtleXNba10gPSBcIlwiICsgaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xuICAgIH1cbiAgICBsZXQga2V5cyA9IFtdO1xuICAgIGZvciAobGV0IGkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIGkpKSB7XG4gICAgICAgICAgICBrZXlzLnB1c2goaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG59XG4vKipcbiAqIERlZXBseSBjbG9uZSB0aGUgb2JqZWN0LlxuICogaHR0cHM6Ly9qc3BlcmYuY29tL2RlZXAtY29weS12cy1qc29uLXN0cmluZ2lmeS1qc29uLXBhcnNlLzI1IChyZWN1cnNpdmVEZWVwQ29weSlcbiAqIEBwYXJhbSAge2FueX0gb2JqIHZhbHVlIHRvIGNsb25lXG4gKiBAcmV0dXJuIHthbnl9IGNsb25lZCBvYmpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9kZWVwQ2xvbmUob2JqKSB7XG4gICAgc3dpdGNoICh0eXBlb2Ygb2JqKSB7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOyAvL0Zhc3RlciB0aGFuIEVTNSBjbG9uZSAtIGh0dHA6Ly9qc3BlcmYuY29tL2RlZXAtY2xvbmluZy1vZi1vYmplY3RzLzVcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vdGhpcyBpcyBob3cgSlNPTi5zdHJpbmdpZnkgYmVoYXZlcyBmb3IgYXJyYXkgaXRlbXNcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBvYmo7IC8vbm8gbmVlZCB0byBjbG9uZSBwcmltaXRpdmVzXG4gICAgfVxufVxuLy8zeCBmYXN0ZXIgdGhhbiBjYWNoZWQgL15cXGQrJC8udGVzdChzdHIpXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlZ2VyKHN0cikge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCBsZW4gPSBzdHIubGVuZ3RoO1xuICAgIGxldCBjaGFyQ29kZTtcbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuICogQHBhcmFtIHBhdGggVGhlIHJhdyBwb2ludGVyXG4gKiBAcmV0dXJuIHRoZSBFc2NhcGVkIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVBhdGhDb21wb25lbnQocGF0aCkge1xuICAgIGlmIChwYXRoLmluZGV4T2YoXCIvXCIpID09PSAtMSAmJiBwYXRoLmluZGV4T2YoXCJ+XCIpID09PSAtMSlcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvfi9nLCBcIn4wXCIpLnJlcGxhY2UoL1xcLy9nLCBcIn4xXCIpO1xufVxuLyoqXG4gKiBVbmVzY2FwZXMgYSBqc29uIHBvaW50ZXIgcGF0aFxuICogQHBhcmFtIHBhdGggVGhlIGVzY2FwZWQgcG9pbnRlclxuICogQHJldHVybiBUaGUgdW5lc2NhcGVkIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgucmVwbGFjZSgvfjEvZywgXCIvXCIpLnJlcGxhY2UoL34wL2csIFwiflwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfZ2V0UGF0aFJlY3Vyc2l2ZShyb290LCBvYmopIHtcbiAgICBsZXQgZm91bmQ7XG4gICAgZm9yIChsZXQga2V5IGluIHJvb3QpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KHJvb3QsIGtleSkpIHtcbiAgICAgICAgICAgIGlmIChyb290W2tleV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByb290W2tleV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IF9nZXRQYXRoUmVjdXJzaXZlKHJvb3Rba2V5XSwgb2JqKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXNjYXBlUGF0aENvbXBvbmVudChrZXkpICsgXCIvXCIgKyBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF0aChyb290LCBvYmopIHtcbiAgICBpZiAocm9vdCA9PT0gb2JqKSB7XG4gICAgICAgIHJldHVybiBcIi9cIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaik7XG4gICAgaWYgKHBhdGggPT09IFwiXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JqZWN0IG5vdCBmb3VuZCBpbiByb290XCIpO1xuICAgIH1cbiAgICByZXR1cm4gYC8ke3BhdGh9YDtcbn1cbi8qKlxuICogUmVjdXJzaXZlbHkgY2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhbnkgdW5kZWZpbmVkIHZhbHVlcyBpbnNpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNVbmRlZmluZWQob2JqKSB7XG4gICAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAob2JqKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzVW5kZWZpbmVkKG9ialtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaktleXMgPSBfb2JqZWN0S2V5cyhvYmopO1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5c0xlbmd0aCA9IG9iaktleXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpLZXlzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzVW5kZWZpbmVkKG9ialtvYmpLZXlzW2ldXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyKG1lc3NhZ2UsIGFyZ3MpIHtcbiAgICBjb25zdCBtZXNzYWdlUGFydHMgPSBbbWVzc2FnZV07XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXJncykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiBhcmdzW2tleV0gPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoYXJnc1trZXldLCBudWxsLCAyKVxuICAgICAgICAgICAgOiBhcmdzW2tleV07IC8vIHByZXR0eSBwcmludFxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBtZXNzYWdlUGFydHMucHVzaChgJHtrZXl9OiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlUGFydHMuam9pbihcIlxcblwiKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXRjaEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUpIHtcbiAgICAgICAgc3VwZXIocGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgeyBuYW1lLCBpbmRleCwgb3BlcmF0aW9uLCB0cmVlIH0pKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5kZXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluZGV4XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcGVyYXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG9wZXJhdGlvblxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidHJlZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJlZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTsgLy8gcmVzdG9yZSBwcm90b3R5cGUgY2hhaW4sIHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDgzNDIzNTlcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgb3BlcmF0aW9uLFxuICAgICAgICAgICAgdHJlZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIl9oYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5Iiwib2JqIiwia2V5IiwiY2FsbCIsIl9vYmplY3RLZXlzIiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5cyIsImxlbmd0aCIsImsiLCJpIiwicHVzaCIsIl9kZWVwQ2xvbmUiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpc0ludGVnZXIiLCJzdHIiLCJsZW4iLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJlc2NhcGVQYXRoQ29tcG9uZW50IiwicGF0aCIsImluZGV4T2YiLCJyZXBsYWNlIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiX2dldFBhdGhSZWN1cnNpdmUiLCJyb290IiwiZm91bmQiLCJnZXRQYXRoIiwiRXJyb3IiLCJoYXNVbmRlZmluZWQiLCJ1bmRlZmluZWQiLCJvYmpLZXlzIiwib2JqS2V5c0xlbmd0aCIsInBhdGNoRXJyb3JNZXNzYWdlRm9ybWF0dGVyIiwibWVzc2FnZSIsImFyZ3MiLCJtZXNzYWdlUGFydHMiLCJ2YWx1ZSIsImpvaW4iLCJQYXRjaEVycm9yIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaW5kZXgiLCJvcGVyYXRpb24iLCJ0cmVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJzZXRQcm90b3R5cGVPZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/hash.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/hash.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2hhc2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcz8zMDBiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGluc2VjdXJlSGFzaCB9IGZyb20gXCIuL2pzLXNoYTEvaGFzaC5qc1wiO1xuIl0sIm5hbWVzIjpbImluc2VjdXJlSGFzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nconst insecureHash = (message)=>{\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzLXNoYTEvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsY0FBYztBQUNkLHVFQUF1RTtBQUN2RTs7Ozs7OztDQU9DLEdBQ0QsdUJBQXVCLEdBQ1Y7QUFDYixJQUFJQSxPQUFPLE1BQTBCLEdBQUdDLENBQU1BLEdBQUcsQ0FBQztBQUNsRCxJQUFJQyxZQUFZLG1CQUFtQkMsS0FBSyxDQUFDO0FBQ3pDLElBQUlDLFFBQVE7SUFBQyxDQUFDO0lBQVk7SUFBUztJQUFPO0NBQUk7QUFDOUMsSUFBSUMsUUFBUTtJQUFDO0lBQUk7SUFBSTtJQUFHO0NBQUU7QUFDMUIsSUFBSUMsZUFBZTtJQUFDO0lBQU87SUFBUztJQUFVO0NBQWM7QUFDNUQsSUFBSUMsU0FBUyxFQUFFO0FBQ2YsU0FBU0MsS0FBS0MsWUFBWTtJQUN0QixJQUFJQSxjQUFjO1FBQ2RGLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxFQUFFLEdBQ0xBLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxHQUFHLEdBQ05BLE1BQU0sQ0FBQyxHQUFHLEdBQ047UUFDcEUsSUFBSSxDQUFDQSxNQUFNLEdBQUdBO0lBQ2xCLE9BQ0s7UUFDRCxJQUFJLENBQUNBLE1BQU0sR0FBRztZQUFDO1lB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QzVCQSxTQUFTLENBQUMsTUFBTyxJQUFLLEtBQUssR0FDM0JBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDUSxLQUFLLEtBQUssR0FDcEJSLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxJQUFLLEtBQUssR0FDM0JBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDUyxLQUFLLEtBQUssR0FDcEJULFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxJQUFLLEtBQUssR0FDM0JBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDVSxLQUFLLEtBQUssR0FDcEJWLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxJQUFLLEtBQUssR0FDM0JBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDVyxLQUFLLEtBQUssR0FDcEJYLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxJQUFLLEtBQUssR0FDM0JBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDWSxLQUFLLEtBQUs7QUFDNUI7QUFDQU4sS0FBS2MsU0FBUyxDQUFDd0IsUUFBUSxHQUFHdEMsS0FBS2MsU0FBUyxDQUFDdUIsR0FBRztBQUM1Q3JDLEtBQUtjLFNBQVMsQ0FBQ3lCLE1BQU0sR0FBRztJQUNwQixJQUFJLENBQUNYLFFBQVE7SUFDYixJQUFJMUIsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUUsRUFBRUMsS0FBSyxJQUFJLENBQUNBLEVBQUU7SUFDeEUsT0FBTztRQUNGSixNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7S0FDUjtBQUNMO0FBQ0FOLEtBQUtjLFNBQVMsQ0FBQzBCLEtBQUssR0FBR3hDLEtBQUtjLFNBQVMsQ0FBQ3lCLE1BQU07QUFDNUN2QyxLQUFLYyxTQUFTLENBQUMyQixXQUFXLEdBQUc7SUFDekIsSUFBSSxDQUFDYixRQUFRO0lBQ2IsSUFBSWMsU0FBUyxJQUFJdkIsWUFBWTtJQUM3QixJQUFJd0IsV0FBVyxJQUFJQyxTQUFTRjtJQUM1QkMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDM0MsRUFBRTtJQUM3QnlDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzFDLEVBQUU7SUFDN0J3QyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUN6QyxFQUFFO0lBQzdCdUMsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDeEMsRUFBRTtJQUM5QnNDLFNBQVNFLFNBQVMsQ0FBQyxJQUFJLElBQUksQ0FBQ3ZDLEVBQUU7SUFDOUIsT0FBT29DO0FBQ1g7QUFDTyxNQUFNSSxlQUFlLENBQUM5QjtJQUN6QixPQUFPLElBQUloQixLQUFLLE1BQU1lLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDLE1BQU07QUFDaEQsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qcy1zaGExL2hhc2guanM/OWYxOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCB0byBkZWFsIHdpdGggcG9ydGFiaWxpdHkgaXNzdWVzIHdpdGggaW1wb3J0aW5nIGNyeXB0byBtb2R1bGVcbi8qXG4gKiBbanMtc2hhMV17QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2VtbjE3OC9qcy1zaGExfVxuICpcbiAqIEB2ZXJzaW9uIDAuNi4wXG4gKiBAYXV0aG9yIENoZW4sIFlpLUN5dWFuIFtlbW4xNzhAZ21haWwuY29tXVxuICogQGNvcHlyaWdodCBDaGVuLCBZaS1DeXVhbiAyMDE0LTIwMTdcbiAqIEBsaWNlbnNlIE1JVFxuICovXG4vKmpzbGludCBiaXR3aXNlOiB0cnVlICovXG5cInVzZSBzdHJpY3RcIjtcbnZhciByb290ID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiA/IHdpbmRvdyA6IHt9O1xudmFyIEhFWF9DSEFSUyA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiLnNwbGl0KFwiXCIpO1xudmFyIEVYVFJBID0gWy0yMTQ3NDgzNjQ4LCA4Mzg4NjA4LCAzMjc2OCwgMTI4XTtcbnZhciBTSElGVCA9IFsyNCwgMTYsIDgsIDBdO1xudmFyIE9VVFBVVF9UWVBFUyA9IFtcImhleFwiLCBcImFycmF5XCIsIFwiZGlnZXN0XCIsIFwiYXJyYXlCdWZmZXJcIl07XG52YXIgYmxvY2tzID0gW107XG5mdW5jdGlvbiBTaGExKHNoYXJlZE1lbW9yeSkge1xuICAgIGlmIChzaGFyZWRNZW1vcnkpIHtcbiAgICAgICAgYmxvY2tzWzBdID1cbiAgICAgICAgICAgIGJsb2Nrc1sxNl0gPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1sxXSA9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1syXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s3XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTFdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA7XG4gICAgICAgIHRoaXMuYmxvY2tzID0gYmxvY2tzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG4gICAgfVxuICAgIHRoaXMuaDAgPSAweDY3NDUyMzAxO1xuICAgIHRoaXMuaDEgPSAweGVmY2RhYjg5O1xuICAgIHRoaXMuaDIgPSAweDk4YmFkY2ZlO1xuICAgIHRoaXMuaDMgPSAweDEwMzI1NDc2O1xuICAgIHRoaXMuaDQgPSAweGMzZDJlMWYwO1xuICAgIHRoaXMuYmxvY2sgPSB0aGlzLnN0YXJ0ID0gdGhpcy5ieXRlcyA9IHRoaXMuaEJ5dGVzID0gMDtcbiAgICB0aGlzLmZpbmFsaXplZCA9IHRoaXMuaGFzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5maXJzdCA9IHRydWU7XG59XG5TaGExLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBub3RTdHJpbmcgPSB0eXBlb2YgbWVzc2FnZSAhPT0gXCJzdHJpbmdcIjtcbiAgICBpZiAobm90U3RyaW5nICYmIG1lc3NhZ2UuY29uc3RydWN0b3IgPT09IHJvb3QuQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KG1lc3NhZ2UpO1xuICAgIH1cbiAgICB2YXIgY29kZSwgaW5kZXggPSAwLCBpLCBsZW5ndGggPSBtZXNzYWdlLmxlbmd0aCB8fCAwLCBibG9ja3MgPSB0aGlzLmJsb2NrcztcbiAgICB3aGlsZSAoaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc2hlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYmxvY2tzWzBdID0gdGhpcy5ibG9jaztcbiAgICAgICAgICAgIGJsb2Nrc1sxNl0gPVxuICAgICAgICAgICAgICAgIGJsb2Nrc1sxXSA9XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1syXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s3XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTFdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vdFN0cmluZykge1xuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5zdGFydDsgaW5kZXggPCBsZW5ndGggJiYgaSA8IDY0OyArK2luZGV4KSB7XG4gICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gbWVzc2FnZVtpbmRleF0gPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcbiAgICAgICAgICAgICAgICBjb2RlID0gbWVzc2FnZS5jaGFyQ29kZUF0KGluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDB4ODApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gY29kZSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29kZSA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweGMwIHwgKGNvZGUgPj4gNikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHhkODAwIHx8IGNvZGUgPj0gMHhlMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweGUwIHwgKGNvZGUgPj4gMTIpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gNikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIDB4MTAwMDAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoKGNvZGUgJiAweDNmZikgPDwgMTApIHwgKG1lc3NhZ2UuY2hhckNvZGVBdCgrK2luZGV4KSAmIDB4M2ZmKSk7XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweGYwIHwgKGNvZGUgPj4gMTgpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoKGNvZGUgPj4gMTIpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0Qnl0ZUluZGV4ID0gaTtcbiAgICAgICAgdGhpcy5ieXRlcyArPSBpIC0gdGhpcy5zdGFydDtcbiAgICAgICAgaWYgKGkgPj0gNjQpIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2sgPSBibG9ja3NbMTZdO1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IGkgLSA2NDtcbiAgICAgICAgICAgIHRoaXMuaGFzaCgpO1xuICAgICAgICAgICAgdGhpcy5oYXNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYnl0ZXMgPiA0Mjk0OTY3Mjk1KSB7XG4gICAgICAgIHRoaXMuaEJ5dGVzICs9ICh0aGlzLmJ5dGVzIC8gNDI5NDk2NzI5NikgPDwgMDtcbiAgICAgICAgdGhpcy5ieXRlcyA9IHRoaXMuYnl0ZXMgJSA0Mjk0OTY3Mjk2O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn07XG5TaGExLnByb3RvdHlwZS5maW5hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XG4gICAgdmFyIGJsb2NrcyA9IHRoaXMuYmxvY2tzLCBpID0gdGhpcy5sYXN0Qnl0ZUluZGV4O1xuICAgIGJsb2Nrc1sxNl0gPSB0aGlzLmJsb2NrO1xuICAgIGJsb2Nrc1tpID4+IDJdIHw9IEVYVFJBW2kgJiAzXTtcbiAgICB0aGlzLmJsb2NrID0gYmxvY2tzWzE2XTtcbiAgICBpZiAoaSA+PSA1Nikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc2goKTtcbiAgICAgICAgfVxuICAgICAgICBibG9ja3NbMF0gPSB0aGlzLmJsb2NrO1xuICAgICAgICBibG9ja3NbMTZdID1cbiAgICAgICAgICAgIGJsb2Nrc1sxXSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzNdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzZdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s3XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzldID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbMTVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA7XG4gICAgfVxuICAgIGJsb2Nrc1sxNF0gPSAodGhpcy5oQnl0ZXMgPDwgMykgfCAodGhpcy5ieXRlcyA+Pj4gMjkpO1xuICAgIGJsb2Nrc1sxNV0gPSB0aGlzLmJ5dGVzIDw8IDM7XG4gICAgdGhpcy5oYXNoKCk7XG59O1xuU2hhMS5wcm90b3R5cGUuaGFzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYSA9IHRoaXMuaDAsIGIgPSB0aGlzLmgxLCBjID0gdGhpcy5oMiwgZCA9IHRoaXMuaDMsIGUgPSB0aGlzLmg0O1xuICAgIHZhciBmLCBqLCB0LCBibG9ja3MgPSB0aGlzLmJsb2NrcztcbiAgICBmb3IgKGogPSAxNjsgaiA8IDgwOyArK2opIHtcbiAgICAgICAgdCA9IGJsb2Nrc1tqIC0gM10gXiBibG9ja3NbaiAtIDhdIF4gYmxvY2tzW2ogLSAxNF0gXiBibG9ja3NbaiAtIDE2XTtcbiAgICAgICAgYmxvY2tzW2pdID0gKHQgPDwgMSkgfCAodCA+Pj4gMzEpO1xuICAgIH1cbiAgICBmb3IgKGogPSAwOyBqIDwgMjA7IGogKz0gNSkge1xuICAgICAgICBmID0gKGIgJiBjKSB8ICh+YiAmIGQpO1xuICAgICAgICB0ID0gKGEgPDwgNSkgfCAoYSA+Pj4gMjcpO1xuICAgICAgICBlID0gKHQgKyBmICsgZSArIDE1MTg1MDAyNDkgKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSAoYSAmIGIpIHwgKH5hICYgYyk7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqICsgMV0pIDw8IDA7XG4gICAgICAgIGEgPSAoYSA8PCAzMCkgfCAoYSA+Pj4gMik7XG4gICAgICAgIGYgPSAoZSAmIGEpIHwgKH5lICYgYik7XG4gICAgICAgIHQgPSAoZCA8PCA1KSB8IChkID4+PiAyNyk7XG4gICAgICAgIGMgPSAodCArIGYgKyBjICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqICsgMl0pIDw8IDA7XG4gICAgICAgIGUgPSAoZSA8PCAzMCkgfCAoZSA+Pj4gMik7XG4gICAgICAgIGYgPSAoZCAmIGUpIHwgKH5kICYgYSk7XG4gICAgICAgIHQgPSAoYyA8PCA1KSB8IChjID4+PiAyNyk7XG4gICAgICAgIGIgPSAodCArIGYgKyBiICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSAoYyAmIGQpIHwgKH5jICYgZSk7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqICsgNF0pIDw8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAzMCkgfCAoYyA+Pj4gMik7XG4gICAgfVxuICAgIGZvciAoOyBqIDwgNDA7IGogKz0gNSkge1xuICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICB0ID0gKGEgPDwgNSkgfCAoYSA+Pj4gMjcpO1xuICAgICAgICBlID0gKHQgKyBmICsgZSArIDE4NTk3NzUzOTMgKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSBhIF4gYiBeIGM7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqICsgMV0pIDw8IDA7XG4gICAgICAgIGEgPSAoYSA8PCAzMCkgfCAoYSA+Pj4gMik7XG4gICAgICAgIGYgPSBlIF4gYSBeIGI7XG4gICAgICAgIHQgPSAoZCA8PCA1KSB8IChkID4+PiAyNyk7XG4gICAgICAgIGMgPSAodCArIGYgKyBjICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqICsgMl0pIDw8IDA7XG4gICAgICAgIGUgPSAoZSA8PCAzMCkgfCAoZSA+Pj4gMik7XG4gICAgICAgIGYgPSBkIF4gZSBeIGE7XG4gICAgICAgIHQgPSAoYyA8PCA1KSB8IChjID4+PiAyNyk7XG4gICAgICAgIGIgPSAodCArIGYgKyBiICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSBjIF4gZCBeIGU7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqICsgNF0pIDw8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAzMCkgfCAoYyA+Pj4gMik7XG4gICAgfVxuICAgIGZvciAoOyBqIDwgNjA7IGogKz0gNSkge1xuICAgICAgICBmID0gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpO1xuICAgICAgICB0ID0gKGEgPDwgNSkgfCAoYSA+Pj4gMjcpO1xuICAgICAgICBlID0gKHQgKyBmICsgZSAtIDE4OTQwMDc1ODggKyBibG9ja3Nbal0pIDw8IDA7XG4gICAgICAgIGIgPSAoYiA8PCAzMCkgfCAoYiA+Pj4gMik7XG4gICAgICAgIGYgPSAoYSAmIGIpIHwgKGEgJiBjKSB8IChiICYgYyk7XG4gICAgICAgIHQgPSAoZSA8PCA1KSB8IChlID4+PiAyNyk7XG4gICAgICAgIGQgPSAodCArIGYgKyBkIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqICsgMV0pIDw8IDA7XG4gICAgICAgIGEgPSAoYSA8PCAzMCkgfCAoYSA+Pj4gMik7XG4gICAgICAgIGYgPSAoZSAmIGEpIHwgKGUgJiBiKSB8IChhICYgYik7XG4gICAgICAgIHQgPSAoZCA8PCA1KSB8IChkID4+PiAyNyk7XG4gICAgICAgIGMgPSAodCArIGYgKyBjIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqICsgMl0pIDw8IDA7XG4gICAgICAgIGUgPSAoZSA8PCAzMCkgfCAoZSA+Pj4gMik7XG4gICAgICAgIGYgPSAoZCAmIGUpIHwgKGQgJiBhKSB8IChlICYgYSk7XG4gICAgICAgIHQgPSAoYyA8PCA1KSB8IChjID4+PiAyNyk7XG4gICAgICAgIGIgPSAodCArIGYgKyBiIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqICsgM10pIDw8IDA7XG4gICAgICAgIGQgPSAoZCA8PCAzMCkgfCAoZCA+Pj4gMik7XG4gICAgICAgIGYgPSAoYyAmIGQpIHwgKGMgJiBlKSB8IChkICYgZSk7XG4gICAgICAgIHQgPSAoYiA8PCA1KSB8IChiID4+PiAyNyk7XG4gICAgICAgIGEgPSAodCArIGYgKyBhIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqICsgNF0pIDw8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAzMCkgfCAoYyA+Pj4gMik7XG4gICAgfVxuICAgIGZvciAoOyBqIDwgODA7IGogKz0gNSkge1xuICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICB0ID0gKGEgPDwgNSkgfCAoYSA+Pj4gMjcpO1xuICAgICAgICBlID0gKHQgKyBmICsgZSAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IGEgXiBiIF4gYztcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDFdKSA8PCAwO1xuICAgICAgICBhID0gKGEgPDwgMzApIHwgKGEgPj4+IDIpO1xuICAgICAgICBmID0gZSBeIGEgXiBiO1xuICAgICAgICB0ID0gKGQgPDwgNSkgfCAoZCA+Pj4gMjcpO1xuICAgICAgICBjID0gKHQgKyBmICsgYyAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgMl0pIDw8IDA7XG4gICAgICAgIGUgPSAoZSA8PCAzMCkgfCAoZSA+Pj4gMik7XG4gICAgICAgIGYgPSBkIF4gZSBeIGE7XG4gICAgICAgIHQgPSAoYyA8PCA1KSB8IChjID4+PiAyNyk7XG4gICAgICAgIGIgPSAodCArIGYgKyBiIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IGMgXiBkIF4gZTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDRdKSA8PCAwO1xuICAgICAgICBjID0gKGMgPDwgMzApIHwgKGMgPj4+IDIpO1xuICAgIH1cbiAgICB0aGlzLmgwID0gKHRoaXMuaDAgKyBhKSA8PCAwO1xuICAgIHRoaXMuaDEgPSAodGhpcy5oMSArIGIpIDw8IDA7XG4gICAgdGhpcy5oMiA9ICh0aGlzLmgyICsgYykgPDwgMDtcbiAgICB0aGlzLmgzID0gKHRoaXMuaDMgKyBkKSA8PCAwO1xuICAgIHRoaXMuaDQgPSAodGhpcy5oNCArIGUpIDw8IDA7XG59O1xuU2hhMS5wcm90b3R5cGUuaGV4ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgaDAgPSB0aGlzLmgwLCBoMSA9IHRoaXMuaDEsIGgyID0gdGhpcy5oMiwgaDMgPSB0aGlzLmgzLCBoNCA9IHRoaXMuaDQ7XG4gICAgcmV0dXJuIChIRVhfQ0hBUlNbKGgwID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMCAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDEgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gyICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMyAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDQgJiAweDBmXSk7XG59O1xuU2hhMS5wcm90b3R5cGUudG9TdHJpbmcgPSBTaGExLnByb3RvdHlwZS5oZXg7XG5TaGExLnByb3RvdHlwZS5kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNDtcbiAgICByZXR1cm4gW1xuICAgICAgICAoaDAgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgwID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMCA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgwICYgMHhmZixcbiAgICAgICAgKGgxID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDEgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDIgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgyID4+IDgpICYgMHhmZixcbiAgICAgICAgaDIgJiAweGZmLFxuICAgICAgICAoaDMgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgzID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgzICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDQgPj4gOCkgJiAweGZmLFxuICAgICAgICBoNCAmIDB4ZmYsXG4gICAgXTtcbn07XG5TaGExLnByb3RvdHlwZS5hcnJheSA9IFNoYTEucHJvdG90eXBlLmRpZ2VzdDtcblNoYTEucHJvdG90eXBlLmFycmF5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDIwKTtcbiAgICB2YXIgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMCwgdGhpcy5oMCk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDQsIHRoaXMuaDEpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMig4LCB0aGlzLmgyKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoMTIsIHRoaXMuaDMpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigxNiwgdGhpcy5oNCk7XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn07XG5leHBvcnQgY29uc3QgaW5zZWN1cmVIYXNoID0gKG1lc3NhZ2UpID0+IHtcbiAgICByZXR1cm4gbmV3IFNoYTEodHJ1ZSkudXBkYXRlKG1lc3NhZ2UpW1wiaGV4XCJdKCk7XG59O1xuIl0sIm5hbWVzIjpbInJvb3QiLCJ3aW5kb3ciLCJIRVhfQ0hBUlMiLCJzcGxpdCIsIkVYVFJBIiwiU0hJRlQiLCJPVVRQVVRfVFlQRVMiLCJibG9ja3MiLCJTaGExIiwic2hhcmVkTWVtb3J5IiwiaDAiLCJoMSIsImgyIiwiaDMiLCJoNCIsImJsb2NrIiwic3RhcnQiLCJieXRlcyIsImhCeXRlcyIsImZpbmFsaXplZCIsImhhc2hlZCIsImZpcnN0IiwicHJvdG90eXBlIiwidXBkYXRlIiwibWVzc2FnZSIsIm5vdFN0cmluZyIsImNvbnN0cnVjdG9yIiwiQXJyYXlCdWZmZXIiLCJVaW50OEFycmF5IiwiY29kZSIsImluZGV4IiwiaSIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJsYXN0Qnl0ZUluZGV4IiwiaGFzaCIsImZpbmFsaXplIiwiYSIsImIiLCJjIiwiZCIsImUiLCJmIiwiaiIsInQiLCJoZXgiLCJ0b1N0cmluZyIsImRpZ2VzdCIsImFycmF5IiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJkYXRhVmlldyIsIkRhdGFWaWV3Iiwic2V0VWludDMyIiwiaW5zZWN1cmVIYXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/json.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/json.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxTQUFTQSxrQkFBa0JDLENBQUMsRUFBRUMsU0FBU0MsZ0JBQWdCO0lBQzFELDZDQUE2QztJQUM3Q0YsSUFBSUEsRUFBRUcsSUFBSTtJQUNWLE1BQU1DLFFBQVEscUJBQXFCQyxJQUFJLENBQUNMO0lBQ3hDLElBQUksQ0FBQ0ksT0FBTztRQUNSLE9BQU9ILE9BQU9EO0lBQ2xCLE9BQ0s7UUFDRCxPQUFPQyxPQUFPRyxLQUFLLENBQUMsRUFBRTtJQUMxQjtBQUNKO0FBQ0EsMkhBQTJIO0FBQzNILGNBQWM7QUFDUCxTQUFTRixpQkFBaUJGLENBQUM7SUFDOUIsOERBQThEO0lBQzlELElBQUksT0FBT0EsTUFBTSxhQUFhO1FBQzFCLE9BQU87SUFDWDtJQUNBLHFDQUFxQztJQUNyQyxJQUFJO1FBQ0EsT0FBT00sS0FBS0MsS0FBSyxDQUFDUDtJQUN0QixFQUNBLE9BQU9RLE9BQU87SUFDVixPQUFPO0lBQ1g7SUFDQSx3QkFBd0I7SUFDeEIsSUFBSUMsUUFBUTtJQUNaLE1BQU1DLFFBQVEsRUFBRTtJQUNoQixJQUFJQyxpQkFBaUI7SUFDckIsSUFBSUMsVUFBVTtJQUNkLHNEQUFzRDtJQUN0RCxLQUFLLElBQUlDLFFBQVFiLEVBQUc7UUFDaEIsSUFBSVcsZ0JBQWdCO1lBQ2hCLElBQUlFLFNBQVMsT0FBTyxDQUFDRCxTQUFTO2dCQUMxQkQsaUJBQWlCO1lBQ3JCLE9BQ0ssSUFBSUUsU0FBUyxRQUFRLENBQUNELFNBQVM7Z0JBQ2hDQyxPQUFPLE9BQU8sMERBQTBEO1lBQzVFLE9BQ0ssSUFBSUEsU0FBUyxNQUFNO2dCQUNwQkQsVUFBVSxDQUFDQTtZQUNmLE9BQ0s7Z0JBQ0RBLFVBQVU7WUFDZDtRQUNKLE9BQ0s7WUFDRCxJQUFJQyxTQUFTLEtBQUs7Z0JBQ2RGLGlCQUFpQjtnQkFDakJDLFVBQVU7WUFDZCxPQUNLLElBQUlDLFNBQVMsS0FBSztnQkFDbkJILE1BQU1JLElBQUksQ0FBQztZQUNmLE9BQ0ssSUFBSUQsU0FBUyxLQUFLO2dCQUNuQkgsTUFBTUksSUFBSSxDQUFDO1lBQ2YsT0FDSyxJQUFJRCxTQUFTLE9BQU9BLFNBQVMsS0FBSztnQkFDbkMsSUFBSUgsU0FBU0EsS0FBSyxDQUFDQSxNQUFNSyxNQUFNLEdBQUcsRUFBRSxLQUFLRixNQUFNO29CQUMzQ0gsTUFBTU0sR0FBRztnQkFDYixPQUNLO29CQUNELHdEQUF3RDtvQkFDeEQsT0FBTztnQkFDWDtZQUNKO1FBQ0o7UUFDQSxvREFBb0Q7UUFDcERQLFNBQVNJO0lBQ2I7SUFDQSwyREFBMkQ7SUFDM0QsK0JBQStCO0lBQy9CLElBQUlGLGdCQUFnQjtRQUNoQkYsU0FBUztJQUNiO0lBQ0Esa0ZBQWtGO0lBQ2xGLElBQUssSUFBSVEsSUFBSVAsTUFBTUssTUFBTSxHQUFHLEdBQUdFLEtBQUssR0FBR0EsS0FBSyxFQUFHO1FBQzNDUixTQUFTQyxLQUFLLENBQUNPLEVBQUU7SUFDckI7SUFDQSxnREFBZ0Q7SUFDaEQsSUFBSTtRQUNBLE9BQU9YLEtBQUtDLEtBQUssQ0FBQ0U7SUFDdEIsRUFDQSxPQUFPRCxPQUFPO1FBQ1YsK0VBQStFO1FBQy9FLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzb24uanM/MmE0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uTWFya2Rvd24ocywgcGFyc2VyID0gcGFyc2VQYXJ0aWFsSnNvbikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHMgPSBzLnRyaW0oKTtcbiAgICBjb25zdCBtYXRjaCA9IC9gYGAoanNvbik/KC4qKWBgYC9zLmV4ZWMocyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gcGFyc2VyKHMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlcihtYXRjaFsyXSk7XG4gICAgfVxufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9LaWxsaWFuTHVjYXMvb3Blbi1pbnRlcnByZXRlci9ibG9iL21haW4vaW50ZXJwcmV0ZXIvY29yZS9sbG0vdXRpbHMvcGFyc2VfcGFydGlhbF9qc29uLnB5XG4vLyBNSVQgTGljZW5zZVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUGFydGlhbEpzb24ocykge1xuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQsIHJldHVybiBudWxsIHRvIGluZGljYXRlIGZhaWx1cmUuXG4gICAgaWYgKHR5cGVvZiBzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBzdHJpbmcgYXMtaXMuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uocyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBQYXNzXG4gICAgfVxuICAgIC8vIEluaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIGxldCBuZXdfcyA9IFwiXCI7XG4gICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVTdHJpbmcgPSBmYWxzZTtcbiAgICBsZXQgZXNjYXBlZCA9IGZhbHNlO1xuICAgIC8vIFByb2Nlc3MgZWFjaCBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZyBvbmUgYXQgYSB0aW1lLlxuICAgIGZvciAobGV0IGNoYXIgb2Ygcykge1xuICAgICAgICBpZiAoaXNJbnNpZGVTdHJpbmcpIHtcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnXCInICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgaXNJbnNpZGVTdHJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiXFxuXCIgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBjaGFyID0gXCJcXFxcblwiOyAvLyBSZXBsYWNlIHRoZSBuZXdsaW5lIGNoYXJhY3RlciB3aXRoIHRoZSBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAhZXNjYXBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgaXNJbnNpZGVTdHJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwie1wiKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChcIn1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIltcIikge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goXCJdXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2sgJiYgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPT09IGNoYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBNaXNtYXRjaGVkIGNsb3NpbmcgY2hhcmFjdGVyOyB0aGUgaW5wdXQgaXMgbWFsZm9ybWVkLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXBwZW5kIHRoZSBwcm9jZXNzZWQgY2hhcmFjdGVyIHRvIHRoZSBuZXcgc3RyaW5nLlxuICAgICAgICBuZXdfcyArPSBjaGFyO1xuICAgIH1cbiAgICAvLyBJZiB3ZSdyZSBzdGlsbCBpbnNpZGUgYSBzdHJpbmcgYXQgdGhlIGVuZCBvZiBwcm9jZXNzaW5nLFxuICAgIC8vIHdlIG5lZWQgdG8gY2xvc2UgdGhlIHN0cmluZy5cbiAgICBpZiAoaXNJbnNpZGVTdHJpbmcpIHtcbiAgICAgICAgbmV3X3MgKz0gJ1wiJztcbiAgICB9XG4gICAgLy8gQ2xvc2UgYW55IHJlbWFpbmluZyBvcGVuIHN0cnVjdHVyZXMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgdGhhdCB0aGV5IHdlcmUgb3BlbmVkLlxuICAgIGZvciAobGV0IGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICBuZXdfcyArPSBzdGFja1tpXTtcbiAgICB9XG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSB0aGUgbW9kaWZpZWQgc3RyaW5nIGFzIEpTT04uXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobmV3X3MpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgd2Ugc3RpbGwgY2FuJ3QgcGFyc2UgdGhlIHN0cmluZyBhcyBKU09OLCByZXR1cm4gbnVsbCB0byBpbmRpY2F0ZSBmYWlsdXJlLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicGFyc2VKc29uTWFya2Rvd24iLCJzIiwicGFyc2VyIiwicGFyc2VQYXJ0aWFsSnNvbiIsInRyaW0iLCJtYXRjaCIsImV4ZWMiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsIm5ld19zIiwic3RhY2siLCJpc0luc2lkZVN0cmluZyIsImVzY2FwZWQiLCJjaGFyIiwicHVzaCIsImxlbmd0aCIsInBvcCIsImkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/stream.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/stream.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(generator, startSetup){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = generator;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            this.firstResult = generator.next();\n            if (startSetup) {\n                this.firstResult.then(startSetup).then(resolve, reject);\n            } else {\n                this.firstResult.then((_result)=>resolve(undefined), reject);\n            }\n        });\n    }\n    async next(...args) {\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return this.generator.next(...args);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, ...args) {\n    const gen = new AsyncGeneratorWithSetup(generator, startSetup);\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7Q0FHQyxHQUNNLE1BQU1BLCtCQUErQkM7SUFDeENDLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO0lBQ0o7SUFDQUMsZUFBZTtRQUNYLElBQUksQ0FBQyxJQUFJLENBQUNDLE1BQU0sRUFBRTtZQUNkLElBQUksQ0FBQ0EsTUFBTSxHQUFHLElBQUksQ0FBQ0MsU0FBUztRQUNoQztJQUNKO0lBQ0EsTUFBTUMsT0FBTztRQUNULElBQUksQ0FBQ0gsWUFBWTtRQUNqQixJQUFJO1lBQ0EsTUFBTUksU0FBUyxNQUFNLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxJQUFJO1lBQ3JDLElBQUlELE9BQU9FLElBQUksRUFBRTtnQkFDYixJQUFJLENBQUNMLE1BQU0sQ0FBQ00sV0FBVyxJQUFJLDBDQUEwQztnQkFDckUsT0FBTztvQkFDSEQsTUFBTTtvQkFDTlAsT0FBT1M7Z0JBQ1g7WUFDSixPQUNLO2dCQUNELE9BQU87b0JBQ0hGLE1BQU07b0JBQ05QLE9BQU9LLE9BQU9MLEtBQUs7Z0JBQ3ZCO1lBQ0o7UUFDSixFQUNBLE9BQU9VLEdBQUc7WUFDTixJQUFJLENBQUNSLE1BQU0sQ0FBQ00sV0FBVyxJQUFJLDJDQUEyQztZQUN0RSxNQUFNRTtRQUNWO0lBQ0o7SUFDQSxNQUFNQyxTQUFTO1FBQ1gsSUFBSSxDQUFDVixZQUFZO1FBQ2pCLHlEQUF5RDtRQUN6RCxJQUFJLElBQUksQ0FBQ1csTUFBTSxFQUFFO1lBQ2IsTUFBTUMsZ0JBQWdCLElBQUksQ0FBQ1gsTUFBTSxDQUFDWSxNQUFNLElBQUksb0NBQW9D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R0FBR08sSUFBSTtJQUMzRSxNQUFNSSxNQUFNLElBQUlaLHdCQUF3QnRCLFdBQVd1QjtJQUNuRCxNQUFNQyxRQUFRLE1BQU1VLElBQUlWLEtBQUs7SUFDN0IsT0FBTztRQUFFVyxRQUFRRixHQUFHQyxLQUFLVixVQUFVTTtRQUFPTjtJQUFNO0FBQ3BEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3N0cmVhbS5qcz8zZmI3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTdXBwb3J0IGFzeW5jIGl0ZXJhdG9yIHN5bnRheCBmb3IgUmVhZGFibGVTdHJlYW1zIGluIGFsbCBlbnZpcm9ubWVudHMuXG4gKiBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0aWFzQnVlbGVucy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9wdWxsLzEyMiNpc3N1ZWNvbW1lbnQtMTYyNzM1NDQ5MFxuICovXG5leHBvcnQgY2xhc3MgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSBleHRlbmRzIFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVhZGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuc3VyZVJlYWRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlYWRlcikge1xuICAgICAgICAgICAgdGhpcy5yZWFkZXIgPSB0aGlzLmdldFJlYWRlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlUmVhZGVyKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBjbG9zZWRcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBlcnJvcmVkXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJldHVybigpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgLy8gSWYgd3JhcHBlZCBpbiBhIE5vZGUgc3RyZWFtLCBjYW5jZWwgaXMgYWxyZWFkeSBjYWxsZWQuXG4gICAgICAgIGlmICh0aGlzLmxvY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHRoaXMucmVhZGVyLmNhbmNlbCgpOyAvLyBjYW5jZWwgZmlyc3QsIGJ1dCBkb24ndCBhd2FpdCB5ZXRcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayBmaXJzdFxuICAgICAgICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTsgLy8gbm93IGF3YWl0IGl0XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIHRocm93KGUpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgaWYgKHRoaXMubG9ja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7IC8vIGNhbmNlbCBmaXJzdCwgYnV0IGRvbid0IGF3YWl0IHlldFxuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIGZpcnN0XG4gICAgICAgICAgICBhd2FpdCBjYW5jZWxQcm9taXNlOyAvLyBub3cgYXdhaXQgaXRcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgICAgLy8gRnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU3RyZWFtc19BUEkvVXNpbmdfcmVhZGFibGVfc3RyZWFtcyNyZWFkaW5nX3RoZV9zdHJlYW1cbiAgICAgICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbigoeyBkb25lLCB2YWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG5vIG1vcmUgZGF0YSBuZWVkcyB0byBiZSBjb25zdW1lZCwgY2xvc2UgdGhlIHN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5xdWV1ZSB0aGUgbmV4dCBkYXRhIGNodW5rIGludG8gb3VyIHRhcmdldCBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQXN5bmNHZW5lcmF0b3IoZ2VuZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCBnZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBGaXg6IGBlbHNlIGlmICh2YWx1ZSlgIHdpbGwgaGFuZyB0aGUgc3RyZWFtaW5nIHdoZW4gbnVsbGlzaCB2YWx1ZSAoZS5nLiBlbXB0eSBzdHJpbmcpIGlzIHB1bGxlZFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmMgY2FuY2VsKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRvci5yZXR1cm4ocmVhc29uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhdGVlKGl0ZXIsIGxlbmd0aCA9IDIpIHtcbiAgICBjb25zdCBidWZmZXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoKSA9PiBbXSk7XG4gICAgcmV0dXJuIGJ1ZmZlcnMubWFwKGFzeW5jIGZ1bmN0aW9uKiBtYWtlSXRlcihidWZmZXIpIHtcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaXRlci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBidWZmZXIgb2YgYnVmZmVycykge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGJ1ZmZlclswXS5kb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICB5aWVsZCBidWZmZXIuc2hpZnQoKS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdChmaXJzdCwgc2Vjb25kKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmlyc3QpICYmIEFycmF5LmlzQXJyYXkoc2Vjb25kKSkge1xuICAgICAgICByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiAoZmlyc3QgKyBzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZmlyc3QgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIHNlY29uZCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICByZXR1cm4gKGZpcnN0ICsgc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcImNvbmNhdFwiIGluIGZpcnN0ICYmXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHR5cGVvZiBmaXJzdC5jb25jYXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gZmlyc3QuY29uY2F0KHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGNodW5rID0geyAuLi5maXJzdCB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzZWNvbmQpKSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIGNodW5rICYmICFBcnJheS5pc0FycmF5KGNodW5rW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgY2h1bmtba2V5XSA9IGNvbmNhdChjaHVua1trZXldLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaHVua1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNodW5rO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY29uY2F0ICR7dHlwZW9mIGZpcnN0fSBhbmQgJHt0eXBlb2Ygc2Vjb25kfWApO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCB7XG4gICAgY29uc3RydWN0b3IoZ2VuZXJhdG9yLCBzdGFydFNldHVwKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdlbmVyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXR1cFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFJlc3VsdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaXJzdFJlc3VsdFVzZWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdlbmVyYXRvciA9IGdlbmVyYXRvcjtcbiAgICAgICAgLy8gc2V0dXAgaXMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25seSBhZnRlciB0aGUgZmlyc3QgaXRlcmF0b3IgdmFsdWVcbiAgICAgICAgLy8gaXMgYXZhaWxhYmxlLiB0aGlzIGlzIHVzZWZ1bCB3aGVuIHNldHVwIG9mIHNldmVyYWwgcGlwZWQgZ2VuZXJhdG9yc1xuICAgICAgICAvLyBuZWVkcyB0byBoYXBwZW4gaW4gbG9naWNhbCBvcmRlciwgaWUuIGluIHRoZSBvcmRlciBpbiB3aGljaCBpbnB1dCB0b1xuICAgICAgICAvLyB0byBlYWNoIGdlbmVyYXRvciBpcyBhdmFpbGFibGUuXG4gICAgICAgIHRoaXMuc2V0dXAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0ID0gZ2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChzdGFydFNldHVwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdC50aGVuKHN0YXJ0U2V0dXApLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQudGhlbigoX3Jlc3VsdCkgPT4gcmVzb2x2ZSh1bmRlZmluZWQpLCByZWplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbmV4dCguLi5hcmdzKSB7XG4gICAgICAgIGlmICghdGhpcy5maXJzdFJlc3VsdFVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHRVc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpcnN0UmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvci5uZXh0KC4uLmFyZ3MpO1xuICAgIH1cbiAgICBhc3luYyByZXR1cm4odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLnJldHVybih2YWx1ZSk7XG4gICAgfVxuICAgIGFzeW5jIHRocm93KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLnRocm93KGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGlwZUdlbmVyYXRvcldpdGhTZXR1cCh0bywgZ2VuZXJhdG9yLCBzdGFydFNldHVwLCAuLi5hcmdzKSB7XG4gICAgY29uc3QgZ2VuID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKGdlbmVyYXRvciwgc3RhcnRTZXR1cCk7XG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCBnZW4uc2V0dXA7XG4gICAgcmV0dXJuIHsgb3V0cHV0OiB0byhnZW4sIHNldHVwLCAuLi5hcmdzKSwgc2V0dXAgfTtcbn1cbiJdLCJuYW1lcyI6WyJJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIiwiUmVhZGFibGVTdHJlYW0iLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJlbnN1cmVSZWFkZXIiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJuZXh0IiwicmVzdWx0IiwicmVhZCIsImRvbmUiLCJyZWxlYXNlTG9jayIsInVuZGVmaW5lZCIsImUiLCJyZXR1cm4iLCJsb2NrZWQiLCJjYW5jZWxQcm9taXNlIiwiY2FuY2VsIiwidGhyb3ciLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwic3RyZWFtIiwic3RhcnQiLCJjb250cm9sbGVyIiwicHVtcCIsInRoZW4iLCJjbG9zZSIsImVucXVldWUiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJwdWxsIiwicmVhc29uIiwiYXRlZSIsIml0ZXIiLCJsZW5ndGgiLCJidWZmZXJzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwibWFrZUl0ZXIiLCJidWZmZXIiLCJwdXNoIiwic2hpZnQiLCJjb25jYXQiLCJmaXJzdCIsInNlY29uZCIsImlzQXJyYXkiLCJjaHVuayIsImtleSIsImVudHJpZXMiLCJFcnJvciIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwic3RhcnRTZXR1cCIsInNldHVwIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmaXJzdFJlc3VsdCIsIl9yZXN1bHQiLCJhcmdzIiwiZmlyc3RSZXN1bHRVc2VkIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsInRvIiwiZ2VuIiwib3V0cHV0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBc0U7QUFDdEI7QUFDaEQsTUFBTUcsUUFBUSxDQUFDO0FBQ2YsTUFBTUMsU0FBUyxhQUFhLEdBQUcsSUFBSUYseURBQVdBLENBQUMsQ0FBQztBQUN6QyxlQUFlRyxZQUFZQyxRQUFRO0lBQ3RDLElBQUksQ0FBRUEsQ0FBQUEsWUFBWUgsS0FBSSxHQUFJO1FBQ3RCQSxLQUFLLENBQUNHLFNBQVMsR0FBR0YsT0FDYkcsS0FBSyxDQUFDLENBQUMsOEJBQThCLEVBQUVELFNBQVMsS0FBSyxDQUFDLEVBQ3RERSxJQUFJLENBQUMsQ0FBQ0MsTUFBUUEsSUFBSUMsSUFBSSxJQUN0QkYsSUFBSSxDQUFDLENBQUNHLE9BQVMsSUFBSVgsc0RBQVFBLENBQUNXLE9BQzVCQyxLQUFLLENBQUMsQ0FBQ0M7WUFDUixPQUFPVixLQUFLLENBQUNHLFNBQVM7WUFDdEIsTUFBTU87UUFDVjtJQUNKO0lBQ0EsT0FBTyxNQUFNVixLQUFLLENBQUNHLFNBQVM7QUFDaEM7QUFDTyxlQUFlUSxpQkFBaUJDLEtBQUs7SUFDeEMsT0FBT1YsWUFBWUoseUVBQXVCQSxDQUFDYztBQUMvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90aWt0b2tlbi5qcz8zOTJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRpa3Rva2VuLCBnZXRFbmNvZGluZ05hbWVGb3JNb2RlbCwgfSBmcm9tIFwianMtdGlrdG9rZW4vbGl0ZVwiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi9hc3luY19jYWxsZXIuanNcIjtcbmNvbnN0IGNhY2hlID0ge307XG5jb25zdCBjYWxsZXIgPSAvKiAjX19QVVJFX18gKi8gbmV3IEFzeW5jQ2FsbGVyKHt9KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFbmNvZGluZyhlbmNvZGluZykge1xuICAgIGlmICghKGVuY29kaW5nIGluIGNhY2hlKSkge1xuICAgICAgICBjYWNoZVtlbmNvZGluZ10gPSBjYWxsZXJcbiAgICAgICAgICAgIC5mZXRjaChgaHR0cHM6Ly90aWt0b2tlbi5wYWdlcy5kZXYvanMvJHtlbmNvZGluZ30uanNvbmApXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IG5ldyBUaWt0b2tlbihkYXRhKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2VuY29kaW5nXTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgY2FjaGVbZW5jb2RpbmddO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuY29kaW5nRm9yTW9kZWwobW9kZWwpIHtcbiAgICByZXR1cm4gZ2V0RW5jb2RpbmcoZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwobW9kZWwpKTtcbn1cbiJdLCJuYW1lcyI6WyJUaWt0b2tlbiIsImdldEVuY29kaW5nTmFtZUZvck1vZGVsIiwiQXN5bmNDYWxsZXIiLCJjYWNoZSIsImNhbGxlciIsImdldEVuY29kaW5nIiwiZW5jb2RpbmciLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZGF0YSIsImNhdGNoIiwiZSIsImVuY29kaW5nRm9yTW9kZWwiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/embeddings.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/embeddings.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* reexport safe */ _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/embeddings.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/embeddings.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzLmpzP2M1OWYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2VtYmVkZGluZ3MuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/language_models/chat_models.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/language_models/chat_models.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/chat_models.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzPzczNzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/messages.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/messages.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__._mergeLists),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.convertToChunk),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isOpenAIToolCallArray),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9tZXNzYWdlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9tZXNzYWdlcy5qcz9jZmYxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9tZXNzYWdlcy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/outputs.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/outputs.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.RUN_KEY)\n/* harmony export */ });\n/* harmony import */ var _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/outputs.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/outputs.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9vdXRwdXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2dvb2dsZS1nZW5haS9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanM/ZmY2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3Qvb3V0cHV0cy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/chunk_array.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/chunk_array.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* reexport safe */ _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__.chunkArray)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/chunk_array.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/chunk_array.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vZ29vZ2xlLWdlbmFpL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvY2h1bmtfYXJyYXkuanM/YTZjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2NodW5rX2FycmF5LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/env.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/env.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9nb29nbGUtZ2VuYWkvbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9lbnYuanM/Y2ExNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL2Vudi5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/google-genai/node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/mongodb/dist/chat_history.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/mongodb/dist/chat_history.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MongoDBChatMessageHistory: () => (/* binding */ MongoDBChatMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_chat_history__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/chat_history */ \"(rsc)/./node_modules/@langchain/core/chat_history.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n\n\n/**\n * @example\n * ```typescript\n * const chatHistory = new MongoDBChatMessageHistory({\n *   collection: myCollection,\n *   sessionId: 'unique-session-id',\n * });\n * const messages = await chatHistory.getMessages();\n * await chatHistory.clear();\n * ```\n */ class MongoDBChatMessageHistory extends _langchain_core_chat_history__WEBPACK_IMPORTED_MODULE_0__.BaseListChatMessageHistory {\n    constructor({ collection, sessionId }){\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"stores\",\n                \"message\",\n                \"mongodb\"\n            ]\n        });\n        Object.defineProperty(this, \"collection\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sessionId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"idKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"sessionId\"\n        });\n        this.collection = collection;\n        this.sessionId = sessionId;\n    }\n    async getMessages() {\n        const document = await this.collection.findOne({\n            [this.idKey]: this.sessionId\n        });\n        const messages = document?.messages || [];\n        return (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessagesToChatMessages)(messages);\n    }\n    async addMessage(message) {\n        const messages = (0,_langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.mapChatMessagesToStoredMessages)([\n            message\n        ]);\n        await this.collection.updateOne({\n            [this.idKey]: this.sessionId\n        }, {\n            $push: {\n                messages: {\n                    $each: messages\n                }\n            }\n        }, {\n            upsert: true\n        });\n    }\n    async clear() {\n        await this.collection.deleteOne({\n            [this.idKey]: this.sessionId\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2Rpc3QvY2hhdF9oaXN0b3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwRTtBQUNtQztBQUM3Rzs7Ozs7Ozs7OztDQVVDLEdBQ00sTUFBTUcsa0NBQWtDSCxvRkFBMEJBO0lBQ3JFSSxZQUFZLEVBQUVDLFVBQVUsRUFBRUMsU0FBUyxFQUFFLENBQUU7UUFDbkMsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBVTtnQkFBVzthQUFVO1FBQ3hEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDUCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtJQUNyQjtJQUNBLE1BQU1PLGNBQWM7UUFDaEIsTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ1QsVUFBVSxDQUFDVSxPQUFPLENBQUM7WUFDM0MsQ0FBQyxJQUFJLENBQUNDLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQ1YsU0FBUztRQUNoQztRQUNBLE1BQU1XLFdBQVdILFVBQVVHLFlBQVksRUFBRTtRQUN6QyxPQUFPZix5RkFBK0JBLENBQUNlO0lBQzNDO0lBQ0EsTUFBTUMsV0FBV0MsT0FBTyxFQUFFO1FBQ3RCLE1BQU1GLFdBQVdoQix5RkFBK0JBLENBQUM7WUFBQ2tCO1NBQVE7UUFDMUQsTUFBTSxJQUFJLENBQUNkLFVBQVUsQ0FBQ2UsU0FBUyxDQUFDO1lBQUUsQ0FBQyxJQUFJLENBQUNKLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQ1YsU0FBUztRQUFDLEdBQUc7WUFDOURlLE9BQU87Z0JBQUVKLFVBQVU7b0JBQUVLLE9BQU9MO2dCQUFTO1lBQUU7UUFDM0MsR0FBRztZQUFFTSxRQUFRO1FBQUs7SUFDdEI7SUFDQSxNQUFNQyxRQUFRO1FBQ1YsTUFBTSxJQUFJLENBQUNuQixVQUFVLENBQUNvQixTQUFTLENBQUM7WUFBRSxDQUFDLElBQUksQ0FBQ1QsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDVixTQUFTO1FBQUM7SUFDbkU7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbW9uZ29kYi9kaXN0L2NoYXRfaGlzdG9yeS5qcz8zYmE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VMaXN0Q2hhdE1lc3NhZ2VIaXN0b3J5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9jaGF0X2hpc3RvcnlcIjtcbmltcG9ydCB7IG1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMsIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9tZXNzYWdlc1wiO1xuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgY2hhdEhpc3RvcnkgPSBuZXcgTW9uZ29EQkNoYXRNZXNzYWdlSGlzdG9yeSh7XG4gKiAgIGNvbGxlY3Rpb246IG15Q29sbGVjdGlvbixcbiAqICAgc2Vzc2lvbklkOiAndW5pcXVlLXNlc3Npb24taWQnLFxuICogfSk7XG4gKiBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGNoYXRIaXN0b3J5LmdldE1lc3NhZ2VzKCk7XG4gKiBhd2FpdCBjaGF0SGlzdG9yeS5jbGVhcigpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBNb25nb0RCQ2hhdE1lc3NhZ2VIaXN0b3J5IGV4dGVuZHMgQmFzZUxpc3RDaGF0TWVzc2FnZUhpc3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHsgY29sbGVjdGlvbiwgc2Vzc2lvbklkIH0pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJzdG9yZXNcIiwgXCJtZXNzYWdlXCIsIFwibW9uZ29kYlwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29sbGVjdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXNzaW9uSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwic2Vzc2lvbklkXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXNzYWdlcygpIHtcbiAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBhd2FpdCB0aGlzLmNvbGxlY3Rpb24uZmluZE9uZSh7XG4gICAgICAgICAgICBbdGhpcy5pZEtleV06IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBkb2N1bWVudD8ubWVzc2FnZXMgfHwgW107XG4gICAgICAgIHJldHVybiBtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzKG1lc3NhZ2VzKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyhbbWVzc2FnZV0pO1xuICAgICAgICBhd2FpdCB0aGlzLmNvbGxlY3Rpb24udXBkYXRlT25lKHsgW3RoaXMuaWRLZXldOiB0aGlzLnNlc3Npb25JZCB9LCB7XG4gICAgICAgICAgICAkcHVzaDogeyBtZXNzYWdlczogeyAkZWFjaDogbWVzc2FnZXMgfSB9LFxuICAgICAgICB9LCB7IHVwc2VydDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2xlYXIoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29sbGVjdGlvbi5kZWxldGVPbmUoeyBbdGhpcy5pZEtleV06IHRoaXMuc2Vzc2lvbklkIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlTGlzdENoYXRNZXNzYWdlSGlzdG9yeSIsIm1hcENoYXRNZXNzYWdlc1RvU3RvcmVkTWVzc2FnZXMiLCJtYXBTdG9yZWRNZXNzYWdlc1RvQ2hhdE1lc3NhZ2VzIiwiTW9uZ29EQkNoYXRNZXNzYWdlSGlzdG9yeSIsImNvbnN0cnVjdG9yIiwiY29sbGVjdGlvbiIsInNlc3Npb25JZCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJnZXRNZXNzYWdlcyIsImRvY3VtZW50IiwiZmluZE9uZSIsImlkS2V5IiwibWVzc2FnZXMiLCJhZGRNZXNzYWdlIiwibWVzc2FnZSIsInVwZGF0ZU9uZSIsIiRwdXNoIiwiJGVhY2giLCJ1cHNlcnQiLCJjbGVhciIsImRlbGV0ZU9uZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/mongodb/dist/chat_history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/mongodb/dist/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@langchain/mongodb/dist/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MongoDBAtlasVectorSearch: () => (/* reexport safe */ _vectorstores_js__WEBPACK_IMPORTED_MODULE_1__.MongoDBAtlasVectorSearch),\n/* harmony export */   MongoDBChatMessageHistory: () => (/* reexport safe */ _chat_history_js__WEBPACK_IMPORTED_MODULE_0__.MongoDBChatMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _chat_history_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chat_history.js */ \"(rsc)/./node_modules/@langchain/mongodb/dist/chat_history.js\");\n/* harmony import */ var _vectorstores_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vectorstores.js */ \"(rsc)/./node_modules/@langchain/mongodb/dist/vectorstores.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFrQztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2Rpc3QvaW5kZXguanM/OTM3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9jaGF0X2hpc3RvcnkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3ZlY3RvcnN0b3Jlcy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/mongodb/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/mongodb/dist/vectorstores.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/mongodb/dist/vectorstores.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MongoDBAtlasVectorSearch: () => (/* binding */ MongoDBAtlasVectorSearch)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/vectorstores */ \"(rsc)/./node_modules/@langchain/core/vectorstores.js\");\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _langchain_core_utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/math */ \"(rsc)/./node_modules/@langchain/core/utils/math.js\");\n/* harmony import */ var _langchain_core_utils_async_caller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/utils/async_caller */ \"(rsc)/./node_modules/@langchain/core/utils/async_caller.js\");\n\n\n\n\n/**\n * Class that is a wrapper around MongoDB Atlas Vector Search. It is used\n * to store embeddings in MongoDB documents, create a vector search index,\n * and perform K-Nearest Neighbors (KNN) search with an approximate\n * nearest neighbor algorithm.\n */ class MongoDBAtlasVectorSearch extends _langchain_core_vectorstores__WEBPACK_IMPORTED_MODULE_0__.VectorStore {\n    _vectorstoreType() {\n        return \"mongodb_atlas\";\n    }\n    constructor(embeddings, args){\n        super(embeddings, args);\n        Object.defineProperty(this, \"collection\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"indexName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"textKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"embeddingKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"primaryKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.collection = args.collection;\n        this.indexName = args.indexName ?? \"default\";\n        this.textKey = args.textKey ?? \"text\";\n        this.embeddingKey = args.embeddingKey ?? \"embedding\";\n        this.primaryKey = args.primaryKey ?? \"_id\";\n        this.caller = new _langchain_core_utils_async_caller__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(args);\n    }\n    /**\n     * Method to add vectors and their corresponding documents to the MongoDB\n     * collection.\n     * @param vectors Vectors to be added.\n     * @param documents Corresponding documents to be added.\n     * @returns Promise that resolves when the vectors and documents have been added.\n     */ async addVectors(vectors, documents, options) {\n        const docs = vectors.map((embedding, idx)=>({\n                [this.textKey]: documents[idx].pageContent,\n                [this.embeddingKey]: embedding,\n                ...documents[idx].metadata\n            }));\n        if (options?.ids === undefined) {\n            await this.collection.insertMany(docs);\n        } else {\n            if (options.ids.length !== vectors.length) {\n                throw new Error(`If provided, \"options.ids\" must be an array with the same length as \"vectors\".`);\n            }\n            const { ids } = options;\n            for(let i = 0; i < docs.length; i += 1){\n                await this.caller.call(async ()=>{\n                    await this.collection.updateOne({\n                        [this.primaryKey]: ids[i]\n                    }, {\n                        $set: {\n                            [this.primaryKey]: ids[i],\n                            ...docs[i]\n                        }\n                    }, {\n                        upsert: true\n                    });\n                });\n            }\n        }\n        return options?.ids ?? docs.map((doc)=>doc[this.primaryKey]);\n    }\n    /**\n     * Method to add documents to the MongoDB collection. It first converts\n     * the documents to vectors using the embeddings and then calls the\n     * addVectors method.\n     * @param documents Documents to be added.\n     * @returns Promise that resolves when the documents have been added.\n     */ async addDocuments(documents, options) {\n        const texts = documents.map(({ pageContent })=>pageContent);\n        return this.addVectors(await this.embeddings.embedDocuments(texts), documents, options);\n    }\n    /**\n     * Method that performs a similarity search on the vectors stored in the\n     * MongoDB collection. It returns a list of documents and their\n     * corresponding similarity scores.\n     * @param query Query vector for the similarity search.\n     * @param k Number of nearest neighbors to return.\n     * @param filter Optional filter to be applied.\n     * @returns Promise that resolves to a list of documents and their corresponding similarity scores.\n     */ async similaritySearchVectorWithScore(query, k, filter) {\n        const postFilterPipeline = filter?.postFilterPipeline ?? [];\n        const preFilter = filter?.preFilter || filter?.postFilterPipeline || filter?.includeEmbeddings ? filter.preFilter : filter;\n        const removeEmbeddingsPipeline = !filter?.includeEmbeddings ? [\n            {\n                $project: {\n                    [this.embeddingKey]: 0\n                }\n            }\n        ] : [];\n        const pipeline = [\n            {\n                $vectorSearch: {\n                    queryVector: MongoDBAtlasVectorSearch.fixArrayPrecision(query),\n                    index: this.indexName,\n                    path: this.embeddingKey,\n                    limit: k,\n                    numCandidates: 10 * k,\n                    ...preFilter && {\n                        filter: preFilter\n                    }\n                }\n            },\n            {\n                $set: {\n                    score: {\n                        $meta: \"vectorSearchScore\"\n                    }\n                }\n            },\n            ...removeEmbeddingsPipeline,\n            ...postFilterPipeline\n        ];\n        const results = this.collection.aggregate(pipeline).map((result)=>{\n            const { score, [this.textKey]: text, ...metadata } = result;\n            return [\n                new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__.Document({\n                    pageContent: text,\n                    metadata\n                }),\n                score\n            ];\n        });\n        return results.toArray();\n    }\n    /**\n     * Return documents selected using the maximal marginal relevance.\n     * Maximal marginal relevance optimizes for similarity to the query AND diversity\n     * among selected documents.\n     *\n     * @param {string} query - Text to look up documents similar to.\n     * @param {number} options.k - Number of documents to return.\n     * @param {number} options.fetchK=20- Number of documents to fetch before passing to the MMR algorithm.\n     * @param {number} options.lambda=0.5 - Number between 0 and 1 that determines the degree of diversity among the results,\n     *                 where 0 corresponds to maximum diversity and 1 to minimum diversity.\n     * @param {MongoDBAtlasFilter} options.filter - Optional Atlas Search operator to pre-filter on document fields\n     *                                      or post-filter following the knnBeta search.\n     *\n     * @returns {Promise<Document[]>} - List of documents selected by maximal marginal relevance.\n     */ async maxMarginalRelevanceSearch(query, options) {\n        const { k, fetchK = 20, lambda = 0.5, filter } = options;\n        const queryEmbedding = await this.embeddings.embedQuery(query);\n        // preserve the original value of includeEmbeddings\n        const includeEmbeddingsFlag = options.filter?.includeEmbeddings || false;\n        // update filter to include embeddings, as they will be used in MMR\n        const includeEmbeddingsFilter = {\n            ...filter,\n            includeEmbeddings: true\n        };\n        const resultDocs = await this.similaritySearchVectorWithScore(MongoDBAtlasVectorSearch.fixArrayPrecision(queryEmbedding), fetchK, includeEmbeddingsFilter);\n        const embeddingList = resultDocs.map((doc)=>doc[0].metadata[this.embeddingKey]);\n        const mmrIndexes = (0,_langchain_core_utils_math__WEBPACK_IMPORTED_MODULE_2__.maximalMarginalRelevance)(queryEmbedding, embeddingList, lambda, k);\n        return mmrIndexes.map((idx)=>{\n            const doc = resultDocs[idx][0];\n            // remove embeddings if they were not requested originally\n            if (!includeEmbeddingsFlag) {\n                delete doc.metadata[this.embeddingKey];\n            }\n            return doc;\n        });\n    }\n    /**\n     * Static method to create an instance of MongoDBAtlasVectorSearch from a\n     * list of texts. It first converts the texts to vectors and then adds\n     * them to the MongoDB collection.\n     * @param texts List of texts to be converted to vectors.\n     * @param metadatas Metadata for the texts.\n     * @param embeddings Embeddings to be used for conversion.\n     * @param dbConfig Database configuration for MongoDB Atlas.\n     * @returns Promise that resolves to a new instance of MongoDBAtlasVectorSearch.\n     */ static async fromTexts(texts, metadatas, embeddings, dbConfig) {\n        const docs = [];\n        for(let i = 0; i < texts.length; i += 1){\n            const metadata = Array.isArray(metadatas) ? metadatas[i] : metadatas;\n            const newDoc = new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_1__.Document({\n                pageContent: texts[i],\n                metadata\n            });\n            docs.push(newDoc);\n        }\n        return MongoDBAtlasVectorSearch.fromDocuments(docs, embeddings, dbConfig);\n    }\n    /**\n     * Static method to create an instance of MongoDBAtlasVectorSearch from a\n     * list of documents. It first converts the documents to vectors and then\n     * adds them to the MongoDB collection.\n     * @param docs List of documents to be converted to vectors.\n     * @param embeddings Embeddings to be used for conversion.\n     * @param dbConfig Database configuration for MongoDB Atlas.\n     * @returns Promise that resolves to a new instance of MongoDBAtlasVectorSearch.\n     */ static async fromDocuments(docs, embeddings, dbConfig) {\n        const instance = new this(embeddings, dbConfig);\n        await instance.addDocuments(docs, {\n            ids: dbConfig.ids\n        });\n        return instance;\n    }\n    /**\n     * Static method to fix the precision of the array that ensures that\n     * every number in this array is always float when casted to other types.\n     * This is needed since MongoDB Atlas Vector Search does not cast integer\n     * inside vector search to float automatically.\n     * This method shall introduce a hint of error but should be safe to use\n     * since introduced error is very small, only applies to integer numbers\n     * returned by embeddings, and most embeddings shall not have precision\n     * as high as 15 decimal places.\n     * @param array Array of number to be fixed.\n     * @returns\n     */ static fixArrayPrecision(array) {\n        return array.map((value)=>{\n            if (Number.isInteger(value)) {\n                return value + 0.000000000000001;\n            }\n            return value;\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2Rpc3QvdmVjdG9yc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTREO0FBQ1A7QUFDaUI7QUFDSjtBQUNsRTs7Ozs7Q0FLQyxHQUNNLE1BQU1JLGlDQUFpQ0oscUVBQVdBO0lBQ3JESyxtQkFBbUI7UUFDZixPQUFPO0lBQ1g7SUFDQUMsWUFBWUMsVUFBVSxFQUFFQyxJQUFJLENBQUU7UUFDMUIsS0FBSyxDQUFDRCxZQUFZQztRQUNsQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsVUFBVSxHQUFHUCxLQUFLTyxVQUFVO1FBQ2pDLElBQUksQ0FBQ0MsU0FBUyxHQUFHUixLQUFLUSxTQUFTLElBQUk7UUFDbkMs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QWtCK0IsS0FBSyxFQUFFO1FBQzVCLE9BQU9BLE1BQU05RCxHQUFHLENBQUMsQ0FBQ1o7WUFDZCxJQUFJMkUsT0FBT0MsU0FBUyxDQUFDNUUsUUFBUTtnQkFDekIsT0FBT0EsUUFBUTtZQUNuQjtZQUNBLE9BQU9BO1FBQ1g7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2Rpc3QvdmVjdG9yc3RvcmVzLmpzPzA1ZWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjdG9yU3RvcmUsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS92ZWN0b3JzdG9yZXNcIjtcbmltcG9ydCB7IERvY3VtZW50IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9kb2N1bWVudHNcIjtcbmltcG9ydCB7IG1heGltYWxNYXJnaW5hbFJlbGV2YW5jZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvbWF0aFwiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9hc3luY19jYWxsZXJcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBpcyBhIHdyYXBwZXIgYXJvdW5kIE1vbmdvREIgQXRsYXMgVmVjdG9yIFNlYXJjaC4gSXQgaXMgdXNlZFxuICogdG8gc3RvcmUgZW1iZWRkaW5ncyBpbiBNb25nb0RCIGRvY3VtZW50cywgY3JlYXRlIGEgdmVjdG9yIHNlYXJjaCBpbmRleCxcbiAqIGFuZCBwZXJmb3JtIEstTmVhcmVzdCBOZWlnaGJvcnMgKEtOTikgc2VhcmNoIHdpdGggYW4gYXBwcm94aW1hdGVcbiAqIG5lYXJlc3QgbmVpZ2hib3IgYWxnb3JpdGhtLlxuICovXG5leHBvcnQgY2xhc3MgTW9uZ29EQkF0bGFzVmVjdG9yU2VhcmNoIGV4dGVuZHMgVmVjdG9yU3RvcmUge1xuICAgIF92ZWN0b3JzdG9yZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcIm1vbmdvZGJfYXRsYXNcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZW1iZWRkaW5ncywgYXJncykge1xuICAgICAgICBzdXBlcihlbWJlZGRpbmdzLCBhcmdzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29sbGVjdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbWJlZGRpbmdLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJpbWFyeUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gYXJncy5jb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmluZGV4TmFtZSA9IGFyZ3MuaW5kZXhOYW1lID8/IFwiZGVmYXVsdFwiO1xuICAgICAgICB0aGlzLnRleHRLZXkgPSBhcmdzLnRleHRLZXkgPz8gXCJ0ZXh0XCI7XG4gICAgICAgIHRoaXMuZW1iZWRkaW5nS2V5ID0gYXJncy5lbWJlZGRpbmdLZXkgPz8gXCJlbWJlZGRpbmdcIjtcbiAgICAgICAgdGhpcy5wcmltYXJ5S2V5ID0gYXJncy5wcmltYXJ5S2V5ID8/IFwiX2lkXCI7XG4gICAgICAgIHRoaXMuY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKGFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gYWRkIHZlY3RvcnMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgZG9jdW1lbnRzIHRvIHRoZSBNb25nb0RCXG4gICAgICogY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0gdmVjdG9ycyBWZWN0b3JzIHRvIGJlIGFkZGVkLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudHMgQ29ycmVzcG9uZGluZyBkb2N1bWVudHMgdG8gYmUgYWRkZWQuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHZlY3RvcnMgYW5kIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWRkVmVjdG9ycyh2ZWN0b3JzLCBkb2N1bWVudHMsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZG9jcyA9IHZlY3RvcnMubWFwKChlbWJlZGRpbmcsIGlkeCkgPT4gKHtcbiAgICAgICAgICAgIFt0aGlzLnRleHRLZXldOiBkb2N1bWVudHNbaWR4XS5wYWdlQ29udGVudCxcbiAgICAgICAgICAgIFt0aGlzLmVtYmVkZGluZ0tleV06IGVtYmVkZGluZyxcbiAgICAgICAgICAgIC4uLmRvY3VtZW50c1tpZHhdLm1ldGFkYXRhLFxuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChvcHRpb25zPy5pZHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb2xsZWN0aW9uLmluc2VydE1hbnkoZG9jcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pZHMubGVuZ3RoICE9PSB2ZWN0b3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSWYgcHJvdmlkZWQsIFwib3B0aW9ucy5pZHNcIiBtdXN0IGJlIGFuIGFycmF5IHdpdGggdGhlIHNhbWUgbGVuZ3RoIGFzIFwidmVjdG9yc1wiLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBpZHMgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb2xsZWN0aW9uLnVwZGF0ZU9uZSh7IFt0aGlzLnByaW1hcnlLZXldOiBpZHNbaV0gfSwgeyAkc2V0OiB7IFt0aGlzLnByaW1hcnlLZXldOiBpZHNbaV0sIC4uLmRvY3NbaV0gfSB9LCB7IHVwc2VydDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0aW9ucz8uaWRzID8/IGRvY3MubWFwKChkb2MpID0+IGRvY1t0aGlzLnByaW1hcnlLZXldKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGFkZCBkb2N1bWVudHMgdG8gdGhlIE1vbmdvREIgY29sbGVjdGlvbi4gSXQgZmlyc3QgY29udmVydHNcbiAgICAgKiB0aGUgZG9jdW1lbnRzIHRvIHZlY3RvcnMgdXNpbmcgdGhlIGVtYmVkZGluZ3MgYW5kIHRoZW4gY2FsbHMgdGhlXG4gICAgICogYWRkVmVjdG9ycyBtZXRob2QuXG4gICAgICogQHBhcmFtIGRvY3VtZW50cyBEb2N1bWVudHMgdG8gYmUgYWRkZWQuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGRvY3VtZW50cyBoYXZlIGJlZW4gYWRkZWQuXG4gICAgICovXG4gICAgYXN5bmMgYWRkRG9jdW1lbnRzKGRvY3VtZW50cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB0ZXh0cyA9IGRvY3VtZW50cy5tYXAoKHsgcGFnZUNvbnRlbnQgfSkgPT4gcGFnZUNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGRWZWN0b3JzKGF3YWl0IHRoaXMuZW1iZWRkaW5ncy5lbWJlZERvY3VtZW50cyh0ZXh0cyksIGRvY3VtZW50cywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IHBlcmZvcm1zIGEgc2ltaWxhcml0eSBzZWFyY2ggb24gdGhlIHZlY3RvcnMgc3RvcmVkIGluIHRoZVxuICAgICAqIE1vbmdvREIgY29sbGVjdGlvbi4gSXQgcmV0dXJucyBhIGxpc3Qgb2YgZG9jdW1lbnRzIGFuZCB0aGVpclxuICAgICAqIGNvcnJlc3BvbmRpbmcgc2ltaWxhcml0eSBzY29yZXMuXG4gICAgICogQHBhcmFtIHF1ZXJ5IFF1ZXJ5IHZlY3RvciBmb3IgdGhlIHNpbWlsYXJpdHkgc2VhcmNoLlxuICAgICAqIEBwYXJhbSBrIE51bWJlciBvZiBuZWFyZXN0IG5laWdoYm9ycyB0byByZXR1cm4uXG4gICAgICogQHBhcmFtIGZpbHRlciBPcHRpb25hbCBmaWx0ZXIgdG8gYmUgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBsaXN0IG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBzaW1pbGFyaXR5IHNjb3Jlcy5cbiAgICAgKi9cbiAgICBhc3luYyBzaW1pbGFyaXR5U2VhcmNoVmVjdG9yV2l0aFNjb3JlKHF1ZXJ5LCBrLCBmaWx0ZXIpIHtcbiAgICAgICAgY29uc3QgcG9zdEZpbHRlclBpcGVsaW5lID0gZmlsdGVyPy5wb3N0RmlsdGVyUGlwZWxpbmUgPz8gW107XG4gICAgICAgIGNvbnN0IHByZUZpbHRlciA9IGZpbHRlcj8ucHJlRmlsdGVyIHx8XG4gICAgICAgICAgICBmaWx0ZXI/LnBvc3RGaWx0ZXJQaXBlbGluZSB8fFxuICAgICAgICAgICAgZmlsdGVyPy5pbmNsdWRlRW1iZWRkaW5nc1xuICAgICAgICAgICAgPyBmaWx0ZXIucHJlRmlsdGVyXG4gICAgICAgICAgICA6IGZpbHRlcjtcbiAgICAgICAgY29uc3QgcmVtb3ZlRW1iZWRkaW5nc1BpcGVsaW5lID0gIWZpbHRlcj8uaW5jbHVkZUVtYmVkZGluZ3NcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0aGlzLmVtYmVkZGluZ0tleV06IDAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IHBpcGVsaW5lID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICR2ZWN0b3JTZWFyY2g6IHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlWZWN0b3I6IE1vbmdvREJBdGxhc1ZlY3RvclNlYXJjaC5maXhBcnJheVByZWNpc2lvbihxdWVyeSksXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdGhpcy5lbWJlZGRpbmdLZXksXG4gICAgICAgICAgICAgICAgICAgIGxpbWl0OiBrLFxuICAgICAgICAgICAgICAgICAgICBudW1DYW5kaWRhdGVzOiAxMCAqIGssXG4gICAgICAgICAgICAgICAgICAgIC4uLihwcmVGaWx0ZXIgJiYgeyBmaWx0ZXI6IHByZUZpbHRlciB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiB7ICRtZXRhOiBcInZlY3RvclNlYXJjaFNjb3JlXCIgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLnJlbW92ZUVtYmVkZGluZ3NQaXBlbGluZSxcbiAgICAgICAgICAgIC4uLnBvc3RGaWx0ZXJQaXBlbGluZSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuY29sbGVjdGlvblxuICAgICAgICAgICAgLmFnZ3JlZ2F0ZShwaXBlbGluZSlcbiAgICAgICAgICAgIC5tYXAoKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBzY29yZSwgW3RoaXMudGV4dEtleV06IHRleHQsIC4uLm1ldGFkYXRhIH0gPSByZXN1bHQ7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBEb2N1bWVudCh7IHBhZ2VDb250ZW50OiB0ZXh0LCBtZXRhZGF0YSB9KSwgc2NvcmVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHMudG9BcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gZG9jdW1lbnRzIHNlbGVjdGVkIHVzaW5nIHRoZSBtYXhpbWFsIG1hcmdpbmFsIHJlbGV2YW5jZS5cbiAgICAgKiBNYXhpbWFsIG1hcmdpbmFsIHJlbGV2YW5jZSBvcHRpbWl6ZXMgZm9yIHNpbWlsYXJpdHkgdG8gdGhlIHF1ZXJ5IEFORCBkaXZlcnNpdHlcbiAgICAgKiBhbW9uZyBzZWxlY3RlZCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgLSBUZXh0IHRvIGxvb2sgdXAgZG9jdW1lbnRzIHNpbWlsYXIgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuayAtIE51bWJlciBvZiBkb2N1bWVudHMgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmZldGNoSz0yMC0gTnVtYmVyIG9mIGRvY3VtZW50cyB0byBmZXRjaCBiZWZvcmUgcGFzc2luZyB0byB0aGUgTU1SIGFsZ29yaXRobS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5sYW1iZGE9MC41IC0gTnVtYmVyIGJldHdlZW4gMCBhbmQgMSB0aGF0IGRldGVybWluZXMgdGhlIGRlZ3JlZSBvZiBkaXZlcnNpdHkgYW1vbmcgdGhlIHJlc3VsdHMsXG4gICAgICogICAgICAgICAgICAgICAgIHdoZXJlIDAgY29ycmVzcG9uZHMgdG8gbWF4aW11bSBkaXZlcnNpdHkgYW5kIDEgdG8gbWluaW11bSBkaXZlcnNpdHkuXG4gICAgICogQHBhcmFtIHtNb25nb0RCQXRsYXNGaWx0ZXJ9IG9wdGlvbnMuZmlsdGVyIC0gT3B0aW9uYWwgQXRsYXMgU2VhcmNoIG9wZXJhdG9yIHRvIHByZS1maWx0ZXIgb24gZG9jdW1lbnQgZmllbGRzXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHBvc3QtZmlsdGVyIGZvbGxvd2luZyB0aGUga25uQmV0YSBzZWFyY2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudFtdPn0gLSBMaXN0IG9mIGRvY3VtZW50cyBzZWxlY3RlZCBieSBtYXhpbWFsIG1hcmdpbmFsIHJlbGV2YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBtYXhNYXJnaW5hbFJlbGV2YW5jZVNlYXJjaChxdWVyeSwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGssIGZldGNoSyA9IDIwLCBsYW1iZGEgPSAwLjUsIGZpbHRlciB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCB0aGlzLmVtYmVkZGluZ3MuZW1iZWRRdWVyeShxdWVyeSk7XG4gICAgICAgIC8vIHByZXNlcnZlIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiBpbmNsdWRlRW1iZWRkaW5nc1xuICAgICAgICBjb25zdCBpbmNsdWRlRW1iZWRkaW5nc0ZsYWcgPSBvcHRpb25zLmZpbHRlcj8uaW5jbHVkZUVtYmVkZGluZ3MgfHwgZmFsc2U7XG4gICAgICAgIC8vIHVwZGF0ZSBmaWx0ZXIgdG8gaW5jbHVkZSBlbWJlZGRpbmdzLCBhcyB0aGV5IHdpbGwgYmUgdXNlZCBpbiBNTVJcbiAgICAgICAgY29uc3QgaW5jbHVkZUVtYmVkZGluZ3NGaWx0ZXIgPSB7XG4gICAgICAgICAgICAuLi5maWx0ZXIsXG4gICAgICAgICAgICBpbmNsdWRlRW1iZWRkaW5nczogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0RG9jcyA9IGF3YWl0IHRoaXMuc2ltaWxhcml0eVNlYXJjaFZlY3RvcldpdGhTY29yZShNb25nb0RCQXRsYXNWZWN0b3JTZWFyY2guZml4QXJyYXlQcmVjaXNpb24ocXVlcnlFbWJlZGRpbmcpLCBmZXRjaEssIGluY2x1ZGVFbWJlZGRpbmdzRmlsdGVyKTtcbiAgICAgICAgY29uc3QgZW1iZWRkaW5nTGlzdCA9IHJlc3VsdERvY3MubWFwKChkb2MpID0+IGRvY1swXS5tZXRhZGF0YVt0aGlzLmVtYmVkZGluZ0tleV0pO1xuICAgICAgICBjb25zdCBtbXJJbmRleGVzID0gbWF4aW1hbE1hcmdpbmFsUmVsZXZhbmNlKHF1ZXJ5RW1iZWRkaW5nLCBlbWJlZGRpbmdMaXN0LCBsYW1iZGEsIGspO1xuICAgICAgICByZXR1cm4gbW1ySW5kZXhlcy5tYXAoKGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gcmVzdWx0RG9jc1tpZHhdWzBdO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGVtYmVkZGluZ3MgaWYgdGhleSB3ZXJlIG5vdCByZXF1ZXN0ZWQgb3JpZ2luYWxseVxuICAgICAgICAgICAgaWYgKCFpbmNsdWRlRW1iZWRkaW5nc0ZsYWcpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZG9jLm1ldGFkYXRhW3RoaXMuZW1iZWRkaW5nS2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBNb25nb0RCQXRsYXNWZWN0b3JTZWFyY2ggZnJvbSBhXG4gICAgICogbGlzdCBvZiB0ZXh0cy4gSXQgZmlyc3QgY29udmVydHMgdGhlIHRleHRzIHRvIHZlY3RvcnMgYW5kIHRoZW4gYWRkc1xuICAgICAqIHRoZW0gdG8gdGhlIE1vbmdvREIgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0gdGV4dHMgTGlzdCBvZiB0ZXh0cyB0byBiZSBjb252ZXJ0ZWQgdG8gdmVjdG9ycy5cbiAgICAgKiBAcGFyYW0gbWV0YWRhdGFzIE1ldGFkYXRhIGZvciB0aGUgdGV4dHMuXG4gICAgICogQHBhcmFtIGVtYmVkZGluZ3MgRW1iZWRkaW5ncyB0byBiZSB1c2VkIGZvciBjb252ZXJzaW9uLlxuICAgICAqIEBwYXJhbSBkYkNvbmZpZyBEYXRhYmFzZSBjb25maWd1cmF0aW9uIGZvciBNb25nb0RCIEF0bGFzLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBpbnN0YW5jZSBvZiBNb25nb0RCQXRsYXNWZWN0b3JTZWFyY2guXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21UZXh0cyh0ZXh0cywgbWV0YWRhdGFzLCBlbWJlZGRpbmdzLCBkYkNvbmZpZykge1xuICAgICAgICBjb25zdCBkb2NzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YXMpID8gbWV0YWRhdGFzW2ldIDogbWV0YWRhdGFzO1xuICAgICAgICAgICAgY29uc3QgbmV3RG9jID0gbmV3IERvY3VtZW50KHtcbiAgICAgICAgICAgICAgICBwYWdlQ29udGVudDogdGV4dHNbaV0sXG4gICAgICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3MucHVzaChuZXdEb2MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNb25nb0RCQXRsYXNWZWN0b3JTZWFyY2guZnJvbURvY3VtZW50cyhkb2NzLCBlbWJlZGRpbmdzLCBkYkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIE1vbmdvREJBdGxhc1ZlY3RvclNlYXJjaCBmcm9tIGFcbiAgICAgKiBsaXN0IG9mIGRvY3VtZW50cy4gSXQgZmlyc3QgY29udmVydHMgdGhlIGRvY3VtZW50cyB0byB2ZWN0b3JzIGFuZCB0aGVuXG4gICAgICogYWRkcyB0aGVtIHRvIHRoZSBNb25nb0RCIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIGRvY3MgTGlzdCBvZiBkb2N1bWVudHMgdG8gYmUgY29udmVydGVkIHRvIHZlY3RvcnMuXG4gICAgICogQHBhcmFtIGVtYmVkZGluZ3MgRW1iZWRkaW5ncyB0byBiZSB1c2VkIGZvciBjb252ZXJzaW9uLlxuICAgICAqIEBwYXJhbSBkYkNvbmZpZyBEYXRhYmFzZSBjb25maWd1cmF0aW9uIGZvciBNb25nb0RCIEF0bGFzLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIG5ldyBpbnN0YW5jZSBvZiBNb25nb0RCQXRsYXNWZWN0b3JTZWFyY2guXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21Eb2N1bWVudHMoZG9jcywgZW1iZWRkaW5ncywgZGJDb25maWcpIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgdGhpcyhlbWJlZGRpbmdzLCBkYkNvbmZpZyk7XG4gICAgICAgIGF3YWl0IGluc3RhbmNlLmFkZERvY3VtZW50cyhkb2NzLCB7IGlkczogZGJDb25maWcuaWRzIH0pO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZml4IHRoZSBwcmVjaXNpb24gb2YgdGhlIGFycmF5IHRoYXQgZW5zdXJlcyB0aGF0XG4gICAgICogZXZlcnkgbnVtYmVyIGluIHRoaXMgYXJyYXkgaXMgYWx3YXlzIGZsb2F0IHdoZW4gY2FzdGVkIHRvIG90aGVyIHR5cGVzLlxuICAgICAqIFRoaXMgaXMgbmVlZGVkIHNpbmNlIE1vbmdvREIgQXRsYXMgVmVjdG9yIFNlYXJjaCBkb2VzIG5vdCBjYXN0IGludGVnZXJcbiAgICAgKiBpbnNpZGUgdmVjdG9yIHNlYXJjaCB0byBmbG9hdCBhdXRvbWF0aWNhbGx5LlxuICAgICAqIFRoaXMgbWV0aG9kIHNoYWxsIGludHJvZHVjZSBhIGhpbnQgb2YgZXJyb3IgYnV0IHNob3VsZCBiZSBzYWZlIHRvIHVzZVxuICAgICAqIHNpbmNlIGludHJvZHVjZWQgZXJyb3IgaXMgdmVyeSBzbWFsbCwgb25seSBhcHBsaWVzIHRvIGludGVnZXIgbnVtYmVyc1xuICAgICAqIHJldHVybmVkIGJ5IGVtYmVkZGluZ3MsIGFuZCBtb3N0IGVtYmVkZGluZ3Mgc2hhbGwgbm90IGhhdmUgcHJlY2lzaW9uXG4gICAgICogYXMgaGlnaCBhcyAxNSBkZWNpbWFsIHBsYWNlcy5cbiAgICAgKiBAcGFyYW0gYXJyYXkgQXJyYXkgb2YgbnVtYmVyIHRvIGJlIGZpeGVkLlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGZpeEFycmF5UHJlY2lzaW9uKGFycmF5KSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAwLjAwMDAwMDAwMDAwMDAwMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlZlY3RvclN0b3JlIiwiRG9jdW1lbnQiLCJtYXhpbWFsTWFyZ2luYWxSZWxldmFuY2UiLCJBc3luY0NhbGxlciIsIk1vbmdvREJBdGxhc1ZlY3RvclNlYXJjaCIsIl92ZWN0b3JzdG9yZVR5cGUiLCJjb25zdHJ1Y3RvciIsImVtYmVkZGluZ3MiLCJhcmdzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImNvbGxlY3Rpb24iLCJpbmRleE5hbWUiLCJ0ZXh0S2V5IiwiZW1iZWRkaW5nS2V5IiwicHJpbWFyeUtleSIsImNhbGxlciIsImFkZFZlY3RvcnMiLCJ2ZWN0b3JzIiwiZG9jdW1lbnRzIiwib3B0aW9ucyIsImRvY3MiLCJtYXAiLCJlbWJlZGRpbmciLCJpZHgiLCJwYWdlQ29udGVudCIsIm1ldGFkYXRhIiwiaWRzIiwidW5kZWZpbmVkIiwiaW5zZXJ0TWFueSIsImxlbmd0aCIsIkVycm9yIiwiaSIsImNhbGwiLCJ1cGRhdGVPbmUiLCIkc2V0IiwidXBzZXJ0IiwiZG9jIiwiYWRkRG9jdW1lbnRzIiwidGV4dHMiLCJlbWJlZERvY3VtZW50cyIsInNpbWlsYXJpdHlTZWFyY2hWZWN0b3JXaXRoU2NvcmUiLCJxdWVyeSIsImsiLCJmaWx0ZXIiLCJwb3N0RmlsdGVyUGlwZWxpbmUiLCJwcmVGaWx0ZXIiLCJpbmNsdWRlRW1iZWRkaW5ncyIsInJlbW92ZUVtYmVkZGluZ3NQaXBlbGluZSIsIiRwcm9qZWN0IiwicGlwZWxpbmUiLCIkdmVjdG9yU2VhcmNoIiwicXVlcnlWZWN0b3IiLCJmaXhBcnJheVByZWNpc2lvbiIsImluZGV4IiwicGF0aCIsImxpbWl0IiwibnVtQ2FuZGlkYXRlcyIsInNjb3JlIiwiJG1ldGEiLCJyZXN1bHRzIiwiYWdncmVnYXRlIiwicmVzdWx0IiwidGV4dCIsInRvQXJyYXkiLCJtYXhNYXJnaW5hbFJlbGV2YW5jZVNlYXJjaCIsImZldGNoSyIsImxhbWJkYSIsInF1ZXJ5RW1iZWRkaW5nIiwiZW1iZWRRdWVyeSIsImluY2x1ZGVFbWJlZGRpbmdzRmxhZyIsImluY2x1ZGVFbWJlZGRpbmdzRmlsdGVyIiwicmVzdWx0RG9jcyIsImVtYmVkZGluZ0xpc3QiLCJtbXJJbmRleGVzIiwiZnJvbVRleHRzIiwibWV0YWRhdGFzIiwiZGJDb25maWciLCJBcnJheSIsImlzQXJyYXkiLCJuZXdEb2MiLCJwdXNoIiwiZnJvbURvY3VtZW50cyIsImluc3RhbmNlIiwiYXJyYXkiLCJOdW1iZXIiLCJpc0ludGVnZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/mongodb/dist/vectorstores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/mongodb/index.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/mongodb/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MongoDBAtlasVectorSearch: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MongoDBAtlasVectorSearch),\n/* harmony export */   MongoDBChatMessageHistory: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.MongoDBChatMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/mongodb/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9tb25nb2RiL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vbW9uZ29kYi9pbmRleC5qcz9hYmExIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/mongodb/index.js\n");

/***/ })

};
;