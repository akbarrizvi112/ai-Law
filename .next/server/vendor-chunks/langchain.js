"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/langchain";
exports.ids = ["vendor-chunks/langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/langchain/dist/document_loaders/base.js":
/*!**************************************************************!*\
  !*** ./node_modules/langchain/dist/document_loaders/base.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentLoader: () => (/* binding */ BaseDocumentLoader)\n/* harmony export */ });\n/* harmony import */ var _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../text_splitter.js */ \"(rsc)/./node_modules/langchain/dist/text_splitter.js\");\n\n/**\n * Abstract class that provides a default implementation for the\n * loadAndSplit() method from the DocumentLoader interface. The load()\n * method is left abstract and needs to be implemented by subclasses.\n */ class BaseDocumentLoader {\n    /**\n     * Loads the documents and splits them using a specified text splitter.\n     * @param textSplitter The TextSplitter instance to use for splitting the loaded documents. Defaults to a RecursiveCharacterTextSplitter instance.\n     * @returns A Promise that resolves with an array of Document instances, each split according to the provided TextSplitter.\n     */ async loadAndSplit(splitter = new _text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.RecursiveCharacterTextSplitter()) {\n        const docs = await this.load();\n        return splitter.splitDocuments(docs);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXNFO0FBQ3RFOzs7O0NBSUMsR0FDTSxNQUFNQztJQUNUOzs7O0tBSUMsR0FDRCxNQUFNQyxhQUFhQyxXQUFXLElBQUlILDZFQUE4QkEsRUFBRSxFQUFFO1FBQ2hFLE1BQU1JLE9BQU8sTUFBTSxJQUFJLENBQUNDLElBQUk7UUFDNUIsT0FBT0YsU0FBU0csY0FBYyxDQUFDRjtJQUNuQztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9iYXNlLmpzPzI0YTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyLCB9IGZyb20gXCIuLi90ZXh0X3NwbGl0dGVyLmpzXCI7XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHRoYXQgcHJvdmlkZXMgYSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGZvciB0aGVcbiAqIGxvYWRBbmRTcGxpdCgpIG1ldGhvZCBmcm9tIHRoZSBEb2N1bWVudExvYWRlciBpbnRlcmZhY2UuIFRoZSBsb2FkKClcbiAqIG1ldGhvZCBpcyBsZWZ0IGFic3RyYWN0IGFuZCBuZWVkcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZURvY3VtZW50TG9hZGVyIHtcbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZG9jdW1lbnRzIGFuZCBzcGxpdHMgdGhlbSB1c2luZyBhIHNwZWNpZmllZCB0ZXh0IHNwbGl0dGVyLlxuICAgICAqIEBwYXJhbSB0ZXh0U3BsaXR0ZXIgVGhlIFRleHRTcGxpdHRlciBpbnN0YW5jZSB0byB1c2UgZm9yIHNwbGl0dGluZyB0aGUgbG9hZGVkIGRvY3VtZW50cy4gRGVmYXVsdHMgdG8gYSBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIgaW5zdGFuY2UuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBhcnJheSBvZiBEb2N1bWVudCBpbnN0YW5jZXMsIGVhY2ggc3BsaXQgYWNjb3JkaW5nIHRvIHRoZSBwcm92aWRlZCBUZXh0U3BsaXR0ZXIuXG4gICAgICovXG4gICAgYXN5bmMgbG9hZEFuZFNwbGl0KHNwbGl0dGVyID0gbmV3IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlcigpKSB7XG4gICAgICAgIGNvbnN0IGRvY3MgPSBhd2FpdCB0aGlzLmxvYWQoKTtcbiAgICAgICAgcmV0dXJuIHNwbGl0dGVyLnNwbGl0RG9jdW1lbnRzKGRvY3MpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIiLCJCYXNlRG9jdW1lbnRMb2FkZXIiLCJsb2FkQW5kU3BsaXQiLCJzcGxpdHRlciIsImRvY3MiLCJsb2FkIiwic3BsaXREb2N1bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/dist/document_loaders/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/dist/document_loaders/fs/directory.js":
/*!**********************************************************************!*\
  !*** ./node_modules/langchain/dist/document_loaders/fs/directory.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DirectoryLoader: () => (/* binding */ DirectoryLoader),\n/* harmony export */   UnknownHandling: () => (/* binding */ UnknownHandling)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/base.js\");\n\n\n// TypeScript enums are not tree-shakeable, so doing this instead\n// See https://bargsten.org/jsts/enums/\nconst UnknownHandling = {\n    Ignore: \"ignore\",\n    Warn: \"warn\",\n    Error: \"error\"\n};\n/**\n * A document loader that loads documents from a directory. It extends the\n * `BaseDocumentLoader` class and implements the `load()` method.\n * @example\n * ```typescript\n *\n * const directoryLoader = new DirectoryLoader(\n *   \"src/document_loaders/example_data/\",\n *   {\n *     \".pdf\": (path: string) => new PDFLoader(path),\n *   },\n * );\n *\n * const docs = await directoryLoader.load();\n * console.log({ docs });\n *\n * ```\n */ class DirectoryLoader extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentLoader {\n    constructor(directoryPath, loaders, recursive = true, unknown = UnknownHandling.Warn){\n        super();\n        Object.defineProperty(this, \"directoryPath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: directoryPath\n        });\n        Object.defineProperty(this, \"loaders\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: loaders\n        });\n        Object.defineProperty(this, \"recursive\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: recursive\n        });\n        Object.defineProperty(this, \"unknown\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: unknown\n        });\n        if (Object.keys(loaders).length === 0) {\n            throw new Error(\"Must provide at least one loader\");\n        }\n        for(const extension in loaders){\n            if (Object.hasOwn(loaders, extension)) {\n                if (extension[0] !== \".\") {\n                    throw new Error(`Extension must start with a dot: ${extension}`);\n                }\n            }\n        }\n    }\n    /**\n     * Loads the documents from the directory. If a file is a directory and\n     * `recursive` is `true`, it recursively loads documents from the\n     * subdirectory. If a file is a file, it checks if there is a\n     * corresponding loader function for the file extension in the `loaders`\n     * mapping. If there is, it loads the documents. If there is no\n     * corresponding loader function and `unknown` is set to `Warn`, it logs a\n     * warning message. If `unknown` is set to `Error`, it throws an error.\n     * @returns A promise that resolves to an array of loaded documents.\n     */ async load() {\n        const { readdir, extname, resolve } = await DirectoryLoader.imports();\n        const files = await readdir(this.directoryPath, {\n            withFileTypes: true\n        });\n        const documents = [];\n        for (const file of files){\n            const fullPath = resolve(this.directoryPath, file.name);\n            if (file.isDirectory()) {\n                if (this.recursive) {\n                    const loader = new DirectoryLoader(fullPath, this.loaders, this.recursive, this.unknown);\n                    documents.push(...await loader.load());\n                }\n            } else {\n                // I'm aware some things won't be files,\n                // but they will be caught by the \"unknown\" handling below.\n                const loaderFactory = this.loaders[extname(file.name)];\n                if (loaderFactory) {\n                    const loader = loaderFactory(fullPath);\n                    documents.push(...await loader.load());\n                } else {\n                    switch(this.unknown){\n                        case UnknownHandling.Ignore:\n                            break;\n                        case UnknownHandling.Warn:\n                            console.warn(`Unknown file type: ${file.name}`);\n                            break;\n                        case UnknownHandling.Error:\n                            throw new Error(`Unknown file type: ${file.name}`);\n                        default:\n                            throw new Error(`Unknown unknown handling: ${this.unknown}`);\n                    }\n                }\n            }\n        }\n        return documents;\n    }\n    /**\n     * Imports the necessary functions from the `node:path` and\n     * `node:fs/promises` modules. It is used to dynamically import the\n     * functions when needed. If the import fails, it throws an error\n     * indicating that the modules failed to load.\n     * @returns A promise that resolves to an object containing the imported functions.\n     */ static async imports() {\n        try {\n            const { extname, resolve } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 19));\n            const { readdir } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs/promises */ \"node:fs/promises\", 19));\n            return {\n                readdir,\n                extname,\n                resolve\n            };\n        } catch (e) {\n            console.error(e);\n            throw new Error(`Failed to load fs/promises. DirectoryLoader available only on environment 'node'. It appears you are running environment '${(0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnv)()}'. See https://<link to docs> for alternatives.`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9mcy9kaXJlY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDtBQUNIO0FBQ2hELGlFQUFpRTtBQUNqRSx1Q0FBdUM7QUFDaEMsTUFBTUUsa0JBQWtCO0lBQzNCQyxRQUFRO0lBQ1JDLE1BQU07SUFDTkMsT0FBTztBQUNYLEVBQUU7QUFDRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FpQkMsR0FDTSxNQUFNQyx3QkFBd0JMLHdEQUFrQkE7SUFDbkRNLFlBQVlDLGFBQWEsRUFBRUMsT0FBTyxFQUFFQyxZQUFZLElBQUksRUFBRUMsVUFBVVQsZ0JBQWdCRSxJQUFJLENBQUU7UUFDbEYsS0FBSztRQUNMUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1Q7UUFDWDtRQUNBSSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9SO1FBQ1g7UUFDQUcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPUDtRQUNYO1FBQ0FFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT047UUFDWDtRQUNBLElBQUlDLE9BQU9NLElBQUksQ0FBQ1QsU0FBU1UsTUFBTSxLQUFLLEdBQUc7WUFDbkMsTUFBTSxJQUFJZCxNQUFNO1FBQ3BCO1FBQ0EsSUFBSyxNQUFNZSxhQUFhWCxRQUFTO1lBQzdCLElBQUlHLE9BQU9TLE1BQU0sQ0FBQ1osU0FBU1csWUFBWTtnQkFDbkMsSUFBSUEsU0FBUyxDQUFDLEVBQUUsS0FBSyxLQUFLO29CQUN0QixNQUFNLElBQUlmLE1BQU0sQ0FBQyxpQ0FBaUMsRUFBRWUsVUFBVSxDQUFDO2dCQUNuRTtZQUNKO1FBQ0o7SUFDSjtJQUNBOzs7Ozs7Ozs7S0FTQyxHQUNELE1BQU1FLE9BQU87UUFDVCxNQUFNLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNbkIsZ0JBQWdCb0IsT0FBTztRQUNuRSxNQUFNQyxRQUFRLE1BQU1KLFFBQVEsSUFBSSxDQUFDZixhQUFhLEVBQUU7WUFBRW9CLGVBQWU7UUFBSztRQUN0RSxNQUFNQyxZQUFZLEVBQUU7UUFDcEIsS0FBSyxNQUFNQyxRQUFRSCxNQUFPO1lBQ3RCLE1BQU1JLFdBQVdOLFFBQVEsSUFBSSxDQUFDakIsYUFBYSxFQUFFc0IsS0FBS0UsSUFBSTtZQUN0RCxJQUFJRixLQUFLRyxXQUFXLElBQUk7Z0JBQ3BCLElBQUksSUFBSSxDQUFDdkIsU0FBUyxFQUFFO29CQUNoQixNQUFNd0IsU0FBUyxJQUFJNUIsZ0JBQWdCeUIsVUFBVSxJQUFJLENBQUN0QixPQUFPLEVBQUUsSUFBSSxDQUFDQyxTQUFTLEVBQUUsSUFBSSxDQUFDQyxPQUFPO29CQUN2RmtCLFVBQVVNLElBQUksSUFBSyxNQUFNRCxPQUFPWixJQUFJO2dCQUN4QztZQUNKLE9BQ0s7Z0JBQ0Qsd0NBQXdDO2dCQUN4QywyREFBMkQ7Z0JBQzNELE1BQU1jLGdCQUFnQixJQUFJLENBQUMzQixPQUFPLENBQUNlLFFBQVFNLEtBQUtFLElBQUksRUFBRTtnQkFDdEQsSUFBSUksZUFBZTtvQkFDZixNQUFNRixTQUFTRSxjQUFjTDtvQkFDN0JGLFVBQVVNLElBQUksSUFBSyxNQUFNRCxPQUFPWixJQUFJO2dCQUN4QyxPQUNLO29CQUNELE9BQVEsSUFBSSxDQUFDWCxPQUFPO3dCQUNoQixLQUFLVCxnQkFBZ0JDLE1BQU07NEJBQ3ZCO3dCQUNKLEtBQUtELGdCQUFnQkUsSUFBSTs0QkFDckJpQyxRQUFRQyxJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRVIsS0FBS0UsSUFBSSxDQUFDLENBQUM7NEJBQzlDO3dCQUNKLEtBQUs5QixnQkFBZ0JHLEtBQUs7NEJBQ3RCLE1BQU0sSUFBSUEsTUFBTSxDQUFDLG1CQUFtQixFQUFFeUIsS0FBS0UsSUFBSSxDQUFDLENBQUM7d0JBQ3JEOzRCQUNJLE1BQU0sSUFBSTNCLE1BQU0sQ0FBQywwQkFBMEIsRUFBRSxJQUFJLENBQUNNLE9BQU8sQ0FBQyxDQUFDO29CQUNuRTtnQkFDSjtZQUNKO1FBQ0o7UUFDQSxPQUFPa0I7SUFDWDtJQUNBOzs7Ozs7S0FNQyxHQUNELGFBQWFILFVBQVU7UUFDbkIsSUFBSTtZQUNBLE1BQU0sRUFBRUYsT0FBTyxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNLHdIQUFtQjtZQUN0RCxNQUFNLEVBQUVGLE9BQU8sRUFBRSxHQUFHLE1BQU0sc0lBQTBCO1lBQ3BELE9BQU87Z0JBQUVBO2dCQUFTQztnQkFBU0M7WUFBUTtRQUN2QyxFQUNBLE9BQU9jLEdBQUc7WUFDTkYsUUFBUUcsS0FBSyxDQUFDRDtZQUNkLE1BQU0sSUFBSWxDLE1BQU0sQ0FBQywwSEFBMEgsRUFBRUwsaUVBQU1BLEdBQUcsK0NBQStDLENBQUM7UUFDMU07SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9mcy9kaXJlY3RvcnkuanM/YjExYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRFbnYgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgQmFzZURvY3VtZW50TG9hZGVyIH0gZnJvbSBcIi4uL2Jhc2UuanNcIjtcbi8vIFR5cGVTY3JpcHQgZW51bXMgYXJlIG5vdCB0cmVlLXNoYWtlYWJsZSwgc28gZG9pbmcgdGhpcyBpbnN0ZWFkXG4vLyBTZWUgaHR0cHM6Ly9iYXJnc3Rlbi5vcmcvanN0cy9lbnVtcy9cbmV4cG9ydCBjb25zdCBVbmtub3duSGFuZGxpbmcgPSB7XG4gICAgSWdub3JlOiBcImlnbm9yZVwiLFxuICAgIFdhcm46IFwid2FyblwiLFxuICAgIEVycm9yOiBcImVycm9yXCIsXG59O1xuLyoqXG4gKiBBIGRvY3VtZW50IGxvYWRlciB0aGF0IGxvYWRzIGRvY3VtZW50cyBmcm9tIGEgZGlyZWN0b3J5LiBJdCBleHRlbmRzIHRoZVxuICogYEJhc2VEb2N1bWVudExvYWRlcmAgY2xhc3MgYW5kIGltcGxlbWVudHMgdGhlIGBsb2FkKClgIG1ldGhvZC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKlxuICogY29uc3QgZGlyZWN0b3J5TG9hZGVyID0gbmV3IERpcmVjdG9yeUxvYWRlcihcbiAqICAgXCJzcmMvZG9jdW1lbnRfbG9hZGVycy9leGFtcGxlX2RhdGEvXCIsXG4gKiAgIHtcbiAqICAgICBcIi5wZGZcIjogKHBhdGg6IHN0cmluZykgPT4gbmV3IFBERkxvYWRlcihwYXRoKSxcbiAqICAgfSxcbiAqICk7XG4gKlxuICogY29uc3QgZG9jcyA9IGF3YWl0IGRpcmVjdG9yeUxvYWRlci5sb2FkKCk7XG4gKiBjb25zb2xlLmxvZyh7IGRvY3MgfSk7XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXJlY3RvcnlMb2FkZXIgZXh0ZW5kcyBCYXNlRG9jdW1lbnRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKGRpcmVjdG9yeVBhdGgsIGxvYWRlcnMsIHJlY3Vyc2l2ZSA9IHRydWUsIHVua25vd24gPSBVbmtub3duSGFuZGxpbmcuV2Fybikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXJlY3RvcnlQYXRoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBkaXJlY3RvcnlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsb2FkZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBsb2FkZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWN1cnNpdmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHJlY3Vyc2l2ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidW5rbm93blwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdW5rbm93blxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGxvYWRlcnMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGF0IGxlYXN0IG9uZSBsb2FkZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBleHRlbnNpb24gaW4gbG9hZGVycykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24obG9hZGVycywgZXh0ZW5zaW9uKSkge1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb25bMF0gIT09IFwiLlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXh0ZW5zaW9uIG11c3Qgc3RhcnQgd2l0aCBhIGRvdDogJHtleHRlbnNpb259YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBkb2N1bWVudHMgZnJvbSB0aGUgZGlyZWN0b3J5LiBJZiBhIGZpbGUgaXMgYSBkaXJlY3RvcnkgYW5kXG4gICAgICogYHJlY3Vyc2l2ZWAgaXMgYHRydWVgLCBpdCByZWN1cnNpdmVseSBsb2FkcyBkb2N1bWVudHMgZnJvbSB0aGVcbiAgICAgKiBzdWJkaXJlY3RvcnkuIElmIGEgZmlsZSBpcyBhIGZpbGUsIGl0IGNoZWNrcyBpZiB0aGVyZSBpcyBhXG4gICAgICogY29ycmVzcG9uZGluZyBsb2FkZXIgZnVuY3Rpb24gZm9yIHRoZSBmaWxlIGV4dGVuc2lvbiBpbiB0aGUgYGxvYWRlcnNgXG4gICAgICogbWFwcGluZy4gSWYgdGhlcmUgaXMsIGl0IGxvYWRzIHRoZSBkb2N1bWVudHMuIElmIHRoZXJlIGlzIG5vXG4gICAgICogY29ycmVzcG9uZGluZyBsb2FkZXIgZnVuY3Rpb24gYW5kIGB1bmtub3duYCBpcyBzZXQgdG8gYFdhcm5gLCBpdCBsb2dzIGFcbiAgICAgKiB3YXJuaW5nIG1lc3NhZ2UuIElmIGB1bmtub3duYCBpcyBzZXQgdG8gYEVycm9yYCwgaXQgdGhyb3dzIGFuIGVycm9yLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIGFycmF5IG9mIGxvYWRlZCBkb2N1bWVudHMuXG4gICAgICovXG4gICAgYXN5bmMgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgeyByZWFkZGlyLCBleHRuYW1lLCByZXNvbHZlIH0gPSBhd2FpdCBEaXJlY3RvcnlMb2FkZXIuaW1wb3J0cygpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlYWRkaXIodGhpcy5kaXJlY3RvcnlQYXRoLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcmVzb2x2ZSh0aGlzLmRpcmVjdG9yeVBhdGgsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICBpZiAoZmlsZS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjdXJzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBEaXJlY3RvcnlMb2FkZXIoZnVsbFBhdGgsIHRoaXMubG9hZGVycywgdGhpcy5yZWN1cnNpdmUsIHRoaXMudW5rbm93bik7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKC4uLihhd2FpdCBsb2FkZXIubG9hZCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSSdtIGF3YXJlIHNvbWUgdGhpbmdzIHdvbid0IGJlIGZpbGVzLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCB0aGV5IHdpbGwgYmUgY2F1Z2h0IGJ5IHRoZSBcInVua25vd25cIiBoYW5kbGluZyBiZWxvdy5cbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkZXJGYWN0b3J5ID0gdGhpcy5sb2FkZXJzW2V4dG5hbWUoZmlsZS5uYW1lKV07XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlckZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gbG9hZGVyRmFjdG9yeShmdWxsUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKC4uLihhd2FpdCBsb2FkZXIubG9hZCgpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMudW5rbm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBVbmtub3duSGFuZGxpbmcuSWdub3JlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBVbmtub3duSGFuZGxpbmcuV2FybjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVua25vd24gZmlsZSB0eXBlOiAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVW5rbm93bkhhbmRsaW5nLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBmaWxlIHR5cGU6ICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdW5rbm93biBoYW5kbGluZzogJHt0aGlzLnVua25vd259YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wb3J0cyB0aGUgbmVjZXNzYXJ5IGZ1bmN0aW9ucyBmcm9tIHRoZSBgbm9kZTpwYXRoYCBhbmRcbiAgICAgKiBgbm9kZTpmcy9wcm9taXNlc2AgbW9kdWxlcy4gSXQgaXMgdXNlZCB0byBkeW5hbWljYWxseSBpbXBvcnQgdGhlXG4gICAgICogZnVuY3Rpb25zIHdoZW4gbmVlZGVkLiBJZiB0aGUgaW1wb3J0IGZhaWxzLCBpdCB0aHJvd3MgYW4gZXJyb3JcbiAgICAgKiBpbmRpY2F0aW5nIHRoYXQgdGhlIG1vZHVsZXMgZmFpbGVkIHRvIGxvYWQuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGltcG9ydGVkIGZ1bmN0aW9ucy5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgaW1wb3J0cygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZXh0bmFtZSwgcmVzb2x2ZSB9ID0gYXdhaXQgaW1wb3J0KFwibm9kZTpwYXRoXCIpO1xuICAgICAgICAgICAgY29uc3QgeyByZWFkZGlyIH0gPSBhd2FpdCBpbXBvcnQoXCJub2RlOmZzL3Byb21pc2VzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHsgcmVhZGRpciwgZXh0bmFtZSwgcmVzb2x2ZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBmcy9wcm9taXNlcy4gRGlyZWN0b3J5TG9hZGVyIGF2YWlsYWJsZSBvbmx5IG9uIGVudmlyb25tZW50ICdub2RlJy4gSXQgYXBwZWFycyB5b3UgYXJlIHJ1bm5pbmcgZW52aXJvbm1lbnQgJyR7Z2V0RW52KCl9Jy4gU2VlIGh0dHBzOi8vPGxpbmsgdG8gZG9jcz4gZm9yIGFsdGVybmF0aXZlcy5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRFbnYiLCJCYXNlRG9jdW1lbnRMb2FkZXIiLCJVbmtub3duSGFuZGxpbmciLCJJZ25vcmUiLCJXYXJuIiwiRXJyb3IiLCJEaXJlY3RvcnlMb2FkZXIiLCJjb25zdHJ1Y3RvciIsImRpcmVjdG9yeVBhdGgiLCJsb2FkZXJzIiwicmVjdXJzaXZlIiwidW5rbm93biIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJrZXlzIiwibGVuZ3RoIiwiZXh0ZW5zaW9uIiwiaGFzT3duIiwibG9hZCIsInJlYWRkaXIiLCJleHRuYW1lIiwicmVzb2x2ZSIsImltcG9ydHMiLCJmaWxlcyIsIndpdGhGaWxlVHlwZXMiLCJkb2N1bWVudHMiLCJmaWxlIiwiZnVsbFBhdGgiLCJuYW1lIiwiaXNEaXJlY3RvcnkiLCJsb2FkZXIiLCJwdXNoIiwibG9hZGVyRmFjdG9yeSIsImNvbnNvbGUiLCJ3YXJuIiwiZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/dist/document_loaders/fs/directory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/dist/document_loaders/fs/unstructured.js":
/*!*************************************************************************!*\
  !*** ./node_modules/langchain/dist/document_loaders/fs/unstructured.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnknownHandling: () => (/* reexport safe */ _directory_js__WEBPACK_IMPORTED_MODULE_2__.UnknownHandling),\n/* harmony export */   UnstructuredDirectoryLoader: () => (/* binding */ UnstructuredDirectoryLoader),\n/* harmony export */   UnstructuredLoader: () => (/* binding */ UnstructuredLoader)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _directory_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./directory.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/fs/directory.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../base.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/base.js\");\n\n\n\n\nconst UNSTRUCTURED_API_FILETYPES = [\n    \".txt\",\n    \".text\",\n    \".pdf\",\n    \".docx\",\n    \".doc\",\n    \".jpg\",\n    \".jpeg\",\n    \".eml\",\n    \".html\",\n    \".htm\",\n    \".md\",\n    \".pptx\",\n    \".ppt\",\n    \".msg\",\n    \".rtf\",\n    \".xlsx\",\n    \".xls\",\n    \".odt\",\n    \".epub\"\n];\n/**\n * A document loader that uses the Unstructured API to load unstructured\n * documents. It supports both the new syntax with options object and the\n * legacy syntax for backward compatibility. The load() method sends a\n * partitioning request to the Unstructured API and retrieves the\n * partitioned elements. It creates a Document instance for each element\n * and returns an array of Document instances.\n */ class UnstructuredLoader extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseDocumentLoader {\n    constructor(filePathOrLegacyApiUrl, optionsOrLegacyFilePath = {}){\n        super();\n        Object.defineProperty(this, \"filePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"https://api.unstructured.io/general/v0/general\"\n        });\n        Object.defineProperty(this, \"apiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"strategy\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"hi_res\"\n        });\n        Object.defineProperty(this, \"encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ocrLanguages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"coordinates\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"pdfInferTableStructure\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"xmlKeepTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"skipInferTableTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"hiResModelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includePageBreaks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"chunkingStrategy\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"multiPageSections\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"combineUnderNChars\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"newAfterNChars\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxCharacters\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // Temporary shim to avoid breaking existing users\n        // Remove when API keys are enforced by Unstructured and existing code will break anyway\n        const isLegacySyntax = typeof optionsOrLegacyFilePath === \"string\";\n        if (isLegacySyntax) {\n            this.filePath = optionsOrLegacyFilePath;\n            this.apiUrl = filePathOrLegacyApiUrl;\n        } else {\n            this.filePath = filePathOrLegacyApiUrl;\n            const options = optionsOrLegacyFilePath;\n            this.apiKey = options.apiKey;\n            this.apiUrl = options.apiUrl ?? this.apiUrl;\n            this.strategy = options.strategy ?? this.strategy;\n            this.encoding = options.encoding;\n            this.ocrLanguages = options.ocrLanguages ?? this.ocrLanguages;\n            this.coordinates = options.coordinates;\n            this.pdfInferTableStructure = options.pdfInferTableStructure;\n            this.xmlKeepTags = options.xmlKeepTags;\n            this.skipInferTableTypes = options.skipInferTableTypes;\n            this.hiResModelName = options.hiResModelName;\n            this.includePageBreaks = options.includePageBreaks;\n            this.chunkingStrategy = options.chunkingStrategy;\n            this.multiPageSections = options.multiPageSections;\n            this.combineUnderNChars = options.combineUnderNChars;\n            this.newAfterNChars = options.newAfterNChars;\n            this.maxCharacters = options.maxCharacters;\n        }\n    }\n    async _partition() {\n        const { readFile, basename } = await this.imports();\n        const buffer = await readFile(this.filePath);\n        const fileName = basename(this.filePath);\n        // I'm aware this reads the file into memory first, but we have lots of work\n        // to do on then consuming Documents in a streaming fashion anyway, so not\n        // worried about this for now.\n        const formData = new FormData();\n        formData.append(\"files\", new Blob([\n            buffer\n        ]), fileName);\n        formData.append(\"strategy\", this.strategy);\n        this.ocrLanguages.forEach((language)=>{\n            formData.append(\"ocr_languages\", language);\n        });\n        if (this.encoding) {\n            formData.append(\"encoding\", this.encoding);\n        }\n        if (this.coordinates === true) {\n            formData.append(\"coordinates\", \"true\");\n        }\n        if (this.pdfInferTableStructure === true) {\n            formData.append(\"pdf_infer_table_structure\", \"true\");\n        }\n        if (this.xmlKeepTags === true) {\n            formData.append(\"xml_keep_tags\", \"true\");\n        }\n        if (this.skipInferTableTypes) {\n            formData.append(\"skip_infer_table_types\", JSON.stringify(this.skipInferTableTypes));\n        }\n        if (this.hiResModelName) {\n            formData.append(\"hi_res_model_name\", this.hiResModelName);\n        }\n        if (this.includePageBreaks) {\n            formData.append(\"include_page_breaks\", \"true\");\n        }\n        if (this.chunkingStrategy) {\n            formData.append(\"chunking_strategy\", this.chunkingStrategy);\n        }\n        if (this.multiPageSections !== undefined) {\n            formData.append(\"multipage_sections\", this.multiPageSections ? \"true\" : \"false\");\n        }\n        if (this.combineUnderNChars !== undefined) {\n            formData.append(\"combine_under_n_chars\", String(this.combineUnderNChars));\n        }\n        if (this.newAfterNChars !== undefined) {\n            formData.append(\"new_after_n_chars\", String(this.newAfterNChars));\n        }\n        if (this.maxCharacters !== undefined) {\n            formData.append(\"max_characters\", String(this.maxCharacters));\n        }\n        const headers = {\n            \"UNSTRUCTURED-API-KEY\": this.apiKey ?? \"\"\n        };\n        const response = await fetch(this.apiUrl, {\n            method: \"POST\",\n            body: formData,\n            headers\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to partition file ${this.filePath} with error ${response.status} and message ${await response.text()}`);\n        }\n        const elements = await response.json();\n        if (!Array.isArray(elements)) {\n            throw new Error(`Expected partitioning request to return an array, but got ${elements}`);\n        }\n        return elements.filter((el)=>typeof el.text === \"string\");\n    }\n    async load() {\n        const elements = await this._partition();\n        const documents = [];\n        for (const element of elements){\n            const { metadata, text } = element;\n            if (typeof text === \"string\") {\n                documents.push(new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__.Document({\n                    pageContent: text,\n                    metadata: {\n                        ...metadata,\n                        category: element.type\n                    }\n                }));\n            }\n        }\n        return documents;\n    }\n    async imports() {\n        try {\n            const { readFile } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:fs/promises */ \"node:fs/promises\", 19));\n            const { basename } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node:path */ \"node:path\", 19));\n            return {\n                readFile,\n                basename\n            };\n        } catch (e) {\n            console.error(e);\n            throw new Error(`Failed to load fs/promises. TextLoader available only on environment 'node'. It appears you are running environment '${(0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnv)()}'. See https://<link to docs> for alternatives.`);\n        }\n    }\n}\n/**\n * A document loader that loads unstructured documents from a directory\n * using the UnstructuredLoader. It creates a UnstructuredLoader instance\n * for each supported file type and passes it to the DirectoryLoader\n * constructor.\n * @example\n * ```typescript\n * const loader = new UnstructuredDirectoryLoader(\"path/to/directory\", {\n *   apiKey: \"MY_API_KEY\",\n * });\n * const docs = await loader.load();\n * ```\n */ class UnstructuredDirectoryLoader extends _directory_js__WEBPACK_IMPORTED_MODULE_2__.DirectoryLoader {\n    constructor(directoryPathOrLegacyApiUrl, optionsOrLegacyDirectoryPath, legacyOptionRecursive = true, legacyOptionUnknown = _directory_js__WEBPACK_IMPORTED_MODULE_2__.UnknownHandling.Warn){\n        let directoryPath;\n        let options;\n        // Temporary shim to avoid breaking existing users\n        // Remove when API keys are enforced by Unstructured and existing code will break anyway\n        const isLegacySyntax = typeof optionsOrLegacyDirectoryPath === \"string\";\n        if (isLegacySyntax) {\n            directoryPath = optionsOrLegacyDirectoryPath;\n            options = {\n                apiUrl: directoryPathOrLegacyApiUrl,\n                recursive: legacyOptionRecursive,\n                unknown: legacyOptionUnknown\n            };\n        } else {\n            directoryPath = directoryPathOrLegacyApiUrl;\n            options = optionsOrLegacyDirectoryPath;\n        }\n        const loader = (p)=>new UnstructuredLoader(p, options);\n        const loaders = UNSTRUCTURED_API_FILETYPES.reduce((loadersObject, filetype)=>{\n            // eslint-disable-next-line no-param-reassign\n            loadersObject[filetype] = loader;\n            return loadersObject;\n        }, {});\n        super(directoryPath, loaders, options.recursive, options.unknown);\n    }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9mcy91bnN0cnVjdHVyZWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxRDtBQUNGO0FBQ2dCO0FBQ25CO0FBQ2hELE1BQU1LLDZCQUE2QjtJQUMvQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0Q7Ozs7Ozs7Q0FPQyxHQUNNLE1BQU1DLDJCQUEyQkYsd0RBQWtCQTtJQUN0REcsWUFBWUMsc0JBQXNCLEVBQUVDLDBCQUEwQixDQUFDLENBQUMsQ0FBRTtRQUM5RCxLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEVB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ck07SUFDSjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7OztDQVlDLEdBQ00sTUFBTTRFLG9DQUFvQzNFLDBEQUFlQTtJQUM1REssWUFBWXVFLDJCQUEyQixFQUFFQyw0QkFBNEIsRUFBRUMsd0JBQXdCLElBQUksRUFBRUMsc0JBQXNCOUUsMERBQWVBLENBQUMrRSxJQUFJLENBQUU7UUFDN0ksSUFBSUM7UUFDSixJQUFJaEU7UUFDSixrREFBa0Q7UUFDbEQsd0ZBQXdGO1FBQ3hGLE1BQU1ILGlCQUFpQixPQUFPK0QsaUNBQWlDO1FBQy9ELElBQUkvRCxnQkFBZ0I7WUFDaEJtRSxnQkFBZ0JKO1lBQ2hCNUQsVUFBVTtnQkFDTkQsUUFBUTREO2dCQUNSTSxXQUFXSjtnQkFDWEssU0FBU0o7WUFDYjtRQUNKLE9BQ0s7WUFDREUsZ0JBQWdCTDtZQUNoQjNELFVBQVU0RDtRQUNkO1FBQ0EsTUFBTU8sU0FBUyxDQUFDQyxJQUFNLElBQUlqRixtQkFBbUJpRixHQUFHcEU7UUFDaEQsTUFBTXFFLFVBQVVuRiwyQkFBMkJvRixNQUFNLENBQUMsQ0FBQ0MsZUFBZUM7WUFDOUQsNkNBQTZDO1lBQzdDRCxhQUFhLENBQUNDLFNBQVMsR0FBR0w7WUFDMUIsT0FBT0k7UUFDWCxHQUFHLENBQUM7UUFDSixLQUFLLENBQUNQLGVBQWVLLFNBQVNyRSxRQUFRaUUsU0FBUyxFQUFFakUsUUFBUWtFLE9BQU87SUFDcEU7QUFDSjtBQUMyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kaXN0L2RvY3VtZW50X2xvYWRlcnMvZnMvdW5zdHJ1Y3R1cmVkLmpzPzc2OGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50c1wiO1xuaW1wb3J0IHsgZ2V0RW52IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IERpcmVjdG9yeUxvYWRlciwgVW5rbm93bkhhbmRsaW5nLCB9IGZyb20gXCIuL2RpcmVjdG9yeS5qc1wiO1xuaW1wb3J0IHsgQmFzZURvY3VtZW50TG9hZGVyIH0gZnJvbSBcIi4uL2Jhc2UuanNcIjtcbmNvbnN0IFVOU1RSVUNUVVJFRF9BUElfRklMRVRZUEVTID0gW1xuICAgIFwiLnR4dFwiLFxuICAgIFwiLnRleHRcIixcbiAgICBcIi5wZGZcIixcbiAgICBcIi5kb2N4XCIsXG4gICAgXCIuZG9jXCIsXG4gICAgXCIuanBnXCIsXG4gICAgXCIuanBlZ1wiLFxuICAgIFwiLmVtbFwiLFxuICAgIFwiLmh0bWxcIixcbiAgICBcIi5odG1cIixcbiAgICBcIi5tZFwiLFxuICAgIFwiLnBwdHhcIixcbiAgICBcIi5wcHRcIixcbiAgICBcIi5tc2dcIixcbiAgICBcIi5ydGZcIixcbiAgICBcIi54bHN4XCIsXG4gICAgXCIueGxzXCIsXG4gICAgXCIub2R0XCIsXG4gICAgXCIuZXB1YlwiLFxuXTtcbi8qKlxuICogQSBkb2N1bWVudCBsb2FkZXIgdGhhdCB1c2VzIHRoZSBVbnN0cnVjdHVyZWQgQVBJIHRvIGxvYWQgdW5zdHJ1Y3R1cmVkXG4gKiBkb2N1bWVudHMuIEl0IHN1cHBvcnRzIGJvdGggdGhlIG5ldyBzeW50YXggd2l0aCBvcHRpb25zIG9iamVjdCBhbmQgdGhlXG4gKiBsZWdhY3kgc3ludGF4IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LiBUaGUgbG9hZCgpIG1ldGhvZCBzZW5kcyBhXG4gKiBwYXJ0aXRpb25pbmcgcmVxdWVzdCB0byB0aGUgVW5zdHJ1Y3R1cmVkIEFQSSBhbmQgcmV0cmlldmVzIHRoZVxuICogcGFydGl0aW9uZWQgZWxlbWVudHMuIEl0IGNyZWF0ZXMgYSBEb2N1bWVudCBpbnN0YW5jZSBmb3IgZWFjaCBlbGVtZW50XG4gKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBEb2N1bWVudCBpbnN0YW5jZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBVbnN0cnVjdHVyZWRMb2FkZXIgZXh0ZW5kcyBCYXNlRG9jdW1lbnRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpbGVQYXRoT3JMZWdhY3lBcGlVcmwsIG9wdGlvbnNPckxlZ2FjeUZpbGVQYXRoID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlsZVBhdGhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXBpVXJsXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImh0dHBzOi8vYXBpLnVuc3RydWN0dXJlZC5pby9nZW5lcmFsL3YwL2dlbmVyYWxcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmF0ZWd5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImhpX3Jlc1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmNvZGluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvY3JMYW5ndWFnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb29yZGluYXRlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwZGZJbmZlclRhYmxlU3RydWN0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInhtbEtlZXBUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNraXBJbmZlclRhYmxlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGlSZXNNb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVBhZ2VCcmVha3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2h1bmtpbmdTdHJhdGVneVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtdWx0aVBhZ2VTZWN0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb21iaW5lVW5kZXJOQ2hhcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmV3QWZ0ZXJOQ2hhcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4Q2hhcmFjdGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUZW1wb3Jhcnkgc2hpbSB0byBhdm9pZCBicmVha2luZyBleGlzdGluZyB1c2Vyc1xuICAgICAgICAvLyBSZW1vdmUgd2hlbiBBUEkga2V5cyBhcmUgZW5mb3JjZWQgYnkgVW5zdHJ1Y3R1cmVkIGFuZCBleGlzdGluZyBjb2RlIHdpbGwgYnJlYWsgYW55d2F5XG4gICAgICAgIGNvbnN0IGlzTGVnYWN5U3ludGF4ID0gdHlwZW9mIG9wdGlvbnNPckxlZ2FjeUZpbGVQYXRoID09PSBcInN0cmluZ1wiO1xuICAgICAgICBpZiAoaXNMZWdhY3lTeW50YXgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSBvcHRpb25zT3JMZWdhY3lGaWxlUGF0aDtcbiAgICAgICAgICAgIHRoaXMuYXBpVXJsID0gZmlsZVBhdGhPckxlZ2FjeUFwaVVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aE9yTGVnYWN5QXBpVXJsO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbnNPckxlZ2FjeUZpbGVQYXRoO1xuICAgICAgICAgICAgdGhpcy5hcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICAgICAgICAgIHRoaXMuYXBpVXJsID0gb3B0aW9ucy5hcGlVcmwgPz8gdGhpcy5hcGlVcmw7XG4gICAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gb3B0aW9ucy5zdHJhdGVneSA/PyB0aGlzLnN0cmF0ZWd5O1xuICAgICAgICAgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgICAgICB0aGlzLm9jckxhbmd1YWdlcyA9IG9wdGlvbnMub2NyTGFuZ3VhZ2VzID8/IHRoaXMub2NyTGFuZ3VhZ2VzO1xuICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlcyA9IG9wdGlvbnMuY29vcmRpbmF0ZXM7XG4gICAgICAgICAgICB0aGlzLnBkZkluZmVyVGFibGVTdHJ1Y3R1cmUgPSBvcHRpb25zLnBkZkluZmVyVGFibGVTdHJ1Y3R1cmU7XG4gICAgICAgICAgICB0aGlzLnhtbEtlZXBUYWdzID0gb3B0aW9ucy54bWxLZWVwVGFncztcbiAgICAgICAgICAgIHRoaXMuc2tpcEluZmVyVGFibGVUeXBlcyA9IG9wdGlvbnMuc2tpcEluZmVyVGFibGVUeXBlcztcbiAgICAgICAgICAgIHRoaXMuaGlSZXNNb2RlbE5hbWUgPSBvcHRpb25zLmhpUmVzTW9kZWxOYW1lO1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlUGFnZUJyZWFrcyA9IG9wdGlvbnMuaW5jbHVkZVBhZ2VCcmVha3M7XG4gICAgICAgICAgICB0aGlzLmNodW5raW5nU3RyYXRlZ3kgPSBvcHRpb25zLmNodW5raW5nU3RyYXRlZ3k7XG4gICAgICAgICAgICB0aGlzLm11bHRpUGFnZVNlY3Rpb25zID0gb3B0aW9ucy5tdWx0aVBhZ2VTZWN0aW9ucztcbiAgICAgICAgICAgIHRoaXMuY29tYmluZVVuZGVyTkNoYXJzID0gb3B0aW9ucy5jb21iaW5lVW5kZXJOQ2hhcnM7XG4gICAgICAgICAgICB0aGlzLm5ld0FmdGVyTkNoYXJzID0gb3B0aW9ucy5uZXdBZnRlck5DaGFycztcbiAgICAgICAgICAgIHRoaXMubWF4Q2hhcmFjdGVycyA9IG9wdGlvbnMubWF4Q2hhcmFjdGVycztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfcGFydGl0aW9uKCkge1xuICAgICAgICBjb25zdCB7IHJlYWRGaWxlLCBiYXNlbmFtZSB9ID0gYXdhaXQgdGhpcy5pbXBvcnRzKCk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHJlYWRGaWxlKHRoaXMuZmlsZVBhdGgpO1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGJhc2VuYW1lKHRoaXMuZmlsZVBhdGgpO1xuICAgICAgICAvLyBJJ20gYXdhcmUgdGhpcyByZWFkcyB0aGUgZmlsZSBpbnRvIG1lbW9yeSBmaXJzdCwgYnV0IHdlIGhhdmUgbG90cyBvZiB3b3JrXG4gICAgICAgIC8vIHRvIGRvIG9uIHRoZW4gY29uc3VtaW5nIERvY3VtZW50cyBpbiBhIHN0cmVhbWluZyBmYXNoaW9uIGFueXdheSwgc28gbm90XG4gICAgICAgIC8vIHdvcnJpZWQgYWJvdXQgdGhpcyBmb3Igbm93LlxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlc1wiLCBuZXcgQmxvYihbYnVmZmVyXSksIGZpbGVOYW1lKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwic3RyYXRlZ3lcIiwgdGhpcy5zdHJhdGVneSk7XG4gICAgICAgIHRoaXMub2NyTGFuZ3VhZ2VzLmZvckVhY2goKGxhbmd1YWdlKSA9PiB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJvY3JfbGFuZ3VhZ2VzXCIsIGxhbmd1YWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmVuY29kaW5nKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJlbmNvZGluZ1wiLCB0aGlzLmVuY29kaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb29yZGluYXRlcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY29vcmRpbmF0ZXNcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBkZkluZmVyVGFibGVTdHJ1Y3R1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcInBkZl9pbmZlcl90YWJsZV9zdHJ1Y3R1cmVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnhtbEtlZXBUYWdzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJ4bWxfa2VlcF90YWdzXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5za2lwSW5mZXJUYWJsZVR5cGVzKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJza2lwX2luZmVyX3RhYmxlX3R5cGVzXCIsIEpTT04uc3RyaW5naWZ5KHRoaXMuc2tpcEluZmVyVGFibGVUeXBlcykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhpUmVzTW9kZWxOYW1lKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJoaV9yZXNfbW9kZWxfbmFtZVwiLCB0aGlzLmhpUmVzTW9kZWxOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbmNsdWRlUGFnZUJyZWFrcykge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiaW5jbHVkZV9wYWdlX2JyZWFrc1wiLCBcInRydWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2h1bmtpbmdTdHJhdGVneSkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY2h1bmtpbmdfc3RyYXRlZ3lcIiwgdGhpcy5jaHVua2luZ1N0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tdWx0aVBhZ2VTZWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJtdWx0aXBhZ2Vfc2VjdGlvbnNcIiwgdGhpcy5tdWx0aVBhZ2VTZWN0aW9ucyA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb21iaW5lVW5kZXJOQ2hhcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY29tYmluZV91bmRlcl9uX2NoYXJzXCIsIFN0cmluZyh0aGlzLmNvbWJpbmVVbmRlck5DaGFycykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm5ld0FmdGVyTkNoYXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChcIm5ld19hZnRlcl9uX2NoYXJzXCIsIFN0cmluZyh0aGlzLm5ld0FmdGVyTkNoYXJzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4Q2hhcmFjdGVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJtYXhfY2hhcmFjdGVyc1wiLCBTdHJpbmcodGhpcy5tYXhDaGFyYWN0ZXJzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgIFwiVU5TVFJVQ1RVUkVELUFQSS1LRVlcIjogdGhpcy5hcGlLZXkgPz8gXCJcIixcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmFwaVVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnRpdGlvbiBmaWxlICR7dGhpcy5maWxlUGF0aH0gd2l0aCBlcnJvciAke3Jlc3BvbnNlLnN0YXR1c30gYW5kIG1lc3NhZ2UgJHthd2FpdCByZXNwb25zZS50ZXh0KCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlbGVtZW50cykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgcGFydGl0aW9uaW5nIHJlcXVlc3QgdG8gcmV0dXJuIGFuIGFycmF5LCBidXQgZ290ICR7ZWxlbWVudHN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzLmZpbHRlcigoZWwpID0+IHR5cGVvZiBlbC50ZXh0ID09PSBcInN0cmluZ1wiKTtcbiAgICB9XG4gICAgYXN5bmMgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBhd2FpdCB0aGlzLl9wYXJ0aXRpb24oKTtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgeyBtZXRhZGF0YSwgdGV4dCB9ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKG5ldyBEb2N1bWVudCh7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VDb250ZW50OiB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogZWxlbWVudC50eXBlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnRzO1xuICAgIH1cbiAgICBhc3luYyBpbXBvcnRzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyByZWFkRmlsZSB9ID0gYXdhaXQgaW1wb3J0KFwibm9kZTpmcy9wcm9taXNlc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IHsgYmFzZW5hbWUgfSA9IGF3YWl0IGltcG9ydChcIm5vZGU6cGF0aFwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IHJlYWRGaWxlLCBiYXNlbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCBmcy9wcm9taXNlcy4gVGV4dExvYWRlciBhdmFpbGFibGUgb25seSBvbiBlbnZpcm9ubWVudCAnbm9kZScuIEl0IGFwcGVhcnMgeW91IGFyZSBydW5uaW5nIGVudmlyb25tZW50ICcke2dldEVudigpfScuIFNlZSBodHRwczovLzxsaW5rIHRvIGRvY3M+IGZvciBhbHRlcm5hdGl2ZXMuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEEgZG9jdW1lbnQgbG9hZGVyIHRoYXQgbG9hZHMgdW5zdHJ1Y3R1cmVkIGRvY3VtZW50cyBmcm9tIGEgZGlyZWN0b3J5XG4gKiB1c2luZyB0aGUgVW5zdHJ1Y3R1cmVkTG9hZGVyLiBJdCBjcmVhdGVzIGEgVW5zdHJ1Y3R1cmVkTG9hZGVyIGluc3RhbmNlXG4gKiBmb3IgZWFjaCBzdXBwb3J0ZWQgZmlsZSB0eXBlIGFuZCBwYXNzZXMgaXQgdG8gdGhlIERpcmVjdG9yeUxvYWRlclxuICogY29uc3RydWN0b3IuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbG9hZGVyID0gbmV3IFVuc3RydWN0dXJlZERpcmVjdG9yeUxvYWRlcihcInBhdGgvdG8vZGlyZWN0b3J5XCIsIHtcbiAqICAgYXBpS2V5OiBcIk1ZX0FQSV9LRVlcIixcbiAqIH0pO1xuICogY29uc3QgZG9jcyA9IGF3YWl0IGxvYWRlci5sb2FkKCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFVuc3RydWN0dXJlZERpcmVjdG9yeUxvYWRlciBleHRlbmRzIERpcmVjdG9yeUxvYWRlciB7XG4gICAgY29uc3RydWN0b3IoZGlyZWN0b3J5UGF0aE9yTGVnYWN5QXBpVXJsLCBvcHRpb25zT3JMZWdhY3lEaXJlY3RvcnlQYXRoLCBsZWdhY3lPcHRpb25SZWN1cnNpdmUgPSB0cnVlLCBsZWdhY3lPcHRpb25Vbmtub3duID0gVW5rbm93bkhhbmRsaW5nLldhcm4pIHtcbiAgICAgICAgbGV0IGRpcmVjdG9yeVBhdGg7XG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICAvLyBUZW1wb3Jhcnkgc2hpbSB0byBhdm9pZCBicmVha2luZyBleGlzdGluZyB1c2Vyc1xuICAgICAgICAvLyBSZW1vdmUgd2hlbiBBUEkga2V5cyBhcmUgZW5mb3JjZWQgYnkgVW5zdHJ1Y3R1cmVkIGFuZCBleGlzdGluZyBjb2RlIHdpbGwgYnJlYWsgYW55d2F5XG4gICAgICAgIGNvbnN0IGlzTGVnYWN5U3ludGF4ID0gdHlwZW9mIG9wdGlvbnNPckxlZ2FjeURpcmVjdG9yeVBhdGggPT09IFwic3RyaW5nXCI7XG4gICAgICAgIGlmIChpc0xlZ2FjeVN5bnRheCkge1xuICAgICAgICAgICAgZGlyZWN0b3J5UGF0aCA9IG9wdGlvbnNPckxlZ2FjeURpcmVjdG9yeVBhdGg7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGFwaVVybDogZGlyZWN0b3J5UGF0aE9yTGVnYWN5QXBpVXJsLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZTogbGVnYWN5T3B0aW9uUmVjdXJzaXZlLFxuICAgICAgICAgICAgICAgIHVua25vd246IGxlZ2FjeU9wdGlvblVua25vd24sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlyZWN0b3J5UGF0aCA9IGRpcmVjdG9yeVBhdGhPckxlZ2FjeUFwaVVybDtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zT3JMZWdhY3lEaXJlY3RvcnlQYXRoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvYWRlciA9IChwKSA9PiBuZXcgVW5zdHJ1Y3R1cmVkTG9hZGVyKHAsIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBsb2FkZXJzID0gVU5TVFJVQ1RVUkVEX0FQSV9GSUxFVFlQRVMucmVkdWNlKChsb2FkZXJzT2JqZWN0LCBmaWxldHlwZSkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBsb2FkZXJzT2JqZWN0W2ZpbGV0eXBlXSA9IGxvYWRlcjtcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJzT2JqZWN0O1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIHN1cGVyKGRpcmVjdG9yeVBhdGgsIGxvYWRlcnMsIG9wdGlvbnMucmVjdXJzaXZlLCBvcHRpb25zLnVua25vd24pO1xuICAgIH1cbn1cbmV4cG9ydCB7IFVua25vd25IYW5kbGluZyB9O1xuIl0sIm5hbWVzIjpbIkRvY3VtZW50IiwiZ2V0RW52IiwiRGlyZWN0b3J5TG9hZGVyIiwiVW5rbm93bkhhbmRsaW5nIiwiQmFzZURvY3VtZW50TG9hZGVyIiwiVU5TVFJVQ1RVUkVEX0FQSV9GSUxFVFlQRVMiLCJVbnN0cnVjdHVyZWRMb2FkZXIiLCJjb25zdHJ1Y3RvciIsImZpbGVQYXRoT3JMZWdhY3lBcGlVcmwiLCJvcHRpb25zT3JMZWdhY3lGaWxlUGF0aCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpc0xlZ2FjeVN5bnRheCIsImZpbGVQYXRoIiwiYXBpVXJsIiwib3B0aW9ucyIsImFwaUtleSIsInN0cmF0ZWd5IiwiZW5jb2RpbmciLCJvY3JMYW5ndWFnZXMiLCJjb29yZGluYXRlcyIsInBkZkluZmVyVGFibGVTdHJ1Y3R1cmUiLCJ4bWxLZWVwVGFncyIsInNraXBJbmZlclRhYmxlVHlwZXMiLCJoaVJlc01vZGVsTmFtZSIsImluY2x1ZGVQYWdlQnJlYWtzIiwiY2h1bmtpbmdTdHJhdGVneSIsIm11bHRpUGFnZVNlY3Rpb25zIiwiY29tYmluZVVuZGVyTkNoYXJzIiwibmV3QWZ0ZXJOQ2hhcnMiLCJtYXhDaGFyYWN0ZXJzIiwiX3BhcnRpdGlvbiIsInJlYWRGaWxlIiwiYmFzZW5hbWUiLCJpbXBvcnRzIiwiYnVmZmVyIiwiZmlsZU5hbWUiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQmxvYiIsImZvckVhY2giLCJsYW5ndWFnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJvayIsIkVycm9yIiwic3RhdHVzIiwidGV4dCIsImVsZW1lbnRzIiwianNvbiIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsImVsIiwibG9hZCIsImRvY3VtZW50cyIsImVsZW1lbnQiLCJtZXRhZGF0YSIsInB1c2giLCJwYWdlQ29udGVudCIsImNhdGVnb3J5IiwidHlwZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJVbnN0cnVjdHVyZWREaXJlY3RvcnlMb2FkZXIiLCJkaXJlY3RvcnlQYXRoT3JMZWdhY3lBcGlVcmwiLCJvcHRpb25zT3JMZWdhY3lEaXJlY3RvcnlQYXRoIiwibGVnYWN5T3B0aW9uUmVjdXJzaXZlIiwibGVnYWN5T3B0aW9uVW5rbm93biIsIldhcm4iLCJkaXJlY3RvcnlQYXRoIiwicmVjdXJzaXZlIiwidW5rbm93biIsImxvYWRlciIsInAiLCJsb2FkZXJzIiwicmVkdWNlIiwibG9hZGVyc09iamVjdCIsImZpbGV0eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/dist/document_loaders/fs/unstructured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/dist/text_splitter.js":
/*!******************************************************!*\
  !*** ./node_modules/langchain/dist/text_splitter.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterTextSplitter: () => (/* binding */ CharacterTextSplitter),\n/* harmony export */   LatexTextSplitter: () => (/* binding */ LatexTextSplitter),\n/* harmony export */   MarkdownTextSplitter: () => (/* binding */ MarkdownTextSplitter),\n/* harmony export */   RecursiveCharacterTextSplitter: () => (/* binding */ RecursiveCharacterTextSplitter),\n/* harmony export */   SupportedTextSplitterLanguages: () => (/* binding */ SupportedTextSplitterLanguages),\n/* harmony export */   TextSplitter: () => (/* binding */ TextSplitter),\n/* harmony export */   TokenTextSplitter: () => (/* binding */ TokenTextSplitter)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/documents */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/documents.js\");\n/* harmony import */ var _langchain_core_utils_tiktoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/tiktoken */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/tiktoken.js\");\n\n\nclass TextSplitter extends _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"document_transformers\",\n                \"text_splitters\"\n            ]\n        });\n        Object.defineProperty(this, \"chunkSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1000\n        });\n        Object.defineProperty(this, \"chunkOverlap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 200\n        });\n        Object.defineProperty(this, \"keepSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lengthFunction\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chunkSize = fields?.chunkSize ?? this.chunkSize;\n        this.chunkOverlap = fields?.chunkOverlap ?? this.chunkOverlap;\n        this.keepSeparator = fields?.keepSeparator ?? this.keepSeparator;\n        this.lengthFunction = fields?.lengthFunction ?? ((text)=>text.length);\n        if (this.chunkOverlap >= this.chunkSize) {\n            throw new Error(\"Cannot have chunkOverlap >= chunkSize\");\n        }\n    }\n    async transformDocuments(documents, chunkHeaderOptions = {}) {\n        return this.splitDocuments(documents, chunkHeaderOptions);\n    }\n    splitOnSeparator(text, separator) {\n        let splits;\n        if (separator) {\n            if (this.keepSeparator) {\n                const regexEscapedSeparator = separator.replace(/[/\\-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n                splits = text.split(new RegExp(`(?=${regexEscapedSeparator})`));\n            } else {\n                splits = text.split(separator);\n            }\n        } else {\n            splits = text.split(\"\");\n        }\n        return splits.filter((s)=>s !== \"\");\n    }\n    async createDocuments(texts, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    metadatas = [], chunkHeaderOptions = {}) {\n        // if no metadata is provided, we create an empty one for each text\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const _metadatas = metadatas.length > 0 ? metadatas : [\n            ...Array(texts.length)\n        ].map(()=>({}));\n        const { chunkHeader = \"\", chunkOverlapHeader = \"(cont'd) \", appendChunkOverlapHeader = false } = chunkHeaderOptions;\n        const documents = new Array();\n        for(let i = 0; i < texts.length; i += 1){\n            const text = texts[i];\n            let lineCounterIndex = 1;\n            let prevChunk = null;\n            let indexPrevChunk = -1;\n            for (const chunk of (await this.splitText(text))){\n                let pageContent = chunkHeader;\n                // we need to count the \\n that are in the text before getting removed by the splitting\n                const indexChunk = text.indexOf(chunk, indexPrevChunk + 1);\n                if (prevChunk === null) {\n                    const newLinesBeforeFirstChunk = this.numberOfNewLines(text, 0, indexChunk);\n                    lineCounterIndex += newLinesBeforeFirstChunk;\n                } else {\n                    const indexEndPrevChunk = indexPrevChunk + await this.lengthFunction(prevChunk);\n                    if (indexEndPrevChunk < indexChunk) {\n                        const numberOfIntermediateNewLines = this.numberOfNewLines(text, indexEndPrevChunk, indexChunk);\n                        lineCounterIndex += numberOfIntermediateNewLines;\n                    } else if (indexEndPrevChunk > indexChunk) {\n                        const numberOfIntermediateNewLines = this.numberOfNewLines(text, indexChunk, indexEndPrevChunk);\n                        lineCounterIndex -= numberOfIntermediateNewLines;\n                    }\n                    if (appendChunkOverlapHeader) {\n                        pageContent += chunkOverlapHeader;\n                    }\n                }\n                const newLinesCount = this.numberOfNewLines(chunk);\n                const loc = _metadatas[i].loc && typeof _metadatas[i].loc === \"object\" ? {\n                    ..._metadatas[i].loc\n                } : {};\n                loc.lines = {\n                    from: lineCounterIndex,\n                    to: lineCounterIndex + newLinesCount\n                };\n                const metadataWithLinesNumber = {\n                    ..._metadatas[i],\n                    loc\n                };\n                pageContent += chunk;\n                documents.push(new _langchain_core_documents__WEBPACK_IMPORTED_MODULE_0__.Document({\n                    pageContent,\n                    metadata: metadataWithLinesNumber\n                }));\n                lineCounterIndex += newLinesCount;\n                prevChunk = chunk;\n                indexPrevChunk = indexChunk;\n            }\n        }\n        return documents;\n    }\n    numberOfNewLines(text, start, end) {\n        const textSection = text.slice(start, end);\n        return (textSection.match(/\\n/g) || []).length;\n    }\n    async splitDocuments(documents, chunkHeaderOptions = {}) {\n        const selectedDocuments = documents.filter((doc)=>doc.pageContent !== undefined);\n        const texts = selectedDocuments.map((doc)=>doc.pageContent);\n        const metadatas = selectedDocuments.map((doc)=>doc.metadata);\n        return this.createDocuments(texts, metadatas, chunkHeaderOptions);\n    }\n    joinDocs(docs, separator) {\n        const text = docs.join(separator).trim();\n        return text === \"\" ? null : text;\n    }\n    async mergeSplits(splits, separator) {\n        const docs = [];\n        const currentDoc = [];\n        let total = 0;\n        for (const d of splits){\n            const _len = await this.lengthFunction(d);\n            if (total + _len + currentDoc.length * separator.length > this.chunkSize) {\n                if (total > this.chunkSize) {\n                    console.warn(`Created a chunk of size ${total}, +\nwhich is longer than the specified ${this.chunkSize}`);\n                }\n                if (currentDoc.length > 0) {\n                    const doc = this.joinDocs(currentDoc, separator);\n                    if (doc !== null) {\n                        docs.push(doc);\n                    }\n                    // Keep on popping if:\n                    // - we have a larger chunk than in the chunk overlap\n                    // - or if we still have any chunks and the length is long\n                    while(total > this.chunkOverlap || total + _len + currentDoc.length * separator.length > this.chunkSize && total > 0){\n                        total -= await this.lengthFunction(currentDoc[0]);\n                        currentDoc.shift();\n                    }\n                }\n            }\n            currentDoc.push(d);\n            total += _len;\n        }\n        const doc = this.joinDocs(currentDoc, separator);\n        if (doc !== null) {\n            docs.push(doc);\n        }\n        return docs;\n    }\n}\nclass CharacterTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"CharacterTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        this.separator = fields?.separator ?? this.separator;\n    }\n    async splitText(text) {\n        // First we naively split the large input into a bunch of smaller ones.\n        const splits = this.splitOnSeparator(text, this.separator);\n        return this.mergeSplits(splits, this.keepSeparator ? \"\" : this.separator);\n    }\n}\nconst SupportedTextSplitterLanguages = [\n    \"cpp\",\n    \"go\",\n    \"java\",\n    \"js\",\n    \"php\",\n    \"proto\",\n    \"python\",\n    \"rst\",\n    \"ruby\",\n    \"rust\",\n    \"scala\",\n    \"swift\",\n    \"markdown\",\n    \"latex\",\n    \"html\",\n    \"sol\"\n];\nclass RecursiveCharacterTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"RecursiveCharacterTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"separators\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ]\n        });\n        this.separators = fields?.separators ?? this.separators;\n        this.keepSeparator = fields?.keepSeparator ?? true;\n    }\n    async _splitText(text, separators) {\n        const finalChunks = [];\n        // Get appropriate separator to use\n        let separator = separators[separators.length - 1];\n        let newSeparators;\n        for(let i = 0; i < separators.length; i += 1){\n            const s = separators[i];\n            if (s === \"\") {\n                separator = s;\n                break;\n            }\n            if (text.includes(s)) {\n                separator = s;\n                newSeparators = separators.slice(i + 1);\n                break;\n            }\n        }\n        // Now that we have the separator, split the text\n        const splits = this.splitOnSeparator(text, separator);\n        // Now go merging things, recursively splitting longer texts.\n        let goodSplits = [];\n        const _separator = this.keepSeparator ? \"\" : separator;\n        for (const s of splits){\n            if (await this.lengthFunction(s) < this.chunkSize) {\n                goodSplits.push(s);\n            } else {\n                if (goodSplits.length) {\n                    const mergedText = await this.mergeSplits(goodSplits, _separator);\n                    finalChunks.push(...mergedText);\n                    goodSplits = [];\n                }\n                if (!newSeparators) {\n                    finalChunks.push(s);\n                } else {\n                    const otherInfo = await this._splitText(s, newSeparators);\n                    finalChunks.push(...otherInfo);\n                }\n            }\n        }\n        if (goodSplits.length) {\n            const mergedText = await this.mergeSplits(goodSplits, _separator);\n            finalChunks.push(...mergedText);\n        }\n        return finalChunks;\n    }\n    async splitText(text) {\n        return this._splitText(text, this.separators);\n    }\n    static fromLanguage(language, options) {\n        return new RecursiveCharacterTextSplitter({\n            ...options,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(language)\n        });\n    }\n    static getSeparatorsForLanguage(language) {\n        if (language === \"cpp\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along function definitions\n                \"\\nvoid \",\n                \"\\nint \",\n                \"\\nfloat \",\n                \"\\ndouble \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"go\") {\n            return [\n                // Split along function definitions\n                \"\\nfunc \",\n                \"\\nvar \",\n                \"\\nconst \",\n                \"\\ntype \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"java\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along method definitions\n                \"\\npublic \",\n                \"\\nprotected \",\n                \"\\nprivate \",\n                \"\\nstatic \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"js\") {\n            return [\n                // Split along function definitions\n                \"\\nfunction \",\n                \"\\nconst \",\n                \"\\nlet \",\n                \"\\nvar \",\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                \"\\ndefault \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"php\") {\n            return [\n                // Split along function definitions\n                \"\\nfunction \",\n                // Split along class definitions\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nforeach \",\n                \"\\nwhile \",\n                \"\\ndo \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"proto\") {\n            return [\n                // Split along message definitions\n                \"\\nmessage \",\n                // Split along service definitions\n                \"\\nservice \",\n                // Split along enum definitions\n                \"\\nenum \",\n                // Split along option definitions\n                \"\\noption \",\n                // Split along import statements\n                \"\\nimport \",\n                // Split along syntax declarations\n                \"\\nsyntax \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"python\") {\n            return [\n                // First, try to split along class definitions\n                \"\\nclass \",\n                \"\\ndef \",\n                \"\\n\tdef \",\n                // Now split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"rst\") {\n            return [\n                // Split along section titles\n                \"\\n===\\n\",\n                \"\\n---\\n\",\n                \"\\n***\\n\",\n                // Split along directive markers\n                \"\\n.. \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"ruby\") {\n            return [\n                // Split along method definitions\n                \"\\ndef \",\n                \"\\nclass \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nunless \",\n                \"\\nwhile \",\n                \"\\nfor \",\n                \"\\ndo \",\n                \"\\nbegin \",\n                \"\\nrescue \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"rust\") {\n            return [\n                // Split along function definitions\n                \"\\nfn \",\n                \"\\nconst \",\n                \"\\nlet \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nwhile \",\n                \"\\nfor \",\n                \"\\nloop \",\n                \"\\nmatch \",\n                \"\\nconst \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"scala\") {\n            return [\n                // Split along class definitions\n                \"\\nclass \",\n                \"\\nobject \",\n                // Split along method definitions\n                \"\\ndef \",\n                \"\\nval \",\n                \"\\nvar \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\nmatch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"swift\") {\n            return [\n                // Split along function definitions\n                \"\\nfunc \",\n                // Split along class definitions\n                \"\\nclass \",\n                \"\\nstruct \",\n                \"\\nenum \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\ndo \",\n                \"\\nswitch \",\n                \"\\ncase \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"markdown\") {\n            return [\n                // First, try to split along Markdown headings (starting with level 2)\n                \"\\n## \",\n                \"\\n### \",\n                \"\\n#### \",\n                \"\\n##### \",\n                \"\\n###### \",\n                // Note the alternative syntax for headings (below) is not handled here\n                // Heading level 2\n                // ---------------\n                // End of code block\n                \"```\\n\\n\",\n                // Horizontal lines\n                \"\\n\\n***\\n\\n\",\n                \"\\n\\n---\\n\\n\",\n                \"\\n\\n___\\n\\n\",\n                // Note that this splitter doesn't handle horizontal lines defined\n                // by *three or more* of ***, ---, or ___, but this is not handled\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"latex\") {\n            return [\n                // First, try to split along Latex sections\n                \"\\n\\\\chapter{\",\n                \"\\n\\\\section{\",\n                \"\\n\\\\subsection{\",\n                \"\\n\\\\subsubsection{\",\n                // Now split by environments\n                \"\\n\\\\begin{enumerate}\",\n                \"\\n\\\\begin{itemize}\",\n                \"\\n\\\\begin{description}\",\n                \"\\n\\\\begin{list}\",\n                \"\\n\\\\begin{quote}\",\n                \"\\n\\\\begin{quotation}\",\n                \"\\n\\\\begin{verse}\",\n                \"\\n\\\\begin{verbatim}\",\n                // Now split by math environments\n                \"\\n\\\\begin{align}\",\n                \"$$\",\n                \"$\",\n                // Now split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"html\") {\n            return [\n                // First, try to split along HTML tags\n                \"<body>\",\n                \"<div>\",\n                \"<p>\",\n                \"<br>\",\n                \"<li>\",\n                \"<h1>\",\n                \"<h2>\",\n                \"<h3>\",\n                \"<h4>\",\n                \"<h5>\",\n                \"<h6>\",\n                \"<span>\",\n                \"<table>\",\n                \"<tr>\",\n                \"<td>\",\n                \"<th>\",\n                \"<ul>\",\n                \"<ol>\",\n                \"<header>\",\n                \"<footer>\",\n                \"<nav>\",\n                // Head\n                \"<head>\",\n                \"<style>\",\n                \"<script>\",\n                \"<meta>\",\n                \"<title>\",\n                // Normal type of lines\n                \" \",\n                \"\"\n            ];\n        } else if (language === \"sol\") {\n            return [\n                // Split along compiler informations definitions\n                \"\\npragma \",\n                \"\\nusing \",\n                // Split along contract definitions\n                \"\\ncontract \",\n                \"\\ninterface \",\n                \"\\nlibrary \",\n                // Split along method definitions\n                \"\\nconstructor \",\n                \"\\ntype \",\n                \"\\nfunction \",\n                \"\\nevent \",\n                \"\\nmodifier \",\n                \"\\nerror \",\n                \"\\nstruct \",\n                \"\\nenum \",\n                // Split along control flow statements\n                \"\\nif \",\n                \"\\nfor \",\n                \"\\nwhile \",\n                \"\\ndo while \",\n                \"\\nassembly \",\n                // Split by the normal type of lines\n                \"\\n\\n\",\n                \"\\n\",\n                \" \",\n                \"\"\n            ];\n        } else {\n            throw new Error(`Language ${language} is not supported.`);\n        }\n    }\n}\n/**\n * Implementation of splitter which looks at tokens.\n */ class TokenTextSplitter extends TextSplitter {\n    static lc_name() {\n        return \"TokenTextSplitter\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"encodingName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"allowedSpecial\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"disallowedSpecial\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tokenizer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.encodingName = fields?.encodingName ?? \"gpt2\";\n        this.allowedSpecial = fields?.allowedSpecial ?? [];\n        this.disallowedSpecial = fields?.disallowedSpecial ?? \"all\";\n    }\n    async splitText(text) {\n        if (!this.tokenizer) {\n            this.tokenizer = await (0,_langchain_core_utils_tiktoken__WEBPACK_IMPORTED_MODULE_1__.getEncoding)(this.encodingName);\n        }\n        const splits = [];\n        const input_ids = this.tokenizer.encode(text, this.allowedSpecial, this.disallowedSpecial);\n        let start_idx = 0;\n        while(start_idx < input_ids.length){\n            if (start_idx > 0) {\n                start_idx -= this.chunkOverlap;\n            }\n            const end_idx = Math.min(start_idx + this.chunkSize, input_ids.length);\n            const chunk_ids = input_ids.slice(start_idx, end_idx);\n            splits.push(this.tokenizer.decode(chunk_ids));\n            start_idx = end_idx;\n        }\n        return splits;\n    }\n}\nclass MarkdownTextSplitter extends RecursiveCharacterTextSplitter {\n    constructor(fields){\n        super({\n            ...fields,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(\"markdown\")\n        });\n    }\n}\nclass LatexTextSplitter extends RecursiveCharacterTextSplitter {\n    constructor(fields){\n        super({\n            ...fields,\n            separators: RecursiveCharacterTextSplitter.getSeparatorsForLanguage(\"latex\")\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2Rpc3QvdGV4dF9zcGxpdHRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBOEU7QUFDakI7QUFDdEQsTUFBTUcscUJBQXFCRiw4RUFBdUJBO0lBQ3JERyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBeUI7YUFBaUI7UUFDbkU7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsUUFBUU8sYUFBYSxJQUFJLENBQUNBLFNBQVM7UUFDcEQsSUFBSSxDQUFDQyxZQUFZLEdBQUdSLFFBQVFRLGdCQUFnQixJQUFJLENBQUNBLFlBQVk7UUFDN0QsSUFBSSxDQUFDQyxhQUFhLEdBQUdULFFBQVFTLGlCQUFpQixJQUFJLENBQUNBLGFBQWE7UUFDaEUsSUFBSSxDQUFDQyxjQUFjLEdBQ2ZWLFFBQVFVLGtCQUFtQixFQUFDQyxPQUFTQSxLQUFLQyxNQUFNO1FBQ3BELElBQUksSUFB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QUFDLElBQUksQ0FBQzJDLFNBQVMsQ0FBQ1EsTUFBTSxDQUFDRDtZQUNsQ0osWUFBWUM7UUFDaEI7UUFDQSxPQUFPbEY7SUFDWDtBQUNKO0FBQ08sTUFBTXVGLDZCQUE2QjNCO0lBQ3RDakYsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQztZQUNGLEdBQUdBLE1BQU07WUFDVGlGLFlBQVlELCtCQUErQmEsd0JBQXdCLENBQUM7UUFDeEU7SUFDSjtBQUNKO0FBQ08sTUFBTWUsMEJBQTBCNUI7SUFDbkNqRixZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDO1lBQ0YsR0FBR0EsTUFBTTtZQUNUaUYsWUFBWUQsK0JBQStCYSx3QkFBd0IsQ0FBQztRQUN4RTtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZGlzdC90ZXh0X3NwbGl0dGVyLmpzPzVmYjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnQsIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9kb2N1bWVudHNcIjtcbmltcG9ydCB7IGdldEVuY29kaW5nIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy90aWt0b2tlblwiO1xuZXhwb3J0IGNsYXNzIFRleHRTcGxpdHRlciBleHRlbmRzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5cIiwgXCJkb2N1bWVudF90cmFuc2Zvcm1lcnNcIiwgXCJ0ZXh0X3NwbGl0dGVyc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2h1bmtTaXplXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxMDAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaHVua092ZXJsYXBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDIwMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2VlcFNlcGFyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxlbmd0aEZ1bmN0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2h1bmtTaXplID0gZmllbGRzPy5jaHVua1NpemUgPz8gdGhpcy5jaHVua1NpemU7XG4gICAgICAgIHRoaXMuY2h1bmtPdmVybGFwID0gZmllbGRzPy5jaHVua092ZXJsYXAgPz8gdGhpcy5jaHVua092ZXJsYXA7XG4gICAgICAgIHRoaXMua2VlcFNlcGFyYXRvciA9IGZpZWxkcz8ua2VlcFNlcGFyYXRvciA/PyB0aGlzLmtlZXBTZXBhcmF0b3I7XG4gICAgICAgIHRoaXMubGVuZ3RoRnVuY3Rpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5sZW5ndGhGdW5jdGlvbiA/PyAoKHRleHQpID0+IHRleHQubGVuZ3RoKTtcbiAgICAgICAgaWYgKHRoaXMuY2h1bmtPdmVybGFwID49IHRoaXMuY2h1bmtTaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGF2ZSBjaHVua092ZXJsYXAgPj0gY2h1bmtTaXplXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHRyYW5zZm9ybURvY3VtZW50cyhkb2N1bWVudHMsIGNodW5rSGVhZGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwbGl0RG9jdW1lbnRzKGRvY3VtZW50cywgY2h1bmtIZWFkZXJPcHRpb25zKTtcbiAgICB9XG4gICAgc3BsaXRPblNlcGFyYXRvcih0ZXh0LCBzZXBhcmF0b3IpIHtcbiAgICAgICAgbGV0IHNwbGl0cztcbiAgICAgICAgaWYgKHNlcGFyYXRvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMua2VlcFNlcGFyYXRvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4RXNjYXBlZFNlcGFyYXRvciA9IHNlcGFyYXRvci5yZXBsYWNlKC9bL1xcLVxcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQobmV3IFJlZ0V4cChgKD89JHtyZWdleEVzY2FwZWRTZXBhcmF0b3J9KWApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNwbGl0cyA9IHRleHQuc3BsaXQoXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwbGl0cy5maWx0ZXIoKHMpID0+IHMgIT09IFwiXCIpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVEb2N1bWVudHModGV4dHMsIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbWV0YWRhdGFzID0gW10sIGNodW5rSGVhZGVyT3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIC8vIGlmIG5vIG1ldGFkYXRhIGlzIHByb3ZpZGVkLCB3ZSBjcmVhdGUgYW4gZW1wdHkgb25lIGZvciBlYWNoIHRleHRcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgX21ldGFkYXRhcyA9IG1ldGFkYXRhcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IG1ldGFkYXRhc1xuICAgICAgICAgICAgOiBbLi4uQXJyYXkodGV4dHMubGVuZ3RoKV0ubWFwKCgpID0+ICh7fSkpO1xuICAgICAgICBjb25zdCB7IGNodW5rSGVhZGVyID0gXCJcIiwgY2h1bmtPdmVybGFwSGVhZGVyID0gXCIoY29udCdkKSBcIiwgYXBwZW5kQ2h1bmtPdmVybGFwSGVhZGVyID0gZmFsc2UsIH0gPSBjaHVua0hlYWRlck9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dHNbaV07XG4gICAgICAgICAgICBsZXQgbGluZUNvdW50ZXJJbmRleCA9IDE7XG4gICAgICAgICAgICBsZXQgcHJldkNodW5rID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBpbmRleFByZXZDaHVuayA9IC0xO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBhd2FpdCB0aGlzLnNwbGl0VGV4dCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIGxldCBwYWdlQ29udGVudCA9IGNodW5rSGVhZGVyO1xuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gY291bnQgdGhlIFxcbiB0aGF0IGFyZSBpbiB0aGUgdGV4dCBiZWZvcmUgZ2V0dGluZyByZW1vdmVkIGJ5IHRoZSBzcGxpdHRpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleENodW5rID0gdGV4dC5pbmRleE9mKGNodW5rLCBpbmRleFByZXZDaHVuayArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2Q2h1bmsgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZXNCZWZvcmVGaXJzdENodW5rID0gdGhpcy5udW1iZXJPZk5ld0xpbmVzKHRleHQsIDAsIGluZGV4Q2h1bmspO1xuICAgICAgICAgICAgICAgICAgICBsaW5lQ291bnRlckluZGV4ICs9IG5ld0xpbmVzQmVmb3JlRmlyc3RDaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4RW5kUHJldkNodW5rID0gaW5kZXhQcmV2Q2h1bmsgKyAoYXdhaXQgdGhpcy5sZW5ndGhGdW5jdGlvbihwcmV2Q2h1bmspKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4RW5kUHJldkNodW5rIDwgaW5kZXhDaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtYmVyT2ZJbnRlcm1lZGlhdGVOZXdMaW5lcyA9IHRoaXMubnVtYmVyT2ZOZXdMaW5lcyh0ZXh0LCBpbmRleEVuZFByZXZDaHVuaywgaW5kZXhDaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lQ291bnRlckluZGV4ICs9IG51bWJlck9mSW50ZXJtZWRpYXRlTmV3TGluZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5kZXhFbmRQcmV2Q2h1bmsgPiBpbmRleENodW5rKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1iZXJPZkludGVybWVkaWF0ZU5ld0xpbmVzID0gdGhpcy5udW1iZXJPZk5ld0xpbmVzKHRleHQsIGluZGV4Q2h1bmssIGluZGV4RW5kUHJldkNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVDb3VudGVySW5kZXggLT0gbnVtYmVyT2ZJbnRlcm1lZGlhdGVOZXdMaW5lcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwZW5kQ2h1bmtPdmVybGFwSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlQ29udGVudCArPSBjaHVua092ZXJsYXBIZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZXNDb3VudCA9IHRoaXMubnVtYmVyT2ZOZXdMaW5lcyhjaHVuayk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9jID0gX21ldGFkYXRhc1tpXS5sb2MgJiYgdHlwZW9mIF9tZXRhZGF0YXNbaV0ubG9jID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgICAgID8geyAuLi5fbWV0YWRhdGFzW2ldLmxvYyB9XG4gICAgICAgICAgICAgICAgICAgIDoge307XG4gICAgICAgICAgICAgICAgbG9jLmxpbmVzID0ge1xuICAgICAgICAgICAgICAgICAgICBmcm9tOiBsaW5lQ291bnRlckluZGV4LFxuICAgICAgICAgICAgICAgICAgICB0bzogbGluZUNvdW50ZXJJbmRleCArIG5ld0xpbmVzQ291bnQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YVdpdGhMaW5lc051bWJlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uX21ldGFkYXRhc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgbG9jLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQgKz0gY2h1bms7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzLnB1c2gobmV3IERvY3VtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YVdpdGhMaW5lc051bWJlcixcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbGluZUNvdW50ZXJJbmRleCArPSBuZXdMaW5lc0NvdW50O1xuICAgICAgICAgICAgICAgIHByZXZDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgIGluZGV4UHJldkNodW5rID0gaW5kZXhDaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jdW1lbnRzO1xuICAgIH1cbiAgICBudW1iZXJPZk5ld0xpbmVzKHRleHQsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3QgdGV4dFNlY3Rpb24gPSB0ZXh0LnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgICByZXR1cm4gKHRleHRTZWN0aW9uLm1hdGNoKC9cXG4vZykgfHwgW10pLmxlbmd0aDtcbiAgICB9XG4gICAgYXN5bmMgc3BsaXREb2N1bWVudHMoZG9jdW1lbnRzLCBjaHVua0hlYWRlck9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZERvY3VtZW50cyA9IGRvY3VtZW50cy5maWx0ZXIoKGRvYykgPT4gZG9jLnBhZ2VDb250ZW50ICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCB0ZXh0cyA9IHNlbGVjdGVkRG9jdW1lbnRzLm1hcCgoZG9jKSA9PiBkb2MucGFnZUNvbnRlbnQpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YXMgPSBzZWxlY3RlZERvY3VtZW50cy5tYXAoKGRvYykgPT4gZG9jLm1ldGFkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRG9jdW1lbnRzKHRleHRzLCBtZXRhZGF0YXMsIGNodW5rSGVhZGVyT3B0aW9ucyk7XG4gICAgfVxuICAgIGpvaW5Eb2NzKGRvY3MsIHNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jcy5qb2luKHNlcGFyYXRvcikudHJpbSgpO1xuICAgICAgICByZXR1cm4gdGV4dCA9PT0gXCJcIiA/IG51bGwgOiB0ZXh0O1xuICAgIH1cbiAgICBhc3luYyBtZXJnZVNwbGl0cyhzcGxpdHMsIHNlcGFyYXRvcikge1xuICAgICAgICBjb25zdCBkb2NzID0gW107XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb2MgPSBbXTtcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIHNwbGl0cykge1xuICAgICAgICAgICAgY29uc3QgX2xlbiA9IGF3YWl0IHRoaXMubGVuZ3RoRnVuY3Rpb24oZCk7XG4gICAgICAgICAgICBpZiAodG90YWwgKyBfbGVuICsgY3VycmVudERvYy5sZW5ndGggKiBzZXBhcmF0b3IubGVuZ3RoID5cbiAgICAgICAgICAgICAgICB0aGlzLmNodW5rU2l6ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0b3RhbCA+IHRoaXMuY2h1bmtTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ3JlYXRlZCBhIGNodW5rIG9mIHNpemUgJHt0b3RhbH0sICtcbndoaWNoIGlzIGxvbmdlciB0aGFuIHRoZSBzcGVjaWZpZWQgJHt0aGlzLmNodW5rU2l6ZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREb2MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmpvaW5Eb2NzKGN1cnJlbnREb2MsIHNlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2MgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3MucHVzaChkb2MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgb24gcG9wcGluZyBpZjpcbiAgICAgICAgICAgICAgICAgICAgLy8gLSB3ZSBoYXZlIGEgbGFyZ2VyIGNodW5rIHRoYW4gaW4gdGhlIGNodW5rIG92ZXJsYXBcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBvciBpZiB3ZSBzdGlsbCBoYXZlIGFueSBjaHVua3MgYW5kIHRoZSBsZW5ndGggaXMgbG9uZ1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAodG90YWwgPiB0aGlzLmNodW5rT3ZlcmxhcCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRvdGFsICsgX2xlbiArIGN1cnJlbnREb2MubGVuZ3RoICogc2VwYXJhdG9yLmxlbmd0aCA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVua1NpemUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCAtPSBhd2FpdCB0aGlzLmxlbmd0aEZ1bmN0aW9uKGN1cnJlbnREb2NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERvYy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudERvYy5wdXNoKGQpO1xuICAgICAgICAgICAgdG90YWwgKz0gX2xlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmpvaW5Eb2NzKGN1cnJlbnREb2MsIHNlcGFyYXRvcik7XG4gICAgICAgIGlmIChkb2MgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGRvY3MucHVzaChkb2MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb2NzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIgZXh0ZW5kcyBUZXh0U3BsaXR0ZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJDaGFyYWN0ZXJUZXh0U3BsaXR0ZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlcGFyYXRvclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJcXG5cXG5cIlxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSBmaWVsZHM/LnNlcGFyYXRvciA/PyB0aGlzLnNlcGFyYXRvcjtcbiAgICB9XG4gICAgYXN5bmMgc3BsaXRUZXh0KHRleHQpIHtcbiAgICAgICAgLy8gRmlyc3Qgd2UgbmFpdmVseSBzcGxpdCB0aGUgbGFyZ2UgaW5wdXQgaW50byBhIGJ1bmNoIG9mIHNtYWxsZXIgb25lcy5cbiAgICAgICAgY29uc3Qgc3BsaXRzID0gdGhpcy5zcGxpdE9uU2VwYXJhdG9yKHRleHQsIHRoaXMuc2VwYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VTcGxpdHMoc3BsaXRzLCB0aGlzLmtlZXBTZXBhcmF0b3IgPyBcIlwiIDogdGhpcy5zZXBhcmF0b3IpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBTdXBwb3J0ZWRUZXh0U3BsaXR0ZXJMYW5ndWFnZXMgPSBbXG4gICAgXCJjcHBcIixcbiAgICBcImdvXCIsXG4gICAgXCJqYXZhXCIsXG4gICAgXCJqc1wiLFxuICAgIFwicGhwXCIsXG4gICAgXCJwcm90b1wiLFxuICAgIFwicHl0aG9uXCIsXG4gICAgXCJyc3RcIixcbiAgICBcInJ1YnlcIixcbiAgICBcInJ1c3RcIixcbiAgICBcInNjYWxhXCIsXG4gICAgXCJzd2lmdFwiLFxuICAgIFwibWFya2Rvd25cIixcbiAgICBcImxhdGV4XCIsXG4gICAgXCJodG1sXCIsXG4gICAgXCJzb2xcIixcbl07XG5leHBvcnQgY2xhc3MgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIGV4dGVuZHMgVGV4dFNwbGl0dGVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZXBhcmF0b3JzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJcXG5cXG5cIiwgXCJcXG5cIiwgXCIgXCIsIFwiXCJdXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlcGFyYXRvcnMgPSBmaWVsZHM/LnNlcGFyYXRvcnMgPz8gdGhpcy5zZXBhcmF0b3JzO1xuICAgICAgICB0aGlzLmtlZXBTZXBhcmF0b3IgPSBmaWVsZHM/LmtlZXBTZXBhcmF0b3IgPz8gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgX3NwbGl0VGV4dCh0ZXh0LCBzZXBhcmF0b3JzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsQ2h1bmtzID0gW107XG4gICAgICAgIC8vIEdldCBhcHByb3ByaWF0ZSBzZXBhcmF0b3IgdG8gdXNlXG4gICAgICAgIGxldCBzZXBhcmF0b3IgPSBzZXBhcmF0b3JzW3NlcGFyYXRvcnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCBuZXdTZXBhcmF0b3JzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcGFyYXRvcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzZXBhcmF0b3JzW2ldO1xuICAgICAgICAgICAgaWYgKHMgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSBzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRleHQuaW5jbHVkZXMocykpIHtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3IgPSBzO1xuICAgICAgICAgICAgICAgIG5ld1NlcGFyYXRvcnMgPSBzZXBhcmF0b3JzLnNsaWNlKGkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3cgdGhhdCB3ZSBoYXZlIHRoZSBzZXBhcmF0b3IsIHNwbGl0IHRoZSB0ZXh0XG4gICAgICAgIGNvbnN0IHNwbGl0cyA9IHRoaXMuc3BsaXRPblNlcGFyYXRvcih0ZXh0LCBzZXBhcmF0b3IpO1xuICAgICAgICAvLyBOb3cgZ28gbWVyZ2luZyB0aGluZ3MsIHJlY3Vyc2l2ZWx5IHNwbGl0dGluZyBsb25nZXIgdGV4dHMuXG4gICAgICAgIGxldCBnb29kU3BsaXRzID0gW107XG4gICAgICAgIGNvbnN0IF9zZXBhcmF0b3IgPSB0aGlzLmtlZXBTZXBhcmF0b3IgPyBcIlwiIDogc2VwYXJhdG9yO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc3BsaXRzKSB7XG4gICAgICAgICAgICBpZiAoKGF3YWl0IHRoaXMubGVuZ3RoRnVuY3Rpb24ocykpIDwgdGhpcy5jaHVua1NpemUpIHtcbiAgICAgICAgICAgICAgICBnb29kU3BsaXRzLnB1c2gocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ29vZFNwbGl0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkVGV4dCA9IGF3YWl0IHRoaXMubWVyZ2VTcGxpdHMoZ29vZFNwbGl0cywgX3NlcGFyYXRvcik7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ubWVyZ2VkVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGdvb2RTcGxpdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdTZXBhcmF0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdGhlckluZm8gPSBhd2FpdCB0aGlzLl9zcGxpdFRleHQocywgbmV3U2VwYXJhdG9ycyk7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ub3RoZXJJbmZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdvb2RTcGxpdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBtZXJnZWRUZXh0ID0gYXdhaXQgdGhpcy5tZXJnZVNwbGl0cyhnb29kU3BsaXRzLCBfc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIGZpbmFsQ2h1bmtzLnB1c2goLi4ubWVyZ2VkVGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmFsQ2h1bmtzO1xuICAgIH1cbiAgICBhc3luYyBzcGxpdFRleHQodGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3BsaXRUZXh0KHRleHQsIHRoaXMuc2VwYXJhdG9ycyk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTGFuZ3VhZ2UobGFuZ3VhZ2UsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIHNlcGFyYXRvcnM6IFJlY3Vyc2l2ZUNoYXJhY3RlclRleHRTcGxpdHRlci5nZXRTZXBhcmF0b3JzRm9yTGFuZ3VhZ2UobGFuZ3VhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldFNlcGFyYXRvcnNGb3JMYW5ndWFnZShsYW5ndWFnZSkge1xuICAgICAgICBpZiAobGFuZ3VhZ2UgPT09IFwiY3BwXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY2xhc3MgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbmNsYXNzIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG52b2lkIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuaW50IFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZmxvYXQgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5kb3VibGUgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29udHJvbCBmbG93IHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBcIlxcbmlmIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZm9yIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxud2hpbGUgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJnb1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5mdW5jIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxudmFyIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY29uc3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG50eXBlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnN3aXRjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNhc2UgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcImphdmFcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgbWV0aG9kIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5wdWJsaWMgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5wcm90ZWN0ZWQgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5wcml2YXRlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3RhdGljIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3dpdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwianNcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZnVuY3Rpb24gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jb25zdCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxldCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNsYXNzIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuc3dpdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRlZmF1bHQgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInBocFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGZ1bmN0aW9uIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5mdW5jdGlvbiBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29udHJvbCBmbG93IHN0YXRlbWVudHNcbiAgICAgICAgICAgICAgICBcIlxcbmlmIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZm9yZWFjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJwcm90b1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG1lc3NhZ2UgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbm1lc3NhZ2UgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgc2VydmljZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuc2VydmljZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBlbnVtIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG9wdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxub3B0aW9uIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGltcG9ydCBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pbXBvcnQgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgc3ludGF4IGRlY2xhcmF0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuc3ludGF4IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJweXRob25cIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHNwbGl0IGFsb25nIGNsYXNzIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRlZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcblxcdGRlZiBcIixcbiAgICAgICAgICAgICAgICAvLyBOb3cgc3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInJzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIHNlY3Rpb24gdGl0bGVzXG4gICAgICAgICAgICAgICAgXCJcXG49PT1cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcbi0tLVxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuKioqXFxuXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgZGlyZWN0aXZlIG1hcmtlcnNcbiAgICAgICAgICAgICAgICBcIlxcbi4uIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJydWJ5XCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgbWV0aG9kIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5kZWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG51bmxlc3MgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmRvIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuYmVnaW4gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5yZXNjdWUgXCIsXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYnkgdGhlIG5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5cIixcbiAgICAgICAgICAgICAgICBcIlxcblwiLFxuICAgICAgICAgICAgICAgIFwiIFwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxhbmd1YWdlID09PSBcInJ1c3RcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZm4gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jb25zdCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxldCBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmxvb3AgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5tYXRjaCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmNvbnN0IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJzY2FsYVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNsYXNzIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5jbGFzcyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm9iamVjdCBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBtZXRob2QgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgICAgICBcIlxcbmRlZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhbCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbnZhciBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cm9sIGZsb3cgc3RhdGVtZW50c1xuICAgICAgICAgICAgICAgIFwiXFxuaWYgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5mb3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG53aGlsZSBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm1hdGNoIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuY2FzZSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwic3dpZnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBmdW5jdGlvbiBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuZnVuYyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjbGFzcyBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY2xhc3MgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zdHJ1Y3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zd2l0Y2ggXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5jYXNlIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHRoZSBub3JtYWwgdHlwZSBvZiBsaW5lc1xuICAgICAgICAgICAgICAgIFwiXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cIixcbiAgICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAgICBcIlwiLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYW5ndWFnZSA9PT0gXCJtYXJrZG93blwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gc3BsaXQgYWxvbmcgTWFya2Rvd24gaGVhZGluZ3MgKHN0YXJ0aW5nIHdpdGggbGV2ZWwgMilcbiAgICAgICAgICAgICAgICBcIlxcbiMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIyBcIixcbiAgICAgICAgICAgICAgICBcIlxcbiMjIyMjIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuIyMjIyMjIFwiLFxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhlIGFsdGVybmF0aXZlIHN5bnRheCBmb3IgaGVhZGluZ3MgKGJlbG93KSBpcyBub3QgaGFuZGxlZCBoZXJlXG4gICAgICAgICAgICAgICAgLy8gSGVhZGluZyBsZXZlbCAyXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICAgICAgLy8gRW5kIG9mIGNvZGUgYmxvY2tcbiAgICAgICAgICAgICAgICBcImBgYFxcblxcblwiLFxuICAgICAgICAgICAgICAgIC8vIEhvcml6b250YWwgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcbioqKlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxuLS0tXFxuXFxuXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXG5fX19cXG5cXG5cIixcbiAgICAgICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzcGxpdHRlciBkb2Vzbid0IGhhbmRsZSBob3Jpem9udGFsIGxpbmVzIGRlZmluZWRcbiAgICAgICAgICAgICAgICAvLyBieSAqdGhyZWUgb3IgbW9yZSogb2YgKioqLCAtLS0sIG9yIF9fXywgYnV0IHRoaXMgaXMgbm90IGhhbmRsZWRcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwibGF0ZXhcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCwgdHJ5IHRvIHNwbGl0IGFsb25nIExhdGV4IHNlY3Rpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcY2hhcHRlcntcIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxzZWN0aW9ue1wiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxcXHN1YnNlY3Rpb257XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcc3Vic3Vic2VjdGlvbntcIixcbiAgICAgICAgICAgICAgICAvLyBOb3cgc3BsaXQgYnkgZW52aXJvbm1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57ZW51bWVyYXRlfVwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXFxcXGJlZ2lue2l0ZW1pemV9XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57ZGVzY3JpcHRpb259XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57bGlzdH1cIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxiZWdpbntxdW90ZX1cIixcbiAgICAgICAgICAgICAgICBcIlxcblxcXFxiZWdpbntxdW90YXRpb259XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57dmVyc2V9XCIsXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57dmVyYmF0aW19XCIsXG4gICAgICAgICAgICAgICAgLy8gTm93IHNwbGl0IGJ5IG1hdGggZW52aXJvbm1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5cXFxcYmVnaW57YWxpZ259XCIsXG4gICAgICAgICAgICAgICAgXCIkJFwiLFxuICAgICAgICAgICAgICAgIFwiJFwiLFxuICAgICAgICAgICAgICAgIC8vIE5vdyBzcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwiaHRtbFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gc3BsaXQgYWxvbmcgSFRNTCB0YWdzXG4gICAgICAgICAgICAgICAgXCI8Ym9keT5cIixcbiAgICAgICAgICAgICAgICBcIjxkaXY+XCIsXG4gICAgICAgICAgICAgICAgXCI8cD5cIixcbiAgICAgICAgICAgICAgICBcIjxicj5cIixcbiAgICAgICAgICAgICAgICBcIjxsaT5cIixcbiAgICAgICAgICAgICAgICBcIjxoMT5cIixcbiAgICAgICAgICAgICAgICBcIjxoMj5cIixcbiAgICAgICAgICAgICAgICBcIjxoMz5cIixcbiAgICAgICAgICAgICAgICBcIjxoND5cIixcbiAgICAgICAgICAgICAgICBcIjxoNT5cIixcbiAgICAgICAgICAgICAgICBcIjxoNj5cIixcbiAgICAgICAgICAgICAgICBcIjxzcGFuPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRhYmxlPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRyPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRkPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRoPlwiLFxuICAgICAgICAgICAgICAgIFwiPHVsPlwiLFxuICAgICAgICAgICAgICAgIFwiPG9sPlwiLFxuICAgICAgICAgICAgICAgIFwiPGhlYWRlcj5cIixcbiAgICAgICAgICAgICAgICBcIjxmb290ZXI+XCIsXG4gICAgICAgICAgICAgICAgXCI8bmF2PlwiLFxuICAgICAgICAgICAgICAgIC8vIEhlYWRcbiAgICAgICAgICAgICAgICBcIjxoZWFkPlwiLFxuICAgICAgICAgICAgICAgIFwiPHN0eWxlPlwiLFxuICAgICAgICAgICAgICAgIFwiPHNjcmlwdD5cIixcbiAgICAgICAgICAgICAgICBcIjxtZXRhPlwiLFxuICAgICAgICAgICAgICAgIFwiPHRpdGxlPlwiLFxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbCB0eXBlIG9mIGxpbmVzXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGFuZ3VhZ2UgPT09IFwic29sXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLy8gU3BsaXQgYWxvbmcgY29tcGlsZXIgaW5mb3JtYXRpb25zIGRlZmluaXRpb25zXG4gICAgICAgICAgICAgICAgXCJcXG5wcmFnbWEgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG51c2luZyBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBhbG9uZyBjb250cmFjdCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY29udHJhY3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5pbnRlcmZhY2UgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5saWJyYXJ5IFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIG1ldGhvZCBkZWZpbml0aW9uc1xuICAgICAgICAgICAgICAgIFwiXFxuY29uc3RydWN0b3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG50eXBlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZnVuY3Rpb24gXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5ldmVudCBcIixcbiAgICAgICAgICAgICAgICBcIlxcbm1vZGlmaWVyIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZXJyb3IgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5zdHJ1Y3QgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5lbnVtIFwiLFxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGFsb25nIGNvbnRyb2wgZmxvdyBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgICAgXCJcXG5pZiBcIixcbiAgICAgICAgICAgICAgICBcIlxcbmZvciBcIixcbiAgICAgICAgICAgICAgICBcIlxcbndoaWxlIFwiLFxuICAgICAgICAgICAgICAgIFwiXFxuZG8gd2hpbGUgXCIsXG4gICAgICAgICAgICAgICAgXCJcXG5hc3NlbWJseSBcIixcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCBieSB0aGUgbm9ybWFsIHR5cGUgb2YgbGluZXNcbiAgICAgICAgICAgICAgICBcIlxcblxcblwiLFxuICAgICAgICAgICAgICAgIFwiXFxuXCIsXG4gICAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgICAgXCJcIixcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExhbmd1YWdlICR7bGFuZ3VhZ2V9IGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHNwbGl0dGVyIHdoaWNoIGxvb2tzIGF0IHRva2Vucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VuVGV4dFNwbGl0dGVyIGV4dGVuZHMgVGV4dFNwbGl0dGVyIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9rZW5UZXh0U3BsaXR0ZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuY29kaW5nTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhbGxvd2VkU3BlY2lhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXNhbGxvd2VkU3BlY2lhbFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b2tlbml6ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbmNvZGluZ05hbWUgPSBmaWVsZHM/LmVuY29kaW5nTmFtZSA/PyBcImdwdDJcIjtcbiAgICAgICAgdGhpcy5hbGxvd2VkU3BlY2lhbCA9IGZpZWxkcz8uYWxsb3dlZFNwZWNpYWwgPz8gW107XG4gICAgICAgIHRoaXMuZGlzYWxsb3dlZFNwZWNpYWwgPSBmaWVsZHM/LmRpc2FsbG93ZWRTcGVjaWFsID8/IFwiYWxsXCI7XG4gICAgfVxuICAgIGFzeW5jIHNwbGl0VGV4dCh0ZXh0KSB7XG4gICAgICAgIGlmICghdGhpcy50b2tlbml6ZXIpIHtcbiAgICAgICAgICAgIHRoaXMudG9rZW5pemVyID0gYXdhaXQgZ2V0RW5jb2RpbmcodGhpcy5lbmNvZGluZ05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNwbGl0cyA9IFtdO1xuICAgICAgICBjb25zdCBpbnB1dF9pZHMgPSB0aGlzLnRva2VuaXplci5lbmNvZGUodGV4dCwgdGhpcy5hbGxvd2VkU3BlY2lhbCwgdGhpcy5kaXNhbGxvd2VkU3BlY2lhbCk7XG4gICAgICAgIGxldCBzdGFydF9pZHggPSAwO1xuICAgICAgICB3aGlsZSAoc3RhcnRfaWR4IDwgaW5wdXRfaWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0X2lkeCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdGFydF9pZHggLT0gdGhpcy5jaHVua092ZXJsYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbmRfaWR4ID0gTWF0aC5taW4oc3RhcnRfaWR4ICsgdGhpcy5jaHVua1NpemUsIGlucHV0X2lkcy5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmtfaWRzID0gaW5wdXRfaWRzLnNsaWNlKHN0YXJ0X2lkeCwgZW5kX2lkeCk7XG4gICAgICAgICAgICBzcGxpdHMucHVzaCh0aGlzLnRva2VuaXplci5kZWNvZGUoY2h1bmtfaWRzKSk7XG4gICAgICAgICAgICBzdGFydF9pZHggPSBlbmRfaWR4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGxpdHM7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1hcmtkb3duVGV4dFNwbGl0dGVyIGV4dGVuZHMgUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgc2VwYXJhdG9yczogUmVjdXJzaXZlQ2hhcmFjdGVyVGV4dFNwbGl0dGVyLmdldFNlcGFyYXRvcnNGb3JMYW5ndWFnZShcIm1hcmtkb3duXCIpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTGF0ZXhUZXh0U3BsaXR0ZXIgZXh0ZW5kcyBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICBzZXBhcmF0b3JzOiBSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIuZ2V0U2VwYXJhdG9yc0Zvckxhbmd1YWdlKFwibGF0ZXhcIiksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudCIsIkJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIiwiZ2V0RW5jb2RpbmciLCJUZXh0U3BsaXR0ZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjaHVua1NpemUiLCJjaHVua092ZXJsYXAiLCJrZWVwU2VwYXJhdG9yIiwibGVuZ3RoRnVuY3Rpb24iLCJ0ZXh0IiwibGVuZ3RoIiwiRXJyb3IiLCJ0cmFuc2Zvcm1Eb2N1bWVudHMiLCJkb2N1bWVudHMiLCJjaHVua0hlYWRlck9wdGlvbnMiLCJzcGxpdERvY3VtZW50cyIsInNwbGl0T25TZXBhcmF0b3IiLCJzZXBhcmF0b3IiLCJzcGxpdHMiLCJyZWdleEVzY2FwZWRTZXBhcmF0b3IiLCJyZXBsYWNlIiwic3BsaXQiLCJSZWdFeHAiLCJmaWx0ZXIiLCJzIiwiY3JlYXRlRG9jdW1lbnRzIiwidGV4dHMiLCJtZXRhZGF0YXMiLCJfbWV0YWRhdGFzIiwiQXJyYXkiLCJtYXAiLCJjaHVua0hlYWRlciIsImNodW5rT3ZlcmxhcEhlYWRlciIsImFwcGVuZENodW5rT3ZlcmxhcEhlYWRlciIsImkiLCJsaW5lQ291bnRlckluZGV4IiwicHJldkNodW5rIiwiaW5kZXhQcmV2Q2h1bmsiLCJjaHVuayIsInNwbGl0VGV4dCIsInBhZ2VDb250ZW50IiwiaW5kZXhDaHVuayIsImluZGV4T2YiLCJuZXdMaW5lc0JlZm9yZUZpcnN0Q2h1bmsiLCJudW1iZXJPZk5ld0xpbmVzIiwiaW5kZXhFbmRQcmV2Q2h1bmsiLCJudW1iZXJPZkludGVybWVkaWF0ZU5ld0xpbmVzIiwibmV3TGluZXNDb3VudCIsImxvYyIsImxpbmVzIiwiZnJvbSIsInRvIiwibWV0YWRhdGFXaXRoTGluZXNOdW1iZXIiLCJwdXNoIiwibWV0YWRhdGEiLCJzdGFydCIsImVuZCIsInRleHRTZWN0aW9uIiwic2xpY2UiLCJtYXRjaCIsInNlbGVjdGVkRG9jdW1lbnRzIiwiZG9jIiwidW5kZWZpbmVkIiwiam9pbkRvY3MiLCJkb2NzIiwiam9pbiIsInRyaW0iLCJtZXJnZVNwbGl0cyIsImN1cnJlbnREb2MiLCJ0b3RhbCIsImQiLCJfbGVuIiwiY29uc29sZSIsIndhcm4iLCJzaGlmdCIsIkNoYXJhY3RlclRleHRTcGxpdHRlciIsImxjX25hbWUiLCJTdXBwb3J0ZWRUZXh0U3BsaXR0ZXJMYW5ndWFnZXMiLCJSZWN1cnNpdmVDaGFyYWN0ZXJUZXh0U3BsaXR0ZXIiLCJzZXBhcmF0b3JzIiwiX3NwbGl0VGV4dCIsImZpbmFsQ2h1bmtzIiwibmV3U2VwYXJhdG9ycyIsImluY2x1ZGVzIiwiZ29vZFNwbGl0cyIsIl9zZXBhcmF0b3IiLCJtZXJnZWRUZXh0Iiwib3RoZXJJbmZvIiwiZnJvbUxhbmd1YWdlIiwibGFuZ3VhZ2UiLCJvcHRpb25zIiwiZ2V0U2VwYXJhdG9yc0Zvckxhbmd1YWdlIiwiVG9rZW5UZXh0U3BsaXR0ZXIiLCJlbmNvZGluZ05hbWUiLCJhbGxvd2VkU3BlY2lhbCIsImRpc2FsbG93ZWRTcGVjaWFsIiwidG9rZW5pemVyIiwiaW5wdXRfaWRzIiwiZW5jb2RlIiwic3RhcnRfaWR4IiwiZW5kX2lkeCIsIk1hdGgiLCJtaW4iLCJjaHVua19pZHMiLCJkZWNvZGUiLCJNYXJrZG93blRleHRTcGxpdHRlciIsIkxhdGV4VGV4dFNwbGl0dGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/dist/text_splitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/document_loaders/base.js":
/*!*********************************************************!*\
  !*** ./node_modules/langchain/document_loaders/base.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentLoader: () => (/* reexport safe */ _dist_document_loaders_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentLoader)\n/* harmony export */ });\n/* harmony import */ var _dist_document_loaders_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/document_loaders/base.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/base.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2RvY3VtZW50X2xvYWRlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kb2N1bWVudF9sb2FkZXJzL2Jhc2UuanM/ZTVkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2RvY3VtZW50X2xvYWRlcnMvYmFzZS5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/document_loaders/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/document_loaders/fs/directory.js":
/*!*****************************************************************!*\
  !*** ./node_modules/langchain/document_loaders/fs/directory.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DirectoryLoader: () => (/* reexport safe */ _dist_document_loaders_fs_directory_js__WEBPACK_IMPORTED_MODULE_0__.DirectoryLoader),\n/* harmony export */   UnknownHandling: () => (/* reexport safe */ _dist_document_loaders_fs_directory_js__WEBPACK_IMPORTED_MODULE_0__.UnknownHandling)\n/* harmony export */ });\n/* harmony import */ var _dist_document_loaders_fs_directory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dist/document_loaders/fs/directory.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/fs/directory.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2RvY3VtZW50X2xvYWRlcnMvZnMvZGlyZWN0b3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9kb2N1bWVudF9sb2FkZXJzL2ZzL2RpcmVjdG9yeS5qcz84ZDJkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uLy4uL2Rpc3QvZG9jdW1lbnRfbG9hZGVycy9mcy9kaXJlY3RvcnkuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/document_loaders/fs/directory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/document_loaders/fs/unstructured.js":
/*!********************************************************************!*\
  !*** ./node_modules/langchain/document_loaders/fs/unstructured.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UnknownHandling: () => (/* reexport safe */ _dist_document_loaders_fs_unstructured_js__WEBPACK_IMPORTED_MODULE_0__.UnknownHandling),\n/* harmony export */   UnstructuredDirectoryLoader: () => (/* reexport safe */ _dist_document_loaders_fs_unstructured_js__WEBPACK_IMPORTED_MODULE_0__.UnstructuredDirectoryLoader),\n/* harmony export */   UnstructuredLoader: () => (/* reexport safe */ _dist_document_loaders_fs_unstructured_js__WEBPACK_IMPORTED_MODULE_0__.UnstructuredLoader)\n/* harmony export */ });\n/* harmony import */ var _dist_document_loaders_fs_unstructured_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../dist/document_loaders/fs/unstructured.js */ \"(rsc)/./node_modules/langchain/dist/document_loaders/fs/unstructured.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL2RvY3VtZW50X2xvYWRlcnMvZnMvdW5zdHJ1Y3R1cmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vZG9jdW1lbnRfbG9hZGVycy9mcy91bnN0cnVjdHVyZWQuanM/YTRjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi8uLi9kaXN0L2RvY3VtZW50X2xvYWRlcnMvZnMvdW5zdHJ1Y3R1cmVkLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/document_loaders/fs/unstructured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/base.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/base.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.awaitHandlers = input._awaitHandler ?? this.awaitHandlers;\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZCO0FBQytDO0FBQ25CO0FBQ3pEOzs7O0NBSUMsR0FDRCxNQUFNSTtBQUNOO0FBQ0E7Ozs7O0NBS0MsR0FDTSxNQUFNQyw0QkFBNEJEO0lBQ3JDLElBQUlFLGVBQWU7UUFDZixPQUFPO1lBQUM7WUFBa0I7WUFBYSxJQUFJLENBQUNDLElBQUk7U0FBQztJQUNyRDtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPQztJQUNYO0lBQ0EsSUFBSUMsZ0JBQWdCO1FBQ2hCLE9BQU9EO0lBQ1g7SUFDQSxJQUFJRSxhQUFhO1FBQ2IsT0FBT0Y7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsT0FBT0csVUFBVTtRQUNiLE9BQU8sSUFBSSxDQUFDTCxJQUFJO0lBQ3BCO0lBQ0E7O0tBRUMsR0FDRCxJQUFJTSxRQUFRO1FBQ1IsT0FBTztlQUNBLElBQUksQ0FBQ1AsWUFBWTtZQUNwQkoseUVBQWtCQSxDQUFDLElBQUksQ0FBQ1ksV0FBVztTQUN0QztJQUNMO0lBQ0FBLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCO1lBQ3pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPbEIscUVBQXNCQSxDQUFDLHNDQUFzQztRQUN4RTtRQUNBLElBQUksQ0FBQ21CLFNBQVMsR0FBR1AsU0FBUyxDQUFDO1FBQzNCLElBQUlBLE9BQU87WUFDUCxJQUFJLENBQUNRLFNBQVMsR0FBR1IsTUFBTVEsU0FBUyxJQUFJLElBQUksQ0FBQ0EsU0FBUztZQUNsRCxJQUFJLENBQUNDLFdBQVcsR0FBR1QsTUFBTVMsV0FBVyxJQUFJLElBQUksQ0FBQ0EsV0FBVztZQUN4RCxJQUFJLENBQUNDLFdBQVcsR0FBR1YsTUFBTVUsV0FBVyxJQUFJLElBQUksQ0FBQ0EsV0FBVztZQUN4RCxJQUFJLENBQUNDLGVBQWUsR0FBR1gsTUFBTVcsZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZTtZQUNwRSxJQUFJLENBQUNDLGFBQWEsR0FBR1osTUFBTWEsYUFBYSxJQUFJLElBQUksQ0FBQ0QsYUFBYTtRQUNsRTtJQUNKO0lBQ0FFLE9BQU87UUFDSCxPQUFPLElBQUksSUFBSSxDQUFDZixXQUFXLENBQUMsSUFBSTtJQUNwQztJQUNBZ0IsU0FBUztRQUNMLE9BQU83QiwrREFBWUEsQ0FBQzhCLFNBQVMsQ0FBQ0QsTUFBTSxDQUFDRSxJQUFJLENBQUMsSUFBSTtJQUNsRDtJQUNBQyx1QkFBdUI7UUFDbkIsT0FBT2hDLCtEQUFZQSxDQUFDOEIsU0FBUyxDQUFDRSxvQkFBb0IsQ0FBQ0QsSUFBSSxDQUFDLElBQUk7SUFDaEU7SUFDQSxPQUFPRSxZQUFZQyxPQUFPLEVBQUU7UUFDeEIsTUFBTUMsZ0JBQWdCL0I7WUFDbEJTLGFBQWM7Z0JBQ1YsS0FBSztnQkFDTEUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO29CQUNoQ0MsWUFBWTtvQkFDWkMsY0FBYztvQkFDZEMsVUFBVTtvQkFDVkMsT0FBT3JCLDRDQUFPO2dCQUNsQjtnQkFDQWdCLE9BQU9zQixNQUFNLENBQUMsSUFBSSxFQUFFSDtZQUN4QjtRQUNKO1FBQ0EsT0FBTyxJQUFJQztJQUNmO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9iYXNlLmpzPzFiYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlLCBnZXRfbGNfdW5pcXVlX25hbWUsIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmVcbiAqIG92ZXJyaWRkZW4gaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlXG4gKiBleGVjdXRpb24gb2YgYSBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xufVxuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBjcmVhdGluZyBjYWxsYmFjayBoYW5kbGVycyBpbiB0aGUgTGFuZ0NoYWluXG4gKiBmcmFtZXdvcmsuIEl0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmUgb3ZlcnJpZGRlblxuICogaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gKiBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiY2FsbGJhY2tzXCIsIHRoaXMubmFtZV07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBzZXJpYWxpemFibGUuIE92ZXJyaWRlIHRvIHByb3ZpZGUgYW4gYWxpYXMgb3JcbiAgICAgKiB0byBwcmVzZXJ2ZSB0aGUgc2VyaWFsaXplZCBtb2R1bGUgbmFtZSBpbiBtaW5pZmllZCBlbnZpcm9ubWVudHMuXG4gICAgICpcbiAgICAgKiBJbXBsZW1lbnRlZCBhcyBhIHN0YXRpYyBtZXRob2QgdG8gc3VwcG9ydCBsb2FkaW5nIGxvZ2ljLlxuICAgICAqL1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgc2VyaWFsaXplZCBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlLlxuICAgICAqL1xuICAgIGdldCBsY19pZCgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnRoaXMubGNfbmFtZXNwYWNlLFxuICAgICAgICAgICAgZ2V0X2xjX3VuaXF1ZV9uYW1lKHRoaXMuY29uc3RydWN0b3IpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlTExNXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQ2hhaW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVBZ2VudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZVJldHJpZXZlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF3YWl0SGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkRcIikgIT09IFwidHJ1ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGlucHV0IHx8IHt9O1xuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTExNID0gaW5wdXQuaWdub3JlTExNID8/IHRoaXMuaWdub3JlTExNO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVDaGFpbiA9IGlucHV0Lmlnbm9yZUNoYWluID8/IHRoaXMuaWdub3JlQ2hhaW47XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUFnZW50ID0gaW5wdXQuaWdub3JlQWdlbnQgPz8gdGhpcy5pZ25vcmVBZ2VudDtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlUmV0cmlldmVyID0gaW5wdXQuaWdub3JlUmV0cmlldmVyID8/IHRoaXMuaWdub3JlUmV0cmlldmVyO1xuICAgICAgICAgICAgdGhpcy5hd2FpdEhhbmRsZXJzID0gaW5wdXQuX2F3YWl0SGFuZGxlciA/PyB0aGlzLmF3YWl0SGFuZGxlcnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OTm90SW1wbGVtZW50ZWQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21NZXRob2RzKG1ldGhvZHMpIHtcbiAgICAgICAgY2xhc3MgSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV1aWQudjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgbWV0aG9kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIYW5kbGVyKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInV1aWQiLCJTZXJpYWxpemFibGUiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJsY19uYW1lc3BhY2UiLCJuYW1lIiwibGNfc2VjcmV0cyIsInVuZGVmaW5lZCIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwibGNfbmFtZSIsImxjX2lkIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJpZ25vcmVMTE0iLCJpZ25vcmVDaGFpbiIsImlnbm9yZUFnZW50IiwiaWdub3JlUmV0cmlldmVyIiwiYXdhaXRIYW5kbGVycyIsIl9hd2FpdEhhbmRsZXIiLCJjb3B5IiwidG9KU09OIiwicHJvdG90eXBlIiwiY2FsbCIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiZnJvbU1ldGhvZHMiLCJtZXRob2RzIiwiSGFuZGxlciIsInY0IiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/manager.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/initialize.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/initialize.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/promises.js\");\n\n\n\n\n\n\n\n\nif (/* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\" && /* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\") {\n    /* #__PURE__ */ console.warn([\n        \"[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.\",\n        \"[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,\",\n        `[WARN]: we suggest setting \"process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true\" to avoid additional latency.`\n    ].join(\"\\n\"));\n}\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            await handler.handleLLMStart?.(llm, [\n                                prompt\n                            ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup, idx)=>{\n            // Can't have duplicate runs with the same run ID (if provided)\n            const runId_ = idx === 0 && runId ? runId : (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            if (handler.handleChatModelStart) {\n                                await handler.handleChatModelStart?.(llm, [\n                                    messageGroup\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            } else if (handler.handleLLMStart) {\n                                const messageString = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(messageGroup);\n                                await handler.handleLLMStart?.(llm, [\n                                    messageString\n                                ], runId_, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            }\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId_, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\";\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    callbackManager.addHandler(await (0,_tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__.getTracingV2CallbackHandler)(), true);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\n * processQuestions(questions).catch(console.error);\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0M7QUFDYTtBQUNjO0FBQ1E7QUFDaEI7QUFDRTtBQUNTO0FBQ2xCO0FBQ2hELElBQ0EsYUFBYSxHQUFHTSxxRUFBc0JBLENBQUMsNEJBQTRCLFVBQy9ELGFBQWEsR0FBR0EscUVBQXNCQSxDQUFDLHNDQUNuQyxRQUFRO0lBQ1osYUFBYSxHQUFHRyxRQUFRQyxJQUFJLENBQUM7UUFDekI7UUFDQTtRQUNBLENBQUMseUdBQXlHLENBQUM7S0FDOUcsQ0FBQ0MsSUFBSSxDQUFDO0FBQ1g7QUFDTyxTQUFTQyx1QkFBdUJDLEdBQUc7SUFDdEMsSUFBSSxDQUFDQSxLQUFLO1FBQ04sT0FBTyxDQUFDO0lBQ1osT0FDSyxJQUFJQyxNQUFNQyxPQUFPLENBQUNGLFFBQVEsVUFBVUEsS0FBSztRQUMxQyxPQUFPO1lBQUVHLFdBQVdIO1FBQUk7SUFDNUIsT0FDSztRQUNELE9BQU9BO0lBQ1g7QUFDSjtBQUNBOztDQUVDLEdBQ00sTUFBTUk7SUFDVEMsV0FBV0MsT0FBTyxFQUFFO1FBQ2hCLE9BQU8sSUFBSSxDQUFDQyxXQUFXLENBQUM7WUFBQ0Q7U0FBUTtJQUNyQztBQUNKO0FBQ0E7O0NBRUMsR0FDRCxNQUFNRTtJQUNGQyxZQUFZQyxLQUFLLEVBQUVDLFFBQVEsRUFBRUMsbUJBQW1CLEVBQUVDLElBQUksRUFBRUMsZUFBZSxFQUFFQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxZQUFZLENBQUU7UUFDbEhDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2I7UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FB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b3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvbWFuYWdlci5qcz8zYTUzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gXCJ1dWlkXCI7XG5pbXBvcnQgeyBCYXNlQ2FsbGJhY2tIYW5kbGVyLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENvbnNvbGVDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9jb25zb2xlLmpzXCI7XG5pbXBvcnQgeyBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9pbml0aWFsaXplLmpzXCI7XG5pbXBvcnQgeyBnZXRCdWZmZXJTdHJpbmcgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiLi4vdXRpbHMvZW52LmpzXCI7XG5pbXBvcnQgeyBMYW5nQ2hhaW5UcmFjZXIsIH0gZnJvbSBcIi4uL3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qc1wiO1xuaW1wb3J0IHsgY29uc3VtZUNhbGxiYWNrIH0gZnJvbSBcIi4vcHJvbWlzZXMuanNcIjtcbmlmIChcbi8qICNfX1BVUkVfXyAqLyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdfVjJcIikgPT09IFwidHJ1ZVwiICYmXG4gICAgLyogI19fUFVSRV9fICovIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkRcIikgIT09XG4gICAgICAgIFwidHJ1ZVwiKSB7XG4gICAgLyogI19fUFVSRV9fICovIGNvbnNvbGUud2FybihbXG4gICAgICAgIFwiW1dBUk5dOiBZb3UgaGF2ZSBlbmFibGVkIExhbmdTbWl0aCB0cmFjaW5nIHdpdGhvdXQgYmFja2dyb3VuZGluZyBjYWxsYmFja3MuXCIsXG4gICAgICAgIFwiW1dBUk5dOiBJZiB5b3UgYXJlIG5vdCB1c2luZyBhIHNlcnZlcmxlc3MgZW52aXJvbm1lbnQgd2hlcmUgeW91IG11c3Qgd2FpdCBmb3IgdHJhY2luZyBjYWxscyB0byBmaW5pc2gsXCIsXG4gICAgICAgIGBbV0FSTl06IHdlIHN1Z2dlc3Qgc2V0dGluZyBcInByb2Nlc3MuZW52LkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORD10cnVlXCIgdG8gYXZvaWQgYWRkaXRpb25hbCBsYXRlbmN5LmAsXG4gICAgXS5qb2luKFwiXFxuXCIpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNhbGxiYWNrQ29uZmlnQXJnKGFyZykge1xuICAgIGlmICghYXJnKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpIHx8IFwibmFtZVwiIGluIGFyZykge1xuICAgICAgICByZXR1cm4geyBjYWxsYmFja3M6IGFyZyB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG59XG4vKipcbiAqIE1hbmFnZSBjYWxsYmFja3MgZnJvbSBkaWZmZXJlbnQgY29tcG9uZW50cyBvZiBMYW5nQ2hhaW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcbiAgICBzZXRIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0SGFuZGxlcnMoW2hhbmRsZXJdKTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHJ1biBtYW5hZ2VyIGluIExhbmdDaGFpbi5cbiAqL1xuY2xhc3MgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHJ1bklkLCBoYW5kbGVycywgaW5oZXJpdGFibGVIYW5kbGVycywgdGFncywgaW5oZXJpdGFibGVUYWdzLCBtZXRhZGF0YSwgaW5oZXJpdGFibGVNZXRhZGF0YSwgX3BhcmVudFJ1bklkKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZUhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZUhhbmRsZXJzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlVGFnc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBpbmhlcml0YWJsZU1ldGFkYXRhXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfcGFyZW50UnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IF9wYXJlbnRSdW5JZFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVGV4dCh0ZXh0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRleHQ/Lih0ZXh0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVGV4dDogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIE1hbmFnZXMgY2FsbGJhY2tzIGZvciByZXRyaWV2ZXIgcnVucy5cbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvclJldHJpZXZlclJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFbmQoZG9jdW1lbnRzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyRW5kPy4oZG9jdW1lbnRzLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlUmV0cmlldmVyYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVSZXRyaWV2ZXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVJldHJpZXZlckVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJFcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yTExNUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywgZmllbGRzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNTmV3VG9rZW4/Lih0b2tlbiwgaWR4ID8/IHsgcHJvbXB0OiAwLCBjb21wbGV0aW9uOiAwIH0sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGZpZWxkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTU5ld1Rva2VuOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1biBleHRlbmRzIEJhc2VSdW5NYW5hZ2VyIHtcbiAgICBnZXRDaGlsZCh0YWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLnJ1bklkKTtcbiAgICAgICAgbWFuYWdlci5zZXRIYW5kbGVycyh0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMpO1xuICAgICAgICBtYW5hZ2VyLmFkZFRhZ3ModGhpcy5pbmhlcml0YWJsZVRhZ3MpO1xuICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSk7XG4gICAgICAgIGlmICh0YWcpIHtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkVGFncyhbdGFnXSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVycm9yKGVyciwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIGt3YXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUNoYWluRXJyb3I6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXQsIF9ydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpbkVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEFjdGlvbihhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50QWN0aW9uPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRBY3Rpb246ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBZ2VudEVuZChhY3Rpb24pIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUFnZW50RW5kPy4oYWN0aW9uLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQWdlbnRFbmQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xFcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xFbmQob3V0cHV0KSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUFnZW50KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVUb29sRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiV2hhdCBpcyB0aGUgYW5zd2VyIHRvIHtxdWVzdGlvbn0/XCIpO1xuICpcbiAqIC8vIEV4YW1wbGUgb2YgdXNpbmcgTExNQ2hhaW4gd2l0aCBPcGVuQUkgYW5kIGEgc2ltcGxlIHByb21wdFxuICogY29uc3QgY2hhaW4gPSBuZXcgTExNQ2hhaW4oe1xuICogICBsbG06IG5ldyBDaGF0T3BlbkFJKHsgdGVtcGVyYXR1cmU6IDAuOSB9KSxcbiAqICAgcHJvbXB0LFxuICogfSk7XG4gKlxuICogLy8gUnVubmluZyB0aGUgY2hhaW4gd2l0aCBhIHNpbmdsZSBxdWVzdGlvblxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7XG4gKiAgIHF1ZXN0aW9uOiBcIldoYXQgaXMgdGhlIGFpcnNwZWVkIHZlbG9jaXR5IG9mIGFuIHVubGFkZW4gc3dhbGxvdz9cIixcbiAqIH0pO1xuICogY29uc29sZS5sb2coXCJUaGUgYW5zd2VyIGlzOlwiLCByZXN1bHQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnRSdW5JZCwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZU1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjYWxsYmFja19tYW5hZ2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gb3B0aW9ucz8uaGFuZGxlcnMgPz8gdGhpcy5oYW5kbGVycztcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID1cbiAgICAgICAgICAgIG9wdGlvbnM/LmluaGVyaXRhYmxlSGFuZGxlcnMgPz8gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzO1xuICAgICAgICB0aGlzLnRhZ3MgPSBvcHRpb25zPy50YWdzID8/IHRoaXMudGFncztcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZVRhZ3MgPSBvcHRpb25zPy5pbmhlcml0YWJsZVRhZ3MgPz8gdGhpcy5pbmhlcml0YWJsZVRhZ3M7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBvcHRpb25zPy5tZXRhZGF0YSA/PyB0aGlzLm1ldGFkYXRhO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVNZXRhZGF0YSA/PyB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGE7XG4gICAgICAgIHRoaXMuX3BhcmVudFJ1bklkID0gcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBhcmVudCBydW4gSUQsIGlmIGFueS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJlbnQgcnVuIElELlxuICAgICAqL1xuICAgIGdldFBhcmVudFJ1bklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50UnVuSWQ7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTVN0YXJ0KGxsbSwgcHJvbXB0cywgcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2FuJ3QgaGF2ZSBkdXBsaWNhdGUgcnVucyB3aXRoIHRoZSBzYW1lIHJ1biBJRCAoaWYgcHJvdmlkZWQpXG4gICAgICAgICAgICBjb25zdCBydW5JZF8gPSBpZHggPT09IDAgJiYgcnVuSWQgPyBydW5JZCA6IHV1aWR2NCgpO1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUxMTSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1TdGFydD8uKGxsbSwgW3Byb21wdF0sIHJ1bklkXywgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZF8sIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG1lc3NhZ2VzLm1hcChhc3luYyAobWVzc2FnZUdyb3VwLCBpZHgpID0+IHtcbiAgICAgICAgICAgIC8vIENhbid0IGhhdmUgZHVwbGljYXRlIHJ1bnMgd2l0aCB0aGUgc2FtZSBydW4gSUQgKGlmIHByb3ZpZGVkKVxuICAgICAgICAgICAgY29uc3QgcnVuSWRfID0gaWR4ID09PSAwICYmIHJ1bklkID8gcnVuSWQgOiB1dWlkdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydD8uKGxsbSwgW21lc3NhZ2VHcm91cF0sIHJ1bklkXywgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaGFuZGxlci5oYW5kbGVMTE1TdGFydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VTdHJpbmcgPSBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZUdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbbWVzc2FnZVN0cmluZ10sIHJ1bklkXywgdGhpcy5fcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVMTE1TdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrTWFuYWdlckZvckxMTVJ1bihydW5JZF8sIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCA9IHV1aWR2NCgpLCBydW5UeXBlID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpblN0YXJ0Py4oY2hhaW4sIGlucHV0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1blR5cGUsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpblN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xTdGFydD8uKHRvb2wsIGlucHV0LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyU3RhcnQ/LihyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlclN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICB9XG4gICAgc2V0SGFuZGxlcnMoaGFuZGxlcnMsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRhZ3ModGFncywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWdzKHRhZ3MpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICB0aGlzLnRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzLnB1c2goLi4udGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVGFncyh0YWdzKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgIH1cbiAgICBhZGRNZXRhZGF0YShtZXRhZGF0YSwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHsgLi4udGhpcy5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9IHsgLi4udGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KGFkZGl0aW9uYWxIYW5kbGVycyA9IFtdLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVUYWdzLmluY2x1ZGVzKHRhZyk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLm1ldGFkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSBPYmplY3Qua2V5cyh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpLmluY2x1ZGVzKGtleSk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHsgW2tleV06IHRoaXMubWV0YWRhdGFba2V5XSB9LCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjb3BpZXMgb2YgY29uc29sZV9jYWxsYmFja19oYW5kbGVyXG4gICAgICAgICAgICBtYW5hZ2VyLmhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5uYW1lID09PSBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiKVxuICAgICAgICAgICAgICAgIC5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21IYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZHY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IHRoaXMoKTtcbiAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNvbmZpZ3VyZShpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucykge1xuICAgICAgICBsZXQgY2FsbGJhY2tNYW5hZ2VyO1xuICAgICAgICBpZiAoaW5oZXJpdGFibGVIYW5kbGVycyB8fCBsb2NhbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmhlcml0YWJsZUhhbmRsZXJzKSB8fCAhaW5oZXJpdGFibGVIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuc2V0SGFuZGxlcnMoaW5oZXJpdGFibGVIYW5kbGVycz8ubWFwKGVuc3VyZUhhbmRsZXIpID8/IFtdLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBjYWxsYmFja01hbmFnZXIuY29weShBcnJheS5pc0FycmF5KGxvY2FsSGFuZGxlcnMpXG4gICAgICAgICAgICAgICAgPyBsb2NhbEhhbmRsZXJzLm1hcChlbnN1cmVIYW5kbGVyKVxuICAgICAgICAgICAgICAgIDogbG9jYWxIYW5kbGVycz8uaGFuZGxlcnMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJib3NlRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVkVSQk9TRVwiKSA9PT0gXCJ0cnVlXCIgfHxcbiAgICAgICAgICAgIG9wdGlvbnM/LnZlcmJvc2U7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdWMkVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdfVjJcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCB0cmFjaW5nRW5hYmxlZCA9IHRyYWNpbmdWMkVuYWJsZWQgfHxcbiAgICAgICAgICAgIChnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdcIikgPz8gZmFsc2UpO1xuICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgfHwgdHJhY2luZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IENvbnNvbGVDYWxsYmFja0hhbmRsZXIucHJvdG90eXBlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc29sZUhhbmRsZXIgPSBuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGNvbnNvbGVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFjaW5nRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2luZ1YyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihhd2FpdCBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZVRhZ3MgfHwgbG9jYWxUYWdzKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MoaW5oZXJpdGFibGVUYWdzID8/IFtdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVNZXRhZGF0YSB8fCBsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGluaGVyaXRhYmxlTWV0YWRhdGEgPz8ge30pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFuYWdlcjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9gKTtcbiAqXG4gKiAvLyBFeGFtcGxlIG9mIHVzaW5nIExMTUNoYWluIHRvIHByb2Nlc3MgYSBzZXJpZXMgb2YgcXVlc3Rpb25zXG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBQcm9jZXNzIHF1ZXN0aW9ucyB1c2luZyB0aGUgY2hhaW5cbiAqIGNvbnN0IHByb2Nlc3NRdWVzdGlvbnMgPSBhc3luYyAocXVlc3Rpb25zKSA9PiB7XG4gKiAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25zKSB7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7IHF1ZXN0aW9uIH0pO1xuICogICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiAgIH1cbiAqIH07XG4gKlxuICogLy8gRXhhbXBsZSBxdWVzdGlvbnNcbiAqIGNvbnN0IHF1ZXN0aW9ucyA9IFtcbiAqICAgXCJXaGF0IGlzIHlvdXIgbmFtZT9cIixcbiAqICAgXCJXaGF0IGlzIHlvdXIgcXVlc3Q/XCIsXG4gKiAgIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIGNvbG9yP1wiLFxuICogXTtcbiAqXG4gKiAvLyBSdW4gdGhlIGV4YW1wbGVcbiAqIHByb2Nlc3NRdWVzdGlvbnMocXVlc3Rpb25zKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYWNlR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJncm91cE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdyb3VwTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFuYWdlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKGdyb3VwX25hbWUsIGlucHV0cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYiA9IG5ldyBMYW5nQ2hhaW5UcmFjZXIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNtID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShbY2JdKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNtPy5oYW5kbGVDaGFpblN0YXJ0KHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiBbXCJsYW5nY2hhaW5cIiwgXCJjYWxsYmFja3NcIiwgXCJncm91cHNcIiwgZ3JvdXBfbmFtZV0sXG4gICAgICAgIH0sIGlucHV0cyA/PyB7fSk7XG4gICAgICAgIGlmICghcnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBydW4gZ3JvdXAgY2FsbGJhY2sgbWFuYWdlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KGlucHV0cykge1xuICAgICAgICBpZiAoIXRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuZ3JvdXBOYW1lLCBpbnB1dHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFuYWdlci5nZXRDaGlsZCgpO1xuICAgIH1cbiAgICBhc3luYyBlcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlbmQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVuZChvdXRwdXQgPz8ge30pO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYWNlQXNHcm91cChncm91cE9wdGlvbnMsIGVuY2xvc2VkQ29kZSwgLi4uYXJncykge1xuICAgIGNvbnN0IHRyYWNlR3JvdXAgPSBuZXcgVHJhY2VHcm91cChncm91cE9wdGlvbnMubmFtZSwgZ3JvdXBPcHRpb25zKTtcbiAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBhd2FpdCB0cmFjZUdyb3VwLnN0YXJ0KHsgLi4uYXJncyB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmNsb3NlZENvZGUoY2FsbGJhY2tNYW5hZ2VyLCAuLi5hcmdzKTtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lbmQoX2NvZXJjZVRvRGljdChyZXN1bHQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciIsImdldEJ1ZmZlclN0cmluZyIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdW1lQ2FsbGJhY2siLCJjb25zb2xlIiwid2FybiIsImpvaW4iLCJwYXJzZUNhbGxiYWNrQ29uZmlnQXJnIiwiYXJnIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbGJhY2tzIiwiQmFzZUNhbGxiYWNrTWFuYWdlciIsInNldEhhbmRsZXIiLCJoYW5kbGVyIiwic2V0SGFuZGxlcnMiLCJCYXNlUnVuTWFuYWdlciIsImNvbnN0cnVjdG9yIiwicnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJ0YWdzIiwiaW5oZXJpdGFibGVUYWdzIiwibWV0YWRhdGEiLCJpbmhlcml0YWJsZU1ldGFkYXRhIiwiX3BhcmVudFJ1bklkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImhhbmRsZVRleHQiLCJ0ZXh0IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImVyciIsImVycm9yIiwibmFtZSIsImF3YWl0SGFuZGxlcnMiLCJDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4iLCJnZXRDaGlsZCIsInRhZyIsIm1hbmFnZXIiLCJDYWxsYmFja01hbmFnZXIiLCJhZGRUYWdzIiwiYWRkTWV0YWRhdGEiLCJoYW5kbGVSZXRyaWV2ZXJFbmQiLCJkb2N1bWVudHMiLCJpZ25vcmVSZXRyaWV2ZXIiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIkNhbGxiYWNrTWFuYWdlckZvckxMTVJ1biIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJfcnVuSWQiLCJfdGFncyIsImZpZWxkcyIsImlnbm9yZUxMTSIsInByb21wdCIsImNvbXBsZXRpb24iLCJoYW5kbGVMTE1FcnJvciIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsIkNhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIiwiaGFuZGxlQ2hhaW5FcnJvciIsImt3YXJncyIsImlnbm9yZUNoYWluIiwiaGFuZGxlQ2hhaW5FbmQiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImlnbm9yZUFnZW50IiwiaGFuZGxlQWdlbnRFbmQiLCJDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIiwiaGFuZGxlVG9vbEVycm9yIiwiaGFuZGxlVG9vbEVuZCIsInBhcmVudFJ1bklkIiwib3B0aW9ucyIsImdldFBhcmVudFJ1bklkIiwiaGFuZGxlTExNU3RhcnQiLCJsbG0iLCJwcm9tcHRzIiwidW5kZWZpbmVkIiwiZXh0cmFQYXJhbXMiLCJfbWV0YWRhdGEiLCJydW5OYW1lIiwicnVuSWRfIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJtZXNzYWdlcyIsIm1lc3NhZ2VHcm91cCIsIm1lc3NhZ2VTdHJpbmciLCJoYW5kbGVDaGFpblN0YXJ0IiwiY2hhaW4iLCJpbnB1dHMiLCJydW5UeXBlIiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9vbCIsImlucHV0IiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJyZXRyaWV2ZXIiLCJxdWVyeSIsImFkZEhhbmRsZXIiLCJpbmhlcml0IiwicHVzaCIsInJlbW92ZUhhbmRsZXIiLCJmaWx0ZXIiLCJfaGFuZGxlciIsInJlbW92ZVRhZ3MiLCJpbmNsdWRlcyIsInJlbW92ZU1ldGFkYXRhIiwia2V5Iiwia2V5cyIsImNvcHkiLCJhZGRpdGlvbmFsSGFuZGxlcnMiLCJpbmhlcml0YWJsZSIsImgiLCJzb21lIiwiZnJvbUhhbmRsZXJzIiwiSGFuZGxlciIsImFzc2lnbiIsImNvbmZpZ3VyZSIsImxvY2FsSGFuZGxlcnMiLCJsb2NhbFRhZ3MiLCJsb2NhbE1ldGFkYXRhIiwiY2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsInZlcmJvc2VFbmFibGVkIiwidmVyYm9zZSIsInRyYWNpbmdWMkVuYWJsZWQiLCJ0cmFjaW5nRW5hYmxlZCIsInByb3RvdHlwZSIsImNvbnNvbGVIYW5kbGVyIiwiZnJvbU1ldGhvZHMiLCJUcmFjZUdyb3VwIiwiZ3JvdXBOYW1lIiwiZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlciIsImdyb3VwX25hbWUiLCJjYiIsImNtIiwicnVuTWFuYWdlciIsImxjIiwidHlwZSIsImlkIiwiRXJyb3IiLCJzdGFydCIsImVuZCIsIl9jb2VyY2VUb0RpY3QiLCJkZWZhdWx0S2V5IiwidHJhY2VBc0dyb3VwIiwiZ3JvdXBPcHRpb25zIiwiZW5jbG9zZWRDb2RlIiwiYXJncyIsInRyYWNlR3JvdXAiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/promises.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWxsYmFja3MvcHJvbWlzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBQ2hDLElBQUlDO0FBQ0o7Ozs7Q0FJQyxHQUNELFNBQVNDO0lBQ0wsTUFBTUMsU0FBUyxLQUFzQkgsR0FBR0EsK0NBQWlCLEdBQUdBLG9DQUFTQTtJQUNyRSxPQUFPLElBQUlHLE9BQU87UUFDZEUsV0FBVztRQUNYQyxhQUFhO0lBQ2pCO0FBQ0o7QUFDQTs7OztDQUlDLEdBQ00sZUFBZUMsZ0JBQWdCQyxTQUFTLEVBQUVDLElBQUk7SUFDakQsSUFBSUEsU0FBUyxNQUFNO1FBQ2YsTUFBTUQ7SUFDVixPQUNLO1FBQ0QsSUFBSSxPQUFPUCxVQUFVLGFBQWE7WUFDOUJBLFFBQVFDO1FBQ1o7UUFDQSxLQUFLRCxNQUFNUyxHQUFHLENBQUNGO0lBQ25CO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxTQUFTRztJQUNaLE9BQU8sT0FBT1YsVUFBVSxjQUFjQSxNQUFNVyxNQUFNLEtBQUtDLFFBQVFDLE9BQU87QUFDMUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9wcm9taXNlcy5qcz9hOTUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmxldCBxdWV1ZTtcbi8qKlxuICogQ3JlYXRlcyBhIHF1ZXVlIHVzaW5nIHRoZSBwLXF1ZXVlIGxpYnJhcnkuIFRoZSBxdWV1ZSBpcyBjb25maWd1cmVkIHRvXG4gKiBhdXRvLXN0YXJ0IGFuZCBoYXMgYSBjb25jdXJyZW5jeSBvZiAxLCBtZWFuaW5nIGl0IHdpbGwgcHJvY2VzcyB0YXNrc1xuICogb25lIGF0IGEgdGltZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUXVldWUoKSB7XG4gICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgcmV0dXJuIG5ldyBQUXVldWUoe1xuICAgICAgICBhdXRvU3RhcnQ6IHRydWUsXG4gICAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgIH0pO1xufVxuLyoqXG4gKiBDb25zdW1lIGEgcHJvbWlzZSwgZWl0aGVyIGFkZGluZyBpdCB0byB0aGUgcXVldWUgb3Igd2FpdGluZyBmb3IgaXQgdG8gcmVzb2x2ZVxuICogQHBhcmFtIHByb21pc2UgUHJvbWlzZSB0byBjb25zdW1lXG4gKiBAcGFyYW0gd2FpdCBXaGV0aGVyIHRvIHdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmUgb3IgcmVzb2x2ZSBpbW1lZGlhdGVseVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uc3VtZUNhbGxiYWNrKHByb21pc2VGbiwgd2FpdCkge1xuICAgIGlmICh3YWl0ID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHByb21pc2VGbigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBxdWV1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcXVldWUgPSBjcmVhdGVRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZvaWQgcXVldWUuYWRkKHByb21pc2VGbik7XG4gICAgfVxufVxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIGluIHRoZSBxdWV1ZSB0byByZXNvbHZlLiBJZiB0aGUgcXVldWUgaXNcbiAqIHVuZGVmaW5lZCwgaXQgaW1tZWRpYXRlbHkgcmVzb2x2ZXMgYSBwcm9taXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXdhaXRBbGxDYWxsYmFja3MoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBxdWV1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHF1ZXVlLm9uSWRsZSgpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iXSwibmFtZXMiOlsiUFF1ZXVlTW9kIiwicXVldWUiLCJjcmVhdGVRdWV1ZSIsIlBRdWV1ZSIsImRlZmF1bHQiLCJhdXRvU3RhcnQiLCJjb25jdXJyZW5jeSIsImNvbnN1bWVDYWxsYmFjayIsInByb21pc2VGbiIsIndhaXQiLCJhZGQiLCJhd2FpdEFsbENhbGxiYWNrcyIsIm9uSWRsZSIsIlByb21pc2UiLCJyZXNvbHZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/document.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/documents/document.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent ? fields.pageContent.toString() : this.pageContent;\n        this.metadata = fields.metadata ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvZG9jdW1lbnQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztDQUVDLEdBQ00sTUFBTUE7SUFDVEMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUFHUCxPQUFPTyxXQUFXLEdBQy9CUCxPQUFPTyxXQUFXLENBQUNDLFFBQVEsS0FDM0IsSUFBSSxDQUFDRCxXQUFXO1FBQ3RCLElBQUksQ0FBQ0UsUUFBUSxHQUFHVCxPQUFPUyxRQUFRLElBQUksQ0FBQztJQUN4QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvZG9jdW1lbnQuanM/YzI1YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhIGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYWdlQ29udGVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhZ2VDb250ZW50ID0gZmllbGRzLnBhZ2VDb250ZW50XG4gICAgICAgICAgICA/IGZpZWxkcy5wYWdlQ29udGVudC50b1N0cmluZygpXG4gICAgICAgICAgICA6IHRoaXMucGFnZUNvbnRlbnQ7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBmaWVsZHMubWV0YWRhdGEgPz8ge307XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkRvY3VtZW50IiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGFnZUNvbnRlbnQiLCJ0b1N0cmluZyIsIm1ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/index.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/documents/index.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBOEI7QUFDSSIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzPzcyMTQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vZG9jdW1lbnQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYW5zZm9ybWVycy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/transformers.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/documents/transformers.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvdHJhbnNmb3JtZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNoRDs7Ozs7Ozs7O0NBU0MsR0FDTSxNQUFNQyxnQ0FBZ0NELHdEQUFRQTtJQUNqREUsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFhO2FBQWU7UUFDMUQ7SUFDSjtJQUNBOzs7Ozs7S0FNQyxHQUNEQyxPQUFPQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO0lBQ25DO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyxtQ0FBbUNiO0lBQzVDLE1BQU1ZLG1CQUFtQkUsU0FBUyxFQUFFO1FBQ2hDLE1BQU1DLGVBQWUsRUFBRTtRQUN2QixLQUFLLE1BQU1DLFlBQVlGLFVBQVc7WUFDOUIsTUFBTUcsc0JBQXNCLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0Y7WUFDMURELGFBQWFJLElBQUksQ0FBQ0Y7UUFDdEI7UUFDQSxPQUFPRjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy90cmFuc2Zvcm1lcnMuanM/ODliNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW1zLlxuICpcbiAqIEEgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24gc3lzdGVtIHRha2VzIGFuIGFycmF5IG9mIERvY3VtZW50cyBhbmQgcmV0dXJucyBhblxuICogYXJyYXkgb2YgdHJhbnNmb3JtZWQgRG9jdW1lbnRzLiBUaGVzZSBhcnJheXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaGF2ZVxuICogdGhlIHNhbWUgbGVuZ3RoLlxuICpcbiAqIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMgYSB0ZXh0IHNwbGl0dGVyIHRoYXQgc3BsaXRzIGEgbGFyZ2UgZG9jdW1lbnQgaW50b1xuICogbWFueSBzbWFsbGVyIGRvY3VtZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiZG9jdW1lbnRzXCIsIFwidHJhbnNmb3JtZXJzXCJdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gaW52b2tlIHRoZSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbi4gVGhpcyBtZXRob2QgY2FsbHMgdGhlXG4gICAgICogdHJhbnNmb3JtRG9jdW1lbnRzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGRvY3VtZW50cyB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gX29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50cy5cbiAgICAgKi9cbiAgICBpbnZva2UoaW5wdXQsIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybURvY3VtZW50cyhpbnB1dCk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyBmb3IgZG9jdW1lbnQgdHJhbnNmb3JtZXJzIHRoYXQgcmV0dXJuIGV4YWN0bHkgb25lIHRyYW5zZm9ybWVkIGRvY3VtZW50XG4gKiBmb3IgZWFjaCBpbnB1dCBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIge1xuICAgIGFzeW5jIHRyYW5zZm9ybURvY3VtZW50cyhkb2N1bWVudHMpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jdW1lbnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gYXdhaXQgdGhpcy5fdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgbmV3RG9jdW1lbnRzLnB1c2godHJhbnNmb3JtZWREb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0RvY3VtZW50cztcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImludm9rZSIsImlucHV0IiwiX29wdGlvbnMiLCJ0cmFuc2Zvcm1Eb2N1bWVudHMiLCJNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lciIsImRvY3VtZW50cyIsIm5ld0RvY3VtZW50cyIsImRvY3VtZW50IiwidHJhbnNmb3JtZWREb2N1bWVudCIsIl90cmFuc2Zvcm1Eb2N1bWVudCIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/map_keys.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/load/map_keys.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW1DO0FBQ0Q7QUFDM0IsU0FBU0UsVUFBVUMsR0FBRyxFQUFFQyxHQUFHO0lBQzlCLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJSCx1Q0FBU0EsQ0FBQ0c7QUFDbkM7QUFDTyxTQUFTRSxZQUFZRixHQUFHLEVBQUVDLEdBQUc7SUFDaEMsT0FBT0EsS0FBSyxDQUFDRCxJQUFJLElBQUlGLHNDQUFTQSxDQUFDRTtBQUNuQztBQUNPLFNBQVNHLFFBQVFDLE1BQU0sRUFBRUMsTUFBTSxFQUFFSixHQUFHO0lBQ3ZDLE1BQU1LLFNBQVMsQ0FBQztJQUNoQixJQUFLLE1BQU1OLE9BQU9JLE9BQVE7UUFDdEIsSUFBSUcsT0FBT0MsTUFBTSxDQUFDSixRQUFRSixNQUFNO1lBQzVCTSxNQUFNLENBQUNELE9BQU9MLEtBQUtDLEtBQUssR0FBR0csTUFBTSxDQUFDSixJQUFJO1FBQzFDO0lBQ0o7SUFDQSxPQUFPTTtBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzP2UzOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNuYWtlQ2FzZSBmcm9tIFwiZGVjYW1lbGl6ZVwiO1xuaW1wb3J0IGNhbWVsQ2FzZSBmcm9tIFwiY2FtZWxjYXNlXCI7XG5leHBvcnQgZnVuY3Rpb24ga2V5VG9Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgc25ha2VDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24ga2V5RnJvbUpzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBjYW1lbENhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBLZXlzKGZpZWxkcywgbWFwcGVyLCBtYXApIHtcbiAgICBjb25zdCBtYXBwZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oZmllbGRzLCBrZXkpKSB7XG4gICAgICAgICAgICBtYXBwZWRbbWFwcGVyKGtleSwgbWFwKV0gPSBmaWVsZHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwcGVkO1xufVxuIl0sIm5hbWVzIjpbInNuYWtlQ2FzZSIsImNhbWVsQ2FzZSIsImtleVRvSnNvbiIsImtleSIsIm1hcCIsImtleUZyb21Kc29uIiwibWFwS2V5cyIsImZpZWxkcyIsIm1hcHBlciIsIm1hcHBlZCIsIk9iamVjdCIsImhhc093biJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL3NlcmlhbGl6YWJsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUQ7QUFDbkQsU0FBU0UsWUFBWUMsR0FBRztJQUNwQixPQUFPQyxNQUFNQyxPQUFPLENBQUNGLE9BQU87V0FBSUE7S0FBSSxHQUFHO1FBQUUsR0FBR0EsR0FBRztJQUFDO0FBQ3BEO0FBQ0EsU0FBU0csZUFBZUMsSUFBSSxFQUFFQyxVQUFVO0lBQ3BDLE1BQU1DLFNBQVNQLFlBQVlLO0lBQzNCLEtBQUssTUFBTSxDQUFDRyxNQUFNQyxTQUFTLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ0wsWUFBYTtRQUN2RCxNQUFNLENBQUNNLE1BQU0sR0FBR0MsYUFBYSxHQUFHTCxLQUFLTSxLQUFLLENBQUMsS0FBS0MsT0FBTztRQUN2RCw4REFBOEQ7UUFDOUQsSUFBSUMsVUFBVVQ7UUFDZCxLQUFLLE1BQU1VLFFBQVFKLGFBQWFFLE9BQU8sR0FBSTtZQUN2QyxJQUFJQyxPQUFPLENBQUNDLEtBQUssS0FBS0MsV0FBVztnQkFDN0I7WUFDSjtZQUNBRixPQUFPLENBQUNDLEtBQUssR0FBR2pCLFlBQVlnQixPQUFPLENBQUNDLEtBQUs7WUFDekNELFVBQVVBLE9BQU8sQ0FBQ0MsS0FBSztRQUMzQjtRQUNBLElBQUlELE9BQU8sQ0FBQ0osS0FBSyxLQUFLTSxXQUFXO1lBQzdCRixPQUFPLENBQUNKLEtBQUssR0FBRztnQkFDWk8sSUFBSTtnQkFDSkMsTUFBTTtnQkFDTkMsSUFBSTtvQkFBQ1o7aUJBQVM7WUFDbEI7UUFDSjtJQUNKO0lBQ0EsT0FBT0Y7QUFDWDtBQUNBOzs7Q0FHQyxHQUNNLFNBQVNlLG1CQUNoQixtRUFBbUU7QUFDbkVDLGlCQUFpQjtJQUNiLGdFQUFnRTtJQUNoRSw0RUFBNEU7SUFDNUUsTUFBTUMsY0FBY2QsT0FBT2UsY0FBYyxDQUFDRjtJQUMxQyxNQUFNRyxxQkFBcUIs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YW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvc2VyaWFsaXphYmxlLmpzPzM5NDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5VG9Kc29uLCBtYXBLZXlzIH0gZnJvbSBcIi4vbWFwX2tleXMuanNcIjtcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBbLi4ub2JqXSA6IHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiByZXBsYWNlU2VjcmV0cyhyb290LCBzZWNyZXRzTWFwKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc2hhbGxvd0NvcHkocm9vdCk7XG4gICAgZm9yIChjb25zdCBbcGF0aCwgc2VjcmV0SWRdIG9mIE9iamVjdC5lbnRyaWVzKHNlY3JldHNNYXApKSB7XG4gICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgY3VycmVudCA9IHJlc3VsdDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50W3BhcnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRbcGFydF0gPSBzaGFsbG93Q29weShjdXJyZW50W3BhcnRdKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50W2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRbbGFzdF0gPSB7XG4gICAgICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZWNyZXRcIixcbiAgICAgICAgICAgICAgICBpZDogW3NlY3JldElkXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogR2V0IGEgdW5pcXVlIG5hbWUgZm9yIHRoZSBtb2R1bGUsIHJhdGhlciB0aGFuIHBhcmVudCBjbGFzcyBpbXBsZW1lbnRhdGlvbnMuXG4gKiBTaG91bGQgbm90IGJlIHN1YmNsYXNzZWQsIHN1YmNsYXNzIGxjX25hbWUgYWJvdmUgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9sY191bmlxdWVfbmFtZShcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbnNlcmlhbGl6YWJsZUNsYXNzKSB7XG4gICAgLy8gXCJzdXBlclwiIGhlcmUgd291bGQgcmVmZXIgdG8gdGhlIHBhcmVudCBjbGFzcyBvZiBTZXJpYWxpemFibGUsXG4gICAgLy8gd2hlbiB3ZSB3YW50IHRoZSBwYXJlbnQgY2xhc3Mgb2YgdGhlIG1vZHVsZSBhY3R1YWxseSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgIGNvbnN0IHBhcmVudENsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHNlcmlhbGl6YWJsZUNsYXNzKTtcbiAgICBjb25zdCBsY05hbWVJc1N1YmNsYXNzZWQgPSB0eXBlb2Ygc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICh0eXBlb2YgcGFyZW50Q2xhc3MubGNfbmFtZSAhPT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgICBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCkgIT09IHBhcmVudENsYXNzLmxjX25hbWUoKSk7XG4gICAgaWYgKGxjTmFtZUlzU3ViY2xhc3NlZCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLm5hbWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHNlY3JldHMsIHdoaWNoIHdpbGwgYmUgb21pdHRlZCBmcm9tIHNlcmlhbGl6YXRpb24uXG4gICAgICogS2V5cyBhcmUgcGF0aHMgdG8gdGhlIHNlY3JldCBpbiBjb25zdHJ1Y3RvciBhcmdzLCBlLmcuIFwiZm9vLmJhci5iYXpcIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBzZWNyZXQgaWRzLCB3aGljaCB3aWxsIGJlIHVzZWQgd2hlbiBkZXNlcmlhbGl6aW5nLlxuICAgICAqL1xuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMgdG8gbWVyZ2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzLlxuICAgICAqIEtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGUuZy4gXCJmb29cIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBhdHRyaWJ1dGUgdmFsdWVzLCB3aGljaCB3aWxsIGJlIHNlcmlhbGl6ZWQuXG4gICAgICogVGhlc2UgYXR0cmlidXRlcyBuZWVkIHRvIGJlIGFjY2VwdGVkIGJ5IHRoZSBjb25zdHJ1Y3RvciBhcyBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFsaWFzZXMgZm9yIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGFsaWFzIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBrZXkgaW4gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZWcuIG1ha2UgYXJndW1lbnQgbmFtZXMgbWF0Y2ggUHl0aG9uLlxuICAgICAqL1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihrd2FyZ3MsIC4uLl9hcmdzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGt3YXJncyB8fCB7fTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMubGNfc2VyaWFsaXphYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICB0aGlzLmxjX2t3YXJncyBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZSB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMubGNfa3dhcmdzICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHRoaXMubGNfa3dhcmdzKSkge1xuICAgICAgICAgICAgLy8gV2UgZG8gbm90IHN1cHBvcnQgc2VyaWFsaXphdGlvbiBvZiBjbGFzc2VzIHdpdGggYXJnIG5vdCBhIFBPSk9cbiAgICAgICAgICAgIC8vIEknbSBhd2FyZSB0aGUgY2hlY2sgYWJvdmUgaXNuJ3QgYXMgc3RyaWN0IGFzIGl0IGNvdWxkIGJlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSB7fTtcbiAgICAgICAgY29uc3Qgc2VjcmV0cyA9IHt9O1xuICAgICAgICBjb25zdCBrd2FyZ3MgPSBPYmplY3Qua2V5cyh0aGlzLmxjX2t3YXJncykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBrZXkgaW4gdGhpcyA/IHRoaXNba2V5XSA6IHRoaXMubGNfa3dhcmdzW2tleV07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGdldCBzZWNyZXRzLCBhdHRyaWJ1dGVzIGFuZCBhbGlhc2VzIGZyb20gYWxsIHN1cGVyY2xhc3Nlc1xuICAgICAgICBmb3IgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7IGN1cnJlbnQ7IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYWxpYXNlcywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hbGlhc2VzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VjcmV0cywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19zZWNyZXRzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oa3dhcmdzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2F0dHJpYnV0ZXNcIiwgdGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluY2x1ZGUgYWxsIHNlY3JldHMgdXNlZCwgZXZlbiBpZiBub3QgaW4ga3dhcmdzLFxuICAgICAgICAvLyB3aWxsIGJlIHJlcGxhY2VkIHdpdGggc2VudGluZWwgdmFsdWUgaW4gcmVwbGFjZVNlY3JldHNcbiAgICAgICAgT2JqZWN0LmtleXMoc2VjcmV0cykuZm9yRWFjaCgoa2V5UGF0aCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgcmVhZCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IHdyaXRlID0ga3dhcmdzO1xuICAgICAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBrZXlQYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJ0c1JldmVyc2UucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHJlYWQpIHx8IHJlYWRba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHdyaXRlKSB8fCB3cml0ZVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgcmVhZFtrZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlYWRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWFkID0gcmVhZFtrZXldO1xuICAgICAgICAgICAgICAgIHdyaXRlID0gd3JpdGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0IGluIHJlYWQgJiYgcmVhZFtsYXN0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVbbGFzdF0gPSB3cml0ZVtsYXN0XSB8fCByZWFkW2xhc3RdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJjb25zdHJ1Y3RvclwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMubGNfaWQsXG4gICAgICAgICAgICBrd2FyZ3M6IG1hcEtleXMoT2JqZWN0LmtleXMoc2VjcmV0cykubGVuZ3RoID8gcmVwbGFjZVNlY3JldHMoa3dhcmdzLCBzZWNyZXRzKSA6IGt3YXJncywga2V5VG9Kc29uLCBhbGlhc2VzKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsia2V5VG9Kc29uIiwibWFwS2V5cyIsInNoYWxsb3dDb3B5Iiwib2JqIiwiQXJyYXkiLCJpc0FycmF5IiwicmVwbGFjZVNlY3JldHMiLCJyb290Iiwic2VjcmV0c01hcCIsInJlc3VsdCIsInBhdGgiLCJzZWNyZXRJZCIsIk9iamVjdCIsImVudHJpZXMiLCJsYXN0IiwicGFydHNSZXZlcnNlIiwic3BsaXQiLCJyZXZlcnNlIiwiY3VycmVudCIsInBhcnQiLCJ1bmRlZmluZWQiLCJsYyIsInR5cGUiLCJpZCIsImdldF9sY191bmlxdWVfbmFtZSIsInNlcmlhbGl6YWJsZUNsYXNzIiwicGFyZW50Q2xhc3MiLCJnZXRQcm90b3R5cGVPZiIsImxjTmFtZUlzU3ViY2xhc3NlZCIsImxjX25hbWUiLCJuYW1lIiwiU2VyaWFsaXphYmxlIiwibGNfaWQiLCJsY19uYW1lc3BhY2UiLCJjb25zdHJ1Y3RvciIsImxjX3NlY3JldHMiLCJsY19hdHRyaWJ1dGVzIiwibGNfYWxpYXNlcyIsImt3YXJncyIsIl9hcmdzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsInRvSlNPTiIsImxjX3NlcmlhbGl6YWJsZSIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiYWxpYXNlcyIsInNlY3JldHMiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwia2V5IiwiYXNzaWduIiwiUmVmbGVjdCIsImdldCIsImZvckVhY2giLCJrZXlQYXRoIiwicmVhZCIsIndyaXRlIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/ai.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/ai.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   isAIMessage: () => (/* binding */ isAIMessage)\n/* harmony export */ });\n/* harmony import */ var _utils_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/json.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/json.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\"\n        };\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                additional_kwargs: kwargs ?? {}\n            };\n        } else {\n            initParams = fields;\n            const rawToolCalls = initParams.additional_kwargs?.tool_calls;\n            const toolCalls = initParams.tool_calls;\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0 && (toolCalls === undefined || toolCalls.length === 0)) {\n                console.warn([\n                    \"New LangChain packages are available that more efficiently handle\",\n                    \"tool calling.\\n\\nPlease upgrade your packages to versions that set\",\n                    \"message tool calls. e.g., `yarn add @langchain/anthropic`,\",\n                    \"yarn add @langchain/openai`, etc.\"\n                ].join(\" \"));\n            }\n            try {\n                if (rawToolCalls !== undefined && toolCalls === undefined) {\n                    const [toolCalls, invalidToolCalls] = (0,_tool_js__WEBPACK_IMPORTED_MODULE_2__.defaultToolCallParser)(rawToolCalls);\n                    initParams.tool_calls = toolCalls ?? [];\n                    initParams.invalid_tool_calls = invalidToolCalls ?? [];\n                } else {\n                    initParams.tool_calls = initParams.tool_calls ?? [];\n                    initParams.invalid_tool_calls = initParams.invalid_tool_calls ?? [];\n                }\n            } catch (e) {\n                // Do nothing if parsing fails\n                initParams.tool_calls = [];\n                initParams.invalid_tool_calls = [];\n            }\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        if (typeof initParams !== \"string\") {\n            this.tool_calls = initParams.tool_calls ?? this.tool_calls;\n            this.invalid_tool_calls = initParams.invalid_tool_calls ?? this.invalid_tool_calls;\n        }\n    }\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n}\nfunction isAIMessage(x) {\n    return x._getType() === \"ai\";\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk {\n    constructor(fields){\n        let initParams;\n        if (typeof fields === \"string\") {\n            initParams = {\n                content: fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else if (fields.tool_call_chunks === undefined) {\n            initParams = {\n                ...fields,\n                tool_calls: [],\n                invalid_tool_calls: [],\n                tool_call_chunks: []\n            };\n        } else {\n            const toolCalls = [];\n            const invalidToolCalls = [];\n            for (const toolCallChunk of fields.tool_call_chunks){\n                let parsedArgs = {};\n                try {\n                    parsedArgs = (0,_utils_json_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson)(toolCallChunk.args ?? \"{}\") ?? {};\n                    if (typeof parsedArgs !== \"object\" || Array.isArray(parsedArgs)) {\n                        throw new Error(\"Malformed tool call chunk args.\");\n                    }\n                    toolCalls.push({\n                        name: toolCallChunk.name ?? \"\",\n                        args: parsedArgs,\n                        id: toolCallChunk.id\n                    });\n                } catch (e) {\n                    invalidToolCalls.push({\n                        name: toolCallChunk.name,\n                        args: toolCallChunk.args,\n                        id: toolCallChunk.id,\n                        error: \"Malformed args.\"\n                    });\n                }\n            }\n            initParams = {\n                ...fields,\n                tool_calls: toolCalls,\n                invalid_tool_calls: invalidToolCalls\n            };\n        }\n        // Sadly, TypeScript only allows super() calls at root if the class has\n        // properties with initializers, so we have to check types twice.\n        super(initParams);\n        // Must redeclare tool call fields since there is no multiple inheritance in JS.\n        // These are typed as optional to avoid breaking changes and allow for casting\n        // from BaseMessage.\n        Object.defineProperty(this, \"tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"invalid_tool_calls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tool_call_chunks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.tool_call_chunks = initParams?.tool_call_chunks ?? this.tool_call_chunks;\n        this.tool_calls = initParams?.tool_calls ?? this.tool_calls;\n        this.invalid_tool_calls = initParams?.invalid_tool_calls ?? this.invalid_tool_calls;\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            ...super.lc_aliases,\n            tool_calls: \"tool_calls\",\n            invalid_tool_calls: \"invalid_tool_calls\",\n            tool_call_chunks: \"tool_call_chunks\"\n        };\n    }\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    concat(chunk) {\n        const combinedFields = {\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_chunks: []\n        };\n        if (this.tool_call_chunks !== undefined || chunk.tool_call_chunks !== undefined) {\n            const rawToolCalls = (0,_base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists)(this.tool_call_chunks, chunk.tool_call_chunks);\n            if (rawToolCalls !== undefined && rawToolCalls.length > 0) {\n                combinedFields.tool_call_chunks = rawToolCalls;\n            }\n        }\n        return new AIMessageChunk(combinedFields);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9haS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0Q7QUFDK0M7QUFDaEQ7QUFDbkQ7O0NBRUMsR0FDTSxNQUFNTyxrQkFBa0JOLGlEQUFXQTtJQUN0QyxJQUFJTyxhQUFhO1FBQ2IsK0NBQStDO1FBQy9DLE9BQU87WUFDSCxHQUFHLEtBQUssQ0FBQ0EsVUFBVTtZQUNuQkMsWUFBWTtZQUNaQyxvQkFBb0I7UUFDeEI7SUFDSjtJQUNBQyxZQUFZQyxNQUFNLEVBQ2xCLGdCQUFnQixHQUNoQkMsTUFBTSxDQUFFO1FBQ0osSUFBSUM7UUFDSixJQUFJLE9BQU9GLFdBQVcsVUFBVTtZQUM1QkUsYUFBYTtnQkFDVEMsU0FBU0g7Z0JBQ1RILFlBQVksRUFBRTtnQkFDZEMsb0JBQW9CLEVBQUU7Z0JBQ3RCTSxtQkFBbUJILFVBQVUsQ0FBQztZQUNsQztRQUNKLE9BQ0s7WUFDREMsYUFBYUY7WUFDYixNQUFNSyxlQUFlSCxXQUFXRSxpQkFBaUIsRUFBRVA7WUFDbkQsTUFBTVMsWUFBWUosV0FBV0wsVUFBVTtZQUN2QyxJQUFJUSxpQkFBaUJFLGFBQ2pCRixhQUFhRyxNQUFNLEdBQUcsS0FDckJGLENBQUFBLGNBQWNDLGFBQWFELFVBQVVFLE1BQU0sS0FBSyxJQUFJO2dCQUNyREMsUUFBUUMsSUFBSSxDQUFDO29CQUNUO29CQUNBO29CQUNBO29CQUNBO2lCQUNILENBQUNDLElBQUksQ0FBQztZQUNYO1lBQ0EsSUFBSTtnQkFDQSxJQUFJTixpQkFBaUJFLGFBQWFELGNBQWNDLFdBQVc7b0JBQ3ZELE1BQU0sQ0FBQ0QsV0FBV00saUJBQWlCLEdBQUdsQiwrREFBcUJBLENBQUNXO29CQUM1REgsV0FBV0wsVUFBVSxHQUFHUyxhQUFhLEVBQUU7b0JBQ3ZDSixXQUFXSixrQkFBa0IsR0FBR2Msb0JBQW9CLEVBQUU7Z0JBQzFELE9BQ0s7b0JBQ0RW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QUFXO1lBQ3RDLE1BQU1GLGVBQWVaLHFEQUFXQSxDQUFDLElBQUksQ0FBQ2dDLGdCQUFnQixFQUFFWSxNQUFNWixnQkFBZ0I7WUFDOUUsSUFBSXBCLGlCQUFpQkUsYUFBYUYsYUFBYUcsTUFBTSxHQUFHLEdBQUc7Z0JBQ3ZEOEIsZUFBZWIsZ0JBQWdCLEdBQUdwQjtZQUN0QztRQUNKO1FBQ0EsT0FBTyxJQUFJbUIsZUFBZWM7SUFDOUI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYWkuanM/Nzk3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVBhcnRpYWxKc29uIH0gZnJvbSBcIi4uL3V0aWxzL2pzb24uanNcIjtcbmltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCBfbWVyZ2VMaXN0cywgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0VG9vbENhbGxQYXJzZXIsIH0gZnJvbSBcIi4vdG9vbC5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIEFJIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBBSU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5sY19hbGlhc2VzLFxuICAgICAgICAgICAgdG9vbF9jYWxsczogXCJ0b29sX2NhbGxzXCIsXG4gICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFwiaW52YWxpZF90b29sX2NhbGxzXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGxldCBpbml0UGFyYW1zO1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogW10sXG4gICAgICAgICAgICAgICAgaW52YWxpZF90b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczoga3dhcmdzID8/IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluaXRQYXJhbXMgPSBmaWVsZHM7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBpbml0UGFyYW1zLmFkZGl0aW9uYWxfa3dhcmdzPy50b29sX2NhbGxzO1xuICAgICAgICAgICAgY29uc3QgdG9vbENhbGxzID0gaW5pdFBhcmFtcy50b29sX2NhbGxzO1xuICAgICAgICAgICAgaWYgKHJhd1Rvb2xDYWxscyAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgcmF3VG9vbENhbGxzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAodG9vbENhbGxzID09PSB1bmRlZmluZWQgfHwgdG9vbENhbGxzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oW1xuICAgICAgICAgICAgICAgICAgICBcIk5ldyBMYW5nQ2hhaW4gcGFja2FnZXMgYXJlIGF2YWlsYWJsZSB0aGF0IG1vcmUgZWZmaWNpZW50bHkgaGFuZGxlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwidG9vbCBjYWxsaW5nLlxcblxcblBsZWFzZSB1cGdyYWRlIHlvdXIgcGFja2FnZXMgdG8gdmVyc2lvbnMgdGhhdCBzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJtZXNzYWdlIHRvb2wgY2FsbHMuIGUuZy4sIGB5YXJuIGFkZCBAbGFuZ2NoYWluL2FudGhyb3BpY2AsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwieWFybiBhZGQgQGxhbmdjaGFpbi9vcGVuYWlgLCBldGMuXCIsXG4gICAgICAgICAgICAgICAgXS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChyYXdUb29sQ2FsbHMgIT09IHVuZGVmaW5lZCAmJiB0b29sQ2FsbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbdG9vbENhbGxzLCBpbnZhbGlkVG9vbENhbGxzXSA9IGRlZmF1bHRUb29sQ2FsbFBhcnNlcihyYXdUb29sQ2FsbHMpO1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPSB0b29sQ2FsbHMgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gaW52YWxpZFRvb2xDYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRQYXJhbXMudG9vbF9jYWxscyA9IGluaXRQYXJhbXMudG9vbF9jYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdFBhcmFtcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPSBpbml0UGFyYW1zLmludmFsaWRfdG9vbF9jYWxscyA/PyBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgcGFyc2luZyBmYWlsc1xuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMudG9vbF9jYWxscyA9IFtdO1xuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2FkbHksIFR5cGVTY3JpcHQgb25seSBhbGxvd3Mgc3VwZXIoKSBjYWxscyBhdCByb290IGlmIHRoZSBjbGFzcyBoYXNcbiAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIGluaXRpYWxpemVycywgc28gd2UgaGF2ZSB0byBjaGVjayB0eXBlcyB0d2ljZS5cbiAgICAgICAgc3VwZXIoaW5pdFBhcmFtcyk7XG4gICAgICAgIC8vIFRoZXNlIGFyZSB0eXBlZCBhcyBvcHRpb25hbCB0byBhdm9pZCBicmVha2luZyBjaGFuZ2VzIGFuZCBhbGxvdyBmb3IgY2FzdGluZ1xuICAgICAgICAvLyBmcm9tIEJhc2VNZXNzYWdlLlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW52YWxpZF90b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbml0UGFyYW1zICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLnRvb2xfY2FsbHMgPSBpbml0UGFyYW1zLnRvb2xfY2FsbHMgPz8gdGhpcy50b29sX2NhbGxzO1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkX3Rvb2xfY2FsbHMgPVxuICAgICAgICAgICAgICAgIGluaXRQYXJhbXMuaW52YWxpZF90b29sX2NhbGxzID8/IHRoaXMuaW52YWxpZF90b29sX2NhbGxzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQUlNZXNzYWdlKHgpIHtcbiAgICByZXR1cm4geC5fZ2V0VHlwZSgpID09PSBcImFpXCI7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhbiBBSSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIEFJIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgbGV0IGluaXRQYXJhbXM7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbml0UGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBbXSxcbiAgICAgICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFtdLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbF9jaHVua3M6IFtdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZFRvb2xDYWxscyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbENodW5rIG9mIGZpZWxkcy50b29sX2NhbGxfY2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB7fTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gcGFyc2VQYXJ0aWFsSnNvbih0b29sQ2FsbENodW5rLmFyZ3MgPz8gXCJ7fVwiKSA/PyB7fTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRBcmdzICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkocGFyc2VkQXJncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCB0b29sIGNhbGwgY2h1bmsgYXJncy5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGxDaHVuay5uYW1lID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBwYXJzZWRBcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsQ2h1bmsuaWQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkVG9vbENhbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGxDaHVuay5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogdG9vbENhbGxDaHVuay5hcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsQ2h1bmsuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJNYWxmb3JtZWQgYXJncy5cIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsczogdG9vbENhbGxzLFxuICAgICAgICAgICAgICAgIGludmFsaWRfdG9vbF9jYWxsczogaW52YWxpZFRvb2xDYWxscyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2FkbHksIFR5cGVTY3JpcHQgb25seSBhbGxvd3Mgc3VwZXIoKSBjYWxscyBhdCByb290IGlmIHRoZSBjbGFzcyBoYXNcbiAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIGluaXRpYWxpemVycywgc28gd2UgaGF2ZSB0byBjaGVjayB0eXBlcyB0d2ljZS5cbiAgICAgICAgc3VwZXIoaW5pdFBhcmFtcyk7XG4gICAgICAgIC8vIE11c3QgcmVkZWNsYXJlIHRvb2wgY2FsbCBmaWVsZHMgc2luY2UgdGhlcmUgaXMgbm8gbXVsdGlwbGUgaW5oZXJpdGFuY2UgaW4gSlMuXG4gICAgICAgIC8vIFRoZXNlIGFyZSB0eXBlZCBhcyBvcHRpb25hbCB0byBhdm9pZCBicmVha2luZyBjaGFuZ2VzIGFuZCBhbGxvdyBmb3IgY2FzdGluZ1xuICAgICAgICAvLyBmcm9tIEJhc2VNZXNzYWdlLlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW52YWxpZF90b29sX2NhbGxzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2NodW5rc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2NodW5rcyA9XG4gICAgICAgICAgICBpbml0UGFyYW1zPy50b29sX2NhbGxfY2h1bmtzID8/IHRoaXMudG9vbF9jYWxsX2NodW5rcztcbiAgICAgICAgdGhpcy50b29sX2NhbGxzID0gaW5pdFBhcmFtcz8udG9vbF9jYWxscyA/PyB0aGlzLnRvb2xfY2FsbHM7XG4gICAgICAgIHRoaXMuaW52YWxpZF90b29sX2NhbGxzID1cbiAgICAgICAgICAgIGluaXRQYXJhbXM/LmludmFsaWRfdG9vbF9jYWxscyA/PyB0aGlzLmludmFsaWRfdG9vbF9jYWxscztcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIC8vIGV4Y2x1ZGUgc25ha2UgY2FzZSBjb252ZXJzaW9uIHRvIHBhc2NhbCBjYXNlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci5sY19hbGlhc2VzLFxuICAgICAgICAgICAgdG9vbF9jYWxsczogXCJ0b29sX2NhbGxzXCIsXG4gICAgICAgICAgICBpbnZhbGlkX3Rvb2xfY2FsbHM6IFwiaW52YWxpZF90b29sX2NhbGxzXCIsXG4gICAgICAgICAgICB0b29sX2NhbGxfY2h1bmtzOiBcInRvb2xfY2FsbF9jaHVua3NcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkFJTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgY29uc3QgY29tYmluZWRGaWVsZHMgPSB7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2NodW5rczogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnRvb2xfY2FsbF9jaHVua3MgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY2h1bmsudG9vbF9jYWxsX2NodW5rcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCByYXdUb29sQ2FsbHMgPSBfbWVyZ2VMaXN0cyh0aGlzLnRvb2xfY2FsbF9jaHVua3MsIGNodW5rLnRvb2xfY2FsbF9jaHVua3MpO1xuICAgICAgICAgICAgaWYgKHJhd1Rvb2xDYWxscyAhPT0gdW5kZWZpbmVkICYmIHJhd1Rvb2xDYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29tYmluZWRGaWVsZHMudG9vbF9jYWxsX2NodW5rcyA9IHJhd1Rvb2xDYWxscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKGNvbWJpbmVkRmllbGRzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsicGFyc2VQYXJ0aWFsSnNvbiIsIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiX21lcmdlTGlzdHMiLCJkZWZhdWx0VG9vbENhbGxQYXJzZXIiLCJBSU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwidG9vbF9jYWxscyIsImludmFsaWRfdG9vbF9jYWxscyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwia3dhcmdzIiwiaW5pdFBhcmFtcyIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJhd1Rvb2xDYWxscyIsInRvb2xDYWxscyIsInVuZGVmaW5lZCIsImxlbmd0aCIsImNvbnNvbGUiLCJ3YXJuIiwiam9pbiIsImludmFsaWRUb29sQ2FsbHMiLCJlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX25hbWUiLCJfZ2V0VHlwZSIsImlzQUlNZXNzYWdlIiwieCIsIkFJTWVzc2FnZUNodW5rIiwidG9vbF9jYWxsX2NodW5rcyIsInRvb2xDYWxsQ2h1bmsiLCJwYXJzZWRBcmdzIiwiYXJncyIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwicHVzaCIsIm5hbWUiLCJpZCIsImVycm9yIiwiY29uY2F0IiwiY2h1bmsiLCJjb21iaW5lZEZpZWxkcyIsInJlc3BvbnNlX21ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/ai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* binding */ _mergeDicts),\n/* harmony export */   _mergeLists: () => (/* binding */ _mergeLists),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* binding */ isOpenAIToolCallArray),\n/* harmony export */   mergeContent: () => (/* binding */ mergeContent)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return [\n            ...firstContent,\n            ...secondContent\n        ];\n    // If the first content is a list and second is a string\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            merged[key] = merged[key] + value;\n        } else if (!Array.isArray(merged[key]) && typeof merged[key] === \"object\") {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = _mergeLists(merged[key], value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _mergeLists(left, right) {\n    if (left === undefined && right === undefined) {\n        return undefined;\n    } else if (left === undefined || right === undefined) {\n        return left || right;\n    } else {\n        const merged = [\n            ...left\n        ];\n        for (const item of right){\n            if (typeof item === \"object\" && \"index\" in item && typeof item.index === \"number\") {\n                const toMerge = merged.findIndex((leftItem)=>leftItem.index === item.index);\n                if (toMerge !== -1) {\n                    merged[toMerge] = _mergeDicts(merged[toMerge], item);\n                } else {\n                    merged.push(item);\n                }\n            } else {\n                merged.push(item);\n            }\n        }\n        return merged;\n    }\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNoRCxTQUFTQyxhQUFhQyxZQUFZLEVBQUVDLGFBQWE7SUFDcEQsK0JBQStCO0lBQy9CLElBQUksT0FBT0QsaUJBQWlCLFVBQVU7UUFDbEMsSUFBSSxPQUFPQyxrQkFBa0IsVUFBVTtZQUNuQyxPQUFPRCxlQUFlQztRQUMxQixPQUNLO1lBQ0QsT0FBTztnQkFBQztvQkFBRUMsTUFBTTtvQkFBUUMsTUFBTUg7Z0JBQWE7bUJBQU1DO2FBQWM7UUFDbkU7SUFDQSxxQkFBcUI7SUFDekIsT0FDSyxJQUFJRyxNQUFNQyxPQUFPLENBQUNKLGdCQUFnQjtRQUNuQyxPQUFPO2VBQUlEO2VBQWlCQztTQUFjO0lBQzFDLHdEQUF3RDtJQUM1RCxPQUNLO1FBQ0QsaUVBQWlFO1FBQ2pFLE9BQU87ZUFBSUQ7WUFBYztnQkFBRUUsTUFBTTtnQkFBUUMsTUFBTUY7WUFBYztTQUFFO0lBQ25FO0FBQ0o7QUFDQTs7OztDQUlDLEdBQ00sTUFBTUssb0JBQW9CUiwrREFBWUE7SUFDekMsSUFBSVMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQ0hDLG1CQUFtQjtZQUNuQkMsbUJBQW1CO1FBQ3ZCO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRCxJQUFJTixPQUFPO1FBQ1AsT0FBTyxPQUFPLElBQUksQ0FBQ08sT0FBTyxLQUFLLFdBQVcsSUFBSSxDQUFDQSxPQUFPLEdBQUc7SUFDN0Q7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFDTEYsU0FBU0U7Z0JBQ1RKLG1CQUFtQks7Z0JBQ25CSixtQkFBbUIsQ0FBQztZQUN4QjtRQUNKO1FBQ0EsNkZBQTZG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QyxHQUNNLE1BQU1hLHlCQUF5QnZDO0FBQ3RDO0FBQ08sU0FBU3dDLGNBQWNDLFdBQVc7SUFDckMsT0FBTyxPQUFPQSxhQUFhekIsYUFBYTtBQUM1QztBQUNPLFNBQVMwQixtQkFBbUJELFdBQVc7SUFDMUMsT0FBUUQsY0FBY0MsZ0JBQ2xCLE9BQU9BLFlBQVlFLE1BQU0sS0FBSztBQUN0QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvYmFzZS5qcz80ODliIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQ29udGVudChmaXJzdENvbnRlbnQsIHNlY29uZENvbnRlbnQpIHtcbiAgICAvLyBJZiBmaXJzdCBjb250ZW50IGlzIGEgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBmaXJzdENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWNvbmRDb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RDb250ZW50ICsgc2Vjb25kQ29udGVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbeyB0eXBlOiBcInRleHRcIiwgdGV4dDogZmlyc3RDb250ZW50IH0sIC4uLnNlY29uZENvbnRlbnRdO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGJvdGggYXJlIGFycmF5c1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNlY29uZENvbnRlbnQpKSB7XG4gICAgICAgIHJldHVybiBbLi4uZmlyc3RDb250ZW50LCAuLi5zZWNvbmRDb250ZW50XTtcbiAgICAgICAgLy8gSWYgdGhlIGZpcnN0IGNvbnRlbnQgaXMgYSBsaXN0IGFuZCBzZWNvbmQgaXMgYSBzdHJpbmdcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgYWRkIHRoZSBzZWNvbmQgY29udGVudCBhcyBhIG5ldyBlbGVtZW50IG9mIHRoZSBsaXN0XG4gICAgICAgIHJldHVybiBbLi4uZmlyc3RDb250ZW50LCB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBzZWNvbmRDb250ZW50IH1dO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIHR5cGVzIG9mIG1lc3NhZ2VzIGluIGEgY29udmVyc2F0aW9uLiBJdCBpbmNsdWRlc1xuICogcHJvcGVydGllcyBsaWtlIGBjb250ZW50YCwgYG5hbWVgLCBhbmQgYGFkZGl0aW9uYWxfa3dhcmdzYC4gSXQgYWxzb1xuICogaW5jbHVkZXMgbWV0aG9kcyBsaWtlIGB0b0RpY3QoKWAgYW5kIGBfZ2V0VHlwZSgpYC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBcImFkZGl0aW9uYWxfa3dhcmdzXCIsXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogXCJyZXNwb25zZV9tZXRhZGF0YVwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFVzZSB7QGxpbmsgQmFzZU1lc3NhZ2UuY29udGVudH0gaW5zdGVhZC5cbiAgICAgKi9cbiAgICBnZXQgdGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmNvbnRlbnQgPT09IFwic3RyaW5nXCIgPyB0aGlzLmNvbnRlbnQgOiBcIlwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIGt3YXJncykge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7XG4gICAgICAgICAgICAgICAgY29udGVudDogZmllbGRzLFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBrd2FyZ3MsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IHt9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIGFkZGl0aW9uYWxfa3dhcmdzIGlzIHBhc3NlZCBpbnRvIHN1cGVyKCkgZm9yIHNlcmlhbGl6YXRpb25cbiAgICAgICAgaWYgKCFmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhID0ge307XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm1lc3NhZ2VzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29udGVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvKiogVGhlIG5hbWUgb2YgdGhlIG1lc3NhZ2Ugc2VuZGVyIGluIGEgbXVsdGktdXNlciBjaGF0LiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBBZGRpdGlvbmFsIGtleXdvcmQgYXJndW1lbnRzICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFkZGl0aW9uYWxfa3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBSZXNwb25zZSBtZXRhZGF0YS4gRm9yIGV4YW1wbGU6IHJlc3BvbnNlIGhlYWRlcnMsIGxvZ3Byb2JzLCB0b2tlbiBjb3VudHMuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlc3BvbnNlX21ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBmaWVsZHMuY29udGVudDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsX2t3YXJncyA9IGZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncztcbiAgICAgICAgdGhpcy5yZXNwb25zZV9tZXRhZGF0YSA9IGZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YTtcbiAgICB9XG4gICAgdG9EaWN0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5fZ2V0VHlwZSgpLFxuICAgICAgICAgICAgZGF0YTogdGhpcy50b0pTT04oKVxuICAgICAgICAgICAgICAgIC5rd2FyZ3MsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzT3BlbkFJVG9vbENhbGxBcnJheSh2YWx1ZSkge1xuICAgIHJldHVybiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiZcbiAgICAgICAgdmFsdWUuZXZlcnkoKHYpID0+IHR5cGVvZiB2LmluZGV4ID09PSBcIm51bWJlclwiKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gX21lcmdlRGljdHMoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxubGVmdCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucmlnaHRcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4pIHtcbiAgICBjb25zdCBtZXJnZWQgPSB7IC4uLmxlZnQgfTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyaWdodCkpIHtcbiAgICAgICAgaWYgKG1lcmdlZFtrZXldID09IG51bGwpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lcmdlZFtrZXldICE9PSB0eXBlb2YgdmFsdWUgfHxcbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkobWVyZ2VkW2tleV0pICE9PSBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoZSBtZXNzYWdlIGNodW5rLCBidXQgd2l0aCBhIGRpZmZlcmVudCB0eXBlLmApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSBtZXJnZWRba2V5XSArIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSAmJiB0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gX21lcmdlRGljdHMobWVyZ2VkW2tleV0sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSkge1xuICAgICAgICAgICAgbWVyZ2VkW2tleV0gPSBfbWVyZ2VMaXN0cyhtZXJnZWRba2V5XSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1lcmdlZFtrZXldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYGZpZWxkWyR7a2V5fV0gYWxyZWFkeSBleGlzdHMgaW4gdGhpcyBtZXNzYWdlIGNodW5rIGFuZCB2YWx1ZSBoYXMgdW5zdXBwb3J0ZWQgdHlwZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkO1xufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBfbWVyZ2VMaXN0cyhsZWZ0LCByaWdodCkge1xuICAgIGlmIChsZWZ0ID09PSB1bmRlZmluZWQgJiYgcmlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBlbHNlIGlmIChsZWZ0ID09PSB1bmRlZmluZWQgfHwgcmlnaHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVmdCB8fCByaWdodDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IFsuLi5sZWZ0XTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBcImluZGV4XCIgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBpdGVtLmluZGV4ID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9NZXJnZSA9IG1lcmdlZC5maW5kSW5kZXgoKGxlZnRJdGVtKSA9PiBsZWZ0SXRlbS5pbmRleCA9PT0gaXRlbS5pbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKHRvTWVyZ2UgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFt0b01lcmdlXSA9IF9tZXJnZURpY3RzKG1lcmdlZFt0b01lcmdlXSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXJnZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVyZ2VkO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4gKiBtZXNzYWdlIGNodW5rcy4gSXQgaW5jbHVkZXMgYSBtZXRob2QgYF9tZXJnZV9rd2FyZ3NfZGljdCgpYCBmb3IgbWVyZ2luZ1xuICogYWRkaXRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyBmcm9tIGFub3RoZXIgYEJhc2VNZXNzYWdlQ2h1bmtgIGludG8gdGhpc1xuICogb25lLiBJdCBhbHNvIG92ZXJyaWRlcyB0aGUgYF9fYWRkX18oKWAgbWV0aG9kIHRvIHN1cHBvcnQgY29uY2F0ZW5hdGlvblxuICogb2YgYEJhc2VNZXNzYWdlQ2h1bmtgIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZUxpa2U/Ll9nZXRUeXBlID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlTWVzc2FnZUNodW5rKG1lc3NhZ2VMaWtlKSB7XG4gICAgcmV0dXJuIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSAmJlxuICAgICAgICB0eXBlb2YgbWVzc2FnZUxpa2UuY29uY2F0ID09PSBcImZ1bmN0aW9uXCIpO1xufVxuIl0sIm5hbWVzIjpbIlNlcmlhbGl6YWJsZSIsIm1lcmdlQ29udGVudCIsImZpcnN0Q29udGVudCIsInNlY29uZENvbnRlbnQiLCJ0eXBlIiwidGV4dCIsIkFycmF5IiwiaXNBcnJheSIsIkJhc2VNZXNzYWdlIiwibGNfYWxpYXNlcyIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJjb250ZW50IiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJrd2FyZ3MiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibmFtZSIsInRvRGljdCIsIl9nZXRUeXBlIiwiZGF0YSIsInRvSlNPTiIsImlzT3BlbkFJVG9vbENhbGxBcnJheSIsImV2ZXJ5IiwidiIsImluZGV4IiwiX21lcmdlRGljdHMiLCJsZWZ0IiwicmlnaHQiLCJtZXJnZWQiLCJrZXkiLCJlbnRyaWVzIiwiRXJyb3IiLCJfbWVyZ2VMaXN0cyIsImNvbnNvbGUiLCJ3YXJuIiwidW5kZWZpbmVkIiwiaXRlbSIsInRvTWVyZ2UiLCJmaW5kSW5kZXgiLCJsZWZ0SXRlbSIsInB1c2giLCJCYXNlTWVzc2FnZUNodW5rIiwiaXNCYXNlTWVzc2FnZSIsIm1lc3NhZ2VMaWtlIiwiaXNCYXNlTWVzc2FnZUNodW5rIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/chat.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/chat.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            role: this.role\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9jaGF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFzRjtBQUN0Rjs7Q0FFQyxHQUNNLE1BQU1JLG9CQUFvQkosaURBQVdBO0lBQ3hDLE9BQU9LLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQSxPQUFPQyxvQkFBb0I7UUFDdkIsT0FBT0Y7SUFDWDtJQUNBRyxZQUFZQyxNQUFNLEVBQUVDLElBQUksQ0FBRTtRQUN0QixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1AsSUFBSSxHQUFHRCxPQUFPQyxJQUFJO0lBQzNCO0lBQ0FRLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQSxPQUFPQyxXQUFXQyxPQUFPLEVBQUU7UUFDdkIsT0FBT0EsUUFBUUYsUUFBUSxPQUFPO0lBQ2xDO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyx5QkFBeUJuQixzREFBZ0JBO0lBQ2xELE9BQU9JLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUUsWUFBWUMsTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFDdEIsSUFBSSxPQUFPRCxXQUFXLFVBQVU7WUFDNUIsdUZBQXVGO1lBQ3ZGQSxTQUFTO2dCQUFFRSxTQUFTRjtnQkFBUUMsTUFBTUE7WUFBSztRQUMzQztRQUNBLEtBQUssQ0FBQ0Q7UUFDTkcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNQLElBQUksR0FBR0QsT0FBT0MsSUFBSTtJQUMzQjtJQUNBUSxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FJLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsaUJBQWlCO1lBQ3hCVixTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRVksTUFBTVosT0FBTztZQUNqRGEsbUJBQW1CcEIscURBQVdBLENBQUMsSUFBSSxDQUFDb0IsaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CckIscURBQVdBLENBQUMsSUFBSSxDQUFDcUIsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RWYsTUFBTSxJQUFJLENBQUNBLElBQUk7UUFDbkI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9jaGF0LmpzPzliNjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlXCI7XG4gICAgfVxuICAgIHN0YXRpYyBfY2hhdE1lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIENoYXRNZXNzYWdlO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIHJvbGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIHJvbGU6IHJvbGUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb2xlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucm9sZSA9IGZpZWxkcy5yb2xlO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZ2VuZXJpY1wiO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbnN0YW5jZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgY2hhdCBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJDaGF0TWVzc2FnZSIsImxjX25hbWUiLCJfY2hhdE1lc3NhZ2VDbGFzcyIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwicm9sZSIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiX2dldFR5cGUiLCJpc0luc3RhbmNlIiwibWVzc2FnZSIsIkNoYXRNZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/function.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/function.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9mdW5jdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSx3QkFBd0JKLGlEQUFXQTtJQUM1QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxJQUFJLENBQUU7UUFDRixJQUFJLE9BQU9ELFdBQVcsVUFBVTtZQUM1Qix1RkFBdUY7WUFDdkZBLFNBQVM7Z0JBQUVFLFNBQVNGO2dCQUFRQyxNQUFNQTtZQUFLO1FBQzNDO1FBQ0EsS0FBSyxDQUFDRDtJQUNWO0lBQ0FHLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDZCQUE2QlYsc0RBQWdCQTtJQUN0RCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FLLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixxQkFBcUI7WUFDNUJGLFNBQVNQLHNEQUFZQSxDQUFDLElBQUksQ0FBQ08sT0FBTyxFQUFFSSxNQUFNSixPQUFPO1lBQ2pESyxtQkFBbUJYLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1csaUJBQWlCLEVBQUVELE1BQU1DLGlCQUFpQjtZQUM5RUMsbUJBQW1CWixxREFBV0EsQ0FBQyxJQUFJLENBQUNZLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVQLE1BQU0sSUFBSSxDQUFDQSxJQUFJLElBQUk7UUFDdkI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9mdW5jdGlvbi5qcz84MzdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGZ1bmN0aW9uIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkZ1bmN0aW9uTWVzc2FnZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIFxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIG5hbWU6IG5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGZ1bmN0aW9uIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiAqIHdpdGggb3RoZXIgZnVuY3Rpb24gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbk1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSA/PyBcIlwiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU1lc3NhZ2UiLCJCYXNlTWVzc2FnZUNodW5rIiwibWVyZ2VDb250ZW50IiwiX21lcmdlRGljdHMiLCJGdW5jdGlvbk1lc3NhZ2UiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJuYW1lIiwiY29udGVudCIsIl9nZXRUeXBlIiwiRnVuY3Rpb25NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/function.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/human.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/human.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9odW1hbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxxQkFBcUJKLGlEQUFXQTtJQUN6QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDBCQUEwQk4sc0RBQWdCQTtJQUNuRCxPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFdBQVc7UUFDUCxPQUFPO0lBQ1g7SUFDQUUsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJRixrQkFBa0I7WUFDekJHLFNBQVNSLHNEQUFZQSxDQUFDLElBQUksQ0FBQ1EsT0FBTyxFQUFFRCxNQUFNQyxPQUFPO1lBQ2pEQyxtQkFBbUJSLHFEQUFXQSxDQUFDLElBQUksQ0FBQ1EsaUJBQWlCLEVBQUVGLE1BQU1FLGlCQUFpQjtZQUM5RUMsbUJBQW1CVCxxREFBV0EsQ0FBQyxJQUFJLENBQUNTLGlCQUFpQixFQUFFSCxNQUFNRyxpQkFBaUI7UUFDbEY7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9odW1hbi5qcz84OTA5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVwiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIGh1bWFuIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgaHVtYW4gbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBIdW1hbk1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJIdW1hbk1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHVtYW5cIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiSHVtYW5NZXNzYWdlIiwibGNfbmFtZSIsIl9nZXRUeXBlIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImNvbnRlbnQiLCJhZGRpdGlvbmFsX2t3YXJncyIsInJlc3BvbnNlX21ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/human.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_2__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _function_js__WEBPACK_IMPORTED_MODULE_3__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _human_js__WEBPACK_IMPORTED_MODULE_4__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _system_js__WEBPACK_IMPORTED_MODULE_5__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _tool_js__WEBPACK_IMPORTED_MODULE_7__.ToolMessageChunk),\n/* harmony export */   _mergeDicts: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeDicts),\n/* harmony export */   _mergeLists: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__._mergeLists),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.convertToChunk),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.getBufferString),\n/* harmony export */   isAIMessage: () => (/* reexport safe */ _ai_js__WEBPACK_IMPORTED_MODULE_0__.isAIMessage),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk),\n/* harmony export */   isOpenAIToolCallArray: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.isOpenAIToolCallArray),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _utils_js__WEBPACK_IMPORTED_MODULE_6__.mapStoredMessagesToChatMessages),\n/* harmony export */   mergeContent: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_1__.mergeContent)\n/* harmony export */ });\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/utils.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\n// TODO: Use a star export when we deprecate the\n// existing \"ToolCall\" type in \"base.js\".\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNFO0FBQ0E7QUFDSTtBQUNIO0FBQ0M7QUFDRDtBQUMzQixnREFBZ0Q7QUFDaEQseUNBQXlDO0FBQ2tCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9pbmRleC5qcz85YTFkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2FpLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jaGF0LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9mdW5jdGlvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vaHVtYW4uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N5c3RlbS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXRpbHMuanNcIjtcbi8vIFRPRE86IFVzZSBhIHN0YXIgZXhwb3J0IHdoZW4gd2UgZGVwcmVjYXRlIHRoZVxuLy8gZXhpc3RpbmcgXCJUb29sQ2FsbFwiIHR5cGUgaW4gXCJiYXNlLmpzXCIuXG5leHBvcnQgeyBUb29sTWVzc2FnZSwgVG9vbE1lc3NhZ2VDaHVuaywgfSBmcm9tIFwiLi90b29sLmpzXCI7XG4iXSwibmFtZXMiOlsiVG9vbE1lc3NhZ2UiLCJUb29sTWVzc2FnZUNodW5rIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/system.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/system.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9zeXN0ZW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGO0FBQ3RGOztDQUVDLEdBQ00sTUFBTUksc0JBQXNCSixpREFBV0E7SUFDMUMsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJOLHNEQUFnQkE7SUFDcEQsT0FBT0ksVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxXQUFXO1FBQ1AsT0FBTztJQUNYO0lBQ0FFLE9BQU9DLEtBQUssRUFBRTtRQUNWLE9BQU8sSUFBSUYsbUJBQW1CO1lBQzFCRyxTQUFTUixzREFBWUEsQ0FBQyxJQUFJLENBQUNRLE9BQU8sRUFBRUQsTUFBTUMsT0FBTztZQUNqREMsbUJBQW1CUixxREFBV0EsQ0FBQyxJQUFJLENBQUNRLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVDLG1CQUFtQlQscURBQVdBLENBQUMsSUFBSSxDQUFDUyxpQkFBaUIsRUFBRUgsTUFBTUcsaUJBQWlCO1FBQ2xGO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvc3lzdGVtLmpzP2Y4YjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1lc3NhZ2UsIEJhc2VNZXNzYWdlQ2h1bmssIG1lcmdlQ29udGVudCwgX21lcmdlRGljdHMsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgc3lzdGVtIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHN5c3RlbSBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIHN5c3RlbSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoe1xuICAgICAgICAgICAgY29udGVudDogbWVyZ2VDb250ZW50KHRoaXMuY29udGVudCwgY2h1bmsuY29udGVudCksXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJnczogX21lcmdlRGljdHModGhpcy5hZGRpdGlvbmFsX2t3YXJncywgY2h1bmsuYWRkaXRpb25hbF9rd2FyZ3MpLFxuICAgICAgICAgICAgcmVzcG9uc2VfbWV0YWRhdGE6IF9tZXJnZURpY3RzKHRoaXMucmVzcG9uc2VfbWV0YWRhdGEsIGNodW5rLnJlc3BvbnNlX21ldGFkYXRhKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiU3lzdGVtTWVzc2FnZSIsImxjX25hbWUiLCJfZ2V0VHlwZSIsIlN5c3RlbU1lc3NhZ2VDaHVuayIsImNvbmNhdCIsImNodW5rIiwiY29udGVudCIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/system.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   defaultToolCallParser: () => (/* binding */ defaultToolCallParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__.mergeContent)(this.content, chunk.content),\n            additional_kwargs: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._mergeDicts)(this.response_metadata, chunk.response_metadata),\n            tool_call_id: this.tool_call_id\n        });\n    }\n}\nfunction defaultToolCallParser(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nrawToolCalls) {\n    const toolCalls = [];\n    const invalidToolCalls = [];\n    for (const toolCall of rawToolCalls){\n        if (!toolCall.function) {\n            continue;\n        } else {\n            const functionName = toolCall.function.name;\n            try {\n                const functionArgs = JSON.parse(toolCall.function.arguments);\n                const parsed = {\n                    name: functionName || \"\",\n                    args: functionArgs || {},\n                    id: toolCall.id\n                };\n                toolCalls.push(parsed);\n            } catch (error) {\n                invalidToolCalls.push({\n                    name: functionName,\n                    args: toolCall.function.arguments,\n                    id: toolCall.id,\n                    error: \"Malformed args.\"\n                });\n            }\n        }\n    }\n    return [\n        toolCalls,\n        invalidToolCalls\n    ];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy90b29sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBc0Y7QUFDdEY7O0NBRUMsR0FDTSxNQUFNSSxvQkFBb0JKLGlEQUFXQTtJQUN4QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQUVDLGNBQWM7UUFBZTtJQUMxQztJQUNBQyxZQUFZQyxNQUFNLEVBQUVGLFlBQVksRUFBRUcsSUFBSSxDQUFFO1FBQ3BDLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLHVGQUF1RjtZQUN2RkEsU0FBUztnQkFBRUUsU0FBU0Y7Z0JBQVFDO2dCQUFNSCxjQUFjQTtZQUFhO1FBQ2pFO1FBQ0EsS0FBSyxDQUFDRTtRQUNORyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVixZQUFZLEdBQUdFLE9BQU9GLFlBQVk7SUFDM0M7SUFDQVcsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLE9BQU9DLFdBQVdDLE9BQU8sRUFBRTtRQUN2QixPQUFPQSxRQUFRRixRQUFRLE9BQU87SUFDbEM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1HLHlCQUF5QnBCLHNEQUFnQkE7SUFDbERPLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05HLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNWLFlBQVksR0FBR0UsT0FBT0YsWUFBWTtJQUMzQztJQUNBLE9BQU9GLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQWEsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBSSxPQUFPQyxLQUFLLEVBQUU7UUFDVixPQUFPLElBQUlGLGlCQUFpQjtZQUN4QlYsU0FBU1Qsc0RBQVlBLENBQUMsSUFBSSxDQUFDUyxPQUFPLEVBQUVZLE1BQU1aLE9BQU87WUFDakRhLG1CQUFtQnJCLHFEQUFXQSxDQUFDLElBQUksQ0FBQ3FCLGlCQUFpQixFQUFFRCxNQUFNQyxpQkFBaUI7WUFDOUVDLG1CQUFtQnRCLHFEQUFXQSxDQUFDLElBQUksQ0FBQ3NCLGlCQUFpQixFQUFFRixNQUFNRSxpQkFBaUI7WUFDOUVsQixjQUFjLElBQUksQ0FBQ0EsWUFBWTtRQUNuQztJQUNKO0FBQ0o7QUFDTyxTQUFTbUIsc0JBQ2hCLDhEQUE4RDtBQUM5REMsWUFBWTtJQUNSLE1BQU1DLFlBQVksRUFBRTtJQUNwQixNQUFNQyxtQkFBbUIsRUFBRTtJQUMzQixLQUFLLE1BQU1DLFlBQVlILGFBQWM7UUFDakMsSUFBSSxDQUFDRyxTQUFTQyxRQUFRLEVBQUU7WUFDcEI7UUFDSixPQUNLO1lBQ0QsTUFBTUMsZUFBZUYsU0FBU0MsUUFBUSxDQUFDckIsSUFBSTtZQUMzQyxJQUFJO2dCQUNBLE1BQU11QixlQUFlQyxLQUFLQyxLQUFLLENBQUNMLFNBQVNDLFFBQVEsQ0FBQ0ssU0FBUztnQkFDM0QsTUFBTUMsU0FBUztvQkFDWDNCLE1BQU1zQixnQkFBZ0I7b0JBQ3RCTSxNQUFNTCxnQkFBZ0IsQ0FBQztvQkFDdkJNLElBQUlULFNBQVNTLEVBQUU7Z0JBQ25CO2dCQUNBWCxVQUFVWSxJQUFJLENBQUNIO1lBQ25CLEVBQ0EsT0FBT0ksT0FBTztnQkFDVlosaUJBQWlCVyxJQUFJLENBQUM7b0JBQ2xCOUIsTUFBTXNCO29CQUNOTSxNQUFNUixTQUFTQyxRQUFRLENBQUNLLFNBQVM7b0JBQ2pDRyxJQUFJVCxTQUFTUyxFQUFFO29CQUNmRSxPQUFPO2dCQUNYO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsT0FBTztRQUFDYjtRQUFXQztLQUFpQjtBQUN4QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdG9vbC5qcz85ZTE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNZXNzYWdlLCBCYXNlTWVzc2FnZUNodW5rLCBtZXJnZUNvbnRlbnQsIF9tZXJnZURpY3RzLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogUmVwcmVzZW50cyBhIHRvb2wgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJUb29sTWVzc2FnZVwiO1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgLy8gZXhjbHVkZSBzbmFrZSBjYXNlIGNvbnZlcnNpb24gdG8gcGFzY2FsIGNhc2VcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9jYWxsX2lkOiBcInRvb2xfY2FsbF9pZFwiIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgdG9vbF9jYWxsX2lkLCBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lLCB0b29sX2NhbGxfaWQ6IHRvb2xfY2FsbF9pZCB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvb2xfY2FsbF9pZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvb2xfY2FsbF9pZCA9IGZpZWxkcy50b29sX2NhbGxfaWQ7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJ0b29sXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSB0b29sIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWRcbiAqIHdpdGggb3RoZXIgdG9vbCBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRvb2xNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInRvb2xcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0aGlzLnRvb2xfY2FsbF9pZCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRUb29sQ2FsbFBhcnNlcihcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5yYXdUb29sQ2FsbHMpIHtcbiAgICBjb25zdCB0b29sQ2FsbHMgPSBbXTtcbiAgICBjb25zdCBpbnZhbGlkVG9vbENhbGxzID0gW107XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiByYXdUb29sQ2FsbHMpIHtcbiAgICAgICAgaWYgKCF0b29sQ2FsbC5mdW5jdGlvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbkFyZ3MgPSBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbk5hbWUgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgYXJnczogZnVuY3Rpb25BcmdzIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaChwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaW52YWxpZFRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZnVuY3Rpb25OYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmdzOiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiTWFsZm9ybWVkIGFyZ3MuXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFt0b29sQ2FsbHMsIGludmFsaWRUb29sQ2FsbHNdO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VNZXNzYWdlIiwiQmFzZU1lc3NhZ2VDaHVuayIsIm1lcmdlQ29udGVudCIsIl9tZXJnZURpY3RzIiwiVG9vbE1lc3NhZ2UiLCJsY19uYW1lIiwibGNfYWxpYXNlcyIsInRvb2xfY2FsbF9pZCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwibmFtZSIsImNvbnRlbnQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiX2dldFR5cGUiLCJpc0luc3RhbmNlIiwibWVzc2FnZSIsIlRvb2xNZXNzYWdlQ2h1bmsiLCJjb25jYXQiLCJjaHVuayIsImFkZGl0aW9uYWxfa3dhcmdzIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJkZWZhdWx0VG9vbENhbGxQYXJzZXIiLCJyYXdUb29sQ2FsbHMiLCJ0b29sQ2FsbHMiLCJpbnZhbGlkVG9vbENhbGxzIiwidG9vbENhbGwiLCJmdW5jdGlvbiIsImZ1bmN0aW9uTmFtZSIsImZ1bmN0aW9uQXJncyIsIkpTT04iLCJwYXJzZSIsImFyZ3VtZW50cyIsInBhcnNlZCIsImFyZ3MiLCJpZCIsInB1c2giLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/utils.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/messages/utils.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   convertToChunk: () => (/* binding */ convertToChunk),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/base.js\");\n/* harmony import */ var _human_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./human.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/human.js\");\n/* harmony import */ var _ai_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ai.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/ai.js\");\n/* harmony import */ var _system_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./system.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/system.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/chat.js\");\n/* harmony import */ var _function_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./function.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/function.js\");\n/* harmony import */ var _tool_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tool.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/tool.js\");\n\n\n\n\n\n\n\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(messageLike);\n    } else if ((0,_base_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messageLike)) {\n        return messageLike;\n    }\n    const [type, content] = messageLike;\n    if (type === \"human\" || type === \"user\") {\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n            content\n        });\n    } else if (type === \"ai\" || type === \"assistant\") {\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage({\n            content\n        });\n    } else if (type === \"system\") {\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage({\n            content\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        string_messages.push(`${role}: ${nameStr}${m.content}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessage(storedMessage.data);\n        case \"system\":\n            return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new _tool_js__WEBPACK_IMPORTED_MODULE_6__.ToolMessage(storedMessage.data);\n        case \"chat\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\nfunction convertToChunk(message) {\n    const type = message._getType();\n    if (type === \"human\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _human_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessageChunk({\n            ...message\n        });\n    } else if (type === \"ai\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _ai_js__WEBPACK_IMPORTED_MODULE_2__.AIMessageChunk({\n            ...message\n        });\n    } else if (type === \"system\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _system_js__WEBPACK_IMPORTED_MODULE_3__.SystemMessageChunk({\n            ...message\n        });\n    } else if (type === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _function_js__WEBPACK_IMPORTED_MODULE_5__.FunctionMessageChunk({\n            ...message\n        });\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    } else if (_chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessage.isInstance(message)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new _chat_js__WEBPACK_IMPORTED_MODULE_4__.ChatMessageChunk({\n            ...message\n        });\n    } else {\n        throw new Error(\"Unknown message type.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ2tCO0FBQ1Q7QUFDWTtBQUNMO0FBQ1k7QUFDL0I7QUFDakMsU0FBU1ksMkJBQTJCQyxXQUFXO0lBQ2xELElBQUksT0FBT0EsZ0JBQWdCLFVBQVU7UUFDakMsT0FBTyxJQUFJWixtREFBWUEsQ0FBQ1k7SUFDNUIsT0FDSyxJQUFJYix1REFBYUEsQ0FBQ2EsY0FBYztRQUNqQyxPQUFPQTtJQUNYO0lBQ0EsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUdGO0lBQ3hCLElBQUlDLFNBQVMsV0FBV0EsU0FBUyxRQUFRO1FBQ3JDLE9BQU8sSUFBSWIsbURBQVlBLENBQUM7WUFBRWM7UUFBUTtJQUN0QyxPQUNLLElBQUlELFNBQVMsUUFBUUEsU0FBUyxhQUFhO1FBQzVDLE9BQU8sSUFBSVgsNkNBQVNBLENBQUM7WUFBRVk7UUFBUTtJQUNuQyxPQUNLLElBQUlELFNBQVMsVUFBVTtRQUN4QixPQUFPLElBQUlULHFEQUFhQSxDQUFDO1lBQUVVO1FBQVE7SUFDdkMsT0FDSztRQUNELE1BQU0sSUFBSUMsTUFBTSxDQUFDLHVHQUF1RyxDQUFDO0lBQzdIO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxTQUFTQyxnQkFBZ0JDLFFBQVEsRUFBRUMsY0FBYyxPQUFPLEVBQUVDLFdBQVcsSUFBSTtJQUM1RSxNQUFNQyxrQkFBa0IsRUFBRTtJQUMxQixLQUFLLE1BQU1DLEtBQUtKLFNBQVU7UUFDdEIsSUFBSUs7UUFDSixJQUFJRCxFQUFFRSxRQUFRLE9BQU8sU0FBUztZQUMxQkQsT0FBT0o7UUFDWCxPQUNLLElBQUlHLEVBQUVFLFFBQVEsT0FBTyxNQUFNO1lBQzVCRCxPQUFPSDtRQUNYLE9BQ0ssSUFBSUUsRUFBRUUsUUFBUSxPQUFPLFVBQVU7WUFDaENELE9BQU87UUFDWCxP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QUcwQixPQUFPO1FBQUM7SUFDM0MsT0FDSyxJQUFJaEIsU0FBUyxVQUFVO1FBQ3hCLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlSLDBEQUFrQkEsQ0FBQztZQUFFLEdBQUd3QixPQUFPO1FBQUM7SUFDL0MsT0FDSyxJQUFJaEIsU0FBUyxZQUFZO1FBQzFCLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlKLDhEQUFvQkEsQ0FBQztZQUFFLEdBQUdvQixPQUFPO1FBQUM7SUFDN0MsbUVBQW1FO0lBQ3ZFLE9BQ0ssSUFBSXZCLGlEQUFXQSxDQUFDb0MsVUFBVSxDQUFDYixVQUFVO1FBQ3RDLG1FQUFtRTtRQUNuRSxPQUFPLElBQUl0QixzREFBZ0JBLENBQUM7WUFBRSxHQUFHc0IsT0FBTztRQUFDO0lBQzdDLE9BQ0s7UUFDRCxNQUFNLElBQUlkLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvdXRpbHMuanM/NzczOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0Jhc2VNZXNzYWdlLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IEh1bWFuTWVzc2FnZSwgSHVtYW5NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9odW1hbi5qc1wiO1xuaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuayB9IGZyb20gXCIuL2FpLmpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlLCBTeXN0ZW1NZXNzYWdlQ2h1bmsgfSBmcm9tIFwiLi9zeXN0ZW0uanNcIjtcbmltcG9ydCB7IENoYXRNZXNzYWdlLCBDaGF0TWVzc2FnZUNodW5rLCB9IGZyb20gXCIuL2NoYXQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uTWVzc2FnZSwgRnVuY3Rpb25NZXNzYWdlQ2h1bmssIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IFRvb2xNZXNzYWdlIH0gZnJvbSBcIi4vdG9vbC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKG1lc3NhZ2VMaWtlKSB7XG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlTGlrZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtZXNzYWdlTGlrZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlTGlrZTtcbiAgICB9XG4gICAgY29uc3QgW3R5cGUsIGNvbnRlbnRdID0gbWVzc2FnZUxpa2U7XG4gICAgaWYgKHR5cGUgPT09IFwiaHVtYW5cIiB8fCB0eXBlID09PSBcInVzZXJcIikge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZSh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiYWlcIiB8fCB0eXBlID09PSBcImFzc2lzdGFudFwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2UoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gY29lcmNlIG1lc3NhZ2UgZnJvbSBhcnJheTogb25seSBodW1hbiwgQUksIG9yIHN5c3RlbSBtZXNzYWdlIGNvZXJjaW9uIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgbWVtb3J5IGNsYXNzZXMgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uXG4gKiBvZiB0aGUgY2hhdCBtZXNzYWdlIGhpc3RvcnksIGJhc2VkIG9uIHRoZSBtZXNzYWdlIGNvbnRlbnQgYW5kIHJvbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMsIGh1bWFuUHJlZml4ID0gXCJIdW1hblwiLCBhaVByZWZpeCA9IFwiQUlcIikge1xuICAgIGNvbnN0IHN0cmluZ19tZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgbSBvZiBtZXNzYWdlcykge1xuICAgICAgICBsZXQgcm9sZTtcbiAgICAgICAgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJodW1hblwiKSB7XG4gICAgICAgICAgICByb2xlID0gaHVtYW5QcmVmaXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImFpXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBhaVByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlN5c3RlbVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByb2xlID0gXCJGdW5jdGlvblwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIlRvb2xcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiZ2VuZXJpY1wiKSB7XG4gICAgICAgICAgICByb2xlID0gbS5yb2xlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5zdXBwb3J0ZWQgbWVzc2FnZSB0eXBlOiAke20uX2dldFR5cGUoKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lU3RyID0gbS5uYW1lID8gYCR7bS5uYW1lfSwgYCA6IFwiXCI7XG4gICAgICAgIHN0cmluZ19tZXNzYWdlcy5wdXNoKGAke3JvbGV9OiAke25hbWVTdHJ9JHttLmNvbnRlbnR9YCk7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmdfbWVzc2FnZXMuam9pbihcIlxcblwiKTtcbn1cbi8qKlxuICogTWFwcyBtZXNzYWdlcyBmcm9tIGFuIG9sZGVyIGZvcm1hdCAoVjEpIHRvIHRoZSBjdXJyZW50IGBTdG9yZWRNZXNzYWdlYFxuICogZm9ybWF0LiBJZiB0aGUgbWVzc2FnZSBpcyBhbHJlYWR5IGluIHRoZSBgU3RvcmVkTWVzc2FnZWAgZm9ybWF0LCBpdCBpc1xuICogcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgaXQgdHJhbnNmb3JtcyB0aGUgVjEgbWVzc2FnZSBpbnRvIGFcbiAqIGBTdG9yZWRNZXNzYWdlYC4gVGhpcyBmdW5jdGlvbiBpcyBpbXBvcnRhbnQgZm9yIG1haW50YWluaW5nXG4gKiBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgbWVzc2FnZSBmb3JtYXRzLlxuICovXG5mdW5jdGlvbiBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIC8vIFRPRE86IFJlbW92ZSB0aGlzIG1hcHBlciB3aGVuIHdlIGRlcHJlY2F0ZSB0aGUgb2xkIG1lc3NhZ2UgZm9ybWF0LlxuICAgIGlmIChtZXNzYWdlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHYxTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB2MU1lc3NhZ2UudHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiB2MU1lc3NhZ2UudGV4dCxcbiAgICAgICAgICAgICAgICByb2xlOiB2MU1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICAgICAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3Qgc3RvcmVkTWVzc2FnZSA9IG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZShtZXNzYWdlKTtcbiAgICBzd2l0Y2ggKHN0b3JlZE1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIFwiaHVtYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSHVtYW5NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOYW1lIG11c3QgYmUgZGVmaW5lZCBmb3IgZnVuY3Rpb24gbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS50b29sX2NhbGxfaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvb2wgY2FsbCBJRCBtdXN0IGJlIGRlZmluZWQgZm9yIHRvb2wgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRvb2xNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJjaGF0XCI6IHtcbiAgICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLmRhdGEucm9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9sZSBtdXN0IGJlIGRlZmluZWQgZm9yIGNoYXQgbWVzc2FnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgR290IHVuZXhwZWN0ZWQgdHlwZTogJHtzdG9yZWRNZXNzYWdlLnR5cGV9YCk7XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMgaW50byBhbiBhcnJheSBvZlxuICogYEJhc2VNZXNzYWdlYCBpbnN0YW5jZXMuIEl0IHVzZXMgdGhlIGBtYXBWMU1lc3NhZ2VUb1N0b3JlZE1lc3NhZ2VgXG4gKiBmdW5jdGlvbiB0byBlbnN1cmUgYWxsIG1lc3NhZ2VzIGFyZSBpbiB0aGUgYFN0b3JlZE1lc3NhZ2VgIGZvcm1hdCwgdGhlblxuICogY3JlYXRlcyBuZXcgaW5zdGFuY2VzIG9mIHRoZSBhcHByb3ByaWF0ZSBgQmFzZU1lc3NhZ2VgIHN1YmNsYXNzIGJhc2VkXG4gKiBvbiB0aGUgdHlwZSBvZiBlYWNoIG1lc3NhZ2UuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBwcmVwYXJlIHN0b3JlZFxuICogbWVzc2FnZXMgZm9yIHVzZSBpbiBhIGNoYXQgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMobWVzc2FnZXMpIHtcbiAgICByZXR1cm4gbWVzc2FnZXMubWFwKG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcyBpbnRvIGFuIGFycmF5IG9mXG4gKiBgU3RvcmVkTWVzc2FnZWAgaW5zdGFuY2VzLiBJdCBkb2VzIHRoaXMgYnkgY2FsbGluZyB0aGUgYHRvRGljdGAgbWV0aG9kXG4gKiBvbiBlYWNoIGBCYXNlTWVzc2FnZWAsIHdoaWNoIHJldHVybnMgYSBgU3RvcmVkTWVzc2FnZWAuIFRoaXMgZnVuY3Rpb25cbiAqIGlzIHVzZWQgdG8gcHJlcGFyZSBjaGF0IG1lc3NhZ2VzIGZvciBzdG9yYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwQ2hhdE1lc3NhZ2VzVG9TdG9yZWRNZXNzYWdlcyhtZXNzYWdlcykge1xuICAgIHJldHVybiBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+IG1lc3NhZ2UudG9EaWN0KCkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb0NodW5rKG1lc3NhZ2UpIHtcbiAgICBjb25zdCB0eXBlID0gbWVzc2FnZS5fZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHsgLi4ubWVzc2FnZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gXCJhaVwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7IC4uLm1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgfVxuICAgIGVsc2UgaWYgKENoYXRNZXNzYWdlLmlzSW5zdGFuY2UobWVzc2FnZSkpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoeyAuLi5tZXNzYWdlIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtZXNzYWdlIHR5cGUuXCIpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJpc0Jhc2VNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJBSU1lc3NhZ2UiLCJBSU1lc3NhZ2VDaHVuayIsIlN5c3RlbU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJDaGF0TWVzc2FnZSIsIkNoYXRNZXNzYWdlQ2h1bmsiLCJGdW5jdGlvbk1lc3NhZ2UiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsIlRvb2xNZXNzYWdlIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJtZXNzYWdlTGlrZSIsInR5cGUiLCJjb250ZW50IiwiRXJyb3IiLCJnZXRCdWZmZXJTdHJpbmciLCJtZXNzYWdlcyIsImh1bWFuUHJlZml4IiwiYWlQcmVmaXgiLCJzdHJpbmdfbWVzc2FnZXMiLCJtIiwicm9sZSIsIl9nZXRUeXBlIiwibmFtZVN0ciIsIm5hbWUiLCJwdXNoIiwiam9pbiIsIm1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZSIsIm1lc3NhZ2UiLCJkYXRhIiwidW5kZWZpbmVkIiwidjFNZXNzYWdlIiwidGV4dCIsInRvb2xfY2FsbF9pZCIsIm1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIiwic3RvcmVkTWVzc2FnZSIsIm1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMiLCJtYXAiLCJtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzIiwidG9EaWN0IiwiY29udmVydFRvQ2h1bmsiLCJpc0luc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/base.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/runnables/base.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/graph.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks: fields.fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options) && options.length !== length) {\n            throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n        }\n        if (Array.isArray(options)) {\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig);\n        }\n        if (length > 1 && !Array.isArray(options) && options.runId) {\n            console.warn(\"Provided runId will be used only for the first element of the batch.\");\n            const subsequent = Object.fromEntries(Object.entries(options).filter(([key])=>key !== \"runId\"));\n            return Array.from({\n                length\n            }, (_, i)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(i === 0 ? options : subsequent));\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this._streamIterator(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options)));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        let runnableConfig;\n        if (options === undefined) {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        } else {\n            runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)({\n                callbacks: options.callbacks,\n                tags: options.tags,\n                metadata: options.metadata,\n                runName: options.runName,\n                configurable: options.configurable,\n                recursionLimit: options.recursionLimit,\n                maxConcurrency: options.maxConcurrency,\n                runId: options.runId\n            });\n        }\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        delete callOptions.runId;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        delete config.runId;\n        let output;\n        try {\n            output = await func.call(this, input, config, runManager);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), optionsList[i].runId, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName());\n            delete optionsList[i].runId;\n            return handleStartRes;\n        }));\n        let outputs;\n        try {\n            outputs = await func.call(this, inputs, optionsList, runManagers, batchOptions);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, config.runId, config.runType, undefined, undefined, config.runName ?? this.getName()), config);\n            delete config.runId;\n            runManager = pipe.setup;\n            const isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n            const streamLogHandler = runManager?.handlers.find(isLogStreamHandler);\n            let iterator = pipe.output;\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = await streamLogHandler.tapOutputIterable(runManager.runId, pipe.output);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.inheritableHandlers.push(logStreamCallbackHandler);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    /**\n     * Generate a stream of events emitted by the internal steps of the runnable.\n     *\n     * Use to create an iterator over StreamEvents that provide real-time information\n     * about the progress of the runnable, including StreamEvents from intermediate\n     * results.\n     *\n     * A StreamEvent is a dictionary with the following schema:\n     *\n     * - `event`: string - Event names are of the format: on_[runnable_type]_(start|stream|end).\n     * - `name`: string - The name of the runnable that generated the event.\n     * - `run_id`: string - Randomly generated ID associated with the given execution of\n     *   the runnable that emitted the event. A child runnable that gets invoked as part of the execution of a\n     *   parent runnable is assigned its own unique ID.\n     * - `tags`: string[] - The tags of the runnable that generated the event.\n     * - `metadata`: Record<string, any> - The metadata of the runnable that generated the event.\n     * - `data`: Record<string, any>\n     *\n     * Below is a table that illustrates some events that might be emitted by various\n     * chains. Metadata fields have been omitted from the table for brevity.\n     * Chain definitions have been included after the table.\n     *\n     * | event                | name             | chunk                              | input                                         | output                                          |\n     * |----------------------|------------------|------------------------------------|-----------------------------------------------|-------------------------------------------------|\n     * | on_llm_start         | [model name]     |                                    | {'input': 'hello'}                            |                                                 |\n     * | on_llm_stream        | [model name]     | 'Hello' OR AIMessageChunk(\"hello\") |                                               |                                                 |\n     * | on_llm_end           | [model name]     |                                    | 'Hello human!'                                |\n     * | on_chain_start       | format_docs      |                                    |                                               |                                                 |\n     * | on_chain_stream      | format_docs      | \"hello world!, goodbye world!\"     |                                               |                                                 |\n     * | on_chain_end         | format_docs      |                                    | [Document(...)]                               | \"hello world!, goodbye world!\"                  |\n     * | on_tool_start        | some_tool        |                                    | {\"x\": 1, \"y\": \"2\"}                            |                                                 |\n     * | on_tool_stream       | some_tool        |   {\"x\": 1, \"y\": \"2\"}               |                                               |                                                 |\n     * | on_tool_end          | some_tool        |                                    |                                               | {\"x\": 1, \"y\": \"2\"}                              |\n     * | on_retriever_start   | [retriever name] |                                    | {\"query\": \"hello\"}                            |                                                 |\n     * | on_retriever_chunk   | [retriever name] |  {documents: [...]}                |                                               |                                                 |\n     * | on_retriever_end     | [retriever name] |                                    | {\"query\": \"hello\"}                            | {documents: [...]}                              |\n     * | on_prompt_start      | [template_name]  |                                    | {\"question\": \"hello\"}                         |                                                 |\n     * | on_prompt_end        | [template_name]  |                                    | {\"question\": \"hello\"}                         | ChatPromptValue(messages: [SystemMessage, ...]) |\n     */ async *streamEvents(input, options, streamOptions) {\n        if (options.version !== \"v1\") {\n            throw new Error(`Only version \"v1\" of the events schema is currently supported.`);\n        }\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_8__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(individualOption), this.kwargs))) : await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *transform(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs));\n    }\n    async *streamEvents(input, options, streamOptions) {\n        yield* this.bound.streamEvents(input, {\n            ...await this._mergeConfig((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options), this.kwargs),\n            version: options.version\n        }, streamOptions);\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            onFailedAttempt: this.onFailedAttempt,\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                nextStepInput = await step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                nextStepInputs = await step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(options);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, config.runId, undefined, undefined, undefined, config?.runName);\n        delete config.runId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            await Promise.all(Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const { key, result, gen } = await Promise.race(tasks.values());\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(config, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...config,\n                        config\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            }));\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(options?.callbacks, undefined, options?.tags, undefined, options?.metadata);\n        const { runId, ...otherOptions } = options ?? {};\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), runId, undefined, undefined, undefined, otherOptions?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(otherOptions, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata)));\n        const runManagers = await Promise.all(callbackManagers.map(async (callbackManager, i)=>{\n            const handleStartRes = await callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), configList[i].runId, undefined, undefined, undefined, configList[i].runName);\n            delete configList[i].runId;\n            return handleStartRes;\n        }));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ0s7QUFDOEI7QUFDK0I7QUFDbkM7QUFDcUU7QUFDQztBQUN0RTtBQUNXO0FBQ0M7QUFDUztBQUN6QztBQUNuQyw4REFBOEQ7QUFDdkQsU0FBU3VCLGNBQWNDLEtBQUssRUFBRUMsVUFBVTtJQUMzQyxPQUFPRCxTQUNILENBQUNFLE1BQU1DLE9BQU8sQ0FBQ0gsVUFDZix1REFBdUQ7SUFDdkQsQ0FBRUEsQ0FBQUEsaUJBQWlCSSxJQUFHLEtBQ3RCLE9BQU9KLFVBQVUsV0FDZkEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBOzs7Q0FHQyxHQUNNLE1BQU1LLGlCQUFpQnZCLCtEQUFZQTtJQUN0Q3dCLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTztRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTyxLQUFLO1FBQ2hCO0lBQ0o7SUFDQWEsUUFBUUMsTUFBTSxFQUFFO1FBQ1osTUFBTUMsT0FDTiw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDQSxJQUFJLElBQUksSUFBSSxDQUFDVCxXQUFXLENBQUNVLE9BQU8sTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQ1MsSUFBSTtRQUNoRSxPQUFPRCxTQUFTLENBQUMsRUFBRUMsS0FBSyxFQUFFRCxPQUFPLENBQUMsR0FBR0M7SUFDekM7SUFDQTs7OztLQUlDLEdBQ0RFLEtBQUtDLE1BQU0sRUFBRTtRQUNULG1FQUFtRTtRQUNuRSxPQUFPLElBQUlDLGdCQUFnQjtZQUFFQyxPQUFPLElBQUk7WUFBRUY7WUFBUUcsUUFBUSxDQUFDO1FBQUU7SUFDakU7SUFDQTs7O0tBR0MsR0FDREMsTUFBTTtRQUNGLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlDLGFBQWE7WUFBRUgsT0FBTyxJQUFJO1FBQUM7SUFDMUM7SUFDQTs7OztLQUlDLEdBQ0RJLFVBQVVDLE1BQU0sRUFBRTtRQUNkLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlDLGNBQWM7WUFDckJOLE9BQU8sSUFBSTtZQUNYRixRQUFRLENBQUM7WUFDVEcsUUFBUSxDQUFDO1lBQ1RNLGtCQUFrQkYsUUFBUUc7WUFDMUIsR0FBR0gsTUFBTTtRQUNiO0lBQ0o7SUFDQTs7OztLQUlDLEdBQ0RJLFdBQVdSLE1BQU0sRUFBRTtRQUNmLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlGLGdCQUFnQjtZQUN2QkMsT0FBTyxJQUFJO1lBQ1hDO1lBQ0FILFFBQVEsQ0FBQztRQUNiO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNEWSxjQUFjTCxNQUFNLEVBQUU7UUFDbEIsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSU0sc0JBQXNCO1lBQzdCQyxVQUFVLElBQUk7WUFDZEMsV0FBV1IsT0FBT1EsU0FBUztRQUMvQjtJQUNKO0lBQ0FDLGdCQUFnQkMsT0FBTyxFQUFFQyxTQUFTLENBQUMsRUFBRTtRQUNqQyxJQUFJbEMsTUFBTUMsT0FBTyxDQUFDZ0MsWUFBWUEsUUFBUUMsTUFBTSxLQUFLQSxRQUFRO1lBQ3JELE1BQU0sSUFBSUMsTUFBTSxDQUFDLDhFQUE4RSxFQUFFRixRQUFRQyxNQUFNLENBQUMsYUFBYSxFQUFFQSxPQUFPLE9BQU8sQ0FBQztRQUNsSjtRQUNBLElBQUlsQyxNQUFNQyxPQUFPLENBQUNnQyxVQUFVO1lBQ3hCLE9BQU9BLFFBQVFiLEdBQUcsQ0FBQ2pDLG9EQUFZQTtRQUNuQztRQUNBLElBQUkrQyxTQUFTLEtBQUssQ0FBQ2xDLE1BQU1DLE9BQU8sQ0FBQ2dDLFlBQVlBLFFBQVFHLEtBQUssRUFBRTtZQUN4REMsUUFBUUMsSUFBSSxDQUFDO1lBQ2IsTUFBTUMsYUFBYWpDLE9BQU9rQyxXQUFXLENBQUNsQyxPQUFPbUMsT0FBTyxDQUFDUixTQUFTUyxNQUFNLENBQUMsQ0FBQyxDQUFDQyxJQUFJLEdBQUtBLFFBQVE7WUFDeEYsT0FBTzNDLE1BQU00QyxJQUFJLENBQUM7Z0JBQUVWO1lBQU8sR0FBRyxDQUFDVyxHQUFHQyxJQUFNM0Qsd0RBQVlBLENBQUMyRCxNQUFNLElBQUliLFVBQVVNO1FBQzdFO1FBQ0EsT0FBT3ZDLE1BQU00QyxJQUFJLENBQUM7WUFBRVY7UUFBTyxHQUFHLElBQU0vQyx3REFBWUEsQ0FBQzhDO0lBQ3JEO0lBQ0EsTUFBTWMsTUFBTUMsTUFBTSxFQUFFZixPQUFPLEVBQUVnQixZQUFZLEVBQUU7UUFDdkMsTUFBTUMsYUFBYSxJQUFJLENBQUNsQixlQUFlLENBQUNDLFdBQVcsQ0FBQyxHQUFHZSxPQUFPZCxNQUFNO1FBQ3BFLE1BQU1pQixpQkFBaUJELFVBQVUsQ0FBQyxFQUFFLEVBQUVDLGtCQUFrQkYsY0FBY0U7UUFDdEUsTUFBTUMsU0FBUyxJQUFJN0QsK0RBQVdBLENBQUM7WUFDM0I0RDtZQUNBRSxpQkFBaUIsQ0FBQ0M7Z0JBQ2QsTUFBTUE7WUFDVjtRQUNKO1FBQ0EsTUFBTUMsYUFBYVAsT0FBTzVCLEdBQUcsQ0FBQyxDQUFDb0MsT0FBT1YsSUFBTU0sT0FBT0ssSUFBSSxDQUFDO2dCQUNwRCxJQUFJO29CQUNBLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNDLE1BQU0sQ0FBQ0gsT0FBT04sVUFBVSxDQUFDSixFQUFFO29CQUNyRCxPQUFPWTtnQkFDWCxFQUNBLE9BQU9KLEdBQUc7b0JBQ04sSUFBSUwsY0FBY1csa0JBQWtCO3dCQUNoQyxPQUFPTjtvQkFDWDtvQkFDQSxNQUFNQTtnQkFDVjtZQUNKO1FBQ0EsT0FBT08sUUFBUUMsR0FBRyxDQUFDUDtJQUN2QjtJQUNBOzs7OztLQUtDLEdBQ0QsT0FBT1EsZ0JBQWdCUCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDbkMsTUFBTSxJQUFJLENBQUMwQixNQUFNLENBQUNILE9BQU92QjtJQUM3QjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTStCLE9BQU9SLEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6Qiw4REFBOEQ7UUFDOUQsMEJBQTBCO1FBQzFCLE1BQU1nQyxtQkFBbUIsSUFBSWhGLHFFQUF1QkEsQ0FBQyxJQUFJLENBQUM4RSxlQUFlLENBQUNQLE9BQU9yRSx3REFBWUEsQ0FBQzhDO1FBQzlGLE1BQU1nQyxpQkFBaUJDLEtBQUs7UUFDNUIsT0FBT3JGLG9FQUFzQkEsQ0FBQ3NGLGtCQUFrQixDQUFDRjtJQUNyRDtJQUNBRyx1Q0FBdUNuQyxPQUFPLEVBQUU7UUFDNUMsSUFBSW9DO1FBQ0osSUFBSXBDLFlBQVlxQyxXQUFXO1lBQ3ZCRCxpQkFBaUJsRix3REFBWUEsQ0FBQzhDO1FBQ2xDLE9BQ0s7WUFDRG9DLGlCQUFpQmxGLHdEQUFZQSxDQUFDO2dCQUMxQm9GLFdBQVd0QyxRQUFRc0MsU0FBUztnQkFDNUJDLE1BQU12QyxRQUFRdUMsSUFBSTtnQkFDbEJDLFVBQVV4QyxRQUFRd0MsUUFBUTtnQkFDMUJDLFNBQVN6QyxRQUFReUMsT0FBTztnQkFDeEJqRSxjQUFjd0IsUUFBUXhCLFlBQVk7Z0JBQ2xDa0UsZ0JBQWdCMUMsUUFBUTBDLGNBQWM7Z0JBQ3RDeEIsZ0JBQWdCbEIsUUFBUWtCLGNBQWM7Z0JBQ3RDZixPQUFPSCxRQUFRRyxLQUFLO1lBQ3hCO1FBQ0o7UUFDQSxNQUFNd0MsY0FBYztZQUFFLEdBQUczQyxPQUFPO1FBQUM7UUFDakMsT0FBTzJDLFlBQVlMLFNBQVM7UUFDNUIsT0FBT0ssWUFBWUosSUFBSTtRQUN2QixPQUFPSSxZQUFZSCxRQUFRO1FBQzNCLE9BQU9HLFlBQVlGLE9BQU87UUFDMUIsT0FBT0UsWUFBWW5FLFlBQVk7UUFDL0IsT0FBT21FLFlBQVlELGNBQWM7UUFDakMsT0FBT0MsWUFBWXpCLGNBQWM7UUFDakMsT0FBT3lCLFlBQVl4QyxLQUFLO1FBQ3hCLE9BQU87WUFBQ2lDO1lBQWdCTztTQUFZO0lBQ3hDO0lBQ0EsTUFBTUMsZ0JBQWdCQyxJQUFJLEVBQUV0QixLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDeEMsTUFBTWQsU0FBU2hDLHdEQUFZQSxDQUFDOEM7UUFDNUIsTUFBTThDLG1CQUFtQixNQUFNM0YsdUVBQTJCQSxDQUFDK0I7UUFDM0QsTUFBTTZELGFBQWEsTUFBTUQsa0JBQWtCRSxpQkFBaUIsSUFBSSxDQUFDQyxNQUFNLElBQUlyRixjQUFjMkQsT0FBTyxVQUFVckMsT0FBT2lCLEtBQUssRUFBRWpCLFFBQVFnRSxTQUFTYixXQUFXQSxXQUFXbkQsUUFBUXVELFdBQVcsSUFBSSxDQUFDL0QsT0FBTztRQUM5TCxPQUFPUSxPQUFPaUIsS0FBSztRQUNuQixJQUFJZ0Q7UUFDSixJQUFJO1lBQ0FBLFNBQVMsTUFBTU4sS0FBS3JCLElBQUksQ0FBQyxJQUFJLEVBQUVELE9BQU9yQyxRQUFRNkQ7UUFDbEQsRUFDQSxPQUFPMUIsR0FBRztZQUNOLE1BQU0wQixZQUFZSyxpQkFBaUIvQjtZQUNuQyxNQUFNQTtRQUNWO1FBQ0EsTUFBTTBCLFlBQVlNLGVBQWV6RixjQUFjdUYsUUFBUTtRQUN2RCxPQUFPQTtJQUNYO0lBQ0E7Ozs7Ozs7O0tBUUMsR0FDRCxNQUFNRyxpQkFBaUJULElBQUksRUFBRTlCLE1BQU0sRUFBRWYsT0FBTyxFQUFFZ0IsWUFBWSxFQUFFO1FBQ3hELE1BQU11QyxjQUFjLElBQUksQ0FBQ3hELGVBQWUsQ0FBQ0MsV0FBVyxDQUFDLEdBQUdlLE9BQU9kLE1BQU07UUFDckUsTUFBTXVELG1CQUFtQixNQUFNNUIsUUFBUUMsR0FBRyxDQUFDMEIsWUFBWXBFLEdBQUcsQ0FBQ2hDLG1FQUEyQkE7UUFDdEYsTUFBTXNHLGNBQWMsTUFBTTdCLFFBQVFDLEdBQUcsQ0FBQzJCLGlCQUFpQnJFLEdBQUcsQ0FBQyxPQUFPdUUsaUJBQWlCN0M7WUFDL0UsTUFBTThDLGlCQUFpQixNQUFNRCxpQkFBaUJWLGlCQUFpQixJQUFJLENBQUNDLE1BQU0sSUFBSXJGLGNBQWNtRCxNQUFNLENBQUNGLEVBQUUsRUFBRSxVQUFVMEMsV0FBVyxDQUFDMUMsRUFBRSxDQUFDVixLQUFLLEVBQUVvRCxXQUFXLENBQUMxQyxFQUFFLENBQUNxQyxPQUFPLEVBQUViLFdBQVdBLFdBQVdrQixXQUFXLENBQUMxQyxFQUFFLENBQUM0QixPQUFPLElBQUksSUFBSSxDQUFDL0QsT0FBTztZQUMzTixPQUFPNkUsV0FBVyxDQUFDMUMsRUFBRSxDQUFDVixLQUFLO1lBQzNCLE9BQU93RDtRQUNYO1FBQ0EsSUFBSUM7UUFDSixJQUFJO1lBQ0FBLFVBQVUsTUFBTWYsS0FBS3JCLElBQUksQ0FBQyxJQUFJLEVBQUVULFFBQVF3QyxhQUFhRSxhQUFhekM7UUFDdEUsRUFDQSxPQUFPSyxHQUFHO1lBQ04sTUFBTU8sUUFBUUMsR0FBRyxDQUFDNEIsWUFBWXRFLEdBQUcsQ0FBQyxDQUFDNEQsYUFBZUEsWUFBWUssaUJBQWlCL0I7WUFDL0UsTUFBTUE7UUFDVjtRQUNBLE1BQU1PLFFBQVFDLEdBQUcsQ0FBQzRCLFlBQVl0RSxHQUFHLENBQUMsQ0FBQzRELGFBQWVBLFlBQVlNLGVBQWV6RixjQUFjZ0csU0FBUztRQUNwRyxPQUFPQTtJQUNYO0lBQ0E7Ozs7S0FJQyxHQUNELE9BQU9DLDJCQUEyQkMsY0FBYyxFQUFFQyxXQUFXLEVBQUUvRCxPQUFPLEVBQUU7UUFDcEUsSUFBSWdFO1FBQ0osSUFBSUMsc0JBQXNCO1FBQzFCLElBQUlDO1FBQ0osSUFBSUMsdUJBQXVCO1FBQzNCLE1BQU1qRixTQUFTaEMsd0RBQVlBLENBQUM4QztRQUM1QixNQUFNOEMsbUJBQW1CLE1BQU0zRix1RUFBMkJBLENBQUMrQjtRQUMzRCxnQkFBZ0JrRjtZQUNaLFdBQVcsTUFBTUMsU0FBU1AsZUFBZ0I7Z0JBQ3RDLElBQUlHLHFCQUFxQjtvQkFDckIsSUFBSUQsZUFBZTNCLFdBQVc7d0JBQzFCMkIsYUFBYUs7b0JBQ2pCLE9BQ0s7d0JBQ0QsSUFBSTs0QkFDQSw4REFBOEQ7NEJBQzlETCxhQUFhbkgsd0RBQU1BLENBQUNtSCxZQUFZSzt3QkFDcEMsRUFDQSxPQUFNOzRCQUNGTCxhQUFhM0I7NEJBQ2I0QixzQkFBc0I7d0JBQzFCO29CQUNKO2dCQUNKO2dCQUNBLE1BQU1JO1lBQ1Y7UUFDSjtRQUNBLElBQUl0QjtRQUNKLElBQUk7WUFDQSxNQUFNdUIsT0FBTyxNQUFNdkgsd0VBQXNCQSxDQUFDZ0gsWUFBWWpGLElBQUksQ0FBQyxJQUFJLEdBQUdzRix1QkFBdUIsVUFBWXRCLGtCQUFrQkUsaUJBQWlCLElBQUksQ0FBQ0MsTUFBTSxJQUFJO29CQUFFMUIsT0FBTztnQkFBRyxHQUFHckMsT0FBT2lCLEtBQUssRUFBRWpCLE9BQU9nRSxPQUFPLEVBQUViLFdBQVdBLFdBQVduRCxPQUFPdUQsT0FBTyxJQUFJLElBQUksQ0FBQy9ELE9BQU8sS0FBS1E7WUFDN1AsT0FBT0EsT0FBT2lCLEtBQUs7WUFDbkI0QyxhQUFhdUIsS0FBS3JDLEtBQUs7WUFDdkIsTUFBTXNDLHFCQUFxQixDQUFDQyxVQUFZQSxRQUFRNUYsSUFBSSxLQUFLO1lBQ3pELE1BQU02RixtQkFBbUIxQixZQUFZMkIsU0FBU0MsS0FBS0o7WUFDbkQsSUFBSUssV0FBV04sS0FBS25CLE1BQU07WUFDMUIsSUFBSXNCLHFCQUFxQnBDLGFBQWFVLGVBQWVWLFdBQVc7Z0JBQzVEdUMsV0FBVyxNQUFNSCxpQkFBaUJJLGlCQUFpQixDQUFDOUIsV0FBVzVDLEtBQUssRUFBRW1FLEtBQUtuQixNQUFNO1lBQ3JGO1lBQ0EsV0FBVyxNQUFNa0IsU0FBU08sU0FBVTtnQkFDaEMsTUFBTVA7Z0JBQ04sSUFBSUYsc0JBQXNCO29CQUN0QixJQUFJRCxnQkFBZ0I3QixXQUFXO3dCQUMzQjZCLGNBQWNHO29CQUNsQixPQUNLO3dCQUNELElBQUk7NEJBQ0EsOERBQThEOzRCQUM5REgsY0FBY3JILHdEQUFNQSxDQUFDcUgsYUFBYUc7d0JBQ3RDLEVBQ0EsT0FBTTs0QkFDRkgsY0FBYzdCOzRCQUNkOEIsdUJBQXVCO3dCQUMzQjtvQkFDSjtnQkFDSjtZQUNKO1FBQ0osRUFDQSxPQUFPOUMsR0FBRztZQUNOLE1BQU0wQixZQUFZSyxpQkFBaUIvQixHQUFHZ0IsV0FBV0EsV0FBV0EsV0FBVztnQkFDbkV0QixRQUFRbkQsY0FBY29HLFlBQVk7WUFDdEM7WUFDQSxNQUFNM0M7UUFDVjtRQUNBLE1BQU0wQixZQUFZTSxlQUFlYSxlQUFlLENBQUMsR0FBRzdCLFdBQVdBLFdBQVdBLFdBQVc7WUFBRXRCLFFBQVFuRCxjQUFjb0csWUFBWTtRQUFTO0lBQ3RJO0lBQ0FjLFNBQVNsRSxDQUFDLEVBQUU7UUFDUixNQUFNbUUsUUFBUSxJQUFJcEgsNkNBQUtBO1FBQ3ZCLHVDQUF1QztRQUN2QyxNQUFNcUgsWUFBWUQsTUFBTUUsT0FBTyxDQUFDO1lBQzVCckcsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDRixPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQzlCd0csUUFBUTdJLG1DQUFDQSxDQUFDOEksR0FBRztRQUNqQjtRQUNBLE1BQU1DLGVBQWVMLE1BQU1FLE9BQU8sQ0FBQyxJQUFJO1FBQ3ZDLHlDQUF5QztRQUN6QyxNQUFNSSxhQUFhTixNQUFNRSxPQUFPLENBQUM7WUFDN0JyRyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNGLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDL0J3RyxRQUFRN0ksbUNBQUNBLENBQUM4SSxHQUFHO1FBQ2pCO1FBQ0FKLE1BQU1PLE9BQU8sQ0FBQ04sV0FBV0k7UUFDekJMLE1BQU1PLE9BQU8sQ0FBQ0YsY0FBY0M7UUFDNUIsT0FBT047SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0RULEtBQUtpQixVQUFVLEVBQUU7UUFDYixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJQyxpQkFBaUI7WUFDeEJDLE9BQU8sSUFBSTtZQUNYQyxNQUFNQyxrQkFBa0JKO1FBQzVCO0lBQ0o7SUFDQTs7S0FFQyxHQUNESyxLQUFLQyxJQUFJLEVBQUU7UUFDUCxtRUFBbUU7UUFDbkUsT0FBTyxJQUFJLENBQUN2QixJQUFJLENBQUMsSUFBSXdCLGFBQWFEO0lBQ3RDO0lBQ0E7O0tBRUMsR0FDREUsT0FBT0MsT0FBTyxFQUFFO1FBQ1osT0FBTyxJQUFJLENBQUMxQixJQUFJLENBQ2hCLG1FQUFtRTtRQUNuRSxJQUFJMkIsZUFDSixtRUFBbUU7UUFDbkUsSUFBSUMsWUFBWTtZQUFFQyxPQUFPSDtRQUFRO0lBQ3JDO0lBQ0E7Ozs7OztLQU1DLEdBQ0QsT0FBT0ksVUFBVUMsU0FBUyxFQUFFckcsT0FBTyxFQUFFO1FBQ2pDLElBQUlzRztRQUNKLFdBQVcsTUFBTWpDLFNBQVNnQyxVQUFXO1lBQ2pDLElBQUlDLGVBQWVqRSxXQUFXO2dCQUMxQmlFLGFBQWFqQztZQUNqQixPQUNLO2dCQUNELG1FQUFtRTtnQkFDbkUsd0RBQXdEO2dCQUN4RCw4REFBOEQ7Z0JBQzlEaUMsYUFBYXpKLHdEQUFNQSxDQUFDeUosWUFBWWpDO1lBQ3BDO1FBQ0o7UUFDQSxPQUFPLElBQUksQ0FBQ3ZDLGVBQWUsQ0FBQ3dFLFlBQVlwSix3REFBWUEsQ0FBQzhDO0lBQ3pEO0lBQ0E7Ozs7Ozs7Ozs7S0FVQyxHQUNELE9BQU91RyxVQUFVaEYsS0FBSyxFQUFFdkIsT0FBTyxFQUFFd0csYUFBYSxFQUFFO1FBQzVDLE1BQU1DLDJCQUEyQixJQUFJakssNEVBQXdCQSxDQUFDO1lBQzFELEdBQUdnSyxhQUFhO1lBQ2hCRSxXQUFXO1lBQ1hDLGVBQWU7UUFDbkI7UUFDQSxNQUFNekgsU0FBU2hDLHdEQUFZQSxDQUFDOEM7UUFDNUIsT0FBTyxJQUFJLENBQUM0RyxVQUFVLENBQUNyRixPQUFPa0YsMEJBQTBCdkg7SUFDNUQ7SUFDQSxPQUFPMEgsV0FBV3JGLEtBQUssRUFBRWtGLHdCQUF3QixFQUFFdkgsTUFBTSxFQUFFO1FBQ3ZELE1BQU0sRUFBRW9ELFNBQVMsRUFBRSxHQUFHcEQ7UUFDdEIsSUFBSW9ELGNBQWNELFdBQVc7WUFDekIsNkNBQTZDO1lBQzdDbkQsT0FBT29ELFNBQVMsR0FBRztnQkFBQ21FO2FBQXlCO1FBQ2pELE9BQ0ssSUFBSTFJLE1BQU1DLE9BQU8sQ0FBQ3NFLFlBQVk7WUFDL0IsNkNBQTZDO1lBQzdDcEQsT0FBT29ELFNBQVMsR0FBR0EsVUFBVXpGLE1BQU0sQ0FBQztnQkFBQzRKO2FBQXlCO1FBQ2xFLE9BQ0s7WUFDRCxNQUFNSSxrQkFBa0J2RSxVQUFVd0UsSUFBSTtZQUN0Q0QsZ0JBQWdCRSxtQkFBbUIsQ0FBQ0MsSUFBSSxDQUFDUDtZQUN6Qyw2Q0FBNkM7WUFDN0N2SCxPQUFPb0QsU0FBUyxHQUFHdUU7UUFDdkI7UUFDQSxNQUFNSSx3QkFBd0IsSUFBSSxDQUFDbEYsTUFBTSxDQUFDUixPQUFPckM7UUFDakQsZUFBZWdJO1lBQ1gsSUFBSTtnQkFDQSxNQUFNQyxpQkFBaUIsTUFBTUY7Z0JBQzdCLFdBQVcsTUFBTTVDLFNBQVM4QyxlQUFnQjtvQkFDdEMsTUFBTUMsUUFBUSxJQUFJMUssK0RBQVdBLENBQUM7d0JBQzFCMkssS0FBSzs0QkFDRDtnQ0FDSUMsSUFBSTtnQ0FDSkMsTUFBTTtnQ0FDTjFKLE9BQU93Rzs0QkFDWDt5QkFDSDtvQkFDTDtvQkFDQSxNQUFNb0MseUJBQXlCZSxNQUFNLENBQUNDLEtBQUssQ0FBQ0w7Z0JBQ2hEO1lBQ0osU0FDUTtnQkFDSixNQUFNWCx5QkFBeUJlLE1BQU0sQ0FBQ0UsS0FBSztZQUMvQztRQUNKO1FBQ0EsTUFBTUMsK0JBQStCVDtRQUNyQyxJQUFJO1lBQ0EsV0FBVyxNQUFNVSxPQUFPbkIseUJBQTBCO2dCQUM5QyxNQUFNbUI7WUFDVjtRQUNKLFNBQ1E7WUFDSixNQUFNRDtRQUNWO0lBQ0o7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FzQ0MsR0FDRCxPQUFPRSxhQUFhdEcsS0FBSyxFQUFFdkIsT0FBTyxFQUFFd0csYUFBYSxFQUFFO1FBQy9DLElBQUl4RyxRQUFROEgsT0FBTyxLQUFLLE1BQU07WUFDMUIsTUFBTSxJQUFJNUgsTUFBTSxDQUFDLDhEQUE4RCxDQUFDO1FBQ3BGO1FBQ0EsSUFBSTZIO1FBQ0osSUFBSUMsMkJBQTJCO1FBQy9CLE1BQU05SSxTQUFTaEMsd0RBQVlBLENBQUM4QztRQUM1QixNQUFNaUksV0FBVy9JLE9BQU9xRCxJQUFJLElBQUksRUFBRTtRQUNsQyxNQUFNMkYsZUFBZWhKLE9BQU9zRCxRQUFRLElBQUksQ0FBQztRQUN6QyxNQUFNMkYsV0FBV2pKLE9BQU91RCxPQUFPLElBQUksSUFBSSxDQUFDL0QsT0FBTztRQUMvQyxNQUFNK0gsMkJBQTJCLElBQUlqSyw0RUFBd0JBLENBQUM7WUFDMUQsR0FBR2dLLGFBQWE7WUFDaEJFLFdBQVc7WUFDWEMsZUFBZTtRQUNuQjtRQUNBLE1BQU15QixrQkFBa0IsSUFBSTVLLHVEQUFnQkEsQ0FBQztZQUN6QyxHQUFHZ0osYUFBYTtRQUNwQjtRQUNBLE1BQU02QixZQUFZLElBQUksQ0FBQ3pCLFVBQVUsQ0FBQ3JGLE9BQU9rRiwwQkFBMEJ2SDtRQUNuRSxXQUFXLE1BQU0wSSxPQUFPUyxVQUFXO1lBQy9CLElBQUksQ0FBQ04sUUFBUTtnQkFDVEEsU0FBU3RMLDBEQUFNQSxDQUFDNkwsZUFBZSxDQUFDVjtZQUNwQyxPQUNLO2dCQUNERyxTQUFTQSxPQUFPbEwsTUFBTSxDQUFDK0s7WUFDM0I7WUFDQSxJQUFJRyxPQUFPUSxLQUFLLEtBQUtsRyxXQUFXO2dCQUM1QixNQUFNLElBQUluQyxNQUFNLENBQUMsMEVBQTBFLENBQUM7WUFDaEc7WUFDQSxzRUFBc0U7WUFDdEUscUNBQXFDO1lBQ3JDLElBQUksQ0FBQzhILDBCQUEwQjtnQkFDM0JBLDJCQUEyQjtnQkFDM0IsTUFBTU8sUUFBUTtvQkFBRSxHQUFHUixPQUFPUSxLQUFLO2dCQUFDO2dCQUNoQyxNQUFNQyxRQUFRO29CQUNWQyxRQUFRRixNQUFNRyxFQUFFO29CQUNoQkYsT0FBTyxDQUFDLEdBQUcsRUFBRUQsTUFBTUksSUFBSSxDQUFDLE1BQU0sQ0FBQztvQkFDL0IvSixNQUFNdUo7b0JBQ041RixNQUFNMEY7b0JBQ056RixVQUFVMEY7b0JBQ1ZVLE1BQU07d0JBQ0ZySDtvQkFDSjtnQkFDSjtnQkFDQSxJQUFJNkcsZ0JBQWdCUyxZQUFZLENBQUNMLE9BQU9ELE1BQU1JLElBQUksR0FBRztvQkFDakQsTUFBTUg7Z0JBQ1Y7WUFDSjtZQUNBLE1BQU1NLFFBQVFsQixJQUFJUCxHQUFHLENBQ2hCNUcsTUFBTSxDQUFDLENBQUM2RyxLQUFPQSxHQUFHQyxJQUFJLENBQUN3QixVQUFVLENBQUMsV0FDbEM1SixHQUFHLENBQUMsQ0FBQ21JLEtBQU9BLEdBQUdDLElBQUksQ0FBQ3lCLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUN0QyxNQUFNQyxlQUFlO21CQUFJLElBQUlDLElBQUlKO2FBQU87WUFDeEMsS0FBSyxNQUFNdkIsUUFBUTBCLGFBQWM7Z0JBQzdCLElBQUlFO2dCQUNKLElBQUlQLE9BQU8sQ0FBQztnQkFDWixNQUFNUSxXQUFXckIsT0FBT1EsS0FBSyxDQUFDYyxJQUFJLENBQUM5QixLQUFLO2dCQUN4QyxJQUFJNkIsU0FBU0UsUUFBUSxLQUFLakgsV0FBVztvQkFDakMsSUFBSStHLFNBQVNHLGVBQWUsQ0FBQ3RKLE1BQU0sR0FBRyxHQUFHO3dCQUNyQ2tKLFlBQVk7b0JBQ2hCLE9BQ0s7d0JBQ0RBLFlBQVk7b0JBQ2hCO2dCQUNKLE9BQ0s7b0JBQ0RBLFlBQVk7Z0JBQ2hCO2dCQUNBLElBQUlBLGNBQWMsU0FBUztvQkFDdkIsaUVBQWlFO29CQUNqRSxpRUFBaUU7b0JBQ2pFLDBEQUEwRDtvQkFDMUQsMERBQTBEO29CQUMxRCxJQUFJQyxTQUFTckksTUFBTSxLQUFLc0IsV0FBVzt3QkFDL0J1RyxLQUFLckgsS0FBSyxHQUFHNkgsU0FBU3JJLE1BQU07b0JBQ2hDO2dCQUNKLE9BQ0ssSUFBSW9JLGNBQWMsT0FBTztvQkFDMUIsSUFBSUMsU0FBU3JJLE1BQU0sS0FBS3NCLFdBQVc7d0JBQy9CdUcsS0FBS3JILEtBQUssR0FBRzZILFNBQVNySSxNQUFNO29CQUNoQztvQkFDQTZILEtBQUt6RixNQUFNLEdBQUdpRyxTQUFTSSxZQUFZO2dCQUN2QyxPQUNLLElBQUlMLGNBQWMsVUFBVTtvQkFDN0IsTUFBTU0sYUFBYUwsU0FBU0csZUFBZSxDQUFDdEosTUFBTTtvQkFDbEQsSUFBSXdKLGVBQWUsR0FBRzt3QkFDbEIsTUFBTSxJQUFJdkosTUFBTSxDQUFDLG1EQUFtRCxFQUFFdUosV0FBVywyQkFBMkIsRUFBRUwsU0FBU3hLLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQ2xJO29CQUNBZ0ssT0FBTzt3QkFBRXZFLE9BQU8rRSxTQUFTRyxlQUFlLENBQUMsRUFBRTtvQkFBQztvQkFDNUMsaURBQWlEO29CQUNqRCxzQ0FBc0M7b0JBQ3RDSCxTQUFTRyxlQUFlLEdBQUcsRUFBRTtnQkFDakM7Z0JBQ0EsTUFBTTtvQkFDRmYsT0FBTyxDQUFDLEdBQUcsRUFBRVksU0FBU1QsSUFBSSxDQUFDLENBQUMsRUFBRVEsVUFBVSxDQUFDO29CQUN6Q3ZLLE1BQU13SyxTQUFTeEssSUFBSTtvQkFDbkI2SixRQUFRVyxTQUFTVixFQUFFO29CQUNuQm5HLE1BQU02RyxTQUFTN0csSUFBSTtvQkFDbkJDLFVBQVU0RyxTQUFTNUcsUUFBUTtvQkFDM0JvRztnQkFDSjtZQUNKO1lBQ0Esb0VBQW9FO1lBQ3BFLG1CQUFtQjtZQUNuQixNQUFNLEVBQUVMLEtBQUssRUFBRSxHQUFHUjtZQUNsQixJQUFJUSxNQUFNZ0IsZUFBZSxDQUFDdEosTUFBTSxHQUFHLEdBQUc7Z0JBQ2xDLE1BQU13SixhQUFhbEIsTUFBTWdCLGVBQWUsQ0FBQ3RKLE1BQU07Z0JBQy9DLElBQUl3SixlQUFlLEdBQUc7b0JBQ2xCLE1BQU0sSUFBSXZKLE1BQU0sQ0FBQyxtREFBbUQsRUFBRXVKLFdBQVcsMkJBQTJCLEVBQUVsQixNQUFNM0osSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDL0g7Z0JBQ0EsTUFBTWdLLE9BQU87b0JBQUV2RSxPQUFPa0UsTUFBTWdCLGVBQWUsQ0FBQyxFQUFFO2dCQUFDO2dCQUMvQyxpREFBaUQ7Z0JBQ2pEaEIsTUFBTWdCLGVBQWUsR0FBRyxFQUFFO2dCQUMxQixNQUFNZixRQUFRO29CQUNWQSxPQUFPLENBQUMsR0FBRyxFQUFFRCxNQUFNSSxJQUFJLENBQUMsT0FBTyxDQUFDO29CQUNoQ0YsUUFBUUYsTUFBTUcsRUFBRTtvQkFDaEJuRyxNQUFNMEY7b0JBQ056RixVQUFVMEY7b0JBQ1Z0SixNQUFNdUo7b0JBQ05TO2dCQUNKO2dCQUNBLElBQUlSLGdCQUFnQlMsWUFBWSxDQUFDTCxPQUFPRCxNQUFNSSxJQUFJLEdBQUc7b0JBQ2pELE1BQU1IO2dCQUNWO1lBQ0o7UUFDSjtRQUNBLE1BQU1ELFFBQVFSLFFBQVFRO1FBQ3RCLElBQUlBLFVBQVVsRyxXQUFXO1lBQ3JCLHNEQUFzRDtZQUN0RCxNQUFNbUcsUUFBUTtnQkFDVkEsT0FBTyxDQUFDLEdBQUcsRUFBRUQsTUFBTUksSUFBSSxDQUFDLElBQUksQ0FBQztnQkFDN0IvSixNQUFNdUo7Z0JBQ05NLFFBQVFGLE1BQU1HLEVBQUU7Z0JBQ2hCbkcsTUFBTTBGO2dCQUNOekYsVUFBVTBGO2dCQUNWVSxNQUFNO29CQUNGekYsUUFBUW9GLE1BQU1pQixZQUFZO2dCQUM5QjtZQUNKO1lBQ0EsSUFBSXBCLGdCQUFnQlMsWUFBWSxDQUFDTCxPQUFPRCxNQUFNSSxJQUFJLEdBQzlDLE1BQU1IO1FBQ2Q7SUFDSjtJQUNBLDhEQUE4RDtJQUM5RCxPQUFPa0IsV0FBV0MsS0FBSyxFQUFFO1FBQ3JCLE9BQU9sTSw4REFBbUJBLENBQUNrTTtJQUMvQjtJQUNBOzs7Ozs7Ozs7O0tBVUMsR0FDREMsY0FBYyxFQUFFQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFHLEVBQUU7UUFDeEMsbUVBQW1FO1FBQ25FLE9BQU8sSUFBSS9LLGdCQUFnQjtZQUN2QkMsT0FBTyxJQUFJO1lBQ1hDLFFBQVEsQ0FBQztZQUNUOEssaUJBQWlCO2dCQUNiLENBQUM5SyxTQUFZO3dCQUNUb0QsV0FBVzs0QkFDUCxJQUFJL0UsMEVBQW1CQSxDQUFDO2dDQUNwQjJCO2dDQUNBMks7Z0NBQ0FDO2dDQUNBQzs0QkFDSjt5QkFDSDtvQkFDTDthQUNIO1FBQ0w7SUFDSjtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNL0ssd0JBQXdCZDtJQUNqQyxPQUFPVyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FWLFlBQVltQixNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOakIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQVk7UUFDMUM7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDb0IsS0FBSyxHQUFHSyxPQUFPTCxLQUFLO1FBQ3pCLElBQUksQ0FBQ0YsTUFBTSxHQUFHTyxPQUFPUCxNQUFNO1FBQzNCLElBQUksQ0FBQ0csTUFBTSxHQUFHSSxPQUFPSixNQUFNO1FBQzNCLElBQUksQ0FBQzhLLGVBQWUsR0FBRzFLLE9BQU8wSyxlQUFlO0lBQ2pEO0lBQ0F0TCxRQUFRQyxNQUFNLEVBQUU7UUFDWixPQUFPLElBQUksQ0FBQ00sS0FBSyxDQUFDUCxPQUFPLENBQUNDO0lBQzlCO0lBQ0EsTUFBTXNMLGFBQWEsR0FBR2pLLE9BQU8sRUFBRTtRQUMzQixNQUFNZCxTQUFTOUIsd0RBQVlBLENBQUMsSUFBSSxDQUFDOEIsTUFBTSxLQUFLYztRQUM1QyxPQUFPNUMsd0RBQVlBLENBQUM4QixXQUFZLElBQUksQ0FBQzhLLGVBQWUsR0FDOUMsTUFBTXBJLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNtSSxlQUFlLENBQUM3SyxHQUFHLENBQUMsT0FBTytLLGdCQUFrQixNQUFNQSxjQUFjaEwsWUFDeEYsRUFBRTtJQUNaO0lBQ0FKLEtBQUtDLE1BQU0sRUFBRTtRQUNULDhEQUE4RDtRQUM5RCxPQUFPLElBQUksSUFBSSxDQUFDWixXQUFXLENBQUM7WUFDeEJjLE9BQU8sSUFBSSxDQUFDQSxLQUFLO1lBQ2pCRixRQUFRO2dCQUFFLEdBQUcsSUFBSSxDQUFDQSxNQUFNO2dCQUFFLEdBQUdBLE1BQU07WUFBQztZQUNwQ0csUUFBUSxJQUFJLENBQUNBLE1BQU07UUFDdkI7SUFDSjtJQUNBUSxXQUFXUixNQUFNLEVBQUU7UUFDZiw4REFBOEQ7UUFDOUQsT0FBTyxJQUFJLElBQUksQ0FBQ2YsV0FBVyxDQUFDO1lBQ3hCYyxPQUFPLElBQUksQ0FBQ0EsS0FBSztZQUNqQkYsUUFBUSxJQUFJLENBQUNBLE1BQU07WUFDbkJHLFFBQVE7Z0JBQUUsR0FBRyxJQUFJLENBQUNBLE1BQU07Z0JBQUUsR0FBR0EsTUFBTTtZQUFDO1FBQ3hDO0lBQ0o7SUFDQUcsVUFBVUMsTUFBTSxFQUFFO1FBQ2QsOERBQThEO1FBQzlELE9BQU8sSUFBSSxJQUFJLENBQUNuQixXQUFXLENBQUM7WUFDeEJjLE9BQU8sSUFBSSxDQUFDQSxLQUFLLENBQUNJLFNBQVMsQ0FBQ0M7WUFDNUJQLFFBQVEsSUFBSSxDQUFDQSxNQUFNO1lBQ25CRyxRQUFRLElBQUksQ0FBQ0EsTUFBTTtRQUN2QjtJQUNKO0lBQ0EsTUFBTXdDLE9BQU9ILEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6QixPQUFPLElBQUksQ0FBQ2YsS0FBSyxDQUFDeUMsTUFBTSxDQUFDSCxPQUFPLE1BQU0sSUFBSSxDQUFDMEksWUFBWSxDQUFDL00sd0RBQVlBLENBQUM4QyxVQUFVLElBQUksQ0FBQ2pCLE1BQU07SUFDOUY7SUFDQSxNQUFNK0IsTUFBTUMsTUFBTSxFQUFFZixPQUFPLEVBQUVnQixZQUFZLEVBQUU7UUFDdkMsTUFBTW1KLGdCQUFnQnBNLE1BQU1DLE9BQU8sQ0FBQ2dDLFdBQzlCLE1BQU00QixRQUFRQyxHQUFHLENBQUM3QixRQUFRYixHQUFHLENBQUMsT0FBT2lMLG1CQUFxQixJQUFJLENBQUNILFlBQVksQ0FBQy9NLHdEQUFZQSxDQUFDa04sbUJBQW1CLElBQUksQ0FBQ3JMLE1BQU0sTUFDdkgsTUFBTSxJQUFJLENBQUNrTCxZQUFZLENBQUMvTSx3REFBWUEsQ0FBQzhDLFVBQVUsSUFBSSxDQUFDakIsTUFBTTtRQUNoRSxPQUFPLElBQUksQ0FBQ0UsS0FBSyxDQUFDNkIsS0FBSyxDQUFDQyxRQUFRb0osZUFBZW5KO0lBQ25EO0lBQ0EsT0FBT2MsZ0JBQWdCUCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDbkMsT0FBTyxJQUFJLENBQUNmLEtBQUssQ0FBQzZDLGVBQWUsQ0FBQ1AsT0FBTyxNQUFNLElBQUksQ0FBQzBJLFlBQVksQ0FBQy9NLHdEQUFZQSxDQUFDOEMsVUFBVSxJQUFJLENBQUNqQixNQUFNO0lBQ3ZHO0lBQ0EsTUFBTWdELE9BQU9SLEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6QixPQUFPLElBQUksQ0FBQ2YsS0FBSyxDQUFDOEMsTUFBTSxDQUFDUixPQUFPLE1BQU0sSUFBSSxDQUFDMEksWUFBWSxDQUFDL00sd0RBQVlBLENBQUM4QyxVQUFVLElBQUksQ0FBQ2pCLE1BQU07SUFDOUY7SUFDQSxPQUFPcUgsVUFDUCw4REFBOEQ7SUFDOURDLFNBQVMsRUFBRXJHLE9BQU8sRUFBRTtRQUNoQixPQUFPLElBQUksQ0FBQ2YsS0FBSyxDQUFDbUgsU0FBUyxDQUFDQyxXQUFXLE1BQU0sSUFBSSxDQUFDNEQsWUFBWSxDQUFDL00sd0RBQVlBLENBQUM4QyxVQUFVLElBQUksQ0FBQ2pCLE1BQU07SUFDckc7SUFDQSxPQUFPOEksYUFBYXRHLEtBQUssRUFBRXZCLE9BQU8sRUFBRXdHLGFBQWEsRUFBRTtRQUMvQyxPQUFPLElBQUksQ0FBQ3ZILEtBQUssQ0FBQzRJLFlBQVksQ0FBQ3RHLE9BQU87WUFDbEMsR0FBSSxNQUFNLElBQUksQ0FBQzBJLFlBQVksQ0FBQy9NLHdEQUFZQSxDQUFDOEMsVUFBVSxJQUFJLENBQUNqQixNQUFNLENBQUM7WUFDL0QrSSxTQUFTOUgsUUFBUThILE9BQU87UUFDNUIsR0FBR3RCO0lBQ1A7SUFDQSxPQUFPNkQsa0JBQ1AsOERBQThEO0lBQzlEVixLQUFLLEVBRUg7UUFDRSxPQUFPQSxNQUFNMUssS0FBSyxJQUFJZixTQUFTd0wsVUFBVSxDQUFDQyxNQUFNMUssS0FBSztJQUN6RDtJQUNBOzs7Ozs7Ozs7O0tBVUMsR0FDRDJLLGNBQWMsRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxFQUFFO1FBQ3hDLE9BQU8sSUFBSS9LLGdCQUFnQjtZQUN2QkMsT0FBTyxJQUFJLENBQUNBLEtBQUs7WUFDakJGLFFBQVEsSUFBSSxDQUFDQSxNQUFNO1lBQ25CRyxRQUFRLElBQUksQ0FBQ0EsTUFBTTtZQUNuQjhLLGlCQUFpQjtnQkFDYixDQUFDOUssU0FBWTt3QkFDVG9ELFdBQVc7NEJBQ1AsSUFBSS9FLDBFQUFtQkEsQ0FBQztnQ0FDcEIyQjtnQ0FDQTJLO2dDQUNBQztnQ0FDQUM7NEJBQ0o7eUJBQ0g7b0JBQ0w7YUFDSDtRQUNMO0lBQ0o7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU0zSyxxQkFBcUJsQjtJQUM5QixPQUFPVyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FWLFlBQVltQixNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOakIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ29CLEtBQUssR0FBR0ssT0FBT0wsS0FBSztJQUM3QjtJQUNBOzs7O0tBSUMsR0FDREgsS0FBS0MsTUFBTSxFQUFFO1FBQ1QsT0FBTyxJQUFJSyxhQUFhO1lBQ3BCSCxPQUFPLElBQUksQ0FBQ0EsS0FBSyxDQUFDSCxJQUFJLENBQUNDO1FBQzNCO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU0yQyxPQUFPWCxNQUFNLEVBQUU3QixNQUFNLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUMwRCxlQUFlLENBQUMsSUFBSSxDQUFDMEgsT0FBTyxFQUFFdkosUUFBUTdCO0lBQ3REO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNb0wsUUFBUXZKLE1BQU0sRUFBRTdCLE1BQU0sRUFBRTZELFVBQVUsRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQzlELEtBQUssQ0FBQzZCLEtBQUssQ0FBQ0MsUUFBUTFELHVEQUFXQSxDQUFDNkIsUUFBUTtZQUFFb0QsV0FBV1MsWUFBWXdIO1FBQVc7SUFDNUY7SUFDQTs7Ozs7Ozs7OztLQVVDLEdBQ0RYLGNBQWMsRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxFQUFFO1FBQ3hDLE9BQU8sSUFBSTNLLGFBQWE7WUFDcEJILE9BQU8sSUFBSSxDQUFDQSxLQUFLLENBQUMySyxhQUFhLENBQUM7Z0JBQUVDO2dCQUFTQztnQkFBT0M7WUFBUTtRQUM5RDtJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNeEssc0JBQXNCUDtJQUMvQixPQUFPSCxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FWLFlBQVltQixNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOakIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQVk7UUFDMUM7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBLDhEQUE4RDtRQUM5RFEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBUTtRQUNuQjtRQUNBLElBQUksQ0FBQzJCLGdCQUFnQixHQUFHRixPQUFPRSxnQkFBZ0IsSUFBSSxJQUFJLENBQUNBLGdCQUFnQjtRQUN4RSxJQUFJLENBQUM0QixlQUFlLEdBQUc5QixPQUFPOEIsZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZTtJQUN6RTtJQUNBb0oscUJBQXFCQyxPQUFPLEVBQUV2TCxNQUFNLEVBQUU2RCxVQUFVLEVBQUU7UUFDOUMsTUFBTTJILE1BQU1ELFVBQVUsSUFBSSxDQUFDLGNBQWMsRUFBRUEsUUFBUSxDQUFDLEdBQUdwSTtRQUN2RCxPQUFPaEYsdURBQVdBLENBQUM2QixRQUFRO1lBQUVvRCxXQUFXUyxZQUFZd0gsU0FBU0c7UUFBSztJQUN0RTtJQUNBLE1BQU1KLFFBQVEvSSxLQUFLLEVBQUVyQyxNQUFNLEVBQUU2RCxVQUFVLEVBQUU7UUFDckMsT0FBT3pHLG9DQUFNQSxDQUFDLENBQUNxTyxnQkFBa0IsS0FBSyxDQUFDakosT0FBT0gsT0FBTyxJQUFJLENBQUNpSixvQkFBb0IsQ0FBQ0csZUFBZXpMLFFBQVE2RCxjQUFjO1lBQ2hIM0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtZQUNyQ3dKLFNBQVNDLEtBQUtDLEdBQUcsQ0FBQyxJQUFJLENBQUN0TCxnQkFBZ0IsR0FBRyxHQUFHO1lBQzdDdUwsV0FBVztRQUNmO0lBQ0o7SUFDQTs7Ozs7Ozs7O0tBU0MsR0FDRCxNQUFNckosT0FBT0gsS0FBSyxFQUFFckMsTUFBTSxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDMEQsZUFBZSxDQUFDLElBQUksQ0FBQzBILE9BQU8sRUFBRS9JLE9BQU9yQztJQUNyRDtJQUNBLE1BQU04TCxPQUFPakssTUFBTSxFQUFFa0ssT0FBTyxFQUFFeEgsV0FBVyxFQUFFekMsWUFBWSxFQUFFO1FBQ3JELE1BQU1rSyxhQUFhLENBQUM7UUFDcEIsSUFBSTtZQUNBLE1BQU01TyxvQ0FBTUEsQ0FBQyxPQUFPcU87Z0JBQ2hCLE1BQU1RLG1CQUFtQnBLLE9BQ3BCNUIsR0FBRyxDQUFDLENBQUN5QixHQUFHQyxJQUFNQSxHQUNkSixNQUFNLENBQUMsQ0FBQ0ksSUFBTXFLLFVBQVUsQ0FBQ3JLLEVBQUV1SyxRQUFRLEdBQUcsS0FBSy9JLGFBQzVDLHVEQUF1RDtvQkFDdkQ2SSxVQUFVLENBQUNySyxFQUFFdUssUUFBUSxHQUFHLFlBQVlsTDtnQkFDeEMsTUFBTW1MLGtCQUFrQkYsaUJBQWlCaE0sR0FBRyxDQUFDLENBQUMwQixJQUFNRSxNQUFNLENBQUNGLEVBQUU7Z0JBQzdELE1BQU15SyxpQkFBaUJILGlCQUFpQmhNLEdBQUcsQ0FBQyxDQUFDMEIsSUFBTSxJQUFJLENBQUMySixvQkFBb0IsQ0FBQ0csZUFBZU0sU0FBUyxDQUFDcEssRUFBRSxFQUFFNEMsYUFBYSxDQUFDNUMsRUFBRTtnQkFDMUgsTUFBTTBLLFVBQVUsTUFBTSxLQUFLLENBQUN6SyxNQUFNdUssaUJBQWlCQyxnQkFBZ0I7b0JBQy9ELEdBQUd0SyxZQUFZO29CQUNmVyxrQkFBa0I7Z0JBQ3RCO2dCQUNBLElBQUk2SjtnQkFDSixJQUFLLElBQUkzSyxJQUFJLEdBQUdBLElBQUkwSyxRQUFRdEwsTUFBTSxFQUFFWSxLQUFLLEVBQUc7b0JBQ3hDLE1BQU1ZLFNBQVM4SixPQUFPLENBQUMxSyxFQUFFO29CQUN6QixNQUFNNEssaUJBQWlCTixnQkFBZ0IsQ0FBQ3RLLEVBQUU7b0JBQzFDLHVEQUF1RDtvQkFDdkQsSUFBSVksa0JBQWtCdkIsT0FBTzt3QkFDekIsSUFBSXNMLG1CQUFtQm5KLFdBQVc7NEJBQzlCbUosaUJBQWlCL0o7d0JBQ3JCO29CQUNKO29CQUNBeUosVUFBVSxDQUFDTyxlQUFlTCxRQUFRLEdBQUcsR0FBRzNKO2dCQUM1QztnQkFDQSxJQUFJK0osZ0JBQWdCO29CQUNoQixNQUFNQTtnQkFDVjtnQkFDQSxPQUFPRDtZQUNYLEdBQUc7Z0JBQ0NuSyxpQkFBaUIsSUFBSSxDQUFDQSxlQUFlO2dCQUNyQ3dKLFNBQVNDLEtBQUtDLEdBQUcsQ0FBQyxJQUFJLENBQUN0TCxnQkFBZ0IsR0FBRyxHQUFHO2dCQUM3Q3VMLFdBQVc7WUFDZjtRQUNKLEVBQ0EsT0FBTzFKLEdBQUc7WUFDTixJQUFJTCxjQUFjVyxxQkFBcUIsTUFBTTtnQkFDekMsTUFBTU47WUFDVjtRQUNKO1FBQ0EsT0FBT2hELE9BQU93SCxJQUFJLENBQUNxRixZQUNkUSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUMsU0FBU0YsR0FBRyxNQUFNRSxTQUFTRCxHQUFHLEtBQzdDek0sR0FBRyxDQUFDLENBQUN1QixNQUFRd0ssVUFBVSxDQUFDVyxTQUFTbkwsS0FBSyxJQUFJO0lBQ25EO0lBQ0EsTUFBTUksTUFBTUMsTUFBTSxFQUFFZixPQUFPLEVBQUVnQixZQUFZLEVBQUU7UUFDdkMsT0FBTyxJQUFJLENBQUNzQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMwSCxNQUFNLENBQUNsTSxJQUFJLENBQUMsSUFBSSxHQUFHaUMsUUFBUWYsU0FBU2dCO0lBQzFFO0FBQ0o7QUFDQTs7Ozs7Ozs7OztDQVVDLEdBQ00sTUFBTXdFLHlCQUF5QnRIO0lBQ2xDLE9BQU9XLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQVYsWUFBWW1CLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05qQixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sRUFBRTtRQUNiO1FBQ0EsOERBQThEO1FBQzlEUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTztRQUNYO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0EsSUFBSSxDQUFDNEgsS0FBSyxHQUFHbkcsT0FBT21HLEtBQUs7UUFDekIsSUFBSSxDQUFDcUcsTUFBTSxHQUFHeE0sT0FBT3dNLE1BQU0sSUFBSSxJQUFJLENBQUNBLE1BQU07UUFDMUMsSUFBSSxDQUFDcEcsSUFBSSxHQUFHcEcsT0FBT29HLElBQUk7UUFDdkIsSUFBSSxDQUFDOUcsSUFBSSxHQUFHVSxPQUFPVixJQUFJO0lBQzNCO0lBQ0EsSUFBSXVILFFBQVE7UUFDUixPQUFPO1lBQUMsSUFBSSxDQUFDVixLQUFLO2VBQUssSUFBSSxDQUFDcUcsTUFBTTtZQUFFLElBQUksQ0FBQ3BHLElBQUk7U0FBQztJQUNsRDtJQUNBLE1BQU1oRSxPQUFPSCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDekIsTUFBTWQsU0FBU2hDLHdEQUFZQSxDQUFDOEM7UUFDNUIsTUFBTThDLG1CQUFtQixNQUFNM0YsdUVBQTJCQSxDQUFDK0I7UUFDM0QsTUFBTTZELGFBQWEsTUFBTUQsa0JBQWtCRSxpQkFBaUIsSUFBSSxDQUFDQyxNQUFNLElBQUlyRixjQUFjMkQsT0FBTyxVQUFVckMsT0FBT2lCLEtBQUssRUFBRWtDLFdBQVdBLFdBQVdBLFdBQVduRCxRQUFRdUQ7UUFDakssT0FBT3ZELE9BQU9pQixLQUFLO1FBQ25CLElBQUk0TCxnQkFBZ0J4SztRQUNwQixJQUFJMkM7UUFDSixJQUFJO1lBQ0EsTUFBTThILGVBQWU7Z0JBQUMsSUFBSSxDQUFDdkcsS0FBSzttQkFBSyxJQUFJLENBQUNxRyxNQUFNO2FBQUM7WUFDakQsSUFBSyxJQUFJakwsSUFBSSxHQUFHQSxJQUFJbUwsYUFBYS9MLE1BQU0sRUFBRVksS0FBSyxFQUFHO2dCQUM3QyxNQUFNb0wsT0FBT0QsWUFBWSxDQUFDbkwsRUFBRTtnQkFDNUJrTCxnQkFBZ0IsTUFBTUUsS0FBS3ZLLE1BQU0sQ0FBQ3FLLGVBQWUxTyx1REFBV0EsQ0FBQzZCLFFBQVE7b0JBQ2pFb0QsV0FBV1MsWUFBWXdILFNBQVMsQ0FBQyxTQUFTLEVBQUUxSixJQUFJLEVBQUUsQ0FBQztnQkFDdkQ7WUFDSjtZQUNBLGtIQUFrSDtZQUNsSHFELGNBQWMsTUFBTSxJQUFJLENBQUN3QixJQUFJLENBQUNoRSxNQUFNLENBQUNxSyxlQUFlMU8sdURBQVdBLENBQUM2QixRQUFRO2dCQUNwRW9ELFdBQVdTLFlBQVl3SCxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQ3BFLEtBQUssQ0FBQ2xHLE1BQU0sQ0FBQyxDQUFDO1lBQ25FO1FBQ0osRUFDQSxPQUFPb0IsR0FBRztZQUNOLE1BQU0wQixZQUFZSyxpQkFBaUIvQjtZQUNuQyxNQUFNQTtRQUNWO1FBQ0EsTUFBTTBCLFlBQVlNLGVBQWV6RixjQUFjc0csYUFBYTtRQUM1RCxPQUFPQTtJQUNYO0lBQ0EsTUFBTXBELE1BQU1DLE1BQU0sRUFBRWYsT0FBTyxFQUFFZ0IsWUFBWSxFQUFFO1FBQ3ZDLE1BQU1DLGFBQWEsSUFBSSxDQUFDbEIsZUFBZSxDQUFDQyxXQUFXLENBQUMsR0FBR2UsT0FBT2QsTUFBTTtRQUNwRSxNQUFNdUQsbUJBQW1CLE1BQU01QixRQUFRQyxHQUFHLENBQUNaLFdBQVc5QixHQUFHLENBQUNoQyxtRUFBMkJBO1FBQ3JGLE1BQU1zRyxjQUFjLE1BQU03QixRQUFRQyxHQUFHLENBQUMyQixpQkFBaUJyRSxHQUFHLENBQUMsT0FBT3VFLGlCQUFpQjdDO1lBQy9FLE1BQU04QyxpQkFBaUIsTUFBTUQsaUJBQWlCVixpQkFBaUIsSUFBSSxDQUFDQyxNQUFNLElBQUlyRixjQUFjbUQsTUFBTSxDQUFDRixFQUFFLEVBQUUsVUFBVUksVUFBVSxDQUFDSixFQUFFLENBQUNWLEtBQUssRUFBRWtDLFdBQVdBLFdBQVdBLFdBQVdwQixVQUFVLENBQUNKLEVBQUUsQ0FBQzRCLE9BQU87WUFDNUwsT0FBT3hCLFVBQVUsQ0FBQ0osRUFBRSxDQUFDVixLQUFLO1lBQzFCLE9BQU93RDtRQUNYO1FBQ0EsOERBQThEO1FBQzlELElBQUl1SSxpQkFBaUJuTDtRQUNyQixJQUFJO1lBQ0EsSUFBSyxJQUFJRixJQUFJLEdBQUdBLElBQUksSUFBSSxDQUFDc0YsS0FBSyxDQUFDbEcsTUFBTSxFQUFFWSxLQUFLLEVBQUc7Z0JBQzNDLE1BQU1vTCxPQUFPLElBQUksQ0FBQzlGLEtBQUssQ0FBQ3RGLEVBQUU7Z0JBQzFCcUwsaUJBQWlCLE1BQU1ELEtBQUtuTCxLQUFLLENBQUNvTCxnQkFBZ0J6SSxZQUFZdEUsR0FBRyxDQUFDLENBQUM0RCxZQUFZb0o7b0JBQzNFLE1BQU1DLGtCQUFrQnJKLFlBQVl3SCxTQUFTLENBQUMsU0FBUyxFQUFFMUosSUFBSSxFQUFFLENBQUM7b0JBQ2hFLE9BQU94RCx1REFBV0EsQ0FBQzRELFVBQVUsQ0FBQ2tMLEVBQUUsRUFBRTt3QkFBRTdKLFdBQVc4SjtvQkFBZ0I7Z0JBQ25FLElBQUlwTDtZQUNSO1FBQ0osRUFDQSxPQUFPSyxHQUFHO1lBQ04sTUFBTU8sUUFBUUMsR0FBRyxDQUFDNEIsWUFBWXRFLEdBQUcsQ0FBQyxDQUFDNEQsYUFBZUEsWUFBWUssaUJBQWlCL0I7WUFDL0UsTUFBTUE7UUFDVjtRQUNBLE1BQU1PLFFBQVFDLEdBQUcsQ0FBQzRCLFlBQVl0RSxHQUFHLENBQUMsQ0FBQzRELGFBQWVBLFlBQVlNLGVBQWV6RixjQUFjc08sZ0JBQWdCO1FBQzNHLE9BQU9BO0lBQ1g7SUFDQSxPQUFPcEssZ0JBQWdCUCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDbkMsTUFBTThDLG1CQUFtQixNQUFNM0YsdUVBQTJCQSxDQUFDNkM7UUFDM0QsTUFBTSxFQUFFRyxLQUFLLEVBQUUsR0FBR2tNLGNBQWMsR0FBR3JNLFdBQVcsQ0FBQztRQUMvQyxNQUFNK0MsYUFBYSxNQUFNRCxrQkFBa0JFLGlCQUFpQixJQUFJLENBQUNDLE1BQU0sSUFBSXJGLGNBQWMyRCxPQUFPLFVBQVVwQixPQUFPa0MsV0FBV0EsV0FBV0EsV0FBV2dLLGNBQWM1SjtRQUNoSyxNQUFNMEQsUUFBUTtZQUFDLElBQUksQ0FBQ1YsS0FBSztlQUFLLElBQUksQ0FBQ3FHLE1BQU07WUFBRSxJQUFJLENBQUNwRyxJQUFJO1NBQUM7UUFDckQsSUFBSTRHLGtCQUFrQjtRQUN0QixJQUFJcEk7UUFDSixnQkFBZ0JKO1lBQ1osTUFBTXZDO1FBQ1Y7UUFDQSxJQUFJO1lBQ0EsSUFBSWdMLGlCQUFpQnBHLEtBQUssQ0FBQyxFQUFFLENBQUNDLFNBQVMsQ0FBQ3RDLGtCQUFrQnpHLHVEQUFXQSxDQUFDZ1AsY0FBYztnQkFDaEYvSixXQUFXUyxZQUFZd0gsU0FBUyxDQUFDLFVBQVUsQ0FBQztZQUNoRDtZQUNBLElBQUssSUFBSTFKLElBQUksR0FBR0EsSUFBSXNGLE1BQU1sRyxNQUFNLEVBQUVZLEtBQUssRUFBRztnQkFDdEMsTUFBTW9MLE9BQU85RixLQUFLLENBQUN0RixFQUFFO2dCQUNyQjBMLGlCQUFpQixNQUFNTixLQUFLN0YsU0FBUyxDQUFDbUcsZ0JBQWdCbFAsdURBQVdBLENBQUNnUCxjQUFjO29CQUM1RS9KLFdBQVdTLFlBQVl3SCxTQUFTLENBQUMsU0FBUyxFQUFFMUosSUFBSSxFQUFFLENBQUM7Z0JBQ3ZEO1lBQ0o7WUFDQSxXQUFXLE1BQU13RCxTQUFTa0ksZUFBZ0I7Z0JBQ3RDLE1BQU1sSTtnQkFDTixJQUFJaUksaUJBQWlCO29CQUNqQixJQUFJcEksZ0JBQWdCN0IsV0FBVzt3QkFDM0I2QixjQUFjRztvQkFDbEIsT0FDSzt3QkFDRCxJQUFJOzRCQUNBLDhEQUE4RDs0QkFDOURILGNBQWNySCx3REFBTUEsQ0FBQ3FILGFBQWFHO3dCQUN0QyxFQUNBLE9BQU9oRCxHQUFHOzRCQUNONkMsY0FBYzdCOzRCQUNkaUssa0JBQWtCO3dCQUN0QjtvQkFDSjtnQkFDSjtZQUNKO1FBQ0osRUFDQSxPQUFPakwsR0FBRztZQUNOLE1BQU0wQixZQUFZSyxpQkFBaUIvQjtZQUNuQyxNQUFNQTtRQUNWO1FBQ0EsTUFBTTBCLFlBQVlNLGVBQWV6RixjQUFjc0csYUFBYTtJQUNoRTtJQUNBWSxTQUFTNUYsTUFBTSxFQUFFO1FBQ2IsTUFBTTZGLFFBQVEsSUFBSXBILDZDQUFLQTtRQUN2Qiw4REFBOEQ7UUFDOUQsSUFBSTZPLGtCQUFrQjtRQUN0QixJQUFJLENBQUNyRyxLQUFLLENBQUNzRyxPQUFPLENBQUMsQ0FBQ1IsTUFBTVM7WUFDdEIsTUFBTUMsWUFBWVYsS0FBS25ILFFBQVEsQ0FBQzVGO1lBQ2hDLElBQUl3TixVQUFVLEdBQUc7Z0JBQ2JDLFVBQVVDLGFBQWE7WUFDM0I7WUFDQSxJQUFJRixVQUFVLElBQUksQ0FBQ3ZHLEtBQUssQ0FBQ2xHLE1BQU0sR0FBRyxHQUFHO2dCQUNqQzBNLFVBQVVFLFlBQVk7WUFDMUI7WUFDQTlILE1BQU0rSCxNQUFNLENBQUNIO1lBQ2IsTUFBTUksZ0JBQWdCSixVQUFVSyxTQUFTO1lBQ3pDLElBQUksQ0FBQ0QsZUFBZTtnQkFDaEIsTUFBTSxJQUFJN00sTUFBTSxDQUFDLFNBQVMsRUFBRStMLEtBQUssa0JBQWtCLENBQUM7WUFDeEQ7WUFDQSxJQUFJTyxpQkFBaUI7Z0JBQ2pCekgsTUFBTU8sT0FBTyxDQUFDa0gsaUJBQWlCTztZQUNuQztZQUNBUCxrQkFBa0JHLFVBQVVNLFFBQVE7UUFDeEM7UUFDQSxPQUFPbEk7SUFDWDtJQUNBVCxLQUFLaUIsVUFBVSxFQUFFO1FBQ2IsSUFBSUMsaUJBQWlCMEgsa0JBQWtCLENBQUMzSCxhQUFhO1lBQ2pELE9BQU8sSUFBSUMsaUJBQWlCO2dCQUN4QkMsT0FBTyxJQUFJLENBQUNBLEtBQUs7Z0JBQ2pCcUcsUUFBUSxJQUFJLENBQUNBLE1BQU0sQ0FBQ2pQLE1BQU0sQ0FBQztvQkFDdkIsSUFBSSxDQUFDNkksSUFBSTtvQkFDVEgsV0FBV0UsS0FBSzt1QkFDYkYsV0FBV3VHLE1BQU07aUJBQ3ZCO2dCQUNEcEcsTUFBTUgsV0FBV0csSUFBSTtnQkFDckI5RyxNQUFNLElBQUksQ0FBQ0EsSUFBSSxJQUFJMkcsV0FBVzNHLElBQUk7WUFDdEM7UUFDSixPQUNLO1lBQ0QsT0FBTyxJQUFJNEcsaUJBQWlCO2dCQUN4QkMsT0FBTyxJQUFJLENBQUNBLEtBQUs7Z0JBQ2pCcUcsUUFBUTt1QkFBSSxJQUFJLENBQUNBLE1BQU07b0JBQUUsSUFBSSxDQUFDcEcsSUFBSTtpQkFBQztnQkFDbkNBLE1BQU1DLGtCQUFrQko7Z0JBQ3hCM0csTUFBTSxJQUFJLENBQUNBLElBQUk7WUFDbkI7UUFDSjtJQUNKO0lBQ0EsOERBQThEO0lBQzlELE9BQU9zTyxtQkFBbUJ2RCxLQUFLLEVBQUU7UUFDN0IsT0FBTzVMLE1BQU1DLE9BQU8sQ0FBQzJMLE1BQU1tQyxNQUFNLEtBQUs1TixTQUFTd0wsVUFBVSxDQUFDQztJQUM5RDtJQUNBLDhEQUE4RDtJQUM5RCxPQUFPaEosS0FBSyxDQUFDOEUsT0FBTyxHQUFHMEgsVUFBVSxFQUFFdk8sSUFBSSxFQUFFO1FBQ3JDLE9BQU8sSUFBSTRHLGlCQUFpQjtZQUN4QkMsT0FBT0Usa0JBQWtCRjtZQUN6QnFHLFFBQVFxQixVQUFVQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUdqTyxHQUFHLENBQUN3RztZQUNuQ0QsTUFBTUMsa0JBQWtCd0gsU0FBUyxDQUFDQSxVQUFVbE4sTUFBTSxHQUFHLEVBQUU7WUFDdkRyQjtRQUNKO0lBQ0o7QUFDSjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Q0FlQyxHQUNNLE1BQU1zSCxvQkFBb0JoSTtJQUM3QixPQUFPVyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0F3TyxlQUFlO1FBQ1gsT0FBT2hQLE9BQU93SCxJQUFJLENBQUMsSUFBSSxDQUFDTSxLQUFLO0lBQ2pDO0lBQ0FoSSxZQUFZbUIsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTmpCLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNzSSxLQUFLLEdBQUcsQ0FBQztRQUNkLEtBQUssTUFBTSxDQUFDekYsS0FBSzdDLE1BQU0sSUFBSVEsT0FBT21DLE9BQU8sQ0FBQ2xCLE9BQU82RyxLQUFLLEVBQUc7WUFDckQsSUFBSSxDQUFDQSxLQUFLLENBQUN6RixJQUFJLEdBQUdpRixrQkFBa0I5SDtRQUN4QztJQUNKO0lBQ0EsT0FBTzhDLEtBQUt3RixLQUFLLEVBQUU7UUFDZixPQUFPLElBQUlELFlBQVk7WUFBRUM7UUFBTTtJQUNuQztJQUNBLE1BQU16RSxPQUFPSCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDekIsTUFBTWQsU0FBU2hDLHdEQUFZQSxDQUFDOEM7UUFDNUIsTUFBTThDLG1CQUFtQixNQUFNM0YsdUVBQTJCQSxDQUFDK0I7UUFDM0QsTUFBTTZELGFBQWEsTUFBTUQsa0JBQWtCRSxpQkFBaUIsSUFBSSxDQUFDQyxNQUFNLElBQUk7WUFDdkUxQjtRQUNKLEdBQUdyQyxPQUFPaUIsS0FBSyxFQUFFa0MsV0FBV0EsV0FBV0EsV0FBV25ELFFBQVF1RDtRQUMxRCxPQUFPdkQsT0FBT2lCLEtBQUs7UUFDbkIsOERBQThEO1FBQzlELE1BQU1nRCxTQUFTLENBQUM7UUFDaEIsSUFBSTtZQUNBLE1BQU12QixRQUFRQyxHQUFHLENBQUN4RCxPQUFPbUMsT0FBTyxDQUFDLElBQUksQ0FBQzJGLEtBQUssRUFBRWhILEdBQUcsQ0FBQyxPQUFPLENBQUN1QixLQUFLYixTQUFTO2dCQUNuRXNELE1BQU0sQ0FBQ3pDLElBQUksR0FBRyxNQUFNYixTQUFTNkIsTUFBTSxDQUFDSCxPQUFPbEUsdURBQVdBLENBQUM2QixRQUFRO29CQUMzRG9ELFdBQVdTLFlBQVl3SCxTQUFTLENBQUMsUUFBUSxFQUFFN0osSUFBSSxDQUFDO2dCQUNwRDtZQUNKO1FBQ0osRUFDQSxPQUFPVyxHQUFHO1lBQ04sTUFBTTBCLFlBQVlLLGlCQUFpQi9CO1lBQ25DLE1BQU1BO1FBQ1Y7UUFDQSxNQUFNMEIsWUFBWU0sZUFBZUY7UUFDakMsT0FBT0E7SUFDWDtJQUNBLE9BQU9tSyxXQUFXakgsU0FBUyxFQUFFdEQsVUFBVSxFQUFFL0MsT0FBTyxFQUFFO1FBQzlDLHVEQUF1RDtRQUN2RCxNQUFNbUcsUUFBUTtZQUFFLEdBQUcsSUFBSSxDQUFDQSxLQUFLO1FBQUM7UUFDOUIsOENBQThDO1FBQzlDLE1BQU1vSCxjQUFjelEsc0RBQUlBLENBQUN1SixXQUFXaEksT0FBT3dILElBQUksQ0FBQ00sT0FBT2xHLE1BQU07UUFDN0Qsb0RBQW9EO1FBQ3BELE1BQU11TixRQUFRLElBQUlDLElBQUlwUCxPQUFPbUMsT0FBTyxDQUFDMkYsT0FBT2hILEdBQUcsQ0FBQyxDQUFDLENBQUN1QixLQUFLYixTQUFTLEVBQUVnQjtZQUM5RCxNQUFNNk0sTUFBTTdOLFNBQVN1RyxTQUFTLENBQUNtSCxXQUFXLENBQUMxTSxFQUFFLEVBQUV4RCx1REFBV0EsQ0FBQzJDLFNBQVM7Z0JBQ2hFc0MsV0FBV1MsWUFBWXdILFNBQVMsQ0FBQyxRQUFRLEVBQUU3SixJQUFJLENBQUM7WUFDcEQ7WUFDQSxPQUFPO2dCQUFDQTtnQkFBS2dOLElBQUlDLElBQUksR0FBR0MsSUFBSSxDQUFDLENBQUNuTSxTQUFZO3dCQUFFZjt3QkFBS2dOO3dCQUFLak07b0JBQU87YUFBSTtRQUNyRTtRQUNBLHlDQUF5QztRQUN6QyxxQ0FBcUM7UUFDckMsK0JBQStCO1FBQy9CLE1BQU8rTCxNQUFNSyxJQUFJLENBQUU7WUFDZixNQUFNLEVBQUVuTixHQUFHLEVBQUVlLE1BQU0sRUFBRWlNLEdBQUcsRUFBRSxHQUFHLE1BQU05TCxRQUFRa00sSUFBSSxDQUFDTixNQUFNTyxNQUFNO1lBQzVEUCxNQUFNUSxNQUFNLENBQUN0TjtZQUNiLElBQUksQ0FBQ2UsT0FBT3dNLElBQUksRUFBRTtnQkFDZCxNQUFNO29CQUFFLENBQUN2TixJQUFJLEVBQUVlLE9BQU81RCxLQUFLO2dCQUFDO2dCQUM1QjJQLE1BQU1VLEdBQUcsQ0FBQ3hOLEtBQUtnTixJQUFJQyxJQUFJLEdBQUdDLElBQUksQ0FBQyxDQUFDbk0sU0FBWTt3QkFBRWY7d0JBQUtnTjt3QkFBS2pNO29CQUFPO1lBQ25FO1FBQ0o7SUFDSjtJQUNBMkUsVUFBVUMsU0FBUyxFQUFFckcsT0FBTyxFQUFFO1FBQzFCLE9BQU8sSUFBSSxDQUFDNkQsMEJBQTBCLENBQUN3QyxXQUFXLElBQUksQ0FBQ2lILFVBQVUsQ0FBQ3hPLElBQUksQ0FBQyxJQUFJLEdBQUdrQjtJQUNsRjtJQUNBLE1BQU0rQixPQUFPUixLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDekIsZ0JBQWdCcUc7WUFDWixNQUFNOUU7UUFDVjtRQUNBLE1BQU1TLG1CQUFtQixJQUFJaEYscUVBQXVCQSxDQUFDLElBQUksQ0FBQ29KLFNBQVMsQ0FBQ0MsYUFBYXJHO1FBQ2pGLE1BQU1nQyxpQkFBaUJDLEtBQUs7UUFDNUIsT0FBT3JGLG9FQUFzQkEsQ0FBQ3NGLGtCQUFrQixDQUFDRjtJQUNyRDtBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNbU0sdUJBQXVCalE7SUFDaEMsT0FBT1csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBVixZQUFZbUIsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTmpCLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlosT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDZ0YsSUFBSSxHQUFHdkQsT0FBT3VELElBQUk7SUFDM0I7SUFDQSxPQUFPbEMsS0FBS2tDLElBQUksRUFBRTtRQUNkLE9BQU8sSUFBSXNMLGVBQWU7WUFDdEJ0TDtRQUNKO0lBQ0o7SUFDQSxNQUFNeUgsUUFBUS9JLEtBQUssRUFBRXJDLE1BQU0sRUFBRTZELFVBQVUsRUFBRTtRQUNyQyxPQUFPLElBQUluQixRQUFRLENBQUN3TSxTQUFTQztZQUN6QixNQUFNQyxjQUFjalIsdURBQVdBLENBQUM2QixRQUFRO2dCQUNwQ29ELFdBQVdTLFlBQVl3SDtnQkFDdkI3SCxnQkFBZ0IsQ0FBQ3hELFFBQVF3RCxrQkFBa0J6RiwrREFBc0IsSUFBSztZQUMxRTtZQUNBLEtBQUtTLG9GQUFrQ0EsQ0FBQzZRLFdBQVcsR0FBR0MsR0FBRyxDQUFDRixhQUFhO2dCQUNuRSxJQUFJO29CQUNBLElBQUluTCxTQUFTLE1BQU0sSUFBSSxDQUFDTixJQUFJLENBQUN0QixPQUFPO3dCQUNoQyxHQUFHK00sV0FBVzt3QkFDZHBQLFFBQVFvUDtvQkFDWjtvQkFDQSxJQUFJbkwsVUFBVWpGLFNBQVN3TCxVQUFVLENBQUN2RyxTQUFTO3dCQUN2QyxJQUFJakUsUUFBUXdELG1CQUFtQixHQUFHOzRCQUM5QixNQUFNLElBQUl4QyxNQUFNO3dCQUNwQjt3QkFDQWlELFNBQVMsTUFBTUEsT0FBT3pCLE1BQU0sQ0FBQ0gsT0FBTzs0QkFDaEMsR0FBRytNLFdBQVc7NEJBQ2Q1TCxnQkFBZ0IsQ0FBQzRMLFlBQVk1TCxjQUFjLElBQUl6RiwrREFBc0IsSUFBSzt3QkFDOUU7b0JBQ0o7b0JBQ0FtUixRQUFRakw7Z0JBQ1osRUFDQSxPQUFPOUIsR0FBRztvQkFDTmdOLE9BQU9oTjtnQkFDWDtZQUNKO1FBQ0o7SUFDSjtJQUNBLE1BQU1LLE9BQU9ILEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6QixPQUFPLElBQUksQ0FBQzRDLGVBQWUsQ0FBQyxJQUFJLENBQUMwSCxPQUFPLEVBQUUvSSxPQUFPdkI7SUFDckQ7SUFDQSxPQUFPc04sV0FBV2pILFNBQVMsRUFBRXRELFVBQVUsRUFBRTdELE1BQU0sRUFBRTtRQUM3QyxJQUFJb0g7UUFDSixXQUFXLE1BQU1qQyxTQUFTZ0MsVUFBVztZQUNqQyxJQUFJQyxlQUFlakUsV0FBVztnQkFDMUJpRSxhQUFhakM7WUFDakIsT0FDSztnQkFDRCxtRUFBbUU7Z0JBQ25FLElBQUk7b0JBQ0EsOERBQThEO29CQUM5RGlDLGFBQWF6Six3REFBTUEsQ0FBQ3lKLFlBQVlqQztnQkFDcEMsRUFDQSxPQUFPaEQsR0FBRztvQkFDTmlGLGFBQWFqQztnQkFDakI7WUFDSjtRQUNKO1FBQ0EsTUFBTWxCLFNBQVMsTUFBTSxJQUFJdkIsUUFBUSxDQUFDd00sU0FBU0M7WUFDdkMsS0FBSzNRLG9GQUFrQ0EsQ0FBQzZRLFdBQVcsR0FBR0MsR0FBRyxDQUFDdFAsUUFBUTtnQkFDOUQsSUFBSTtvQkFDQSxNQUFNdVAsTUFBTSxNQUFNLElBQUksQ0FBQzVMLElBQUksQ0FBQ3lELFlBQVk7d0JBQ3BDLEdBQUdwSCxNQUFNO3dCQUNUQTtvQkFDSjtvQkFDQWtQLFFBQVFLO2dCQUNaLEVBQ0EsT0FBT3BOLEdBQUc7b0JBQ05nTixPQUFPaE47Z0JBQ1g7WUFDSjtRQUNKO1FBQ0EsSUFBSThCLFVBQVVqRixTQUFTd0wsVUFBVSxDQUFDdkcsU0FBUztZQUN2QyxJQUFJakUsUUFBUXdELG1CQUFtQixHQUFHO2dCQUM5QixNQUFNLElBQUl4QyxNQUFNO1lBQ3BCO1lBQ0EsTUFBTTZCLFNBQVMsTUFBTW9CLE9BQU9wQixNQUFNLENBQUN1RSxZQUFZakosdURBQVdBLENBQUM2QixRQUFRO2dCQUMvRG9ELFdBQVdTLFlBQVl3SDtnQkFDdkI3SCxnQkFBZ0IsQ0FBQ3hELFFBQVF3RCxrQkFBa0J6RiwrREFBc0IsSUFBSztZQUMxRTtZQUNBLFdBQVcsTUFBTW9ILFNBQVN0QyxPQUFRO2dCQUM5QixNQUFNc0M7WUFDVjtRQUNKLE9BQ0s7WUFDRCxNQUFNbEI7UUFDVjtJQUNKO0lBQ0FpRCxVQUFVQyxTQUFTLEVBQUVyRyxPQUFPLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUM2RCwwQkFBMEIsQ0FBQ3dDLFdBQVcsSUFBSSxDQUFDaUgsVUFBVSxDQUFDeE8sSUFBSSxDQUFDLElBQUksR0FBR2tCO0lBQ2xGO0lBQ0EsTUFBTStCLE9BQU9SLEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6QixnQkFBZ0JxRztZQUNaLE1BQU05RTtRQUNWO1FBQ0EsTUFBTVMsbUJBQW1CLElBQUloRixxRUFBdUJBLENBQUMsSUFBSSxDQUFDb0osU0FBUyxDQUFDQyxhQUFhckc7UUFDakYsTUFBTWdDLGlCQUFpQkMsS0FBSztRQUM1QixPQUFPckYsb0VBQXNCQSxDQUFDc0Ysa0JBQWtCLENBQUNGO0lBQ3JEO0FBQ0o7QUFDTyxNQUFNME0seUJBQXlCeEk7QUFDdEM7QUFDQTs7Q0FFQyxHQUNNLE1BQU10Ryw4QkFBOEIxQjtJQUN2QyxPQUFPVyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FWLFlBQVltQixNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOakIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQVk7UUFDMUM7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2dDLFFBQVEsR0FBR1AsT0FBT08sUUFBUTtRQUMvQixJQUFJLENBQUNDLFNBQVMsR0FBR1IsT0FBT1EsU0FBUztJQUNyQztJQUNBLENBQUNxTixZQUFZO1FBQ1QsTUFBTSxJQUFJLENBQUN0TixRQUFRO1FBQ25CLEtBQUssTUFBTThPLFlBQVksSUFBSSxDQUFDN08sU0FBUyxDQUFFO1lBQ25DLE1BQU02TztRQUNWO0lBQ0o7SUFDQSxNQUFNak4sT0FBT0gsS0FBSyxFQUFFdkIsT0FBTyxFQUFFO1FBQ3pCLE1BQU04QyxtQkFBbUIsTUFBTXZHLGtFQUFlQSxDQUFDcVMsU0FBUyxDQUFDNU8sU0FBU3NDLFdBQVdELFdBQVdyQyxTQUFTdUMsTUFBTUYsV0FBV3JDLFNBQVN3QztRQUMzSCxNQUFNLEVBQUVyQyxLQUFLLEVBQUUsR0FBR2tNLGNBQWMsR0FBR3JNLFdBQVcsQ0FBQztRQUMvQyxNQUFNK0MsYUFBYSxNQUFNRCxrQkFBa0JFLGlCQUFpQixJQUFJLENBQUNDLE1BQU0sSUFBSXJGLGNBQWMyRCxPQUFPLFVBQVVwQixPQUFPa0MsV0FBV0EsV0FBV0EsV0FBV2dLLGNBQWM1SjtRQUNoSyxJQUFJb007UUFDSixLQUFLLE1BQU1oUCxZQUFZLElBQUksQ0FBQ3NOLFNBQVMsR0FBSTtZQUNyQyxJQUFJO2dCQUNBLE1BQU1oSyxTQUFTLE1BQU10RCxTQUFTNkIsTUFBTSxDQUFDSCxPQUFPbEUsdURBQVdBLENBQUNnUCxjQUFjO29CQUFFL0osV0FBV1MsWUFBWXdIO2dCQUFXO2dCQUMxRyxNQUFNeEgsWUFBWU0sZUFBZXpGLGNBQWN1RixRQUFRO2dCQUN2RCxPQUFPQTtZQUNYLEVBQ0EsT0FBTzlCLEdBQUc7Z0JBQ04sSUFBSXdOLGVBQWV4TSxXQUFXO29CQUMxQndNLGFBQWF4TjtnQkFDakI7WUFDSjtRQUNKO1FBQ0EsSUFBSXdOLGVBQWV4TSxXQUFXO1lBQzFCLE1BQU0sSUFBSW5DLE1BQU07UUFDcEI7UUFDQSxNQUFNNkMsWUFBWUssaUJBQWlCeUw7UUFDbkMsTUFBTUE7SUFDVjtJQUNBLE1BQU0vTixNQUFNQyxNQUFNLEVBQUVmLE9BQU8sRUFBRWdCLFlBQVksRUFBRTtRQUN2QyxJQUFJQSxjQUFjVyxrQkFBa0I7WUFDaEMsTUFBTSxJQUFJekIsTUFBTTtRQUNwQjtRQUNBLE1BQU1lLGFBQWEsSUFBSSxDQUFDbEIsZUFBZSxDQUFDQyxXQUFXLENBQUMsR0FBR2UsT0FBT2QsTUFBTTtRQUNwRSxNQUFNdUQsbUJBQW1CLE1BQU01QixRQUFRQyxHQUFHLENBQUNaLFdBQVc5QixHQUFHLENBQUMsQ0FBQ0QsU0FBVzNDLGtFQUFlQSxDQUFDcVMsU0FBUyxDQUFDMVAsUUFBUW9ELFdBQVdELFdBQVduRCxRQUFRcUQsTUFBTUYsV0FBV25ELFFBQVFzRDtRQUMvSixNQUFNaUIsY0FBYyxNQUFNN0IsUUFBUUMsR0FBRyxDQUFDMkIsaUJBQWlCckUsR0FBRyxDQUFDLE9BQU91RSxpQkFBaUI3QztZQUMvRSxNQUFNOEMsaUJBQWlCLE1BQU1ELGlCQUFpQlYsaUJBQWlCLElBQUksQ0FBQ0MsTUFBTSxJQUFJckYsY0FBY21ELE1BQU0sQ0FBQ0YsRUFBRSxFQUFFLFVBQVVJLFVBQVUsQ0FBQ0osRUFBRSxDQUFDVixLQUFLLEVBQUVrQyxXQUFXQSxXQUFXQSxXQUFXcEIsVUFBVSxDQUFDSixFQUFFLENBQUM0QixPQUFPO1lBQzVMLE9BQU94QixVQUFVLENBQUNKLEVBQUUsQ0FBQ1YsS0FBSztZQUMxQixPQUFPd0Q7UUFDWDtRQUNBLDhEQUE4RDtRQUM5RCxJQUFJa0w7UUFDSixLQUFLLE1BQU1oUCxZQUFZLElBQUksQ0FBQ3NOLFNBQVMsR0FBSTtZQUNyQyxJQUFJO2dCQUNBLE1BQU12SixVQUFVLE1BQU0vRCxTQUFTaUIsS0FBSyxDQUFDQyxRQUFRMEMsWUFBWXRFLEdBQUcsQ0FBQyxDQUFDNEQsWUFBWW9KLElBQU05Tyx1REFBV0EsQ0FBQzRELFVBQVUsQ0FBQ2tMLEVBQUUsRUFBRTt3QkFDdkc3SixXQUFXUyxZQUFZd0g7b0JBQzNCLEtBQUt2SjtnQkFDTCxNQUFNWSxRQUFRQyxHQUFHLENBQUM0QixZQUFZdEUsR0FBRyxDQUFDLENBQUM0RCxZQUFZbEMsSUFBTWtDLFlBQVlNLGVBQWV6RixjQUFjZ0csT0FBTyxDQUFDL0MsRUFBRSxFQUFFO2dCQUMxRyxPQUFPK0M7WUFDWCxFQUNBLE9BQU92QyxHQUFHO2dCQUNOLElBQUl3TixlQUFleE0sV0FBVztvQkFDMUJ3TSxhQUFheE47Z0JBQ2pCO1lBQ0o7UUFDSjtRQUNBLElBQUksQ0FBQ3dOLFlBQVk7WUFDYixNQUFNLElBQUkzTyxNQUFNO1FBQ3BCO1FBQ0EsTUFBTTBCLFFBQVFDLEdBQUcsQ0FBQzRCLFlBQVl0RSxHQUFHLENBQUMsQ0FBQzRELGFBQWVBLFlBQVlLLGlCQUFpQnlMO1FBQy9FLE1BQU1BO0lBQ1Y7QUFDSjtBQUNBLHFGQUFxRjtBQUM5RSxTQUFTbEosa0JBQWtCSixVQUFVO0lBQ3hDLElBQUksT0FBT0EsZUFBZSxZQUFZO1FBQ2xDLE9BQU8sSUFBSTRJLGVBQWU7WUFBRXRMLE1BQU0wQztRQUFXO0lBQ2pELE9BQ0ssSUFBSXJILFNBQVN3TCxVQUFVLENBQUNuRSxhQUFhO1FBQ3RDLE9BQU9BO0lBQ1gsT0FDSyxJQUFJLENBQUN4SCxNQUFNQyxPQUFPLENBQUN1SCxlQUFlLE9BQU9BLGVBQWUsVUFBVTtRQUNuRSxNQUFNNEgsWUFBWSxDQUFDO1FBQ25CLEtBQUssTUFBTSxDQUFDek0sS0FBSzdDLE1BQU0sSUFBSVEsT0FBT21DLE9BQU8sQ0FBQytFLFlBQWE7WUFDbkQ0SCxTQUFTLENBQUN6TSxJQUFJLEdBQUdpRixrQkFBa0I5SDtRQUN2QztRQUNBLE9BQU8sSUFBSXFJLFlBQVk7WUFDbkJDLE9BQU9nSDtRQUNYO0lBQ0osT0FDSztRQUNELE1BQU0sSUFBSWpOLE1BQU0sQ0FBQywwRUFBMEUsQ0FBQztJQUNoRztBQUNKO0FBQ0E7O0NBRUMsR0FDTSxNQUFNK0YsdUJBQXVCL0g7SUFDaEMsT0FBT1csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBVixZQUFZbUIsTUFBTSxDQUFFO1FBQ2hCLHVEQUF1RDtRQUN2RCxJQUFJQSxrQkFBa0I0RyxhQUFhO1lBQy9CLDZDQUE2QztZQUM3QzVHLFNBQVM7Z0JBQUV3UCxRQUFReFA7WUFBTztRQUM5QjtRQUNBLEtBQUssQ0FBQ0E7UUFDTmpCLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWWixPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNpUixNQUFNLEdBQUd4UCxPQUFPd1AsTUFBTTtJQUMvQjtJQUNBLE1BQU1wTixPQUFPSCxLQUFLLEVBQUV2QixPQUFPLEVBQUU7UUFDekIsTUFBTStPLGVBQWUsTUFBTSxJQUFJLENBQUNELE1BQU0sQ0FBQ3BOLE1BQU0sQ0FBQ0gsT0FBT3ZCO1FBQ3JELE9BQU87WUFDSCxHQUFHdUIsS0FBSztZQUNSLEdBQUd3TixZQUFZO1FBQ25CO0lBQ0o7SUFDQSxPQUFPekIsV0FBV2pILFNBQVMsRUFBRXRELFVBQVUsRUFBRS9DLE9BQU8sRUFBRTtRQUM5QyxzQkFBc0I7UUFDdEIsTUFBTWdQLGFBQWEsSUFBSSxDQUFDRixNQUFNLENBQUN6QixZQUFZO1FBQzNDLCtEQUErRDtRQUMvRCxNQUFNLENBQUM0QixnQkFBZ0JDLFVBQVUsR0FBR3BTLHNEQUFJQSxDQUFDdUo7UUFDekMsMkJBQTJCO1FBQzNCLE1BQU04SSxlQUFlLElBQUksQ0FBQ0wsTUFBTSxDQUFDMUksU0FBUyxDQUFDOEksV0FBVzdSLHVEQUFXQSxDQUFDMkMsU0FBUztZQUFFc0MsV0FBV1MsWUFBWXdIO1FBQVc7UUFDL0csbUJBQW1CO1FBQ25CLE1BQU02RSwwQkFBMEJELGFBQWF4QixJQUFJO1FBQ2pELHdCQUF3QjtRQUN4QixXQUFXLE1BQU10SixTQUFTNEssZUFBZ0I7WUFDdEMsSUFBSSxPQUFPNUssVUFBVSxZQUFZdEcsTUFBTUMsT0FBTyxDQUFDcUcsUUFBUTtnQkFDbkQsTUFBTSxJQUFJbkUsTUFBTSxDQUFDLDJEQUEyRCxFQUFFLE9BQU9tRSxNQUFNLENBQUM7WUFDaEc7WUFDQSxNQUFNZ0wsV0FBV2hSLE9BQU9rQyxXQUFXLENBQUNsQyxPQUFPbUMsT0FBTyxDQUFDNkQsT0FBTzVELE1BQU0sQ0FBQyxDQUFDLENBQUNDLElBQUksR0FBSyxDQUFDc08sV0FBV00sUUFBUSxDQUFDNU87WUFDakcsSUFBSXJDLE9BQU93SCxJQUFJLENBQUN3SixVQUFVcFAsTUFBTSxHQUFHLEdBQUc7Z0JBQ2xDLE1BQU1vUDtZQUNWO1FBQ0o7UUFDQSwwQkFBMEI7UUFDMUIsTUFBTSxDQUFDLE1BQU1ELHVCQUFzQixFQUFHdlIsS0FBSztRQUMzQyxXQUFXLE1BQU13RyxTQUFTOEssYUFBYztZQUNwQyxNQUFNOUs7UUFDVjtJQUNKO0lBQ0ErQixVQUFVQyxTQUFTLEVBQUVyRyxPQUFPLEVBQUU7UUFDMUIsT0FBTyxJQUFJLENBQUM2RCwwQkFBMEIsQ0FBQ3dDLFdBQVcsSUFBSSxDQUFDaUgsVUFBVSxDQUFDeE8sSUFBSSxDQUFDLElBQUksR0FBR2tCO0lBQ2xGO0lBQ0EsTUFBTStCLE9BQU9SLEtBQUssRUFBRXZCLE9BQU8sRUFBRTtRQUN6QixnQkFBZ0JxRztZQUNaLE1BQU05RTtRQUNWO1FBQ0EsTUFBTVMsbUJBQW1CLElBQUloRixxRUFBdUJBLENBQUMsSUFBSSxDQUFDb0osU0FBUyxDQUFDQyxhQUFhckc7UUFDakYsTUFBTWdDLGlCQUFpQkMsS0FBSztRQUM1QixPQUFPckYsb0VBQXNCQSxDQUFDc0Ysa0JBQWtCLENBQUNGO0lBQ3JEO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU04RCxxQkFBcUI1SDtJQUM5QixPQUFPVyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FWLFlBQVltQixNQUFNLENBQUU7UUFDaEIsSUFBSSxPQUFPQSxXQUFXLFlBQVl2QixNQUFNQyxPQUFPLENBQUNzQixTQUFTO1lBQ3JELDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRXVHLE1BQU12RztZQUFPO1FBQzVCO1FBQ0EsS0FBSyxDQUFDQTtRQUNOakIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQVk7UUFDMUM7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2dJLElBQUksR0FBR3ZHLE9BQU91RyxJQUFJO0lBQzNCO0lBQ0EsTUFBTTBKLE1BQU1oTyxLQUFLLEVBQUU7UUFDZixJQUFJLE9BQU8sSUFBSSxDQUFDc0UsSUFBSSxLQUFLLFVBQVU7WUFDL0IsT0FBT3RFLEtBQUssQ0FBQyxJQUFJLENBQUNzRSxJQUFJLENBQUM7UUFDM0IsT0FDSztZQUNELE1BQU0ySixTQUFTLElBQUksQ0FBQzNKLElBQUksQ0FDbkIxRyxHQUFHLENBQUMsQ0FBQ3VCLE1BQVE7b0JBQUNBO29CQUFLYSxLQUFLLENBQUNiLElBQUk7aUJBQUMsRUFDOUJELE1BQU0sQ0FBQyxDQUFDZ1AsSUFBTUEsQ0FBQyxDQUFDLEVBQUUsS0FBS3BOO1lBQzVCLE9BQU9tTixPQUFPdlAsTUFBTSxLQUFLLElBQUlvQyxZQUFZaEUsT0FBT2tDLFdBQVcsQ0FBQ2lQO1FBQ2hFO0lBQ0o7SUFDQSxNQUFNOU4sT0FBT0gsS0FBSyxFQUFFdkIsT0FBTyxFQUFFO1FBQ3pCLE9BQU8sSUFBSSxDQUFDNEMsZUFBZSxDQUFDLElBQUksQ0FBQzJNLEtBQUssQ0FBQ3pRLElBQUksQ0FBQyxJQUFJLEdBQUd5QyxPQUFPdkI7SUFDOUQ7SUFDQSxPQUFPc04sV0FBV2pILFNBQVMsRUFBRTtRQUN6QixXQUFXLE1BQU1oQyxTQUFTZ0MsVUFBVztZQUNqQyxNQUFNbUosU0FBUyxNQUFNLElBQUksQ0FBQ0QsS0FBSyxDQUFDbEw7WUFDaEMsSUFBSW1MLFdBQVduTixXQUFXO2dCQUN0QixNQUFNbU47WUFDVjtRQUNKO0lBQ0o7SUFDQXBKLFVBQVVDLFNBQVMsRUFBRXJHLE9BQU8sRUFBRTtRQUMxQixPQUFPLElBQUksQ0FBQzZELDBCQUEwQixDQUFDd0MsV0FBVyxJQUFJLENBQUNpSCxVQUFVLENBQUN4TyxJQUFJLENBQUMsSUFBSSxHQUFHa0I7SUFDbEY7SUFDQSxNQUFNK0IsT0FBT1IsS0FBSyxFQUFFdkIsT0FBTyxFQUFFO1FBQ3pCLGdCQUFnQnFHO1lBQ1osTUFBTTlFO1FBQ1Y7UUFDQSxNQUFNUyxtQkFBbUIsSUFBSWhGLHFFQUF1QkEsQ0FBQyxJQUFJLENBQUNvSixTQUFTLENBQUNDLGFBQWFyRztRQUNqRixNQUFNZ0MsaUJBQWlCQyxLQUFLO1FBQzVCLE9BQU9yRixvRUFBc0JBLENBQUNzRixrQkFBa0IsQ0FBQ0Y7SUFDckQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanM/MDU1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHBSZXRyeSBmcm9tIFwicC1yZXRyeVwiO1xuaW1wb3J0IHsgQ2FsbGJhY2tNYW5hZ2VyLCB9IGZyb20gXCIuLi9jYWxsYmFja3MvbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBSdW5Mb2csIFJ1bkxvZ1BhdGNoLCB9IGZyb20gXCIuLi90cmFjZXJzL2xvZ19zdHJlYW0uanNcIjtcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSwgY29uY2F0LCBhdGVlLCBwaXBlR2VuZXJhdG9yV2l0aFNldHVwLCBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCwgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCwgZW5zdXJlQ29uZmlnLCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcsIG1lcmdlQ29uZmlncywgcGF0Y2hDb25maWcsIH0gZnJvbSBcIi4vY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuLi91dGlscy9hc3luY19jYWxsZXIuanNcIjtcbmltcG9ydCB7IFJvb3RMaXN0ZW5lcnNUcmFjZXIgfSBmcm9tIFwiLi4vdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzXCI7XG5pbXBvcnQgeyBfUm9vdEV2ZW50RmlsdGVyLCBpc1J1bm5hYmxlSW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24gfSBmcm9tIFwiLi4vc2luZ2xldG9ucy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tIFwiLi9ncmFwaC5qc1wiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmV4cG9ydCBmdW5jdGlvbiBfY29lcmNlVG9EaWN0KHZhbHVlLCBkZWZhdWx0S2V5KSB7XG4gICAgcmV0dXJuIHZhbHVlICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyB2YWx1ZVxuICAgICAgICA6IHsgW2RlZmF1bHRLZXldOiB2YWx1ZSB9O1xufVxuLyoqXG4gKiBBIFJ1bm5hYmxlIGlzIGEgZ2VuZXJpYyB1bml0IG9mIHdvcmsgdGhhdCBjYW4gYmUgaW52b2tlZCwgYmF0Y2hlZCwgc3RyZWFtZWQsIGFuZC9vclxuICogdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZSBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3J1bm5hYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldE5hbWUoc3VmZml4KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdGhpcy5uYW1lID8/IHRoaXMuY29uc3RydWN0b3IubGNfbmFtZSgpID8/IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgcmV0dXJuIHN1ZmZpeCA/IGAke25hbWV9JHtzdWZmaXh9YCA6IG5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmQgYXJndW1lbnRzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBAcGFyYW0ga3dhcmdzXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCaW5kaW5nIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBhcHBseSB0aGUgYm91bmQgYXJncy5cbiAgICAgKi9cbiAgICBiaW5kKGt3YXJncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHsgYm91bmQ6IHRoaXMsIGt3YXJncywgY29uZmlnOiB7fSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgbmV3IFJ1bm5hYmxlIHRoYXQgbWFwcyBhIGxpc3Qgb2YgaW5wdXRzIHRvIGEgbGlzdCBvZiBvdXRwdXRzLFxuICAgICAqIGJ5IGNhbGxpbmcgaW52b2tlKCkgd2l0aCBlYWNoIGlucHV0LlxuICAgICAqL1xuICAgIG1hcCgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7IGJvdW5kOiB0aGlzIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgcmV0cnkgbG9naWMgdG8gYW4gZXhpc3RpbmcgcnVubmFibGUuXG4gICAgICogQHBhcmFtIGt3YXJnc1xuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlUmV0cnkgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIHJldHJ5IGFjY29yZGluZyB0byB0aGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICB3aXRoUmV0cnkoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVJldHJ5KHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAga3dhcmdzOiB7fSxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBtYXhBdHRlbXB0TnVtYmVyOiBmaWVsZHM/LnN0b3BBZnRlckF0dGVtcHQsXG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGNvbmZpZyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogQHBhcmFtIGNvbmZpZyBOZXcgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIHRvIGF0dGFjaCB0byB0aGUgbmV3IHJ1bm5hYmxlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlQmluZGluZyB3aXRoIGEgY29uZmlnIG1hdGNoaW5nIHdoYXQncyBwYXNzZWQuXG4gICAgICovXG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIGt3YXJnczoge30sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgZnJvbSB0aGUgY3VycmVudCBvbmUgdGhhdCB3aWxsIHRyeSBpbnZva2luZ1xuICAgICAqIG90aGVyIHBhc3NlZCBmYWxsYmFjayBydW5uYWJsZXMgaWYgdGhlIGluaXRpYWwgaW52b2NhdGlvbiBmYWlscy5cbiAgICAgKiBAcGFyYW0gZmllbGRzLmZhbGxiYWNrcyBPdGhlciBydW5uYWJsZXMgdG8gY2FsbCBpZiB0aGUgcnVubmFibGUgZXJyb3JzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlV2l0aEZhbGxiYWNrcy5cbiAgICAgKi9cbiAgICB3aXRoRmFsbGJhY2tzKGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVXaXRoRmFsbGJhY2tzKHtcbiAgICAgICAgICAgIHJ1bm5hYmxlOiB0aGlzLFxuICAgICAgICAgICAgZmFsbGJhY2tzOiBmaWVsZHMuZmFsbGJhY2tzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMsIGxlbmd0aCA9IDApIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXNzZWQgXCJvcHRpb25zXCIgbXVzdCBiZSBhbiBhcnJheSB3aXRoIHRoZSBzYW1lIGxlbmd0aCBhcyB0aGUgaW5wdXRzLCBidXQgZ290ICR7b3B0aW9ucy5sZW5ndGh9IG9wdGlvbnMgZm9yICR7bGVuZ3RofSBpbnB1dHNgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKGVuc3VyZUNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA+IDEgJiYgIUFycmF5LmlzQXJyYXkob3B0aW9ucykgJiYgb3B0aW9ucy5ydW5JZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiUHJvdmlkZWQgcnVuSWQgd2lsbCBiZSB1c2VkIG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBiYXRjaC5cIik7XG4gICAgICAgICAgICBjb25zdCBzdWJzZXF1ZW50ID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLmZpbHRlcigoW2tleV0pID0+IGtleSAhPT0gXCJydW5JZFwiKSk7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaSkgPT4gZW5zdXJlQ29uZmlnKGkgPT09IDAgPyBvcHRpb25zIDogc3Vic2VxdWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIGFzeW5jIGJhdGNoKGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbWF4Q29uY3VycmVuY3kgPSBjb25maWdMaXN0WzBdPy5tYXhDb25jdXJyZW5jeSA/PyBiYXRjaE9wdGlvbnM/Lm1heENvbmN1cnJlbmN5O1xuICAgICAgICBjb25zdCBjYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIoe1xuICAgICAgICAgICAgbWF4Q29uY3VycmVuY3ksXG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBiYXRjaENhbGxzID0gaW5wdXRzLm1hcCgoaW5wdXQsIGkpID0+IGNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5pbnZva2UoaW5wdXQsIGNvbmZpZ0xpc3RbaV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGJhdGNoQ2FsbHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IHN0cmVhbWluZyBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IHN1cHBvcnQgc3RyZWFtaW5nIG91dHB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQgdGhpcy5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gb3V0cHV0IGluIGNodW5rcy5cbiAgICAgKiBAcGFyYW0gaW5wdXRcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIHRoYXQgaXMgYWxzbyBhbiBpdGVyYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQnVmZmVyIHRoZSBmaXJzdCBzdHJlYW1lZCBjaHVuayB0byBhbGxvdyBmb3IgaW5pdGlhbCBlcnJvcnNcbiAgICAgICAgLy8gdG8gc3VyZmFjZSBpbW1lZGlhdGVseS5cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgZW5zdXJlQ29uZmlnKG9wdGlvbnMpKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBsZXQgcnVubmFibGVDb25maWc7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlQ29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcnVubmFibGVDb25maWcgPSBlbnN1cmVDb25maWcoe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogb3B0aW9ucy5jYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBvcHRpb25zLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgIHJ1bk5hbWU6IG9wdGlvbnMucnVuTmFtZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IG9wdGlvbnMuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiBvcHRpb25zLnJlY3Vyc2lvbkxpbWl0LFxuICAgICAgICAgICAgICAgIG1heENvbmN1cnJlbmN5OiBvcHRpb25zLm1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIHJ1bklkOiBvcHRpb25zLnJ1bklkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbE9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLmNhbGxiYWNrcztcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnRhZ3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tZXRhZGF0YTtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLnJ1bk5hbWU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jb25maWd1cmFibGU7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5yZWN1cnNpb25MaW1pdDtcbiAgICAgICAgZGVsZXRlIGNhbGxPcHRpb25zLm1heENvbmN1cnJlbmN5O1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucnVuSWQ7XG4gICAgICAgIHJldHVybiBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXTtcbiAgICB9XG4gICAgYXN5bmMgX2NhbGxXaXRoQ29uZmlnKGZ1bmMsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBjb25maWcucnVuSWQsIGNvbmZpZz8ucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBmdW5jLmNhbGwodGhpcywgaW5wdXQsIGNvbmZpZywgcnVuTWFuYWdlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IGhhbmRsZXMgYmF0Y2hpbmcgYW5kIGNvbmZpZ3VyYXRpb24gZm9yIGEgcnVubmFibGVcbiAgICAgKiBJdCB0YWtlcyBhIGZ1bmN0aW9uLCBpbnB1dCB2YWx1ZXMsIGFuZCBvcHRpb25hbCBjb25maWd1cmF0aW9uLCBhbmRcbiAgICAgKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBmb3IgZWFjaCBpbnB1dCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IHZhbHVlcyB0byBiZSBwcm9jZXNzZWQuXG4gICAgICogQHBhcmFtIGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgdmFsdWVzLlxuICAgICAqL1xuICAgIGFzeW5jIF9iYXRjaFdpdGhDb25maWcoZnVuYywgaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKG9wdGlvbnNMaXN0Lm1hcChnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcpKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja01hbmFnZXJzLm1hcChhc3luYyAoY2FsbGJhY2tNYW5hZ2VyLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTdGFydFJlcyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgb3B0aW9uc0xpc3RbaV0ucnVuSWQsIG9wdGlvbnNMaXN0W2ldLnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zTGlzdFtpXS5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgb3V0cHV0cztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dHMgPSBhd2FpdCBmdW5jLmNhbGwodGhpcywgaW5wdXRzLCBvcHRpb25zTGlzdCwgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIikpKSk7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIHRyYW5zZm9ybSBhbiBJdGVyYXRvciBvZiBJbnB1dCB2YWx1ZXMgaW50byBhbiBJdGVyYXRvciBvZlxuICAgICAqIE91dHB1dCB2YWx1ZXMsIHdpdGggY2FsbGJhY2tzLlxuICAgICAqIFVzZSB0aGlzIHRvIGltcGxlbWVudCBgc3RyZWFtKClgIG9yIGB0cmFuc2Zvcm0oKWAgaW4gUnVubmFibGUgc3ViY2xhc3Nlcy5cbiAgICAgKi9cbiAgICBhc3luYyAqX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoaW5wdXRHZW5lcmF0b3IsIHRyYW5zZm9ybWVyLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbElucHV0O1xuICAgICAgICBsZXQgZmluYWxJbnB1dFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiB3cmFwSW5wdXRGb3JUcmFjaW5nKCkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpbnB1dEdlbmVyYXRvcikge1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbElucHV0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbElucHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0ID0gY29uY2F0KGZpbmFsSW5wdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsSW5wdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcnVuTWFuYWdlcjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBpcGUgPSBhd2FpdCBwaXBlR2VuZXJhdG9yV2l0aFNldHVwKHRyYW5zZm9ybWVyLmJpbmQodGhpcyksIHdyYXBJbnB1dEZvclRyYWNpbmcoKSwgYXN5bmMgKCkgPT4gY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCB7IGlucHV0OiBcIlwiIH0sIGNvbmZpZy5ydW5JZCwgY29uZmlnLnJ1blR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWcucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSksIGNvbmZpZyk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICAgICAgcnVuTWFuYWdlciA9IHBpcGUuc2V0dXA7XG4gICAgICAgICAgICBjb25zdCBpc0xvZ1N0cmVhbUhhbmRsZXIgPSAoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxvZ19zdHJlYW1fdHJhY2VyXCI7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb2dIYW5kbGVyID0gcnVuTWFuYWdlcj8uaGFuZGxlcnMuZmluZChpc0xvZ1N0cmVhbUhhbmRsZXIpO1xuICAgICAgICAgICAgbGV0IGl0ZXJhdG9yID0gcGlwZS5vdXRwdXQ7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9nSGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIHJ1bk1hbmFnZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yID0gYXdhaXQgc3RyZWFtTG9nSGFuZGxlci50YXBPdXRwdXRJdGVyYWJsZShydW5NYW5hZ2VyLnJ1bklkLCBwaXBlLm91dHB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbE91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgaW5wdXRzOiBfY29lcmNlVG9EaWN0KGZpbmFsSW5wdXQsIFwiaW5wdXRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoZmluYWxPdXRwdXQgPz8ge30sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHsgaW5wdXRzOiBfY29lcmNlVG9EaWN0KGZpbmFsSW5wdXQsIFwiaW5wdXRcIikgfSk7XG4gICAgfVxuICAgIGdldEdyYXBoKF8pIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gVE9ETzogQWRkIGlucHV0IHNjaGVtYSBmb3IgcnVubmFibGVzXG4gICAgICAgIGNvbnN0IGlucHV0Tm9kZSA9IGdyYXBoLmFkZE5vZGUoe1xuICAgICAgICAgICAgbmFtZTogYCR7dGhpcy5nZXROYW1lKCl9SW5wdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcnVubmFibGVOb2RlID0gZ3JhcGguYWRkTm9kZSh0aGlzKTtcbiAgICAgICAgLy8gVE9ETzogQWRkIG91dHB1dCBzY2hlbWFzIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3Qgb3V0cHV0Tm9kZSA9IGdyYXBoLmFkZE5vZGUoe1xuICAgICAgICAgICAgbmFtZTogYCR7dGhpcy5nZXROYW1lKCl9T3V0cHV0YCxcbiAgICAgICAgICAgIHNjaGVtYTogei5hbnkoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UoaW5wdXROb2RlLCBydW5uYWJsZU5vZGUpO1xuICAgICAgICBncmFwaC5hZGRFZGdlKHJ1bm5hYmxlTm9kZSwgb3V0cHV0Tm9kZSk7XG4gICAgICAgIHJldHVybiBncmFwaDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlIHRoYXQgcnVucyBlYWNoIGluZGl2aWR1YWwgcnVubmFibGUgaW4gc2VyaWVzLFxuICAgICAqIHBpcGluZyB0aGUgb3V0cHV0IG9mIG9uZSBydW5uYWJsZSBpbnRvIGFub3RoZXIgcnVubmFibGUgb3IgcnVubmFibGUtbGlrZS5cbiAgICAgKiBAcGFyYW0gY29lcmNlYWJsZSBBIHJ1bm5hYmxlLCBmdW5jdGlvbiwgb3Igb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZnVuY3Rpb25zIG9yIHJ1bm5hYmxlcy5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBydW5uYWJsZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgZmlyc3Q6IHRoaXMsXG4gICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBpY2sga2V5cyBmcm9tIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIHBpY2soa2V5cykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUobmV3IFJ1bm5hYmxlUGljayhrZXlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzc2lnbnMgbmV3IGZpZWxkcyB0byB0aGUgZGljdCBvdXRwdXQgb2YgdGhpcyBydW5uYWJsZS4gUmV0dXJucyBhIG5ldyBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3NpZ24obWFwcGluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5waXBlKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZUFzc2lnbihcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBuZXcgUnVubmFibGVNYXAoeyBzdGVwczogbWFwcGluZyB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRyYW5zZm9ybSwgd2hpY2ggYnVmZmVycyBpbnB1dCBhbmQgdGhlbiBjYWxscyBzdHJlYW0uXG4gICAgICogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgdGhleSBjYW4gc3RhcnQgcHJvZHVjaW5nIG91dHB1dCB3aGlsZVxuICAgICAqIGlucHV0IGlzIHN0aWxsIGJlaW5nIGdlbmVyYXRlZC5cbiAgICAgKiBAcGFyYW0gZ2VuZXJhdG9yXG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZmluYWxDaHVuaztcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIGEgYmVzdCBlZmZvcnQgdG8gZ2F0aGVyLCBmb3IgYW55IHR5cGUgdGhhdCBzdXBwb3J0cyBjb25jYXQuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGdhdGhlcmluZyBmYWlscy5cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHlpZWxkKiB0aGlzLl9zdHJlYW1JdGVyYXRvcihmaW5hbENodW5rLCBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdHJlYW0gYWxsIG91dHB1dCBmcm9tIGEgcnVubmFibGUsIGFzIHJlcG9ydGVkIHRvIHRoZSBjYWxsYmFjayBzeXN0ZW0uXG4gICAgICogVGhpcyBpbmNsdWRlcyBhbGwgaW5uZXIgcnVucyBvZiBMTE1zLCBSZXRyaWV2ZXJzLCBUb29scywgZXRjLlxuICAgICAqIE91dHB1dCBpcyBzdHJlYW1lZCBhcyBMb2cgb2JqZWN0cywgd2hpY2ggaW5jbHVkZSBhIGxpc3Qgb2ZcbiAgICAgKiBqc29ucGF0Y2ggb3BzIHRoYXQgZGVzY3JpYmUgaG93IHRoZSBzdGF0ZSBvZiB0aGUgcnVuIGhhcyBjaGFuZ2VkIGluIGVhY2hcbiAgICAgKiBzdGVwLCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBydW4uXG4gICAgICogVGhlIGpzb25wYXRjaCBvcHMgY2FuIGJlIGFwcGxpZWQgaW4gb3JkZXIgdG8gY29uc3RydWN0IHN0YXRlLlxuICAgICAqIEBwYXJhbSBpbnB1dFxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICogQHBhcmFtIHN0cmVhbU9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqc3RyZWFtTG9nKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciA9IG5ldyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIoe1xuICAgICAgICAgICAgLi4uc3RyZWFtT3B0aW9ucyxcbiAgICAgICAgICAgIGF1dG9DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICBfc2NoZW1hRm9ybWF0OiBcIm9yaWdpbmFsXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIHlpZWxkKiB0aGlzLl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgKl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHsgY2FsbGJhY2tzIH0gPSBjb25maWc7XG4gICAgICAgIGlmIChjYWxsYmFja3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBjb25maWcuY2FsbGJhY2tzID0gW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3MuY29uY2F0KFtsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXJdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvcGllZENhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICBjb3BpZWRDYWxsYmFja3MuaW5oZXJpdGFibGVIYW5kbGVycy5wdXNoKGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcik7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBjb3BpZWRDYWxsYmFja3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Qcm9taXNlID0gdGhpcy5zdHJlYW0oaW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW0gPSBhd2FpdCBydW5uYWJsZVN0cmVhbVByb21pc2U7XG4gICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBydW5uYWJsZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9zdHJlYW1lZF9vdXRwdXQvLVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLndyaXRlKHBhdGNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZSA9IGNvbnN1bWVSdW5uYWJsZVN0cmVhbSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgbG9nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgYXdhaXQgcnVubmFibGVTdHJlYW1Db25zdW1lUHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhIHN0cmVhbSBvZiBldmVudHMgZW1pdHRlZCBieSB0aGUgaW50ZXJuYWwgc3RlcHMgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqXG4gICAgICogVXNlIHRvIGNyZWF0ZSBhbiBpdGVyYXRvciBvdmVyIFN0cmVhbUV2ZW50cyB0aGF0IHByb3ZpZGUgcmVhbC10aW1lIGluZm9ybWF0aW9uXG4gICAgICogYWJvdXQgdGhlIHByb2dyZXNzIG9mIHRoZSBydW5uYWJsZSwgaW5jbHVkaW5nIFN0cmVhbUV2ZW50cyBmcm9tIGludGVybWVkaWF0ZVxuICAgICAqIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBBIFN0cmVhbUV2ZW50IGlzIGEgZGljdGlvbmFyeSB3aXRoIHRoZSBmb2xsb3dpbmcgc2NoZW1hOlxuICAgICAqXG4gICAgICogLSBgZXZlbnRgOiBzdHJpbmcgLSBFdmVudCBuYW1lcyBhcmUgb2YgdGhlIGZvcm1hdDogb25fW3J1bm5hYmxlX3R5cGVdXyhzdGFydHxzdHJlYW18ZW5kKS5cbiAgICAgKiAtIGBuYW1lYDogc3RyaW5nIC0gVGhlIG5hbWUgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBydW5faWRgOiBzdHJpbmcgLSBSYW5kb21seSBnZW5lcmF0ZWQgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBleGVjdXRpb24gb2ZcbiAgICAgKiAgIHRoZSBydW5uYWJsZSB0aGF0IGVtaXR0ZWQgdGhlIGV2ZW50LiBBIGNoaWxkIHJ1bm5hYmxlIHRoYXQgZ2V0cyBpbnZva2VkIGFzIHBhcnQgb2YgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gICAgICogICBwYXJlbnQgcnVubmFibGUgaXMgYXNzaWduZWQgaXRzIG93biB1bmlxdWUgSUQuXG4gICAgICogLSBgdGFnc2A6IHN0cmluZ1tdIC0gVGhlIHRhZ3Mgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBtZXRhZGF0YWA6IFJlY29yZDxzdHJpbmcsIGFueT4gLSBUaGUgbWV0YWRhdGEgb2YgdGhlIHJ1bm5hYmxlIHRoYXQgZ2VuZXJhdGVkIHRoZSBldmVudC5cbiAgICAgKiAtIGBkYXRhYDogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAqXG4gICAgICogQmVsb3cgaXMgYSB0YWJsZSB0aGF0IGlsbHVzdHJhdGVzIHNvbWUgZXZlbnRzIHRoYXQgbWlnaHQgYmUgZW1pdHRlZCBieSB2YXJpb3VzXG4gICAgICogY2hhaW5zLiBNZXRhZGF0YSBmaWVsZHMgaGF2ZSBiZWVuIG9taXR0ZWQgZnJvbSB0aGUgdGFibGUgZm9yIGJyZXZpdHkuXG4gICAgICogQ2hhaW4gZGVmaW5pdGlvbnMgaGF2ZSBiZWVuIGluY2x1ZGVkIGFmdGVyIHRoZSB0YWJsZS5cbiAgICAgKlxuICAgICAqIHwgZXZlbnQgICAgICAgICAgICAgICAgfCBuYW1lICAgICAgICAgICAgIHwgY2h1bmsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGlucHV0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IG91dHB1dCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gICAgICogfCBvbl9sbG1fc3RhcnQgICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeydpbnB1dCc6ICdoZWxsbyd9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fbGxtX3N0cmVhbSAgICAgICAgfCBbbW9kZWwgbmFtZV0gICAgIHwgJ0hlbGxvJyBPUiBBSU1lc3NhZ2VDaHVuayhcImhlbGxvXCIpIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fbGxtX2VuZCAgICAgICAgICAgfCBbbW9kZWwgbmFtZV0gICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICdIZWxsbyBodW1hbiEnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9zdGFydCAgICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fY2hhaW5fc3RyZWFtICAgICAgfCBmb3JtYXRfZG9jcyAgICAgIHwgXCJoZWxsbyB3b3JsZCEsIGdvb2RieWUgd29ybGQhXCIgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fY2hhaW5fZW5kICAgICAgICAgfCBmb3JtYXRfZG9jcyAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFtEb2N1bWVudCguLi4pXSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFwiaGVsbG8gd29ybGQhLCBnb29kYnllIHdvcmxkIVwiICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fdG9vbF9zdGFydCAgICAgICAgfCBzb21lX3Rvb2wgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInhcIjogMSwgXCJ5XCI6IFwiMlwifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Rvb2xfc3RyZWFtICAgICAgIHwgc29tZV90b29sICAgICAgICB8ICAge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl90b29sX2VuZCAgICAgICAgICB8IHNvbWVfdG9vbCAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcmV0cmlldmVyX3N0YXJ0ICAgfCBbcmV0cmlldmVyIG5hbWVdIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXJ5XCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfY2h1bmsgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAge2RvY3VtZW50czogWy4uLl19ICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcmV0cmlldmVyX2VuZCAgICAgfCBbcmV0cmlldmVyIG5hbWVdIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXJ5XCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7ZG9jdW1lbnRzOiBbLi4uXX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9wcm9tcHRfc3RhcnQgICAgICB8IFt0ZW1wbGF0ZV9uYW1lXSAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlc3Rpb25cIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Byb21wdF9lbmQgICAgICAgIHwgW3RlbXBsYXRlX25hbWVdICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJxdWVzdGlvblwiOiBcImhlbGxvXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgIHwgQ2hhdFByb21wdFZhbHVlKG1lc3NhZ2VzOiBbU3lzdGVtTWVzc2FnZSwgLi4uXSkgfFxuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMudmVyc2lvbiAhPT0gXCJ2MVwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9ubHkgdmVyc2lvbiBcInYxXCIgb2YgdGhlIGV2ZW50cyBzY2hlbWEgaXMgY3VycmVudGx5IHN1cHBvcnRlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcnVuTG9nO1xuICAgICAgICBsZXQgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgcm9vdFRhZ3MgPSBjb25maWcudGFncyA/PyBbXTtcbiAgICAgICAgY29uc3Qgcm9vdE1ldGFkYXRhID0gY29uZmlnLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICBjb25zdCByb290TmFtZSA9IGNvbmZpZy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIgPSBuZXcgTG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgX3NjaGVtYUZvcm1hdDogXCJzdHJlYW1pbmdfZXZlbnRzXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByb290RXZlbnRGaWx0ZXIgPSBuZXcgX1Jvb3RFdmVudEZpbHRlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtID0gdGhpcy5fc3RyZWFtTG9nKGlucHV0LCBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIsIGNvbmZpZyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbG9nIG9mIGxvZ1N0cmVhbSkge1xuICAgICAgICAgICAgaWYgKCFydW5Mb2cpIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBSdW5Mb2cuZnJvbVJ1bkxvZ1BhdGNoKGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBydW5Mb2cgPSBydW5Mb2cuY29uY2F0KGxvZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVuTG9nLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVybmFsIGVycm9yOiBcInN0cmVhbUV2ZW50c1wiIHN0YXRlIGlzIG1pc3NpbmcuIFBsZWFzZSBvcGVuIGEgYnVnIHJlcG9ydC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFlpZWxkIHRoZSBzdGFydCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUgaWYgaXQgaGFzbid0IGJlZW4gc2Vlbi5cbiAgICAgICAgICAgIC8vIFRoZSByb290IHJ1biBpcyBuZXZlciBmaWx0ZXJlZCBvdXRcbiAgICAgICAgICAgIGlmICghaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHsgLi4ucnVuTG9nLnN0YXRlIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9zdGFydGAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICB0YWdzOiByb290VGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocm9vdEV2ZW50RmlsdGVyLmluY2x1ZGVFdmVudChldmVudCwgc3RhdGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGF0aHMgPSBsb2cub3BzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigob3ApID0+IG9wLnBhdGguc3RhcnRzV2l0aChcIi9sb2dzL1wiKSlcbiAgICAgICAgICAgICAgICAubWFwKChvcCkgPT4gb3AucGF0aC5zcGxpdChcIi9cIilbMl0pO1xuICAgICAgICAgICAgY29uc3QgZGVkdXBlZFBhdGhzID0gWy4uLm5ldyBTZXQocGF0aHMpXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGF0aCBvZiBkZWR1cGVkUGF0aHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXZlbnRUeXBlO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgbG9nRW50cnkgPSBydW5Mb2cuc3RhdGUubG9nc1twYXRoXTtcbiAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuZW5kX3RpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RyZWFtXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudFR5cGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBpbnB1dHMgd2l0aCB0aGUgc3RhcnQgZXZlbnQgaWYgdGhleSBhcmUgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBVc3VhbGx5IHRoZXkgd2lsbCBOT1QgYmUgYXZhaWxhYmxlIGZvciBjb21wb25lbnRzIHRoYXQgb3BlcmF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBvbiBzdHJlYW1zLCBzaW5jZSB0aG9zZSBjb21wb25lbnRzIHN0cmVhbSB0aGUgaW5wdXQgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGtub3cgaXRzIGZpbmFsIHZhbHVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmVhbS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZ0VudHJ5LmlucHV0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmlucHV0ID0gbG9nRW50cnkuaW5wdXRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJlbmRcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5vdXRwdXQgPSBsb2dFbnRyeS5maW5hbF9vdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdHJlYW1cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke2xvZ0VudHJ5Lm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0geyBjaHVuazogbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gQW5kIHRoaXMgYXZvaWRzIGR1cGxpY2F0ZXMgYXMgd2VsbCFcbiAgICAgICAgICAgICAgICAgICAgbG9nRW50cnkuc3RyZWFtZWRfb3V0cHV0ID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke2xvZ0VudHJ5LnR5cGV9XyR7ZXZlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGxvZ0VudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogbG9nRW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IGxvZ0VudHJ5LnRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBsb2dFbnRyeS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgd2UgdGFrZSBjYXJlIG9mIHRoZSBzdHJlYW1pbmcgb3V0cHV0IGZyb20gdGhlIHJvb3QgY2hhaW5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFueS5cbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGUgfSA9IHJ1bkxvZztcbiAgICAgICAgICAgIGlmIChzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjaHVua0NvdW50ICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgZXhhY3RseSBvbmUgY2h1bmsgb2Ygc3RyZWFtZWQgb3V0cHV0LCBnb3QgJHtjaHVua0NvdW50fSBpbnN0ZWFkLiBFbmNvdW50ZXJlZCBpbjogXCIke3N0YXRlLm5hbWV9XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgY2h1bms6IHN0YXRlLnN0cmVhbWVkX291dHB1dFswXSB9O1xuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBzdHJlYW0sIHdlIGRvbid0IG5lZWQgaXQgYW55bW9yZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0cmVhbWAsXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBydW5Mb2c/LnN0YXRlO1xuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gRmluYWxseSwgeWllbGQgdGhlIGVuZCBldmVudCBmb3IgdGhlIHJvb3QgcnVubmFibGUuXG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fZW5kYCxcbiAgICAgICAgICAgICAgICBuYW1lOiByb290TmFtZSxcbiAgICAgICAgICAgICAgICBydW5faWQ6IHN0YXRlLmlkLFxuICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHN0YXRlLmZpbmFsX291dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSlcbiAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlKHRoaW5nKSB7XG4gICAgICAgIHJldHVybiBpc1J1bm5hYmxlSW50ZXJmYWNlKHRoaW5nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBsaWZlY3ljbGUgbGlzdGVuZXJzIHRvIGEgUnVubmFibGUsIHJldHVybmluZyBhIG5ldyBSdW5uYWJsZS5cbiAgICAgKiBUaGUgUnVuIG9iamVjdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcnVuLCBpbmNsdWRpbmcgaXRzIGlkLFxuICAgICAqIHR5cGUsIGlucHV0LCBvdXRwdXQsIGVycm9yLCBzdGFydFRpbWUsIGVuZFRpbWUsIGFuZCBhbnkgdGFncyBvciBtZXRhZGF0YVxuICAgICAqIGFkZGVkIHRvIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gVGhlIG9iamVjdCBjb250YWluaW5nIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vblN0YXJ0IC0gQ2FsbGVkIGJlZm9yZSB0aGUgcnVubmFibGUgc3RhcnRzIHJ1bm5pbmcsIHdpdGggdGhlIFJ1biBvYmplY3QuXG4gICAgICogQHBhcmFtIHsocnVuOiBSdW4pID0+IHZvaWR9IHBhcmFtcy5vbkVuZCAtIENhbGxlZCBhZnRlciB0aGUgcnVubmFibGUgZmluaXNoZXMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRXJyb3IgLSBDYWxsZWQgaWYgdGhlIHJ1bm5hYmxlIHRocm93cyBhbiBlcnJvciwgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKi9cbiAgICB3aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGNvbmZpZzoge30sXG4gICAgICAgICAgICBjb25maWdGYWN0b3JpZXM6IFtcbiAgICAgICAgICAgICAgICAoY29uZmlnKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSb290TGlzdGVuZXJzVHJhY2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBkZWxlZ2F0ZXMgY2FsbHMgdG8gYW5vdGhlciBydW5uYWJsZSB3aXRoIGEgc2V0IG9mIGt3YXJncy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQmluZGluZyBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVCaW5kaW5nXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJvdW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnRmFjdG9yaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYm91bmQgPSBmaWVsZHMuYm91bmQ7XG4gICAgICAgIHRoaXMua3dhcmdzID0gZmllbGRzLmt3YXJncztcbiAgICAgICAgdGhpcy5jb25maWcgPSBmaWVsZHMuY29uZmlnO1xuICAgICAgICB0aGlzLmNvbmZpZ0ZhY3RvcmllcyA9IGZpZWxkcy5jb25maWdGYWN0b3JpZXM7XG4gICAgfVxuICAgIGdldE5hbWUoc3VmZml4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmdldE5hbWUoc3VmZml4KTtcbiAgICB9XG4gICAgYXN5bmMgX21lcmdlQ29uZmlnKC4uLm9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gbWVyZ2VDb25maWdzKHRoaXMuY29uZmlnLCAuLi5vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG1lcmdlQ29uZmlncyhjb25maWcsIC4uLih0aGlzLmNvbmZpZ0ZhY3Rvcmllc1xuICAgICAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmNvbmZpZ0ZhY3Rvcmllcy5tYXAoYXN5bmMgKGNvbmZpZ0ZhY3RvcnkpID0+IGF3YWl0IGNvbmZpZ0ZhY3RvcnkoY29uZmlnKSkpXG4gICAgICAgICAgICA6IFtdKSk7XG4gICAgfVxuICAgIGJpbmQoa3dhcmdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogeyAuLi50aGlzLmt3YXJncywgLi4ua3dhcmdzIH0sXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgd2l0aENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogeyAuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3aXRoUmV0cnkoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC53aXRoUmV0cnkoZmllbGRzKSxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvdW5kLmludm9rZShpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXJnZWRPcHRpb25zID0gQXJyYXkuaXNBcnJheShvcHRpb25zKVxuICAgICAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbChvcHRpb25zLm1hcChhc3luYyAoaW5kaXZpZHVhbE9wdGlvbikgPT4gdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKGluZGl2aWR1YWxPcHRpb24pLCB0aGlzLmt3YXJncykpKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuYmF0Y2goaW5wdXRzLCBtZXJnZWRPcHRpb25zLCBiYXRjaE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLl9zdHJlYW1JdGVyYXRvcihpbnB1dCwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuc3RyZWFtKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhlbnN1cmVDb25maWcob3B0aW9ucyksIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jICp0cmFuc2Zvcm0oXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQudHJhbnNmb3JtKGdlbmVyYXRvciwgYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcoZW5zdXJlQ29uZmlnKG9wdGlvbnMpLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyAqc3RyZWFtRXZlbnRzKGlucHV0LCBvcHRpb25zLCBzdHJlYW1PcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLnN0cmVhbUV2ZW50cyhpbnB1dCwge1xuICAgICAgICAgICAgLi4uKGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKGVuc3VyZUNvbmZpZyhvcHRpb25zKSwgdGhpcy5rd2FyZ3MpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG9wdGlvbnMudmVyc2lvbixcbiAgICAgICAgfSwgc3RyZWFtT3B0aW9ucyk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlQmluZGluZyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRoaW5nXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaW5nLmJvdW5kICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcuYm91bmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGVcbiAqIHdpdGggZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlRWFjaCBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVFYWNoXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJvdW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYm91bmQgPSBmaWVsZHMuYm91bmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmRzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSBrd2FyZ3MgVGhlIGFyZ3VtZW50cyB0byBiaW5kIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIHRoZSBgUnVubmFibGVFYWNoYCBjbGFzcyB0aGF0IGlzIGJvdW5kIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICovXG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQuYmluZChrd2FyZ3MpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dHMsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dHMsIGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgX2ludm9rZShpbnB1dHMsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC53aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVubmFibGVzIHRoYXQgY2FuIGJlIHJldHJpZWQgYVxuICogc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUmV0cnkgZXh0ZW5kcyBSdW5uYWJsZUJpbmRpbmcge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVJldHJ5XCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhBdHRlbXB0TnVtYmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAzXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkZhaWxlZEF0dGVtcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICgpID0+IHsgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXhBdHRlbXB0TnVtYmVyID0gZmllbGRzLm1heEF0dGVtcHROdW1iZXIgPz8gdGhpcy5tYXhBdHRlbXB0TnVtYmVyO1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9IGZpZWxkcy5vbkZhaWxlZEF0dGVtcHQgPz8gdGhpcy5vbkZhaWxlZEF0dGVtcHQ7XG4gICAgfVxuICAgIF9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0YWcgPSBhdHRlbXB0ID4gMSA/IGByZXRyeTphdHRlbXB0OiR7YXR0ZW1wdH1gIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGFnKSB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBwUmV0cnkoKGF0dGVtcHROdW1iZXIpID0+IHN1cGVyLmludm9rZShpbnB1dCwgdGhpcy5fcGF0Y2hDb25maWdGb3JSZXRyeShhdHRlbXB0TnVtYmVyLCBjb25maWcsIHJ1bk1hbmFnZXIpKSwge1xuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiB0aGlzLm9uRmFpbGVkQXR0ZW1wdCxcbiAgICAgICAgICAgIHJldHJpZXM6IE1hdGgubWF4KHRoaXMubWF4QXR0ZW1wdE51bWJlciAtIDEsIDApLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgaW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0LCBydW4gbWFuYWdlcixcbiAgICAgKiBhbmQgY29uZmlnLiBJdCBoYW5kbGVzIHRoZSByZXRyeSBsb2dpYyBieSBjYXRjaGluZyBhbnkgZXJyb3JzIGFuZFxuICAgICAqIHJlY3Vyc2l2ZWx5IGludm9raW5nIGl0c2VsZiB3aXRoIHRoZSB1cGRhdGVkIGNvbmZpZyBmb3IgdGhlIG5leHQgcmV0cnlcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gcnVuTWFuYWdlciBUaGUgcnVuIG1hbmFnZXIgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgX2JhdGNoKGlucHV0cywgY29uZmlncywgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHRzTWFwID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwUmV0cnkoYXN5bmMgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbmRleGVzID0gaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKF8sIGkpID0+IGkpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGkpID0+IHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcFtpLnRvU3RyaW5nKCldIGluc3RhbmNlb2YgRXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0lucHV0cyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiBpbnB1dHNbaV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoZWRDb25maWdzID0gcmVtYWluaW5nSW5kZXhlcy5tYXAoKGkpID0+IHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlncz8uW2ldLCBydW5NYW5hZ2Vycz8uW2ldKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLmJhdGNoKHJlbWFpbmluZ0lucHV0cywgcGF0Y2hlZENvbmZpZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYmF0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5FeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0TWFwSW5kZXggPSByZW1haW5pbmdJbmRleGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RXhjZXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbiA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogdGhpcy5vbkZhaWxlZEF0dGVtcHQsXG4gICAgICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKSlcbiAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gcmVzdWx0c01hcFtwYXJzZUludChrZXksIDEwKV0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEEgc2VxdWVuY2Ugb2YgcnVubmFibGVzLCB3aGVyZSB0aGUgb3V0cHV0IG9mIGVhY2ggaXMgdGhlIGlucHV0IG9mIHRoZSBuZXh0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbcHJvbXB0VGVtcGxhdGUsIG5ldyBDaGF0T3BlbkFJKHt9KV0pO1xuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVTZXF1ZW5jZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVTZXF1ZW5jZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWlkZGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG4gICAgICAgIHRoaXMubWlkZGxlID0gZmllbGRzLm1pZGRsZSA/PyB0aGlzLm1pZGRsZTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZmllbGRzLmxhc3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgIH1cbiAgICBnZXQgc3RlcHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgY29uZmlnLnJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUpO1xuICAgICAgICBkZWxldGUgY29uZmlnLnJ1bklkO1xuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsU3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGVdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsU3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gaW5pdGlhbFN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXQgPSBhd2FpdCBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGNhbid0IGRldGVjdCB0aGF0IHRoZSBsYXN0IG91dHB1dCBvZiB0aGUgc2VxdWVuY2UgcmV0dXJucyBSdW5PdXRwdXQsIHNvIGNhbGwgaXQgb3V0IG9mIHRoZSBsb29wIGhlcmVcbiAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gYXdhaXQgdGhpcy5sYXN0Lmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke3RoaXMuc3RlcHMubGVuZ3RofWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBmaW5hbE91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY29uZmlnTGlzdC5tYXAoZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dHMgPSBpbnB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gdGhpcy5zdGVwc1tpXTtcbiAgICAgICAgICAgICAgICBuZXh0U3RlcElucHV0cyA9IGF3YWl0IHN0ZXAuYmF0Y2gobmV4dFN0ZXBJbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFJ1bk1hbmFnZXIgPSBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhdGNoQ29uZmlnKGNvbmZpZ0xpc3Rbal0sIHsgY2FsbGJhY2tzOiBjaGlsZFJ1bk1hbmFnZXIgfSk7XG4gICAgICAgICAgICAgICAgfSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKSkpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3QobmV4dFN0ZXBJbnB1dHMsIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICByZXR1cm4gbmV4dFN0ZXBJbnB1dHM7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgeyBydW5JZCwgLi4ub3RoZXJPcHRpb25zIH0gPSBvcHRpb25zID8/IHt9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCBydW5JZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3RoZXJPcHRpb25zPy5ydW5OYW1lKTtcbiAgICAgICAgY29uc3Qgc3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgICAgIGxldCBjb25jYXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBpbnB1dEdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZmluYWxHZW5lcmF0b3IgPSBzdGVwc1swXS50cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IoKSwgcGF0Y2hDb25maWcob3RoZXJPcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6MWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzdGVwcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBzdGVwc1tpXTtcbiAgICAgICAgICAgICAgICBmaW5hbEdlbmVyYXRvciA9IGF3YWl0IHN0ZXAudHJhbnNmb3JtKGZpbmFsR2VuZXJhdG9yLCBwYXRjaENvbmZpZyhvdGhlck9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGZpbmFsR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuICogYW5kIHJldHVybnMgYSBtYXBwaW5nIG9mIHRoZWlyIG91dHB1dHMuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWFwQ2hhaW4gPSBSdW5uYWJsZU1hcC5mcm9tKHtcbiAqICAgam9rZTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiKS5waXBlKFxuICogICAgIG5ldyBDaGF0QW50aHJvcGljKHt9KSxcbiAqICAgKSxcbiAqICAgcG9lbTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwid3JpdGUgYSAyLWxpbmUgcG9lbSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogfSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXBDaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyXCIgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTWFwIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZU1hcFwiO1xuICAgIH1cbiAgICBnZXRTdGVwc0tleXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0ZXBzKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RlcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGVwcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMuc3RlcHMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oc3RlcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHtcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICB9LCBjb25maWcucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIGRlbGV0ZSBjb25maWcucnVuSWQ7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXModGhpcy5zdGVwcykubWFwKGFzeW5jIChba2V5LCBydW5uYWJsZV0pID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gc2hhbGxvdyBjb3B5IHN0ZXBzIHRvIGlnbm9yZSBjaGFuZ2VzIHdoaWxlIGl0ZXJhdGluZ1xuICAgICAgICBjb25zdCBzdGVwcyA9IHsgLi4udGhpcy5zdGVwcyB9O1xuICAgICAgICAvLyBlYWNoIHN0ZXAgZ2V0cyBhIGNvcHkgb2YgdGhlIGlucHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IGlucHV0Q29waWVzID0gYXRlZShnZW5lcmF0b3IsIE9iamVjdC5rZXlzKHN0ZXBzKS5sZW5ndGgpO1xuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIGVhY2ggb3V0cHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IHRhc2tzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhzdGVwcykubWFwKChba2V5LCBydW5uYWJsZV0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbiA9IHJ1bm5hYmxlLnRyYW5zZm9ybShpbnB1dENvcGllc1tpXSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyB5aWVsZCBjaHVua3MgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLFxuICAgICAgICAvLyBzdGFydGluZyBuZXcgaXRlcmF0aW9ucyBhcyBuZWVkZWQsXG4gICAgICAgIC8vIHVudGlsIGFsbCBpdGVyYXRvcnMgYXJlIGRvbmVcbiAgICAgICAgd2hpbGUgKHRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCByZXN1bHQsIGdlbiB9ID0gYXdhaXQgUHJvbWlzZS5yYWNlKHRhc2tzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHsgW2tleV06IHJlc3VsdC52YWx1ZSB9O1xuICAgICAgICAgICAgICAgIHRhc2tzLnNldChrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoeyBrZXksIGdlbiwgcmVzdWx0IH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgY2FsbGFibGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUxhbWJkYSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVMYW1iZGFcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkucnVuKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG91dHB1dCA9IGF3YWl0IHRoaXMuZnVuYyhpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgb3V0cHV0Lmludm9rZShpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY2hpbGRDb25maWcucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRJbnN0YW5jZSgpLnJ1bihjb25maWcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmZ1bmMoZmluYWxDaHVuaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBvdXRwdXQuc3RyZWFtKGZpbmFsQ2h1bmssIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVQYXJhbGxlbCBleHRlbmRzIFJ1bm5hYmxlTWFwIHtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSB0aGF0IGNhbiBmYWxsYmFjayB0byBvdGhlciBSdW5uYWJsZXMgaWYgaXQgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhGYWxsYmFja3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlV2l0aEZhbGxiYWNrc1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSBmaWVsZHMuZmFsbGJhY2tzO1xuICAgIH1cbiAgICAqcnVubmFibGVzKCkge1xuICAgICAgICB5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuICAgICAgICBmb3IgKGNvbnN0IGZhbGxiYWNrIG9mIHRoaXMuZmFsbGJhY2tzKSB7XG4gICAgICAgICAgICB5aWVsZCBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUob3B0aW9ucz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIG9wdGlvbnM/LnRhZ3MsIHVuZGVmaW5lZCwgb3B0aW9ucz8ubWV0YWRhdGEpO1xuICAgICAgICBjb25zdCB7IHJ1bklkLCAuLi5vdGhlck9wdGlvbnMgfSA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHJ1bklkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvdGhlck9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcob3RoZXJPcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpO1xuICAgICAgICB0aHJvdyBmaXJzdEVycm9yO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbmZpZ0xpc3QgPSB0aGlzLl9nZXRPcHRpb25zTGlzdChvcHRpb25zID8/IHt9LCBpbnB1dHMubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbmZpZ0xpc3QubWFwKChjb25maWcpID0+IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoY29uZmlnPy5jYWxsYmFja3MsIHVuZGVmaW5lZCwgY29uZmlnPy50YWdzLCB1bmRlZmluZWQsIGNvbmZpZz8ubWV0YWRhdGEpKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoYXN5bmMgKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhcnRSZXMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXI/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dHNbaV0sIFwiaW5wdXRcIiksIGNvbmZpZ0xpc3RbaV0ucnVuSWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSk7XG4gICAgICAgICAgICBkZWxldGUgY29uZmlnTGlzdFtpXS5ydW5JZDtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVTdGFydFJlcztcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSBhd2FpdCBydW5uYWJsZS5iYXRjaChpbnB1dHMsIHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaikgPT4gcGF0Y2hDb25maWcoY29uZmlnTGlzdFtqXSwge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCksXG4gICAgICAgICAgICAgICAgfSkpLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJ1bk1hbmFnZXJzLm1hcCgocnVuTWFuYWdlciwgaSkgPT4gcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXRzW2ldLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaXJzdEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBlcnJvciBzdG9yZWQgYXQgZW5kIG9mIGZhbGxiYWNrcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGZpcnN0RXJyb3IpKSk7XG4gICAgICAgIHRocm93IGZpcnN0RXJyb3I7XG4gICAgfVxufVxuLy8gVE9ETzogRmlndXJlIG91dCB3aHkgdGhlIGNvbXBpbGVyIG5lZWRzIGhlbHAgZWxpbWluYXRpbmcgRXJyb3IgYXMgYSBSdW5PdXRwdXQgdHlwZVxuZXhwb3J0IGZ1bmN0aW9uIF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpIHtcbiAgICBpZiAodHlwZW9mIGNvZXJjZWFibGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTGFtYmRhKHsgZnVuYzogY29lcmNlYWJsZSB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoUnVubmFibGUuaXNSdW5uYWJsZShjb2VyY2VhYmxlKSkge1xuICAgICAgICByZXR1cm4gY29lcmNlYWJsZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkoY29lcmNlYWJsZSkgJiYgdHlwZW9mIGNvZXJjZWFibGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgcnVubmFibGVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICBydW5uYWJsZXNba2V5XSA9IF9jb2VyY2VUb1J1bm5hYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlTWFwKHtcbiAgICAgICAgICAgIHN0ZXBzOiBydW5uYWJsZXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhIFJ1bm5hYmxlLCBmdW5jdGlvbiBvciBvYmplY3QuXFxuSW5zdGVhZCBnb3QgYW4gdW5zdXBwb3J0ZWQgdHlwZS5gKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVBc3NpZ24gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlQXNzaWduXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmIChmaWVsZHMgaW5zdGFuY2VvZiBSdW5uYWJsZU1hcCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IG1hcHBlcjogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXBwZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXBwZXIgPSBmaWVsZHMubWFwcGVyO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyUmVzdWx0ID0gYXdhaXQgdGhpcy5tYXBwZXIuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgLi4ubWFwcGVyUmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gY29sbGVjdCBtYXBwZXIga2V5c1xuICAgICAgICBjb25zdCBtYXBwZXJLZXlzID0gdGhpcy5tYXBwZXIuZ2V0U3RlcHNLZXlzKCk7XG4gICAgICAgIC8vIGNyZWF0ZSB0d28gaW5wdXQgZ2Vucywgb25lIGZvciB0aGUgbWFwcGVyLCBvbmUgZm9yIHRoZSBpbnB1dFxuICAgICAgICBjb25zdCBbZm9yUGFzc3Rocm91Z2gsIGZvck1hcHBlcl0gPSBhdGVlKGdlbmVyYXRvcik7XG4gICAgICAgIC8vIGNyZWF0ZSBtYXBwZXIgb3V0cHV0IGdlblxuICAgICAgICBjb25zdCBtYXBwZXJPdXRwdXQgPSB0aGlzLm1hcHBlci50cmFuc2Zvcm0oZm9yTWFwcGVyLCBwYXRjaENvbmZpZyhvcHRpb25zLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSB9KSk7XG4gICAgICAgIC8vIHN0YXJ0IHRoZSBtYXBwZXJcbiAgICAgICAgY29uc3QgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UgPSBtYXBwZXJPdXRwdXQubmV4dCgpO1xuICAgICAgICAvLyB5aWVsZCB0aGUgcGFzc3Rocm91Z2hcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBmb3JQYXNzdGhyb3VnaCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGNodW5rKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGVBc3NpZ24gY2FuIG9ubHkgYmUgdXNlZCB3aXRoIG9iamVjdHMgYXMgaW5wdXQsIGdvdCAke3R5cGVvZiBjaHVua31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKGNodW5rKS5maWx0ZXIoKFtrZXldKSA9PiAhbWFwcGVyS2V5cy5pbmNsdWRlcyhrZXkpKSk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZmlsdGVyZWQpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB5aWVsZCB0aGUgbWFwcGVyIG91dHB1dFxuICAgICAgICB5aWVsZCAoYXdhaXQgZmlyc3RNYXBwZXJDaHVua1Byb21pc2UpLnZhbHVlO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIG1hcHBlck91dHB1dCkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBhc3NpZ25zIGtleS12YWx1ZSBwYWlycyB0byBpbnB1dHMgb2YgdHlwZSBgUmVjb3JkPHN0cmluZywgdW5rbm93bj5gLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVQaWNrIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVBpY2tcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGtleXM6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtleXMgPSBmaWVsZHMua2V5cztcbiAgICB9XG4gICAgYXN5bmMgX3BpY2soaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmtleXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dFt0aGlzLmtleXNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGlja2VkID0gdGhpcy5rZXlzXG4gICAgICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiBba2V5LCBpbnB1dFtrZXldXSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKCh2KSA9PiB2WzFdICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgcmV0dXJuIHBpY2tlZC5sZW5ndGggPT09IDAgPyB1bmRlZmluZWQgOiBPYmplY3QuZnJvbUVudHJpZXMocGlja2VkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX3BpY2suYmluZCh0aGlzKSwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlZCA9IGF3YWl0IHRoaXMuX3BpY2soY2h1bmspO1xuICAgICAgICAgICAgaWYgKHBpY2tlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgcGlja2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW5zZm9ybShnZW5lcmF0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWcoZ2VuZXJhdG9yLCB0aGlzLl90cmFuc2Zvcm0uYmluZCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogZ2VuZXJhdG9yKCkge1xuICAgICAgICAgICAgeWllbGQgaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEdlbmVyYXRvciA9IG5ldyBBc3luY0dlbmVyYXRvcldpdGhTZXR1cCh0aGlzLnRyYW5zZm9ybShnZW5lcmF0b3IoKSwgb3B0aW9ucykpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInoiLCJwUmV0cnkiLCJDYWxsYmFja01hbmFnZXIiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJSdW5Mb2ciLCJSdW5Mb2dQYXRjaCIsIlNlcmlhbGl6YWJsZSIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJjb25jYXQiLCJhdGVlIiwicGlwZUdlbmVyYXRvcldpdGhTZXR1cCIsIkFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIiwiREVGQVVMVF9SRUNVUlNJT05fTElNSVQiLCJlbnN1cmVDb25maWciLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJtZXJnZUNvbmZpZ3MiLCJwYXRjaENvbmZpZyIsIkFzeW5jQ2FsbGVyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsIl9Sb290RXZlbnRGaWx0ZXIiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsIkdyYXBoIiwiX2NvZXJjZVRvRGljdCIsInZhbHVlIiwiZGVmYXVsdEtleSIsIkFycmF5IiwiaXNBcnJheSIsIkRhdGUiLCJSdW5uYWJsZSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJnZXROYW1lIiwic3VmZml4IiwibmFtZSIsImxjX25hbWUiLCJiaW5kIiwia3dhcmdzIiwiUnVubmFibGVCaW5kaW5nIiwiYm91bmQiLCJjb25maWciLCJtYXAiLCJSdW5uYWJsZUVhY2giLCJ3aXRoUmV0cnkiLCJmaWVsZHMiLCJSdW5uYWJsZVJldHJ5IiwibWF4QXR0ZW1wdE51bWJlciIsInN0b3BBZnRlckF0dGVtcHQiLCJ3aXRoQ29uZmlnIiwid2l0aEZhbGxiYWNrcyIsIlJ1bm5hYmxlV2l0aEZhbGxiYWNrcyIsInJ1bm5hYmxlIiwiZmFsbGJhY2tzIiwiX2dldE9wdGlvbnNMaXN0Iiwib3B0aW9ucyIsImxlbmd0aCIsIkVycm9yIiwicnVuSWQiLCJjb25zb2xlIiwid2FybiIsInN1YnNlcXVlbnQiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJrZXkiLCJmcm9tIiwiXyIsImkiLCJiYXRjaCIsImlucHV0cyIsImJhdGNoT3B0aW9ucyIsImNvbmZpZ0xpc3QiLCJtYXhDb25jdXJyZW5jeSIsImNhbGxlciIsIm9uRmFpbGVkQXR0ZW1wdCIsImUiLCJiYXRjaENhbGxzIiwiaW5wdXQiLCJjYWxsIiwicmVzdWx0IiwiaW52b2tlIiwicmV0dXJuRXhjZXB0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJfc3RyZWFtSXRlcmF0b3IiLCJzdHJlYW0iLCJ3cmFwcGVkR2VuZXJhdG9yIiwic2V0dXAiLCJmcm9tQXN5bmNHZW5lcmF0b3IiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsInJ1bm5hYmxlQ29uZmlnIiwidW5kZWZpbmVkIiwiY2FsbGJhY2tzIiwidGFncyIsIm1ldGFkYXRhIiwicnVuTmFtZSIsInJlY3Vyc2lvbkxpbWl0IiwiY2FsbE9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJmdW5jIiwiY2FsbGJhY2tNYW5hZ2VyXyIsInJ1bk1hbmFnZXIiLCJoYW5kbGVDaGFpblN0YXJ0IiwidG9KU09OIiwicnVuVHlwZSIsIm91dHB1dCIsImhhbmRsZUNoYWluRXJyb3IiLCJoYW5kbGVDaGFpbkVuZCIsIl9iYXRjaFdpdGhDb25maWciLCJvcHRpb25zTGlzdCIsImNhbGxiYWNrTWFuYWdlcnMiLCJydW5NYW5hZ2VycyIsImNhbGxiYWNrTWFuYWdlciIsImhhbmRsZVN0YXJ0UmVzIiwib3V0cHV0cyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJpc0xvZ1N0cmVhbUhhbmRsZXIiLCJoYW5kbGVyIiwic3RyZWFtTG9nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsIml0ZXJhdG9yIiwidGFwT3V0cHV0SXRlcmFibGUiLCJnZXRHcmFwaCIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJmaXJzdCIsImxhc3QiLCJfY29lcmNlVG9SdW5uYWJsZSIsInBpY2siLCJrZXlzIiwiUnVubmFibGVQaWNrIiwiYXNzaWduIiwibWFwcGluZyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVNYXAiLCJzdGVwcyIsInRyYW5zZm9ybSIsImdlbmVyYXRvciIsImZpbmFsQ2h1bmsiLCJzdHJlYW1Mb2ciLCJzdHJlYW1PcHRpb25zIiwibG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiX3NjaGVtYUZvcm1hdCIsIl9zdHJlYW1Mb2ciLCJjb3BpZWRDYWxsYmFja3MiLCJjb3B5IiwiaW5oZXJpdGFibGVIYW5kbGVycyIsInB1c2giLCJydW5uYWJsZVN0cmVhbVByb21pc2UiLCJjb25zdW1lUnVubmFibGVTdHJlYW0iLCJydW5uYWJsZVN0cmVhbSIsInBhdGNoIiwib3BzIiwib3AiLCJwYXRoIiwid3JpdGVyIiwid3JpdGUiLCJjbG9zZSIsInJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UiLCJsb2ciLCJzdHJlYW1FdmVudHMiLCJ2ZXJzaW9uIiwicnVuTG9nIiwiaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50Iiwicm9vdFRhZ3MiLCJyb290TWV0YWRhdGEiLCJyb290TmFtZSIsInJvb3RFdmVudEZpbHRlciIsImxvZ1N0cmVhbSIsImZyb21SdW5Mb2dQYXRjaCIsInN0YXRlIiwiZXZlbnQiLCJydW5faWQiLCJpZCIsInR5cGUiLCJkYXRhIiwiaW5jbHVkZUV2ZW50IiwicGF0aHMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWR1cGVkUGF0aHMiLCJTZXQiLCJldmVudFR5cGUiLCJsb2dFbnRyeSIsImxvZ3MiLCJlbmRfdGltZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImNodW5rQ291bnQiLCJpc1J1bm5hYmxlIiwidGhpbmciLCJ3aXRoTGlzdGVuZXJzIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsImNvbmZpZ0ZhY3RvcmllcyIsIl9tZXJnZUNvbmZpZyIsImNvbmZpZ0ZhY3RvcnkiLCJtZXJnZWRPcHRpb25zIiwiaW5kaXZpZHVhbE9wdGlvbiIsImlzUnVubmFibGVCaW5kaW5nIiwiX2ludm9rZSIsImdldENoaWxkIiwiX3BhdGNoQ29uZmlnRm9yUmV0cnkiLCJhdHRlbXB0IiwidGFnIiwiYXR0ZW1wdE51bWJlciIsInJldHJpZXMiLCJNYXRoIiwibWF4IiwicmFuZG9taXplIiwiX2JhdGNoIiwiY29uZmlncyIsInJlc3VsdHNNYXAiLCJyZW1haW5pbmdJbmRleGVzIiwidG9TdHJpbmciLCJyZW1haW5pbmdJbnB1dHMiLCJwYXRjaGVkQ29uZmlncyIsInJlc3VsdHMiLCJmaXJzdEV4Y2VwdGlvbiIsInJlc3VsdE1hcEluZGV4Iiwic29ydCIsImEiLCJiIiwicGFyc2VJbnQiLCJtaWRkbGUiLCJuZXh0U3RlcElucHV0IiwiaW5pdGlhbFN0ZXBzIiwic3RlcCIsIm5leHRTdGVwSW5wdXRzIiwiaiIsImNoaWxkUnVuTWFuYWdlciIsIm90aGVyT3B0aW9ucyIsImNvbmNhdFN1cHBvcnRlZCIsImZpbmFsR2VuZXJhdG9yIiwiY3VycmVudExhc3ROb2RlIiwiZm9yRWFjaCIsImluZGV4Iiwic3RlcEdyYXBoIiwidHJpbUZpcnN0Tm9kZSIsInRyaW1MYXN0Tm9kZSIsImV4dGVuZCIsInN0ZXBGaXJzdE5vZGUiLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsImlzUnVubmFibGVTZXF1ZW5jZSIsInJ1bm5hYmxlcyIsInNsaWNlIiwiZ2V0U3RlcHNLZXlzIiwiX3RyYW5zZm9ybSIsImlucHV0Q29waWVzIiwidGFza3MiLCJNYXAiLCJnZW4iLCJuZXh0IiwidGhlbiIsInNpemUiLCJyYWNlIiwidmFsdWVzIiwiZGVsZXRlIiwiZG9uZSIsInNldCIsIlJ1bm5hYmxlTGFtYmRhIiwicmVzb2x2ZSIsInJlamVjdCIsImNoaWxkQ29uZmlnIiwiZ2V0SW5zdGFuY2UiLCJydW4iLCJyZXMiLCJSdW5uYWJsZVBhcmFsbGVsIiwiZmFsbGJhY2siLCJjb25maWd1cmUiLCJmaXJzdEVycm9yIiwibWFwcGVyIiwibWFwcGVyUmVzdWx0IiwibWFwcGVyS2V5cyIsImZvclBhc3N0aHJvdWdoIiwiZm9yTWFwcGVyIiwibWFwcGVyT3V0cHV0IiwiZmlyc3RNYXBwZXJDaHVua1Byb21pc2UiLCJmaWx0ZXJlZCIsImluY2x1ZGVzIiwiX3BpY2siLCJwaWNrZWQiLCJ2Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/config.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/runnables/config.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // We do not want to call ensureConfig on the empty state here as this may cause\n    // double loading of callbacks if async local storage is being used.\n    const copy = {};\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                const baseKeys = copy[key] ?? [];\n                copy[key] = [\n                    ...new Set(baseKeys.concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n *\n * Note: To make sure async local storage loading works correctly, this\n * should not be called with a default or prepopulated config argument.\n */ function ensureConfig(config) {\n    const loadedConfig = config ?? _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    let empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: 25,\n        runId: undefined\n    };\n    if (loadedConfig) {\n        empty = {\n            ...empty,\n            ...loadedConfig\n        };\n    }\n    if (loadedConfig?.configurable) {\n        for (const key of Object.keys(loadedConfig.configurable)){\n            if (PRIMITIVES.has(typeof loadedConfig.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = loadedConfig.configurable[key];\n            }\n        }\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable, runId } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    if (runId !== undefined) {\n        delete newConfig.runId;\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEU7QUFDRTtBQUNyRSxNQUFNRywwQkFBMEIsR0FBRztBQUNuQyxlQUFlQyw0QkFBNEJDLE1BQU07SUFDcEQsT0FBT0wsa0VBQWVBLENBQUNNLFNBQVMsQ0FBQ0QsUUFBUUUsV0FBV0MsV0FBV0gsUUFBUUksTUFBTUQsV0FBV0gsUUFBUUs7QUFDcEc7QUFDTyxTQUFTQyxhQUFhLEdBQUdDLE9BQU87SUFDbkMsZ0ZBQWdGO0lBQ2hGLG9FQUFvRTtJQUNwRSxNQUFNQyxPQUFPLENBQUM7SUFDZCxLQUFLLE1BQU1DLFdBQVdGLFFBQVFHLE1BQU0sQ0FBQyxDQUFDQyxJQUFNLENBQUMsQ0FBQ0EsR0FBSTtRQUM5QyxLQUFLLE1BQU1DLE9BQU9DLE9BQU9DLElBQUksQ0FBQ0wsU0FBVTtZQUNwQyxJQUFJRyxRQUFRLFlBQVk7Z0JBQ3BCSixJQUFJLENBQUNJLElBQUksR0FBRztvQkFBRSxHQUFHSixJQUFJLENBQUNJLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxRQUFRO2dCQUNyQixNQUFNRyxXQUFXUCxJQUFJLENBQUNJLElBQUksSUFBSSxFQUFFO2dCQUNoQ0osSUFBSSxDQUFDSSxJQUFJLEdBQUc7dUJBQUksSUFBSUksSUFBSUQsU0FBU0UsTUFBTSxDQUFDUixPQUFPLENBQUNHLElBQUksSUFBSSxFQUFFO2lCQUFHO1lBQ2pFLE9BQ0ssSUFBSUEsUUFBUSxnQkFBZ0I7Z0JBQzdCSixJQUFJLENBQUNJLElBQUksR0FBRztvQkFBRSxHQUFHSixJQUFJLENBQUNJLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxhQUFhO2dCQUMxQixNQUFNTSxn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QU0vQixRQUFRLEVBQUU7b0JBQ2pCK0IsTUFBTS9CLFFBQVEsR0FBRyxDQUFDO2dCQUN0QjtnQkFDQStCLE1BQU0vQixRQUFRLENBQUNPLElBQUksR0FBR3FCLGFBQWFNLFlBQVksQ0FBQzNCLElBQUk7WUFDeEQ7UUFDSjtJQUNKO0lBQ0EsT0FBT3dCO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLFNBQVNLLFlBQVl6QyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUVFLFNBQVMsRUFBRXdDLGNBQWMsRUFBRUwsY0FBYyxFQUFFTSxPQUFPLEVBQUVKLFlBQVksRUFBRUQsS0FBSyxFQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQ3RILE1BQU1NLFlBQVlaLGFBQWFoQztJQUMvQixJQUFJRSxjQUFjQyxXQUFXO1FBQ3pCOzs7U0FHQyxHQUNELE9BQU95QyxVQUFVRCxPQUFPO1FBQ3hCQyxVQUFVMUMsU0FBUyxHQUFHQTtJQUMxQjtJQUNBLElBQUltQyxtQkFBbUJsQyxXQUFXO1FBQzlCeUMsVUFBVVAsY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlLLG1CQUFtQnZDLFdBQVc7UUFDOUJ5QyxVQUFVRixjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSUMsWUFBWXhDLFdBQVc7UUFDdkJ5QyxVQUFVRCxPQUFPLEdBQUdBO0lBQ3hCO0lBQ0EsSUFBSUosaUJBQWlCcEMsV0FBVztRQUM1QnlDLFVBQVVMLFlBQVksR0FBRztZQUFFLEdBQUdLLFVBQVVMLFlBQVk7WUFBRSxHQUFHQSxZQUFZO1FBQUM7SUFDMUU7SUFDQSxJQUFJRCxVQUFVbkMsV0FBVztRQUNyQixPQUFPeUMsVUFBVU4sS0FBSztJQUMxQjtJQUNBLE9BQU9NO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9jb25maWcuanM/YjlkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIGVuc3VyZUhhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCA9IDI1O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4gQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShjb25maWc/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBjb25maWc/LnRhZ3MsIHVuZGVmaW5lZCwgY29uZmlnPy5tZXRhZGF0YSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VDb25maWdzKC4uLmNvbmZpZ3MpIHtcbiAgICAvLyBXZSBkbyBub3Qgd2FudCB0byBjYWxsIGVuc3VyZUNvbmZpZyBvbiB0aGUgZW1wdHkgc3RhdGUgaGVyZSBhcyB0aGlzIG1heSBjYXVzZVxuICAgIC8vIGRvdWJsZSBsb2FkaW5nIG9mIGNhbGxiYWNrcyBpZiBhc3luYyBsb2NhbCBzdG9yYWdlIGlzIGJlaW5nIHVzZWQuXG4gICAgY29uc3QgY29weSA9IHt9O1xuICAgIGZvciAoY29uc3Qgb3B0aW9ucyBvZiBjb25maWdzLmZpbHRlcigoYykgPT4gISFjKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvcHRpb25zKSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJtZXRhZGF0YVwiKSB7XG4gICAgICAgICAgICAgICAgY29weVtrZXldID0geyAuLi5jb3B5W2tleV0sIC4uLm9wdGlvbnNba2V5XSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInRhZ3NcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VLZXlzID0gY29weVtrZXldID8/IFtdO1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IFsuLi5uZXcgU2V0KGJhc2VLZXlzLmNvbmNhdChvcHRpb25zW2tleV0gPz8gW10pKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiY29uZmlndXJhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSB7IC4uLmNvcHlba2V5XSwgLi4ub3B0aW9uc1trZXldIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiY2FsbGJhY2tzXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlQ2FsbGJhY2tzID0gY29weS5jYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZWRDYWxsYmFja3MgPSBvcHRpb25zLmNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAvLyBjYWxsYmFja3MgY2FuIGJlIGVpdGhlciB1bmRlZmluZWQsIEFycmF5PGhhbmRsZXI+IG9yIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAvLyBzbyBtZXJnaW5nIHR3byBjYWxsYmFja3MgdmFsdWVzIGhhcyA2IGNhc2VzXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJvdmlkZWRDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBwcm92aWRlZENhbGxiYWNrcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJhc2VDYWxsYmFja3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IGJhc2VDYWxsYmFja3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VDYWxsYmFja3MgaXMgYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYW5hZ2VyID0gYmFzZUNhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIHByb3ZpZGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKGVuc3VyZUhhbmRsZXIoY2FsbGJhY2spLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gbWFuYWdlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm92aWRlZENhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBwcm92aWRlZENhbGxiYWNrcyBpcyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSBwcm92aWRlZENhbGxiYWNrcy5jb3B5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZUNhbGxiYWNrcyBpcyBhbHNvIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHByb3ZpZGVkQ2FsbGJhY2tzLl9wYXJlbnRSdW5JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzOiBiYXNlQ2FsbGJhY2tzLmhhbmRsZXJzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5oYW5kbGVycyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFibGVIYW5kbGVyczogYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdzOiBBcnJheS5mcm9tKG5ldyBTZXQoYmFzZUNhbGxiYWNrcy50YWdzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy50YWdzKSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaGVyaXRhYmxlVGFnczogQXJyYXkuZnJvbShuZXcgU2V0KGJhc2VDYWxsYmFja3MuaW5oZXJpdGFibGVUYWdzLmNvbmNhdChwcm92aWRlZENhbGxiYWNrcy5pbmhlcml0YWJsZVRhZ3MpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmFzZUNhbGxiYWNrcy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJvdmlkZWRDYWxsYmFja3MubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZWRLZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgY29weVt0eXBlZEtleV0gPSBvcHRpb25zW3R5cGVkS2V5XSA/PyBjb3B5W3R5cGVkS2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29weTtcbn1cbmNvbnN0IFBSSU1JVElWRVMgPSBuZXcgU2V0KFtcInN0cmluZ1wiLCBcIm51bWJlclwiLCBcImJvb2xlYW5cIl0pO1xuLyoqXG4gKiBFbnN1cmUgdGhhdCBhIHBhc3NlZCBjb25maWcgaXMgYW4gb2JqZWN0IHdpdGggYWxsIHJlcXVpcmVkIGtleXMgcHJlc2VudC5cbiAqXG4gKiBOb3RlOiBUbyBtYWtlIHN1cmUgYXN5bmMgbG9jYWwgc3RvcmFnZSBsb2FkaW5nIHdvcmtzIGNvcnJlY3RseSwgdGhpc1xuICogc2hvdWxkIG5vdCBiZSBjYWxsZWQgd2l0aCBhIGRlZmF1bHQgb3IgcHJlcG9wdWxhdGVkIGNvbmZpZyBhcmd1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUNvbmZpZyhjb25maWcpIHtcbiAgICBjb25zdCBsb2FkZWRDb25maWcgPSBjb25maWcgPz8gQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRJbnN0YW5jZSgpLmdldFN0b3JlKCk7XG4gICAgbGV0IGVtcHR5ID0ge1xuICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgICBjYWxsYmFja3M6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVjdXJzaW9uTGltaXQ6IDI1LFxuICAgICAgICBydW5JZDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgaWYgKGxvYWRlZENvbmZpZykge1xuICAgICAgICBlbXB0eSA9IHsgLi4uZW1wdHksIC4uLmxvYWRlZENvbmZpZyB9O1xuICAgIH1cbiAgICBpZiAobG9hZGVkQ29uZmlnPy5jb25maWd1cmFibGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMobG9hZGVkQ29uZmlnLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgICAgICAgIGlmIChQUklNSVRJVkVTLmhhcyh0eXBlb2YgbG9hZGVkQ29uZmlnLmNvbmZpZ3VyYWJsZVtrZXldKSAmJlxuICAgICAgICAgICAgICAgICFlbXB0eS5tZXRhZGF0YT8uW2tleV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtcHR5Lm1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5Lm1ldGFkYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVtcHR5Lm1ldGFkYXRhW2tleV0gPSBsb2FkZWRDb25maWcuY29uZmlndXJhYmxlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVtcHR5O1xufVxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBwYXRjaGVzIHJ1bm5hYmxlIGNvbmZpZ3Mgd2l0aCB1cGRhdGVkIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaENvbmZpZyhjb25maWcgPSB7fSwgeyBjYWxsYmFja3MsIG1heENvbmN1cnJlbmN5LCByZWN1cnNpb25MaW1pdCwgcnVuTmFtZSwgY29uZmlndXJhYmxlLCBydW5JZCwgfSA9IHt9KSB7XG4gICAgY29uc3QgbmV3Q29uZmlnID0gZW5zdXJlQ29uZmlnKGNvbmZpZyk7XG4gICAgaWYgKGNhbGxiYWNrcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSdyZSByZXBsYWNpbmcgY2FsbGJhY2tzIHdlIG5lZWQgdG8gdW5zZXQgcnVuTmFtZVxuICAgICAgICAgKiBzaW5jZSB0aGF0IHNob3VsZCBhcHBseSBvbmx5IHRvIHRoZSBzYW1lIHJ1biBhcyB0aGUgb3JpZ2luYWwgY2FsbGJhY2tzXG4gICAgICAgICAqL1xuICAgICAgICBkZWxldGUgbmV3Q29uZmlnLnJ1bk5hbWU7XG4gICAgICAgIG5ld0NvbmZpZy5jYWxsYmFja3MgPSBjYWxsYmFja3M7XG4gICAgfVxuICAgIGlmIChyZWN1cnNpb25MaW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld0NvbmZpZy5yZWN1cnNpb25MaW1pdCA9IHJlY3Vyc2lvbkxpbWl0O1xuICAgIH1cbiAgICBpZiAobWF4Q29uY3VycmVuY3kgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcubWF4Q29uY3VycmVuY3kgPSBtYXhDb25jdXJyZW5jeTtcbiAgICB9XG4gICAgaWYgKHJ1bk5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucnVuTmFtZSA9IHJ1bk5hbWU7XG4gICAgfVxuICAgIGlmIChjb25maWd1cmFibGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcuY29uZmlndXJhYmxlID0geyAuLi5uZXdDb25maWcuY29uZmlndXJhYmxlLCAuLi5jb25maWd1cmFibGUgfTtcbiAgICB9XG4gICAgaWYgKHJ1bklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVsZXRlIG5ld0NvbmZpZy5ydW5JZDtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0NvbmZpZztcbn1cbiJdLCJuYW1lcyI6WyJDYWxsYmFja01hbmFnZXIiLCJlbnN1cmVIYW5kbGVyIiwiQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiIsIkRFRkFVTFRfUkVDVVJTSU9OX0xJTUlUIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwiY29uZmlnIiwiY29uZmlndXJlIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwidGFncyIsIm1ldGFkYXRhIiwibWVyZ2VDb25maWdzIiwiY29uZmlncyIsImNvcHkiLCJvcHRpb25zIiwiZmlsdGVyIiwiYyIsImtleSIsIk9iamVjdCIsImtleXMiLCJiYXNlS2V5cyIsIlNldCIsImNvbmNhdCIsImJhc2VDYWxsYmFja3MiLCJwcm92aWRlZENhbGxiYWNrcyIsIkFycmF5IiwiaXNBcnJheSIsIm1hbmFnZXIiLCJjYWxsYmFjayIsImFkZEhhbmRsZXIiLCJfcGFyZW50UnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJmcm9tIiwiaW5oZXJpdGFibGVUYWdzIiwidHlwZWRLZXkiLCJQUklNSVRJVkVTIiwiZW5zdXJlQ29uZmlnIiwibG9hZGVkQ29uZmlnIiwiZ2V0SW5zdGFuY2UiLCJnZXRTdG9yZSIsImVtcHR5IiwicmVjdXJzaW9uTGltaXQiLCJydW5JZCIsImNvbmZpZ3VyYWJsZSIsImhhcyIsInBhdGNoQ29uZmlnIiwibWF4Q29uY3VycmVuY3kiLCJydW5OYW1lIiwibmV3Q29uZmlnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/graph.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/runnables/graph.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph),\n/* harmony export */   nodeDataStr: () => (/* binding */ nodeDataStr)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/utils.js\");\n\n\n\nconst MAX_DATA_DISPLAY_NAME_LENGTH = 42;\nfunction nodeDataStr(node) {\n    if (!(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id)) {\n        return node.id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        try {\n            let data = node.data.toString();\n            if (data.startsWith(\"<\") || data[0] !== data[0].toUpperCase() || data.split(\"\\n\").length > 1) {\n                data = node.data.getName();\n            } else if (data.length > MAX_DATA_DISPLAY_NAME_LENGTH) {\n                data = `${data.substring(0, MAX_DATA_DISPLAY_NAME_LENGTH)}...`;\n            }\n            return data.startsWith(\"Runnable\") ? data.slice(\"Runnable\".length) : data;\n        } catch (error) {\n            return node.data.getName();\n        }\n    } else {\n        return node.data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data is implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>edge.data ? {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target],\n                    data: edge.data\n                } : {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                })\n        };\n    }\n    addNode(data, id) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id || (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        const targets = new Set(this.edges.map((edge)=>edge.target));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!targets.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    lastNode() {\n        const sources = new Set(this.edges.map((edge)=>edge.source));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!sources.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    extend(graph) {\n        // Add all nodes from the other graph, taking care to avoid duplicates\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[key] = value;\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...graph.edges\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode) {\n            const outgoingEdges = this.edges.filter((edge)=>edge.source === firstNode.id);\n            if (Object.keys(this.nodes).length === 1 || outgoingEdges.length === 1) {\n                this.removeNode(firstNode);\n            }\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode) {\n            const incomingEdges = this.edges.filter((edge)=>edge.target === lastNode.id);\n            if (Object.keys(this.nodes).length === 1 || incomingEdges.length === 1) {\n                this.removeNode(lastNode);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvZ3JhcGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBQ0c7QUFDUDtBQUNqRCxNQUFNTSwrQkFBK0I7QUFDOUIsU0FBU0MsWUFBWUMsSUFBSTtJQUM1QixJQUFJLENBQUNKLGdEQUFNQSxDQUFDSSxLQUFLQyxFQUFFLEdBQUc7UUFDbEIsT0FBT0QsS0FBS0MsRUFBRTtJQUNsQixPQUNLLElBQUlKLDhEQUFtQkEsQ0FBQ0csS0FBS0UsSUFBSSxHQUFHO1FBQ3JDLElBQUk7WUFDQSxJQUFJQSxPQUFPRixLQUFLRSxJQUFJLENBQUNDLFFBQVE7WUFDN0IsSUFBSUQsS0FBS0UsVUFBVSxDQUFDLFFBQ2hCRixJQUFJLENBQUMsRUFBRSxLQUFLQSxJQUFJLENBQUMsRUFBRSxDQUFDRyxXQUFXLE1BQy9CSCxLQUFLSSxLQUFLLENBQUMsTUFBTUMsTUFBTSxHQUFHLEdBQUc7Z0JBQzdCTCxPQUFPRixLQUFLRSxJQUFJLENBQUNNLE9BQU87WUFDNUIsT0FDSyxJQUFJTixLQUFLSyxNQUFNLEdBQUdULDhCQUE4QjtnQkFDakRJLE9BQU8sQ0FBQyxFQUFFQSxLQUFLTyxTQUFTLENBQUMsR0FBR1gsOEJBQThCLEdBQUcsQ0FBQztZQUNsRTtZQUNBLE9BQU9JLEtBQUtFLFVBQVUsQ0FBQyxjQUFjRixLQUFLUSxLQUFLLENBQUMsV0FBV0gsTUFBTSxJQUFJTDtRQUN6RSxFQUNBLE9BQU9TLE9BQU87WUFDVixPQUFPWCxLQUFLRSxJQUFJLENBQUNNLE9BQU87UUFDNUI7SUFDSixPQUNLO1FBQ0QsT0FBT1IsS0FBS0UsSUFBSSxDQUFDVSxJQUFJLElBQUk7SUFDN0I7QUFDSjtBQUNBLFNBQVNDLGFBQWFiLElBQUk7SUFDdEIsc0NBQXNDO0lBQ3RDLElBQUlILDhEQUFtQkEsQ0FBQ0csS0FBS0UsSUFBSSxHQUFHO1FBQ2hDLE9BQU87WUFD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dWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9ncmFwaC5qcz8wZDM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCwgdmFsaWRhdGUgYXMgaXNVdWlkIH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IGlzUnVubmFibGVJbnRlcmZhY2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuY29uc3QgTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCA9IDQyO1xuZXhwb3J0IGZ1bmN0aW9uIG5vZGVEYXRhU3RyKG5vZGUpIHtcbiAgICBpZiAoIWlzVXVpZChub2RlLmlkKSkge1xuICAgICAgICByZXR1cm4gbm9kZS5pZDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShub2RlLmRhdGEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5vZGUuZGF0YS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKGRhdGEuc3RhcnRzV2l0aChcIjxcIikgfHxcbiAgICAgICAgICAgICAgICBkYXRhWzBdICE9PSBkYXRhWzBdLnRvVXBwZXJDYXNlKCkgfHxcbiAgICAgICAgICAgICAgICBkYXRhLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbm9kZS5kYXRhLmdldE5hbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubGVuZ3RoID4gTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBgJHtkYXRhLnN1YnN0cmluZygwLCBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIKX0uLi5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuc3RhcnRzV2l0aChcIlJ1bm5hYmxlXCIpID8gZGF0YS5zbGljZShcIlJ1bm5hYmxlXCIubGVuZ3RoKSA6IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5kYXRhLmdldE5hbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YS5uYW1lID8/IFwiVW5rbm93blNjaGVtYVwiO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vZGVEYXRhSnNvbihub2RlKSB7XG4gICAgLy8gaWYgbm9kZS5kYXRhIGlzIGltcGxlbWVudHMgUnVubmFibGVcbiAgICBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShub2RlLmRhdGEpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInJ1bm5hYmxlXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6IG5vZGUuZGF0YS5sY19pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBub2RlLmRhdGEuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInNjaGVtYVwiLFxuICAgICAgICAgICAgZGF0YTogeyAuLi56b2RUb0pzb25TY2hlbWEobm9kZS5kYXRhLnNjaGVtYSksIHRpdGxlOiBub2RlLmRhdGEubmFtZSB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBHcmFwaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5vZGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWRnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IHRoZSBncmFwaCB0byBhIEpTT04tc2VyaWFsaXphYmxlIGZvcm1hdC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgc3RhYmxlTm9kZUlkcyA9IHt9O1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUsIGkpID0+IHtcbiAgICAgICAgICAgIHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0gPSBpc1V1aWQobm9kZS5pZCkgPyBpIDogbm9kZS5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub2RlczogT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5tYXAoKG5vZGUpID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0sXG4gICAgICAgICAgICAgICAgLi4ubm9kZURhdGFKc29uKG5vZGUpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgZWRnZXM6IHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiBlZGdlLmRhdGFcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFibGVOb2RlSWRzW2VkZ2Uuc291cmNlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGFibGVOb2RlSWRzW2VkZ2UudGFyZ2V0XSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZWRnZS5kYXRhLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFibGVOb2RlSWRzW2VkZ2Uuc291cmNlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGFibGVOb2RlSWRzW2VkZ2UudGFyZ2V0XSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkTm9kZShkYXRhLCBpZCkge1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm5vZGVzW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgd2l0aCBpZCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVJZCA9IGlkIHx8IHV1aWR2NCgpO1xuICAgICAgICBjb25zdCBub2RlID0geyBpZDogbm9kZUlkLCBkYXRhIH07XG4gICAgICAgIHRoaXMubm9kZXNbbm9kZUlkXSA9IG5vZGU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZW1vdmVOb2RlKG5vZGUpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBub2RlIGZyb20gdGhlIG5vZGVzIG1hcFxuICAgICAgICBkZWxldGUgdGhpcy5ub2Rlc1tub2RlLmlkXTtcbiAgICAgICAgLy8gRmlsdGVyIG91dCBlZGdlcyBjb25uZWN0ZWQgdG8gdGhlIG5vZGVcbiAgICAgICAgdGhpcy5lZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSAhPT0gbm9kZS5pZCAmJiBlZGdlLnRhcmdldCAhPT0gbm9kZS5pZCk7XG4gICAgfVxuICAgIGFkZEVkZ2Uoc291cmNlLCB0YXJnZXQsIGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZXNbc291cmNlLmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBub2RlICR7c291cmNlLmlkfSBub3QgaW4gZ3JhcGhgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub2Rlc1t0YXJnZXQuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGFyZ2V0IG5vZGUgJHt0YXJnZXQuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVkZ2UgPSB7IHNvdXJjZTogc291cmNlLmlkLCB0YXJnZXQ6IHRhcmdldC5pZCwgZGF0YSB9O1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZWRnZSk7XG4gICAgICAgIHJldHVybiBlZGdlO1xuICAgIH1cbiAgICBmaXJzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBuZXcgU2V0KHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiBlZGdlLnRhcmdldCkpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0cy5oYXMobm9kZS5pZCkpIHtcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kWzBdO1xuICAgIH1cbiAgICBsYXN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3Qgc291cmNlcyA9IG5ldyBTZXQodGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IGVkZ2Uuc291cmNlKSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgICAgIGZvdW5kLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm91bmRbMF07XG4gICAgfVxuICAgIGV4dGVuZChncmFwaCkge1xuICAgICAgICAvLyBBZGQgYWxsIG5vZGVzIGZyb20gdGhlIG90aGVyIGdyYXBoLCB0YWtpbmcgY2FyZSB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGdyYXBoLm5vZGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHRoaXMubm9kZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGFsbCBlZGdlcyBmcm9tIHRoZSBvdGhlciBncmFwaFxuICAgICAgICB0aGlzLmVkZ2VzID0gWy4uLnRoaXMuZWRnZXMsIC4uLmdyYXBoLmVkZ2VzXTtcbiAgICB9XG4gICAgdHJpbUZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgZmlyc3ROb2RlID0gdGhpcy5maXJzdE5vZGUoKTtcbiAgICAgICAgaWYgKGZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSA9PT0gZmlyc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgb3V0Z29pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUoZmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmltTGFzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IGxhc3ROb2RlID0gdGhpcy5sYXN0Tm9kZSgpO1xuICAgICAgICBpZiAobGFzdE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluY29taW5nRWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS50YXJnZXQgPT09IGxhc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgaW5jb21pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUobGFzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInpvZFRvSnNvblNjaGVtYSIsInY0IiwidXVpZHY0IiwidmFsaWRhdGUiLCJpc1V1aWQiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCIsIm5vZGVEYXRhU3RyIiwibm9kZSIsImlkIiwiZGF0YSIsInRvU3RyaW5nIiwic3RhcnRzV2l0aCIsInRvVXBwZXJDYXNlIiwic3BsaXQiLCJsZW5ndGgiLCJnZXROYW1lIiwic3Vic3RyaW5nIiwic2xpY2UiLCJlcnJvciIsIm5hbWUiLCJub2RlRGF0YUpzb24iLCJ0eXBlIiwibGNfaWQiLCJzY2hlbWEiLCJ0aXRsZSIsIkdyYXBoIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidG9KU09OIiwic3RhYmxlTm9kZUlkcyIsInZhbHVlcyIsIm5vZGVzIiwiZm9yRWFjaCIsImkiLCJtYXAiLCJlZGdlcyIsImVkZ2UiLCJzb3VyY2UiLCJ0YXJnZXQiLCJhZGROb2RlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJub2RlSWQiLCJyZW1vdmVOb2RlIiwiZmlsdGVyIiwiYWRkRWRnZSIsInB1c2giLCJmaXJzdE5vZGUiLCJ0YXJnZXRzIiwiU2V0IiwiZm91bmQiLCJoYXMiLCJsYXN0Tm9kZSIsInNvdXJjZXMiLCJleHRlbmQiLCJncmFwaCIsImVudHJpZXMiLCJrZXkiLCJ0cmltRmlyc3ROb2RlIiwib3V0Z29pbmdFZGdlcyIsImtleXMiLCJ0cmltTGFzdE5vZGUiLCJpbmNvbWluZ0VkZ2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/utils.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/runnables/utils.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4REFBOEQ7QUFDdkQsU0FBU0Esb0JBQW9CQyxLQUFLO0lBQ3JDLE9BQU9BLFFBQVFBLE1BQU1DLFdBQVcsR0FBRztBQUN2QztBQUNBOzs7Ozs7Q0FNQyxHQUNNLE1BQU1DO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsWUFBWSxHQUFHUCxPQUFPTyxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsWUFBWSxHQUFHUixPQUFPUSxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsV0FBVyxHQUFHVCxPQUFPUyxXQUFXO1FBQ3JDLElBQUksQ0FBQ0MsWUFBWSxHQUFHVixPQUFPVSxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsWUFBWSxHQUFHWCxPQUFPVyxZQUFZO1FBQ3ZDLElBQUksQ0FBQ0MsV0FBVyxHQUFHWixPQUFPWSxXQUFXO0lBQ3pDO0lBQ0FDLGFBQWFDLEtBQUssRUFBRUMsUUFBUSxFQUFFO1FBQzFCLElBQUlDLFVBQVUsSUFBSSxDQUFDVCxZQUFZLEtBQUtVLGFBQ2hDLElBQUksQ0FBQ1QsWUFBWSxLQUFLUyxhQUN0QixJQUFJLENBQUNSLFdBQVcsS0FBS1E7UUFDekIsTUFBTUMsWUFBWUosTUFBTUssSUFBSSxJQUFJLEVBQUU7UUFDbEMsSUFBSSxJQUFJLENBQUNaLFlBQVksS0FBS1UsV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxJQUFJLENBQUNULFlBQVksQ0FBQ2EsUUFBUSxDQUFDTixNQUFNTyxJQUFJO1FBQzlEO1FBQ0EsSUFBSSxJQUFJLENBQUNiLFlBQVksS0FBS1MsV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxJQUFJLENBQUNSLFlBQVksQ0FBQ1ksUUFBUSxDQUFDTDtRQUNwRDtRQUNBLElBQUksSUFBSSxDQUFDTixXQUFXLEtBQUtRLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVJLElBQUksQ0FBQyxDQUFDQyxNQUFRLElBQUksQ0FBQ2QsV0FBVyxFQUFFVyxTQUFTRztRQUN0RTtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtPLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNOLFlBQVksQ0FBQ1UsUUFBUSxDQUFDTixNQUFNTyxJQUFJO1FBQy9EO1FBQ0EsSUFBSSxJQUFJLENBQUNWLFlBQVksS0FBS00sV0FBVztZQUNqQ0QsVUFBVUEsV0FBVyxDQUFDLElBQUksQ0FBQ0wsWUFBWSxDQUFDUyxRQUFRLENBQUNMO1FBQ3JEO1FBQ0EsSUFBSSxJQUFJLENBQUNILFdBQVcsS0FBS0ssV0FBVztZQUNoQ0QsVUFDSUEsV0FBV0UsVUFBVU0sS0FBSyxDQUFDLENBQUNELE1BQVEsQ0FBQyxJQUFJLENBQUNYLFdBQVcsRUFBRVEsU0FBU0c7UUFDeEU7UUFDQSxPQUFPUDtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcz8wOWRjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyA/IHRoaW5nLmxjX3J1bm5hYmxlIDogZmFsc2U7XG59XG4vKipcbiAqIFV0aWxpdHkgdG8gZmlsdGVyIHRoZSByb290IGV2ZW50IGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4gKiBUaGlzIGlzIHNpbXBseSBiaW5kaW5nIHRoZSBhcmd1bWVudHMgdG8gdGhlIG5hbWVzcGFjZSB0byBtYWtlIHNhdmUgb25cbiAqIGEgYml0IG9mIHR5cGluZyBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRPRE86IFJlZmFjdG9yIGFuZCByZW1vdmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBfUm9vdEV2ZW50RmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzLmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHMuaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzLmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzLmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcy5leGNsdWRlVGFncztcbiAgICB9XG4gICAgaW5jbHVkZUV2ZW50KGV2ZW50LCByb290VHlwZSkge1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZXZlbnRUYWdzID0gZXZlbnQudGFncyA/PyBbXTtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fCBldmVudFRhZ3Muc29tZSgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgZXZlbnRUYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNSdW5uYWJsZUludGVyZmFjZSIsInRoaW5nIiwibGNfcnVubmFibGUiLCJfUm9vdEV2ZW50RmlsdGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsImluY2x1ZGVFdmVudCIsImV2ZW50Iiwicm9vdFR5cGUiLCJpbmNsdWRlIiwidW5kZWZpbmVkIiwiZXZlbnRUYWdzIiwidGFncyIsImluY2x1ZGVzIiwibmFtZSIsInNvbWUiLCJ0YWciLCJldmVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/singletons/index.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/singletons/index.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ class MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        callback();\n    }\n}\nclass AsyncLocalStorageProvider {\n    constructor(){\n        Object.defineProperty(this, \"asyncLocalStorage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockAsyncLocalStorage()\n        });\n        Object.defineProperty(this, \"hasBeenInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    getInstance() {\n        return this.asyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        if (!this.hasBeenInitialized) {\n            this.hasBeenInitialized = true;\n            this.asyncLocalStorage = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9zaW5nbGV0b25zL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEscURBQXFELEdBQzlDLE1BQU1BO0lBQ1RDLFdBQVc7UUFDUCxPQUFPQztJQUNYO0lBQ0FDLElBQUlDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO1FBQ2xCQTtJQUNKO0FBQ0o7QUFDQSxNQUFNQztJQUNGQyxhQUFjO1FBQ1ZDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUscUJBQXFCO1lBQzdDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLElBQUliO1FBQ2Y7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxzQkFBc0I7WUFDOUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0FDLGNBQWM7UUFDVixPQUFPLElBQUksQ0FBQ0MsaUJBQWlCO0lBQ2pDO0lBQ0FDLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLElBQUksQ0FBQyxJQUFJLENBQUNDLGtCQUFrQixFQUFFO1lBQzFCLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUc7WUFDMUIsSUFBSSxDQUFDSCxpQkFBaUIsR0FBR0U7UUFDN0I7SUFDSjtBQUNKO0FBQ0EsTUFBTUUscUNBQXFDLElBQUliO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvaW5kZXguanM/ZDA2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5leHBvcnQgY2xhc3MgTW9ja0FzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcnVuKF9zdG9yZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG59XG5jbGFzcyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXN5bmNMb2NhbFN0b3JhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFzQmVlbkluaXRpYWxpemVkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jTG9jYWxTdG9yYWdlO1xuICAgIH1cbiAgICBpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hc3luY0xvY2FsU3RvcmFnZSA9IGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyKCk7XG5leHBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH07XG4iXSwibmFtZXMiOlsiTW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiZ2V0U3RvcmUiLCJ1bmRlZmluZWQiLCJydW4iLCJfc3RvcmUiLCJjYWxsYmFjayIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJnZXRJbnN0YW5jZSIsImFzeW5jTG9jYWxTdG9yYWdlIiwiaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlIiwiaW5zdGFuY2UiLCJoYXNCZWVuSW5pdGlhbGl6ZWQiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId) {\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) + runId;\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    async _startTrace(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        await this.onRunCreate?.(storedRun);\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEQ7QUFDNUQsOERBQThEO0FBQzlELFNBQVNDLGNBQWNDLEtBQUssRUFBRUMsVUFBVTtJQUNwQyxPQUFPRCxTQUFTLENBQUNFLE1BQU1DLE9BQU8sQ0FBQ0gsVUFBVSxPQUFPQSxVQUFVLFdBQ3BEQSxRQUNBO1FBQUUsQ0FBQ0MsV0FBVyxFQUFFRDtJQUFNO0FBQ2hDO0FBQ0EsU0FBU0kscUJBQXFCQyxLQUFLO0lBQy9CLE9BQU9BLE1BQU1DLE9BQU8sQ0FBQyxVQUFVO0FBQ25DO0FBQ0EsU0FBU0MsMkJBQTJCQyxLQUFLLEVBQUVDLEtBQUs7SUFDNUMsT0FBUUwscUJBQXFCLENBQUMsRUFBRSxJQUFJTSxLQUFLRixPQUFPRyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFDNUVIO0FBQ1I7QUFDTyxNQUFNSSxtQkFBbUJmLG1FQUFtQkE7SUFDL0NnQixZQUFZQyxPQUFPLENBQUU7UUFDakIsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZyQixPQUFPLElBQUlzQjtRQUNmO0lBQ0o7SUFDQUMsT0FBTztRQUNILE9BQU8sSUFBSTtJQUNmO0lBQ0FDLGVBQWVDLEtBQUssRUFBRTtRQUNsQix1REFBdUQ7UUFDdkQsSUFBSUEsaUJBQWlCQyxPQUFPO1lBQ3hCLE9BQU9ELE1BQU1FLE9BQU8sR0FBSUYsQ0FBQUEsT0FBT0csUUFBUSxDQUFDLElBQUksRUFBRUgsTUFBTUcsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFDO1FBQ25FO1FBQ0EsSUFBSSxPQUFPSCxVQUFVLFVBQVU7WUFDM0IsT0FBT0E7UUFDWDtRQUNBLE9BQU8sQ0FBQyxFQUFFQSxN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QUksQ0FBQ08sTUFBTSxDQUFDQyxHQUFHLENBQUNsQztRQUM1QixJQUFJLENBQUMwQixPQUFPQSxLQUFLc0MsYUFBYSxTQUFTO1lBQ25DO1FBQ0o7UUFDQXRDLElBQUltQyxNQUFNLENBQUNyQyxJQUFJLENBQUM7WUFDWitCLE1BQU07WUFDTk8sTUFBTSxJQUFJN0QsT0FBT0MsV0FBVztZQUM1QmlGLFFBQVE7Z0JBQUU0QjtZQUFLO1FBQ25CO1FBQ0EsTUFBTSxJQUFJLENBQUNDLE1BQU0sR0FBR3RGO0lBQ3hCO0lBQ0EsTUFBTXVGLGtCQUFrQkMsS0FBSyxFQUFFQyxHQUFHLEVBQUVuSCxLQUFLLEVBQUVpRixZQUFZLEVBQUVDLEtBQUssRUFBRWtDLE1BQU0sRUFBRTtRQUNwRSxNQUFNMUYsTUFBTSxJQUFJLENBQUNPLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDbEM7UUFDNUIsSUFBSSxDQUFDMEIsT0FBT0EsS0FBS3NDLGFBQWEsT0FBTztZQUNqQyxNQUFNLElBQUkvQyxNQUFNLENBQUMseURBQXlELENBQUM7UUFDL0U7UUFDQVMsSUFBSW1DLE1BQU0sQ0FBQ3JDLElBQUksQ0FBQztZQUNaK0IsTUFBTTtZQUNOTyxNQUFNLElBQUk3RCxPQUFPQyxXQUFXO1lBQzVCaUYsUUFBUTtnQkFBRStCO2dCQUFPQztnQkFBS0UsT0FBT0QsUUFBUUM7WUFBTTtRQUMvQztRQUNBLE1BQU0sSUFBSSxDQUFDQyxhQUFhLEdBQUc1RixLQUFLd0YsT0FBTztZQUFFRyxPQUFPRCxRQUFRQztRQUFNO1FBQzlELE9BQU8zRjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcz9kYzkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkKSB7XG4gICAgcmV0dXJuIChzdHJpcE5vbkFscGhhbnVtZXJpYyhgJHtuZXcgRGF0ZShlcG9jaCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSl9MDAwWmApICtcbiAgICAgICAgcnVuSWQpO1xufVxuZXhwb3J0IGNsYXNzIEJhc2VUcmFjZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihfZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RyaW5naWZ5RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgKyAoZXJyb3I/LnN0YWNrID8gYFxcblxcbiR7ZXJyb3Iuc3RhY2t9YCA6IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7ZXJyb3J9YDtcbiAgICB9XG4gICAgX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgY2hpbGRSdW4pIHtcbiAgICAgICAgcGFyZW50UnVuLmNoaWxkX3J1bnMucHVzaChjaGlsZFJ1bik7XG4gICAgfVxuICAgIGFzeW5jIF9zdGFydFRyYWNlKHJ1bikge1xuICAgICAgICBjb25zdCBjdXJyZW50RG90dGVkT3JkZXIgPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChydW4uc3RhcnRfdGltZSwgcnVuLmlkKTtcbiAgICAgICAgY29uc3Qgc3RvcmVkUnVuID0geyAuLi5ydW4gfTtcbiAgICAgICAgaWYgKHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHRoaXMucnVuTWFwLmdldChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBzdG9yZWRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBwYXJlbnRSdW4udHJhY2VfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREb3R0ZWRPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gaGFzIG5vIGRvdHRlZCBvcmRlci5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAvLyAgIGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBub3QgZm91bmQuYFxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBzdG9yZWRSdW4uaWQ7XG4gICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gY3VycmVudERvdHRlZE9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLnNldChzdG9yZWRSdW4uaWQsIHN0b3JlZFJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihzdG9yZWRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBfZW5kVHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ydW5NYXAuZ2V0KHJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0UnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5VcGRhdGU/LihydW4pO1xuICAgIH1cbiAgICBfZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcGFyZW50UnVuSWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocGFyZW50UnVuSWQpO1xuICAgICAgICAvLyBJZiBhIHJ1biBoYXMgbm8gcGFyZW50IHRoZW4gZXhlY3V0aW9uIG9yZGVyIGlzIDFcbiAgICAgICAgaWYgKCFwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyICsgMTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGFcbiAgICAgICAgICAgID8geyAuLi5leHRyYVBhcmFtcywgbWV0YWRhdGEgfVxuICAgICAgICAgICAgOiBleHRyYVBhcmFtcztcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBsbG0uaWRbbGxtLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcHJvbXB0cyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRXh0cmFQYXJhbXMgPSBtZXRhZGF0YVxuICAgICAgICAgICAgPyB7IC4uLmV4dHJhUGFyYW1zLCBtZXRhZGF0YSB9XG4gICAgICAgICAgICA6IGV4dHJhUGFyYW1zO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGxsbS5pZFtsbG0uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBtZXNzYWdlcyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IG91dHB1dDtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGNoYWluLmlkW2NoYWluLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogY2hhaW4sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0cyxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IHJ1blR5cGUgPz8gXCJjaGFpblwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXRzLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGt3YXJncz8uaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnJvciwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1bikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IHRvb2wuaWRbdG9vbC5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHRvb2wsXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBpbnB1dCB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJ0b29sXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbFN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IG91dHB1dCB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMgPSBhZ2VudFJ1bi5hY3Rpb25zIHx8IFtdO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgICAgYWdlbnRSdW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9hY3Rpb25cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEFjdGlvbj8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiYWdlbnRfZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgYWN0aW9uIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQWdlbnRFbmQ/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gcmV0cmlldmVyLmlkW3JldHJpZXZlci5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHJldHJpZXZlcixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IHF1ZXJ5IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInJldHJpZXZlclwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlclN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cywgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IGRvY3VtZW50cyB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcInRleHRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0ZXh0IH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVGV4dD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFwicnVuSWRcIiBwcm92aWRlZCB0byBcImhhbmRsZUxMTU5ld1Rva2VuXCIgY2FsbGJhY2suYCk7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwibmV3X3Rva2VuXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgdG9rZW4sIGlkeCwgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1OZXdUb2tlbj8uKHJ1biwgdG9rZW4sIHsgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSk7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJfY29lcmNlVG9EaWN0IiwidmFsdWUiLCJkZWZhdWx0S2V5IiwiQXJyYXkiLCJpc0FycmF5Iiwic3RyaXBOb25BbHBoYW51bWVyaWMiLCJpbnB1dCIsInJlcGxhY2UiLCJjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdCIsImVwb2NoIiwicnVuSWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsIkJhc2VUcmFjZXIiLCJjb25zdHJ1Y3RvciIsIl9maWVsZHMiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk1hcCIsImNvcHkiLCJzdHJpbmdpZnlFcnJvciIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJfYWRkQ2hpbGRSdW4iLCJwYXJlbnRSdW4iLCJjaGlsZFJ1biIsImNoaWxkX3J1bnMiLCJwdXNoIiwiX3N0YXJ0VHJhY2UiLCJydW4iLCJjdXJyZW50RG90dGVkT3JkZXIiLCJzdGFydF90aW1lIiwiaWQiLCJzdG9yZWRSdW4iLCJwYXJlbnRfcnVuX2lkIiwidW5kZWZpbmVkIiwicnVuTWFwIiwiZ2V0IiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwiTWF0aCIsIm1heCIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwiam9pbiIsInNldCIsIm9uUnVuQ3JlYXRlIiwiX2VuZFRyYWNlIiwicGVyc2lzdFJ1biIsImRlbGV0ZSIsIm9uUnVuVXBkYXRlIiwiX2dldEV4ZWN1dGlvbk9yZGVyIiwicGFyZW50UnVuSWQiLCJoYW5kbGVMTE1TdGFydCIsImxsbSIsInByb21wdHMiLCJleHRyYVBhcmFtcyIsInRhZ3MiLCJtZXRhZGF0YSIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJub3ciLCJmaW5hbEV4dHJhUGFyYW1zIiwibGVuZ3RoIiwic2VyaWFsaXplZCIsImV2ZW50cyIsInRpbWUiLCJpbnB1dHMiLCJydW5fdHlwZSIsImV4dHJhIiwib25MTE1TdGFydCIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJlbmRfdGltZSIsIm91dHB1dHMiLCJvbkxMTUVuZCIsImhhbmRsZUxMTUVycm9yIiwib25MTE1FcnJvciIsImhhbmRsZUNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJvbkNoYWluU3RhcnQiLCJoYW5kbGVDaGFpbkVuZCIsIl9wYXJlbnRSdW5JZCIsIl90YWdzIiwia3dhcmdzIiwib25DaGFpbkVuZCIsImhhbmRsZUNoYWluRXJyb3IiLCJvbkNoYWluRXJyb3IiLCJoYW5kbGVUb29sU3RhcnQiLCJ0b29sIiwib25Ub29sU3RhcnQiLCJoYW5kbGVUb29sRW5kIiwib25Ub29sRW5kIiwiaGFuZGxlVG9vbEVycm9yIiwib25Ub29sRXJyb3IiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImFnZW50UnVuIiwiYWN0aW9ucyIsIm9uQWdlbnRBY3Rpb24iLCJoYW5kbGVBZ2VudEVuZCIsIm9uQWdlbnRFbmQiLCJoYW5kbGVSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5Iiwib25SZXRyaWV2ZXJTdGFydCIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsIm9uUmV0cmlldmVyRW5kIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJvblJldHJpZXZlckVycm9yIiwiaGFuZGxlVGV4dCIsInRleHQiLCJvblRleHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiZmllbGRzIiwiY2h1bmsiLCJvbkxMTU5ld1Rva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/console.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/console.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${run.inputs.input?.trim()}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${run.outputs?.output?.trim()}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2NvbnNvbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBQ007QUFDdkMsU0FBU0UsS0FBS0MsS0FBSyxFQUFFQyxJQUFJO0lBQ3JCLE9BQU8sQ0FBQyxFQUFFRCxNQUFNRSxJQUFJLENBQUMsRUFBRUQsS0FBSyxFQUFFRCxNQUFNRyxLQUFLLENBQUMsQ0FBQztBQUMvQztBQUNBLFNBQVNDLGlCQUFpQkMsR0FBRyxFQUFFQyxRQUFRO0lBQ25DLElBQUk7UUFDQSxPQUFPQyxLQUFLQyxTQUFTLENBQUNILEtBQUssTUFBTTtJQUNyQyxFQUNBLE9BQU9JLEtBQUs7UUFDUixPQUFPSDtJQUNYO0FBQ0o7QUFDQSxTQUFTSSxRQUFRQyxHQUFHO0lBQ2hCLElBQUksQ0FBQ0EsSUFBSUMsUUFBUSxFQUNiLE9BQU87SUFDWCxNQUFNRixVQUFVQyxJQUFJQyxRQUFRLEdBQUdELElBQUlFLFVBQVU7SUFDN0MsSUFBSUgsVUFBVSxNQUFNO1FBQ2hCLE9BQU8sQ0FBQyxFQUFFQSxRQUFRLEVBQUUsQ0FBQztJQUN6QjtJQUNBLE9BQU8sQ0FBQyxFQUFFLENBQUNBLFVBQVUsSUFBRyxFQUFHSSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUM7QUFDQSxNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHbEIsd0NBQU1BO0FBQ3hCOzs7Ozs7Ozs7Ozs7OztDQWNDLEdBQ00sTUFBTW1CLCtCQUErQmxCLGdEQUFVQTtJQUNsRG1CLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO0lBQ0o7SUFDQTs7Ozs7S0FLQyxHQUNEQyxXQUFXQyxJQUFJLEVBQUU7UUFDYixPQUFPQyxRQUFRQyxPQUFPO0lBQzFCO0lBQ0Esa0JBQWtCO0lBQ2xCOzs7O0tBSUMsR0FDREMsV0FBV2xCLEdBQUcsRUFBRTtRQUNaLE1BQU1tQixVQUFVLEVBQUU7UUFDbEIsSUFBSUMsYUFBYXBCO1FBQ2pCLE1BQU9vQixXQUFXQyxhQUFhLENBQUU7WUFDN0IsTUFBTUMsU0FBUyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDSixXQUFXQyxhQUFhO1lBQ3ZELElBQUlDLFFBQVE7Z0JBQ1JILFFBQVFNLElBQUksQ0FBQ0g7Z0JBQ2JGLGFBQWFFO1lBQ2pCLE9BQ0s7Z0JBQ0Q7WUFDSjtRQUNKO1FBQ0EsT0FBT0g7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0RPLGVBQWUxQixHQUFHLEVBQUU7UUFDaEIsTUFBTW1CLFVBQVUsSUFBSSxDQUFDRCxVQUFVLENBQUNsQixLQUFLMkIsT0FBTztRQUM1QyxNQUFNQyxTQUFTO2VBQUlUO1lBQVNuQjtTQUFJLENBQzNCNkIsR0FBRyxDQUFDLENBQUNQLFFBQVFRLEdBQUdDO1lBQ2pCLE1BQU1DLE9BQU8sQ0FBQyxFQUFFVixPQUFPVyxlQUFlLENBQUMsQ0FBQyxFQUFFWCxPQUFPWSxRQUFRLENBQUMsQ0FBQyxFQUFFWixPQUFPVSxJQUFJLENBQUMsQ0FBQztZQUMxRSxPQUFPRixNQUFNQyxJQUFJSSxNQUFNLEdBQUcsSUFBSS9DLEtBQUtGLDZDQUFXLEVBQUU4QyxRQUFRQTtRQUM1RCxHQUNLSyxJQUFJLENBQUM7UUFDVixPQUFPakQsS0FBS2dCLE1BQU1rQyxJQUFJLEVBQUVWO0lBQzVCO0lBQ0Esa0JBQWtCO0lBQ2xCOzs7O0tBSUMsR0FDRFcsYUFBYXZDLEdBQUcsRUFBRTtRQUNkLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU11QyxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsRUFBRUgsT0FBTyxpQ0FBaUMsRUFBRS9DLGlCQUFpQk8sSUFBSTRDLE1BQU0sRUFBRSxZQUFZLENBQUM7SUFDOUk7SUFDQTs7OztLQUlDLEdBQ0RDLFdBQVc3QyxHQUFHLEVBQUU7UUFDWixNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNMEMsSUFBSSxFQUFFLGVBQWUsRUFBRSxFQUFFTixPQUFPLEdBQUcsRUFBRXpDLFFBQVFDLEtBQUssaUNBQWlDLEVBQUVQLGlCQUFpQk8sSUFBSStDLE9BQU8sRUFBRSxhQUFhLENBQUM7SUFDL0o7SUFDQTs7OztLQUlDLEdBQ0RDLGFBQWFoRCxHQUFHLEVBQUU7UUFDZCxNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNNkMsR0FBRyxFQUFFLGlCQUFpQixFQUFFLEVBQUVULE9BQU8sR0FBRyxFQUFFekMsUUFBUUMsS0FBSyxnQ0FBZ0MsRUFBRVAsaUJBQWlCTyxJQUFJa0QsS0FBSyxFQUFFLFdBQVcsQ0FBQztJQUMzSjtJQUNBOzs7O0tBSUMsR0FDREMsV0FBV25ELEdBQUcsRUFBRTtRQUNaLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkMsTUFBTTRDLFNBQVMsYUFBYTVDLElBQUk0QyxNQUFNLEdBQ2hDO1lBQUVRLFNBQVNwRCxJQUFJNEMsTUFBTSxDQUFDUSxPQUFPLENBQUN2QixHQUFHLENBQUMsQ0FBQ3dCLElBQU1BLEVBQUVDLElBQUk7UUFBSSxJQUNuRHRELElBQUk0QyxNQUFNO1FBQ2hCSCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU11QyxLQUFLLEVBQUUsZUFBZSxFQUFFLEVBQUVILE9BQU8sK0JBQStCLEVBQUUvQyxpQkFBaUJtRCxRQUFRLFlBQVksQ0FBQztJQUN0STtJQUNBOzs7O0tBSUMsR0FDRFcsU0FBU3ZELEdBQUcsRUFBRTtRQUNWLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU0wQyxJQUFJLEVBQUUsYUFBYSxFQUFFLEVBQUVOLE9BQU8sR0FBRyxFQUFFekMsUUFBUUMsS0FBSywrQkFBK0IsRUFBRVAsaUJBQWlCTyxJQUFJK0MsT0FBTyxFQUFFLGNBQWMsQ0FBQztJQUM1SjtJQUNBOzs7O0tBSUMsR0FDRFMsV0FBV3hELEdBQUcsRUFBRTtRQUNaLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU02QyxHQUFHLEVBQUUsZUFBZSxFQUFFLEVBQUVULE9BQU8sR0FBRyxFQUFFekMsUUFBUUMsS0FBSyw4QkFBOEIsRUFBRVAsaUJBQWlCTyxJQUFJa0QsS0FBSyxFQUFFLFdBQVcsQ0FBQztJQUN2SjtJQUNBOzs7O0tBSUMsR0FDRE8sWUFBWXpELEdBQUcsRUFBRTtRQUNiLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU11QyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRUgsT0FBTyxpQ0FBaUMsRUFBRXhDLElBQUk0QyxNQUFNLENBQUNjLEtBQUssRUFBRUosT0FBTyxDQUFDLENBQUM7SUFDOUg7SUFDQTs7OztLQUlDLEdBQ0RLLFVBQVUzRCxHQUFHLEVBQUU7UUFDWCxNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNMEMsSUFBSSxFQUFFLGNBQWMsRUFBRSxFQUFFTixPQUFPLEdBQUcsRUFBRXpDLFFBQVFDLEtBQUssaUNBQWlDLEVBQUVBLElBQUkrQyxPQUFPLEVBQUVhLFFBQVFOLE9BQU8sQ0FBQyxDQUFDO0lBQ2hKO0lBQ0E7Ozs7S0FJQyxHQUNETyxZQUFZN0QsR0FBRyxFQUFFO1FBQ2IsTUFBTXdDLFNBQVMsSUFBSSxDQUFDZCxjQUFjLENBQUMxQjtRQUNuQ3lDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEVBQUV0RCxLQUFLZ0IsTUFBTTZDLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxFQUFFVCxPQUFPLEdBQUcsRUFBRXpDLFFBQVFDLEtBQUssK0JBQStCLEVBQUVQLGlCQUFpQk8sSUFBSWtELEtBQUssRUFBRSxXQUFXLENBQUM7SUFDeko7SUFDQTs7OztLQUlDLEdBQ0RZLGlCQUFpQjlELEdBQUcsRUFBRTtRQUNsQixNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNdUMsS0FBSyxFQUFFLHFCQUFxQixFQUFFLEVBQUVILE9BQU8scUNBQXFDLEVBQUUvQyxpQkFBaUJPLElBQUk0QyxNQUFNLEVBQUUsWUFBWSxDQUFDO0lBQ3RKO0lBQ0E7Ozs7S0FJQyxHQUNEbUIsZUFBZS9ELEdBQUcsRUFBRTtRQUNoQixNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNMEMsSUFBSSxFQUFFLG1CQUFtQixFQUFFLEVBQUVOLE9BQU8sR0FBRyxFQUFFekMsUUFBUUMsS0FBSyxxQ0FBcUMsRUFBRVAsaUJBQWlCTyxJQUFJK0MsT0FBTyxFQUFFLGFBQWEsQ0FBQztJQUN2SztJQUNBOzs7O0tBSUMsR0FDRGlCLGlCQUFpQmhFLEdBQUcsRUFBRTtRQUNsQixNQUFNd0MsU0FBUyxJQUFJLENBQUNkLGNBQWMsQ0FBQzFCO1FBQ25DeUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsRUFBRXRELEtBQUtnQixNQUFNNkMsR0FBRyxFQUFFLHFCQUFxQixFQUFFLEVBQUVULE9BQU8sR0FBRyxFQUFFekMsUUFBUUMsS0FBSyxvQ0FBb0MsRUFBRVAsaUJBQWlCTyxJQUFJa0QsS0FBSyxFQUFFLFdBQVcsQ0FBQztJQUNuSztJQUNBOzs7O0tBSUMsR0FDRGUsY0FBY2pFLEdBQUcsRUFBRTtRQUNmLE1BQU1rRSxXQUFXbEU7UUFDakIsTUFBTXdDLFNBQVMsSUFBSSxDQUFDZCxjQUFjLENBQUMxQjtRQUNuQ3lDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLEVBQUV0RCxLQUFLZ0IsTUFBTStELElBQUksRUFBRSxrQkFBa0IsRUFBRSxFQUFFM0IsT0FBTyx5QkFBeUIsRUFBRS9DLGlCQUFpQnlFLFNBQVNFLE9BQU8sQ0FBQ0YsU0FBU0UsT0FBTyxDQUFDakMsTUFBTSxHQUFHLEVBQUUsRUFBRSxZQUFZLENBQUM7SUFDeks7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzPzk1NTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0eWxlcyBmcm9tIFwiYW5zaS1zdHlsZXNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5mdW5jdGlvbiB3cmFwKHN0eWxlLCB0ZXh0KSB7XG4gICAgcmV0dXJuIGAke3N0eWxlLm9wZW59JHt0ZXh0fSR7c3R5bGUuY2xvc2V9YDtcbn1cbmZ1bmN0aW9uIHRyeUpzb25TdHJpbmdpZnkob2JqLCBmYWxsYmFjaykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG59XG5mdW5jdGlvbiBlbGFwc2VkKHJ1bikge1xuICAgIGlmICghcnVuLmVuZF90aW1lKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICBjb25zdCBlbGFwc2VkID0gcnVuLmVuZF90aW1lIC0gcnVuLnN0YXJ0X3RpbWU7XG4gICAgaWYgKGVsYXBzZWQgPCAxMDAwKSB7XG4gICAgICAgIHJldHVybiBgJHtlbGFwc2VkfW1zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAkeyhlbGFwc2VkIC8gMTAwMCkudG9GaXhlZCgyKX1zYDtcbn1cbmNvbnN0IHsgY29sb3IgfSA9IHN0eWxlcztcbi8qKlxuICogQSB0cmFjZXIgdGhhdCBsb2dzIGFsbCBldmVudHMgdG8gdGhlIGNvbnNvbGUuIEl0IGV4dGVuZHMgZnJvbSB0aGVcbiAqIGBCYXNlVHJhY2VyYCBjbGFzcyBhbmQgb3ZlcnJpZGVzIGl0cyBtZXRob2RzIHRvIHByb3ZpZGUgY3VzdG9tIGxvZ2dpbmdcbiAqIGZ1bmN0aW9uYWxpdHkuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICpcbiAqIGNvbnN0IGxsbSA9IG5ldyBDaGF0QW50aHJvcGljKHtcbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIHRhZ3M6IFtcImV4YW1wbGVcIiwgXCJjYWxsYmFja3NcIiwgXCJjb25zdHJ1Y3RvclwiXSxcbiAqICAgY2FsbGJhY2tzOiBbbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKV0sXG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcIlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gcGVyc2lzdCB0aGUgcnVuLiBJbiB0aGlzIGNhc2UsIGl0IHNpbXBseSByZXR1cm5zIGFcbiAgICAgKiByZXNvbHZlZCBwcm9taXNlIGFzIHRoZXJlJ3Mgbm8gcGVyc2lzdGVuY2UgbG9naWMuXG4gICAgICogQHBhcmFtIF9ydW4gVGhlIHJ1biB0byBwZXJzaXN0LlxuICAgICAqIEByZXR1cm5zIEEgcmVzb2x2ZWQgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvLyB1dGlsaXR5IG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYWxsIHRoZSBwYXJlbnQgcnVucyBvZiBhIGdpdmVuIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgcGFyZW50cyBhcmUgdG8gYmUgcmV0cmlldmVkLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHBhcmVudCBydW5zLlxuICAgICAqL1xuICAgIGdldFBhcmVudHMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnRSdW4gPSBydW47XG4gICAgICAgIHdoaWxlIChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucnVuTWFwLmdldChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRSdW4gPSBwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW4ncyBsaW5lYWdlLCB3aGljaFxuICAgICAqIGlzIHVzZWQgaW4gbG9nZ2luZy5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgbGluZWFnZSBpcyB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UuXG4gICAgICovXG4gICAgZ2V0QnJlYWRjcnVtYnMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLmdldFBhcmVudHMocnVuKS5yZXZlcnNlKCk7XG4gICAgICAgIGNvbnN0IHN0cmluZyA9IFsuLi5wYXJlbnRzLCBydW5dXG4gICAgICAgICAgICAubWFwKChwYXJlbnQsIGksIGFycikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke3BhcmVudC5leGVjdXRpb25fb3JkZXJ9OiR7cGFyZW50LnJ1bl90eXBlfToke3BhcmVudC5uYW1lfWA7XG4gICAgICAgICAgICByZXR1cm4gaSA9PT0gYXJyLmxlbmd0aCAtIDEgPyB3cmFwKHN0eWxlcy5ib2xkLCBuYW1lKSA6IG5hbWU7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIiA+IFwiKTtcbiAgICAgICAgcmV0dXJuIHdyYXAoY29sb3IuZ3JleSwgc3RyaW5nKTtcbiAgICB9XG4gICAgLy8gbG9nZ2luZyBtZXRob2RzXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpblN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2NoYWluL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgQ2hhaW4gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltjaGFpbi9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIENoYWluIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltvdXRwdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSBjaGFpbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgY2hhaW4gcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbY2hhaW4vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBDaGFpbiBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gXCJwcm9tcHRzXCIgaW4gcnVuLmlucHV0c1xuICAgICAgICAgICAgPyB7IHByb21wdHM6IHJ1bi5pbnB1dHMucHJvbXB0cy5tYXAoKHApID0+IHAudHJpbSgpKSB9XG4gICAgICAgICAgICA6IHJ1bi5pbnB1dHM7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2xsbS9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIExMTSBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KGlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2xsbS9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIExMTSBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbcmVzcG9uc2VdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbbGxtL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gTExNIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3Rvb2wvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBUb29sIHJ1biB3aXRoIGlucHV0OiBcIiR7cnVuLmlucHV0cy5pbnB1dD8udHJpbSgpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3Rvb2wvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBUb29sIHJ1biB3aXRoIG91dHB1dDogXCIke3J1bi5vdXRwdXRzPy5vdXRwdXQ/LnRyaW0oKX1cImApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIlt0b29sL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gVG9vbCBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYSByZXRyaWV2ZXIgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltyZXRyaWV2ZXIvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBSZXRyaWV2ZXIgcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltyZXRyaWV2ZXIvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBSZXRyaWV2ZXIgcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltyZXRyaWV2ZXIvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBSZXRyaWV2ZXIgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGFjdGlvbiBzZWxlY3RlZCBieSB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcnVuIGluIHdoaWNoIHRoZSBhZ2VudCBhY3Rpb24gb2NjdXJyZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQWdlbnRBY3Rpb24ocnVuKSB7XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuYmx1ZSwgXCJbYWdlbnQvYWN0aW9uXVwiKX0gWyR7Y3J1bWJzfV0gQWdlbnQgc2VsZWN0ZWQgYWN0aW9uOiAke3RyeUpzb25TdHJpbmdpZnkoYWdlbnRSdW4uYWN0aW9uc1thZ2VudFJ1bi5hY3Rpb25zLmxlbmd0aCAtIDFdLCBcIlthY3Rpb25dXCIpfWApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJzdHlsZXMiLCJCYXNlVHJhY2VyIiwid3JhcCIsInN0eWxlIiwidGV4dCIsIm9wZW4iLCJjbG9zZSIsInRyeUpzb25TdHJpbmdpZnkiLCJvYmoiLCJmYWxsYmFjayIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnIiLCJlbGFwc2VkIiwicnVuIiwiZW5kX3RpbWUiLCJzdGFydF90aW1lIiwidG9GaXhlZCIsImNvbG9yIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInBlcnNpc3RSdW4iLCJfcnVuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRQYXJlbnRzIiwicGFyZW50cyIsImN1cnJlbnRSdW4iLCJwYXJlbnRfcnVuX2lkIiwicGFyZW50IiwicnVuTWFwIiwiZ2V0IiwicHVzaCIsImdldEJyZWFkY3J1bWJzIiwicmV2ZXJzZSIsInN0cmluZyIsIm1hcCIsImkiLCJhcnIiLCJuYW1lIiwiZXhlY3V0aW9uX29yZGVyIiwicnVuX3R5cGUiLCJsZW5ndGgiLCJib2xkIiwiam9pbiIsImdyZXkiLCJvbkNoYWluU3RhcnQiLCJjcnVtYnMiLCJjb25zb2xlIiwibG9nIiwiZ3JlZW4iLCJpbnB1dHMiLCJvbkNoYWluRW5kIiwiY3lhbiIsIm91dHB1dHMiLCJvbkNoYWluRXJyb3IiLCJyZWQiLCJlcnJvciIsIm9uTExNU3RhcnQiLCJwcm9tcHRzIiwicCIsInRyaW0iLCJvbkxMTUVuZCIsIm9uTExNRXJyb3IiLCJvblRvb2xTdGFydCIsImlucHV0Iiwib25Ub29sRW5kIiwib3V0cHV0Iiwib25Ub29sRXJyb3IiLCJvblJldHJpZXZlclN0YXJ0Iiwib25SZXRyaWV2ZXJFbmQiLCJvblJldHJpZXZlckVycm9yIiwib25BZ2VudEFjdGlvbiIsImFnZW50UnVuIiwiYmx1ZSIsImFjdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/initialize.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/initialize.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTracingCallbackHandler: () => (/* binding */ getTracingCallbackHandler),\n/* harmony export */   getTracingV2CallbackHandler: () => (/* binding */ getTracingV2CallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer_langchain.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer_langchain_v1.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\");\n\n\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */ async function getTracingCallbackHandler(session) {\n    const tracer = new _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__.LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    } else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */ async function getTracingV2CallbackHandler() {\n    return new _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__.LangChainTracer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2luaXRpYWxpemUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNLO0FBQzdEOzs7Ozs7OztDQVFDLEdBQ00sZUFBZUUsMEJBQTBCQyxPQUFPO0lBQ25ELE1BQU1DLFNBQVMsSUFBSUgsc0VBQWlCQTtJQUNwQyxJQUFJRSxTQUFTO1FBQ1QsTUFBTUMsT0FBT0MsV0FBVyxDQUFDRjtJQUM3QixPQUNLO1FBQ0QsTUFBTUMsT0FBT0Usa0JBQWtCO0lBQ25DO0lBQ0EsT0FBT0Y7QUFDWDtBQUNBOzs7O0NBSUMsR0FDTSxlQUFlRztJQUNsQixPQUFPLElBQUlQLGlFQUFlQTtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9pbml0aWFsaXplLmpzPzYzOGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyIH0gZnJvbSBcIi4vdHJhY2VyX2xhbmdjaGFpbi5qc1wiO1xuaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyVjEgfSBmcm9tIFwiLi90cmFjZXJfbGFuZ2NoYWluX3YxLmpzXCI7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSB0aGUgVjIgaGFuZGxlciBpbnN0ZWFkLlxuICpcbiAqIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyVjFgLiBJZiBhIHNlc3Npb25cbiAqIGlzIHByb3ZpZGVkLCBpdCBsb2FkcyB0aGF0IHNlc3Npb24gaW50byB0aGUgdHJhY2VyOyBvdGhlcndpc2UsIGl0IGxvYWRzXG4gKiBhIGRlZmF1bHQgc2Vzc2lvbi5cbiAqIEBwYXJhbSBzZXNzaW9uIE9wdGlvbmFsIHNlc3Npb24gdG8gbG9hZCBpbnRvIHRoZSB0cmFjZXIuXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyVjFgLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhY2luZ0NhbGxiYWNrSGFuZGxlcihzZXNzaW9uKSB7XG4gICAgY29uc3QgdHJhY2VyID0gbmV3IExhbmdDaGFpblRyYWNlclYxKCk7XG4gICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdHJhY2VyLmxvYWRTZXNzaW9uKHNlc3Npb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXdhaXQgdHJhY2VyLmxvYWREZWZhdWx0U2Vzc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhY2VyO1xufVxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgYExhbmdDaGFpblRyYWNlcmAuIEl0IGRvZXMgbm90XG4gKiBsb2FkIGFueSBzZXNzaW9uIGRhdGEuXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyYC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlcigpIHtcbiAgICByZXR1cm4gbmV3IExhbmdDaGFpblRyYWNlcigpO1xufVxuIl0sIm5hbWVzIjpbIkxhbmdDaGFpblRyYWNlciIsIkxhbmdDaGFpblRyYWNlclYxIiwiZ2V0VHJhY2luZ0NhbGxiYWNrSGFuZGxlciIsInNlc3Npb24iLCJ0cmFjZXIiLCJsb2FkU2Vzc2lvbiIsImxvYWREZWZhdWx0U2Vzc2lvbiIsImdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/initialize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_index_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk(token);\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL2xvZ19zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRTtBQUN6QjtBQUNxQjtBQUNOO0FBQ3REOzs7Ozs7Q0FNQyxHQUNNLE1BQU1JO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxPQUFPO1lBQy9CQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLEdBQUcsR0FBR1AsT0FBT08sR0FBRyxJQUFJLEVBQUU7SUFDL0I7SUFDQUMsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsTUFBTUYsTUFBTSxJQUFJLENBQUNBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNRixHQUFHO1FBQ3JDLE1BQU1HLFNBQVNoQiwyRUFBVUEsQ0FBQyxDQUFDLEdBQUdhO1FBQzlCLG1FQUFtRTtRQUNuRSxPQUFPLElBQUlJLE9BQU87WUFDZEo7WUFDQUssT0FBT0YsTUFBTSxDQUFDQSxPQUFPRyxNQUFNLEdBQUcsRUFBRSxDQUFDQyxXQUFXO1FBQ2hEO0lBQ0o7QUFDSjtBQUNPLE1BQU1ILGVBQWViO0lBQ3hCQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ00sS0FBSyxHQUFHWixPQUFPWSxLQUFLO0lBQzdCO0lBQ0FKLE9BQU9DLEtBQUssRUFBRTtRQUNWLE1BQU1GLE1BQU0sSUFBSSxDQUFDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTUYsR0FBRztRQUNyQyxNQUFNRyxTQUFTaEIsMkVBQVVBLENBQUMsSUFBSSxD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LEtBQUssRUFBRUMsTUFBTSxFQUFFO1FBQ3BDLE1BQU1MLFVBQVUsSUFBSSxDQUFDcEIsYUFBYSxDQUFDbEQsSUFBSXFDLEVBQUUsQ0FBQztRQUMxQyxJQUFJaUMsWUFBWTlELFdBQVc7WUFDdkI7UUFDSjtRQUNBLG9CQUFvQjtRQUNwQixNQUFNb0UsY0FBYzVFLElBQUlHLE1BQU0sQ0FBQzBFLFFBQVEsS0FBS3JFO1FBQzVDLElBQUlzRTtRQUNKLElBQUlGLGFBQWE7WUFDYixJQUFJaEUsc0JBQXNCK0QsUUFBUTNCLFFBQVE7Z0JBQ3RDOEIsc0JBQXNCSCxRQUFRM0I7WUFDbEMsT0FDSztnQkFDRDhCLHNCQUFzQixJQUFJbkcsOERBQWNBLENBQUMrRjtZQUM3QztRQUNKLE9BQ0s7WUFDREksc0JBQXNCSjtRQUMxQjtRQUNBLE1BQU01RSxRQUFRLElBQUlsQixZQUFZO1lBQzFCUyxLQUFLO2dCQUNEO29CQUNJK0QsSUFBSTtvQkFDSkMsTUFBTSxDQUFDLE1BQU0sRUFBRWlCLFFBQVEsc0JBQXNCLENBQUM7b0JBQzlDbEYsT0FBT3NGO2dCQUNYO2dCQUNBO29CQUNJdEIsSUFBSTtvQkFDSkMsTUFBTSxDQUFDLE1BQU0sRUFBRWlCLFFBQVEsa0JBQWtCLENBQUM7b0JBQzFDbEYsT0FBTzBGO2dCQUNYO2FBQ0g7UUFDTDtRQUNBLE1BQU0sSUFBSSxDQUFDbkQsTUFBTSxDQUFDd0IsS0FBSyxDQUFDckQ7SUFDNUI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzPzUwZGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBwbHlQYXRjaCwgfSBmcm9tIFwiLi4vdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG4vKipcbiAqIExpc3Qgb2YganNvbnBhdGNoIEpTT05QYXRjaE9wZXJhdGlvbnMsIHdoaWNoIGRlc2NyaWJlIGhvdyB0byBjcmVhdGUgdGhlIHJ1biBzdGF0ZVxuICogZnJvbSBhbiBlbXB0eSBkaWN0LiBUaGlzIGlzIHRoZSBtaW5pbWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBsb2csIGRlc2lnbmVkIHRvXG4gKiBiZSBzZXJpYWxpemVkIGFzIEpTT04gYW5kIHNlbnQgb3ZlciB0aGUgd2lyZSB0byByZWNvbnN0cnVjdCB0aGUgbG9nIG9uIHRoZSBvdGhlclxuICogc2lkZS4gUmVjb25zdHJ1Y3Rpb24gb2YgdGhlIHN0YXRlIGNhbiBiZSBkb25lIHdpdGggYW55IGpzb25wYXRjaC1jb21wbGlhbnQgbGlicmFyeSxcbiAqIHNlZSBodHRwczovL2pzb25wYXRjaC5jb20gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Mb2dQYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wcyA9IGZpZWxkcy5vcHMgPz8gW107XG4gICAgfVxuICAgIGNvbmNhdChvdGhlcikge1xuICAgICAgICBjb25zdCBvcHMgPSB0aGlzLm9wcy5jb25jYXQob3RoZXIub3BzKTtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh7fSwgb3BzKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7XG4gICAgICAgICAgICBvcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkxvZyBleHRlbmRzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGZpZWxkcy5zdGF0ZTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHRoaXMuc3RhdGUsIG90aGVyLm9wcyk7XG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHsgb3BzLCBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCB9KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SdW5Mb2dQYXRjaChwYXRjaCkge1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBwYXRjaC5vcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wczogcGF0Y2gub3BzLFxuICAgICAgICAgICAgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBzdGFuZGFyZGl6ZWQgaW5wdXRzIGZyb20gYSBydW4uXG4gKlxuICogU3RhbmRhcmRpemVzIHRoZSBpbnB1dHMgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHJ1bm5hYmxlIHVzZWQuXG4gKlxuICogQHBhcmFtIHJ1biAtIFJ1biBvYmplY3RcbiAqIEBwYXJhbSBzY2hlbWFGb3JtYXQgLSBUaGUgc2NoZW1hIGZvcm1hdCB0byB1c2UuXG4gKlxuICogQHJldHVybnMgVmFsaWQgaW5wdXRzIGFyZSBvbmx5IGRpY3QuIEJ5IGNvbnZlbnRpb25zLCBpbnB1dHMgYWx3YXlzIHJlcHJlc2VudGVkXG4gKiBpbnZvY2F0aW9uIHVzaW5nIG5hbWVkIGFyZ3VtZW50cy5cbiAqIEEgbnVsbCBtZWFucyB0aGF0IHRoZSBpbnB1dCBpcyBub3QgeWV0IGtub3duIVxuICovXG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBhc3NpZ24gaW5wdXRzIHdpdGggb3JpZ2luYWwgc2NoZW1hIGRyb3AgdGhlIGtleSBmb3Igbm93LiBcIiArXG4gICAgICAgICAgICBcIldoZW4gaW5wdXRzIGFyZSBhZGRlZCB0byBzdHJlYW1Mb2cgdGhleSBzaG91bGQgYmUgYWRkZWQgd2l0aCBcIiArXG4gICAgICAgICAgICBcInN0YW5kYXJkaXplZCBzY2hlbWEgZm9yIHN0cmVhbWluZyBldmVudHMuXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IGlucHV0cyB9ID0gcnVuO1xuICAgIGlmIChbXCJyZXRyaWV2ZXJcIiwgXCJsbG1cIiwgXCJwcm9tcHRcIl0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkge1xuICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEgJiYgaW5wdXRzPy5pbnB1dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBuZXcgc3R5bGUgY2hhaW5zXG4gICAgLy8gVGhlc2UgbmVzdCBhbiBhZGRpdGlvbmFsICdpbnB1dCcga2V5IGluc2lkZSB0aGUgJ2lucHV0cycgdG8gbWFrZSBzdXJlXG4gICAgLy8gdGhlIGlucHV0IGlzIGFsd2F5cyBhIGRpY3QuIFdlIG5lZWQgdG8gdW5wYWNrIGFuZCB1c2VyIHRoZSBpbm5lciB2YWx1ZS5cbiAgICAvLyBXZSBzaG91bGQgdHJ5IHRvIGZpeCB0aGlzIGluIFJ1bm5hYmxlcyBhbmQgY2FsbGJhY2tzL3RyYWNlcnNcbiAgICAvLyBSdW5uYWJsZXMgc2hvdWxkIGJlIHVzaW5nIGEgbnVsbCB0eXBlIGhlcmUgbm90IGEgcGxhY2Vob2xkZXJcbiAgICAvLyBkaWN0LlxuICAgIHJldHVybiBpbnB1dHMuaW5wdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuICAgIGNvbnN0IHsgb3V0cHV0cyB9ID0gcnVuO1xuICAgIGlmIChzY2hlbWFGb3JtYXQgPT09IFwib3JpZ2luYWxcIikge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIG9sZCBzY2hlbWEsIHdpdGhvdXQgc3RhbmRhcmRpemluZyBhbnl0aGluZ1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNreSBjaGVja1xuICAgIGlmIChvdXRwdXRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgT2JqZWN0LmtleXMob3V0cHV0cykubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG91dHB1dHM/Lm91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzLm91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dHM7XG59XG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuICAgIHJldHVybiB4ICE9PSB1bmRlZmluZWQgJiYgeC5tZXNzYWdlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4gKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4gKiBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXhlY3V0aW9uIG9mIHJ1bnMgYW5kIGVtaXRzIGBSdW5Mb2dgIGluc3RhbmNlcyB0byBhXG4gKiBgUnVuTG9nU3RyZWFtYC5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3NjaGVtYUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJvcmlnaW5hbFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5TWFwQnlSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvdW50ZXJNYXBCeVJ1bk5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsb2dfc3RyZWFtX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzPy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzPy5pbmNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcz8uZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcz8uZXhjbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcbiAgICAgICAgdGhpcy5fc2NoZW1hRm9ybWF0ID0gZmllbGRzPy5fc2NoZW1hRm9ybWF0ID8/IHRoaXMuX3NjaGVtYUZvcm1hdDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XG4gICAgICAgIHRoaXMud3JpdGVyID0gdGhpcy50cmFuc2Zvcm1TdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZVN0cmVhbSA9IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKHRoaXMudHJhbnNmb3JtU3RyZWFtLnJlYWRhYmxlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZVN0cmVhbTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAgICAvLyBhbmQgaXMgdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgIH1cbiAgICBfaW5jbHVkZVJ1bihydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgcnVuVGFncy5maW5kKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgcnVuVGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxuICAgIGFzeW5jICp0YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgb3V0cHV0KSB7XG4gICAgICAgIC8vIFRhcCBhbiBvdXRwdXQgYXN5bmMgaXRlcmF0b3IgdG8gc3RyZWFtIGl0cyB2YWx1ZXMgdG8gdGhlIGxvZy5cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBvdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgcnVuIGlzIGhhbmRsZWQgaW4gLnN0cmVhbUxvZygpXG4gICAgICAgICAgICBpZiAocnVuSWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgY2FuJ3QgZmluZCB0aGUgcnVuIHNpbGVudGx5IGlnbm9yZVxuICAgICAgICAgICAgICAgIC8vIGVnLiBiZWNhdXNlIHRoaXMgcnVuIHdhc24ndCBpbmNsdWRlZCBpbiB0aGUgbG9nXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bklkXTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtrZXl9L3N0cmVhbWVkX291dHB1dC8tYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdICs9IDE7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXTtcbiAgICAgICAgdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF0gPVxuICAgICAgICAgICAgY291bnQgPT09IDEgPyBydW4ubmFtZSA6IGAke3J1bi5uYW1lfToke2NvdW50fWA7XG4gICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHJ1bi5zdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dF9zdHI6IFtdLFxuICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRfdGltZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgbG9nRW50cnkuaW5wdXRzID0gYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3RoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdfWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dFbnRyeSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2lucHV0c2AsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9maW5hbF9vdXRwdXRgLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChydW4uZW5kX3RpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2VuZF90aW1lYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9maW5hbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNTmV3VG9rZW4ocnVuLCB0b2tlbiwga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBoYWNrXG4gICAgICAgIGNvbnN0IGlzQ2hhdE1vZGVsID0gcnVuLmlucHV0cy5tZXNzYWdlcyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3RyZWFtZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgaWYgKGlzQ2hhdE1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGF0R2VuZXJhdGlvbkNodW5rKGt3YXJncz8uY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IGt3YXJncz8uY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gbmV3IEFJTWVzc2FnZUNodW5rKHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXRfc3RyLy1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9rZW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXQvLWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdHJlYW1lZE91dHB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJhcHBseVBhdGNoIiwiQmFzZVRyYWNlciIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJBSU1lc3NhZ2VDaHVuayIsIlJ1bkxvZ1BhdGNoIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwib3BzIiwiY29uY2F0Iiwib3RoZXIiLCJzdGF0ZXMiLCJSdW5Mb2ciLCJzdGF0ZSIsImxlbmd0aCIsIm5ld0RvY3VtZW50IiwiZnJvbVJ1bkxvZ1BhdGNoIiwicGF0Y2giLCJfZ2V0U3RhbmRhcmRpemVkSW5wdXRzIiwicnVuIiwic2NoZW1hRm9ybWF0IiwiRXJyb3IiLCJpbnB1dHMiLCJpbmNsdWRlcyIsInJ1bl90eXBlIiwia2V5cyIsImlucHV0IiwidW5kZWZpbmVkIiwiX2dldFN0YW5kYXJkaXplZE91dHB1dHMiLCJvdXRwdXRzIiwib3V0cHV0IiwiaXNDaGF0R2VuZXJhdGlvbkNodW5rIiwieCIsIm1lc3NhZ2UiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJfYXdhaXRIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsIl9zY2hlbWFGb3JtYXQiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsImlkIiwicm9vdElkIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwibmFtZSIsImZpbmQiLCJ0YWciLCJldmVyeSIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJjaHVuayIsImtleSIsImtleU1hcEJ5UnVuSWQiLCJ3cml0ZSIsIm9wIiwicGF0aCIsIm9uUnVuQ3JlYXRlIiwidHlwZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImxvZ3MiLCJjb3VudGVyTWFwQnlSdW5OYW1lIiwiY291bnQiLCJsb2dFbnRyeSIsIm1ldGFkYXRhIiwiZXh0cmEiLCJzdGFydF90aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3RyZWFtZWRfb3V0cHV0X3N0ciIsImVuZF90aW1lIiwib25SdW5VcGRhdGUiLCJydW5OYW1lIiwicHVzaCIsImNsb3NlIiwib25MTE1OZXdUb2tlbiIsInRva2VuIiwia3dhcmdzIiwiaXNDaGF0TW9kZWwiLCJtZXNzYWdlcyIsInN0cmVhbWVkT3V0cHV0VmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBdUM7QUFDaEMsTUFBTUMsNEJBQTRCRCxnREFBVUE7SUFDL0NFLFlBQVksRUFBRUMsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFHLENBQUU7UUFDOUMsS0FBSyxDQUFDO1lBQUVDLGVBQWU7UUFBSztRQUM1QkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSw0QkFBNEIsR0FDNUJMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDVixNQUFNLEdBQUdBO1FBQ2QsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO1FBQ2xCLElBQUksQ0FBQ1csUUFBUSxHQUFHVjtRQUNoQixJQUFJLENBQUNXLFVBQVUsR0FBR1Y7SUFDdEI7SUFDQTs7OztLQUlDLEdBQ0RXLFdBQVdDLENBQUMsRUFBRTtRQUNWLE9BQU9DLFFBQVFDLE9BQU87SUFDMUI7SUFDQSxNQUFNQyxZQUFZQyxHQUFHLEVBQUU7UUFDbkIsSUFBSSxJQUFJLENBQUNDLE1BQU0sRUFBRTtZQUNiO1FBQ0o7UUFDQSxJQUFJLENBQUNBLE1BQU0sR0FBR0QsSUFBSUUsRUFBRTtRQUNwQixJQUFJLElBQUksQ0FBQ1YsVUFBVSxFQUFFO1lBQ2pCLElBQUksSUFBSSxDQUFDQSxVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUM5QixNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUTtZQUMxQixPQUNLLElBQUksSUFBSSxDQUFDUixVQUFVLENBQUNXLE1BQU0sS0FBSyxHQUFHO2dCQUNuQyxNQUFNLElBQUksQ0FBQ1gsVUFBVSxDQUFDUSxLQUFLLElBQUksQ0FBQ25CLE1BQU07WUFDMUM7UUFDSjtJQUNKO0lBQ0EsTUFBTXVCLFlBQVlKLEdBQUcsRUFBRTtRQUNuQixJQUFJQSxJQUFJRSxFQUFFLEtBQUssSUFBSSxDQUFDRCxNQUFNLEVBQUU7WUFDeEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsSUFBSUssS0FBSyxFQUFFO1lBQ1osSUFBSSxJQUFJLENBQUNaLFFBQVEsRUFBRTtnQkFDZixJQUFJLElBQUksQ0FBQ0EsUUFBUSxDQUFDVSxNQUFNLEtBQUssR0FBRztvQkFDNUIsTUFBTSxJQUFJLENBQUNWLFFBQVEsQ0FBQ087Z0JBQ3hCLE9BQ0ssSUFBSSxJQUFJLENBQUNQLFFBQVEsQ0FBQ1UsTUFBTSxLQUFLLEdBQUc7b0JBQ2pDLE1BQU0sSUFBSSxDQUFDVixRQUFRLENBQUNPLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtnQkFDeEM7WUFDSjtRQUNKLE9BQ0ssSUFBSSxJQUFJLENBQUNhLFVBQVUsRUFBRTtZQUN0QixJQUFJLElBQUksQ0FBQ0EsVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDOUIsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ007WUFDMUIsT0FDSyxJQUFJLElBQUksQ0FBQ04sVUFBVSxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDbkMsTUFBTSxJQUFJLENBQUNULFVBQVUsQ0FBQ00sS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQzFDO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanM/ZTgzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIFJvb3RMaXN0ZW5lcnNUcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbmZpZywgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgc3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlJvb3RMaXN0ZW5lcnNUcmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBSdW4ncyBJRC4gVHlwZSBVVUlEICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvb3RJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25TdGFydFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVycm9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmFyZ09uU3RhcnQgPSBvblN0YXJ0O1xuICAgICAgICB0aGlzLmFyZ09uRW5kID0gb25FbmQ7XG4gICAgICAgIHRoaXMuYXJnT25FcnJvciA9IG9uRXJyb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAqIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICAgKiBAcGFyYW0ge1J1bn0gXyBOb3QgdXNlZFxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oXykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBpZiAodGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW4uZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FbmQocnVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVuZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhY2VyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsIl9hd2FpdEhhbmRsZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJnT25TdGFydCIsImFyZ09uRW5kIiwiYXJnT25FcnJvciIsInBlcnNpc3RSdW4iLCJfIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvblJ1bkNyZWF0ZSIsInJ1biIsInJvb3RJZCIsImlkIiwibGVuZ3RoIiwib25SdW5VcGRhdGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtQztBQUM2QztBQUN6QztBQUNoQyxNQUFNSSx3QkFBd0JELGdEQUFVQTtJQUMzQ0UsWUFBWUMsU0FBUyxDQUFDLENBQUMsQ0FBRTtRQUNyQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZUFBZTtZQUN2Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFdBQVcsRUFBRUMsTUFBTSxFQUFFLEdBQUdUO1FBQzNDLElBQUksQ0FBQ1EsV0FBVyxHQUNaQSxlQUNJYixxRUFBc0JBLENBQUMsd0JBQ3ZCQSxxRUFBc0JBLENBQUM7UUFDL0IsSUFBSSxDQUFDWSxTQUFTLEdBQUdBO1FBQ2pCLElBQUksQ0FBQ0UsTUFBTSxHQUFHQSxVQUFVLElBQUlmLDZDQUFNQSxDQUFDLENBQUM7SUFDeEM7SUFDQSxNQUFNZ0IsaUJBQWlCQyxHQUFHLEVBQUVDLGFBQWFDLFNBQVMsRUFBRTtRQUNoRCxPQUFPO1lBQ0gsR0FBR0YsR0FBRztZQUNORyxPQUFPO2dCQUNILEdBQUdILElBQUlHLEtBQUs7Z0JBQ1pDLFNBQVMsTUFBTW5CLG9FQUFxQkE7WUFDeEM7WUFDQW9CLFlBQVlIO1lBQ1pJLGNBQWMsSUFBSSxDQUFDVCxXQUFXO1lBQzlCVSxzQkFBc0JQLElBQUlRLGFBQWEsR0FBR04sWUFBWUQ7UUFDMUQ7SUFDSjtJQUNBLE1BQU1RLFdBQVdDLElBQUksRUFBRSxDQUFFO0lBQ3pCLE1BQU1DLFlBQVlYLEdBQUcsRUFBRTtRQUNuQixNQUFNWSxlQUFlLE1BQU0sSUFBSSxDQUFDYixnQkFBZ0IsQ0FBQ0MsS0FBSyxJQUFJLENBQUNKLFNBQVM7UUFDcEUsTUFBTSxJQUFJLENBQUNFLE1BQU0sQ0FBQ2UsU0FBUyxDQUFDRDtJQUNoQztJQUNBLE1BQU1FLFlBQVlkLEdBQUcsRUFBRTtRQUNuQixNQUFNZSxZQUFZO1lBQ2RDLFVBQVVoQixJQUFJZ0IsUUFBUTtZQUN0QkMsT0FBT2pCLElBQUlpQixLQUFLO1lBQ2hCQyxTQUFTbEIsSUFBSWtCLE9BQU87WUFDcEJDLFFBQVFuQixJQUFJbUIsTUFBTTtZQUNsQkMsUUFBUXBCLElBQUlvQixNQUFNO1lBQ2xCQyxVQUFVckIsSUFBSXFCLFFBQVE7WUFDdEJDLGNBQWN0QixJQUFJc0IsWUFBWTtZQUM5QmQsZUFBZVIsSUFBSVEsYUFBYTtRQUNwQztRQUNBLE1BQU0sSUFBSSxDQUFDVixNQUFNLENBQUN5QixTQUFTLENBQUN2QixJQUFJd0IsRUFBRSxFQUFFVDtJQUN4QztJQUNBVSxPQUFPRCxFQUFFLEVBQUU7UUFDUCxPQUFPLElBQUksQ0FBQ0UsTUFBTSxDQUFDQyxHQUFHLENBQUNIO0lBQzNCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcz8xMzJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUsIGdldFJ1bnRpbWVFbnZpcm9ubWVudCB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgTGFuZ0NoYWluVHJhY2VyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzID0ge30pIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb2plY3ROYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyBleGFtcGxlSWQsIHByb2plY3ROYW1lLCBjbGllbnQgfSA9IGZpZWxkcztcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9XG4gICAgICAgICAgICBwcm9qZWN0TmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fUFJPSkVDVFwiKSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fU0VTU0lPTlwiKTtcbiAgICAgICAgdGhpcy5leGFtcGxlSWQgPSBleGFtcGxlSWQ7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50ID8/IG5ldyBDbGllbnQoe30pO1xuICAgIH1cbiAgICBhc3luYyBfY29udmVydFRvQ3JlYXRlKHJ1biwgZXhhbXBsZV9pZCA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucnVuLFxuICAgICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgICAgICAuLi5ydW4uZXh0cmEsXG4gICAgICAgICAgICAgICAgcnVudGltZTogYXdhaXQgZ2V0UnVudGltZUVudmlyb25tZW50KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hpbGRfcnVuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2Vzc2lvbl9uYW1lOiB0aGlzLnByb2plY3ROYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHJ1bi5wYXJlbnRfcnVuX2lkID8gdW5kZWZpbmVkIDogZXhhbXBsZV9pZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7IH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkUnVuID0gYXdhaXQgdGhpcy5fY29udmVydFRvQ3JlYXRlKHJ1biwgdGhpcy5leGFtcGxlSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5jcmVhdGVSdW4ocGVyc2lzdGVkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blVwZGF0ZSA9IHtcbiAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICBldmVudHM6IHJ1bi5ldmVudHMsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICB0cmFjZV9pZDogcnVuLnRyYWNlX2lkLFxuICAgICAgICAgICAgZG90dGVkX29yZGVyOiBydW4uZG90dGVkX29yZGVyLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcnVuLnBhcmVudF9ydW5faWQsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnVwZGF0ZVJ1bihydW4uaWQsIHJ1blVwZGF0ZSk7XG4gICAgfVxuICAgIGdldFJ1bihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5NYXAuZ2V0KGlkKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQ2xpZW50IiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImdldFJ1bnRpbWVFbnZpcm9ubWVudCIsIkJhc2VUcmFjZXIiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJleGFtcGxlSWQiLCJwcm9qZWN0TmFtZSIsImNsaWVudCIsIl9jb252ZXJ0VG9DcmVhdGUiLCJydW4iLCJleGFtcGxlX2lkIiwidW5kZWZpbmVkIiwiZXh0cmEiLCJydW50aW1lIiwiY2hpbGRfcnVucyIsInNlc3Npb25fbmFtZSIsInJlZmVyZW5jZV9leGFtcGxlX2lkIiwicGFyZW50X3J1bl9pZCIsInBlcnNpc3RSdW4iLCJfcnVuIiwib25SdW5DcmVhdGUiLCJwZXJzaXN0ZWRSdW4iLCJjcmVhdGVSdW4iLCJvblJ1blVwZGF0ZSIsInJ1blVwZGF0ZSIsImVuZF90aW1lIiwiZXJyb3IiLCJvdXRwdXRzIiwiZXZlbnRzIiwiaW5wdXRzIiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJ1cGRhdGVSdW4iLCJpZCIsImdldFJ1biIsInJ1bk1hcCIsImdldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracerV1: () => (/* binding */ LangChainTracerV1)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n/** @deprecated Use LangChainTracer instead. */ class LangChainTracerV1 extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? await this.loadDefaultSession();\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map((x)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs\n            };\n            runResult = llmRun;\n        } else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = chainRun;\n        } else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = toolRun;\n        } else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        } else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        } else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        } else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = await response.json();\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3RyYWNlcl9sYW5nY2hhaW5fdjEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RDtBQUNFO0FBQ2xCO0FBQ3ZDLDZDQUE2QyxHQUN0QyxNQUFNRywwQkFBMEJELGdEQUFVQTtJQUM3Q0UsYUFBYztRQUNWLEtBQUs7UUFDTEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPVCxxRUFBc0JBLENBQUMseUJBQXlCO1FBQzNEO1FBQ0FJLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFDSCxnQkFBZ0I7WUFDcEI7UUFDSjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU1DLFNBQVNWLHFFQUFzQkEsQ0FBQztRQUN0QyxJQUFJVSxRQUFRO1lBQ1IsSUFBSSxDQUFDQyxPQUFPLENBQUMsWUFBWSxHQUFHRDtRQUNoQztJQUNKO0lBQ0EsTUFBTUUsV0FBV0MsV0FBVyxFQUFFO1FBQzFCLE1BQU1DLGdCQUFnQjtZQUNsQkMsWUFBWUMsS0FBS0MsR0FBRztZQUNwQkMsTUFBTUw7UUFDVjtRQUNBLE1BQU1NLFVBQVUsTUFBTSxJQUFJLENBQUNDLGNBQWMsQ0FBQ047UUFDMUMsSUFBSSxDQUFDSyxPQUFPLEdBQUdBO1FBQ2YsT0FBT0E7SUFDWDtJQUNBLE1BQU1FLFlBQVlSLFdBQVcsRUFBRTtRQUMzQixNQUFNUyxXQUFXLENBQUMsRUFBRSxJQUFJLENBQUNBLFFBQVEsQ0FBQyxlQUFlLEVBQUVULFlBQVksQ0FBQztRQUNoRSxPQUFPLElBQUksQ0FBQ1Usc0JBQXNCLENBQUNEO0lBQ3ZDO0lBQ0EsTUFBTUUscUJBQXFCO1FBQ3ZCLE1BQU1GLFdBQVcsQ0FBQyxFQUFFLElBQUksQ0FBQ0EsUUFBUSxDQUFDLHNCQUFzQixDQUFDO1FBQ3pELE9BQU8sSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ0Q7SUFDdkM7SUFDQSxNQUFNRyxrQkFBa0JDLEdBQUcsRUFBRTtRQUN6QixNQUFNUCxVQUFVLElBQUksQ0FBQ0EsT0FBTyxJQUFLLE1BQU0sSUFBSSxDQUFDSyxrQkFBa0I7UUFDOUQsTUFBTUcsYUFBYUQsSUFBSUMsVUFBVTtRQUNqQyxJQUFJQztRQUNKLElBQUlGLElBQUlHLFFBQVEsS0FBSyxPQUFPO1lBQ3hCLE1BQU1DLFVBQVVKLElBQUlLLE1BQU0sQ0FBQ0QsT0FBTyxHQUM1QkosSUFBSUssTUFBTSxDQUFDRCxPQUFPLEdBQ2xCSixJQUFJSyxNQUFNLENBQUNDLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLElBQU1uQyxtRUFBZUEsQ0FBQ21DO1lBQ3JELE1BQU1DLFNBQVM7Z0JBQ1hDLE1BQU1WLElBQUlXLEVBQUU7Z0JBQ1p0QixZQUFZVyxJQUFJWCxVQUFVO2dCQUMxQnVCLFVBQVVaLElBQUlZLFFBQVE7Z0JBQ3RCQyxpQkFBaUJiLElBQUlhLGVBQWU7Z0JBQ3BDQyx1QkFBdUJkLElBQUljLHFCQUFxQjtnQkFDaERiO2dCQUNBYyxNQUFNZixJQUFJRyxRQUFRO2dCQUNsQmEsWUFBWXZCLFFBQVFrQixFQUFFO2dCQUN0QlA7Z0JBQ0FhLFVBQVVqQixJQUFJa0IsT0FBTztZQUN6QjtZQUNBaEIsWUFBWU87UUFDaEIsT0FDSyxJQUFJVCxJQUFJRyxRQUFRLEtBQUssU0FBUztZQUMvQixNQUFNZ0IsYUFBYSxNQUFNQyxRQUFRQyxHQUFHLENBQUNyQixJQUFJbUIsVUFBVSxDQUFDWixHQUFHLENBQUMsQ0FBQ2UsWUFBYyxJQUFJLENBQUN2QixpQkFBaUIsQ0FBQ3VCO1lBQzlGLE1BQU1DLFdBQVc7Z0JBQ2JiLE1BQU1WLElBQUlXLEVBQUU7Z0JBQ1p0QixZQUFZVyxJQUFJWCxVQUFVO2dCQUMxQnVCLFVBQVVaLElBQUlZLFFBQVE7Z0JBQ3RCQyxpQkFBaUJiLElBQUlhLGVBQWU7Z0JBQ3BDQyx1QkFBdUJkLElBQUljLHFCQUFxQjtnQkFDaERiO2dCQUNBYyxNQUFNZixJQUFJRyxRQUFRO2dCQUNsQmEsWUFBWXZCLFFBQVFrQixFQUFFO2dCQUN0Qk4sUUFBUUwsSUFBSUssTUFBTTtnQkFDbEJhLFNBQVNsQixJQUFJa0IsT0FBTztnQkFDcEJNLGdCQUFnQkwsV0FBV00sTUFBTSxDQUFDLENBQUNILFlBQWNBLFVBQVVQLElBQUksS0FBSztnQkFDcEVXLGtCQUFrQlAsV0FBV00sTUFBTSxDQUFDLENBQUNILFlBQWNBLFVBQVVQLElBQUksS0FBSztnQkFDdEVZLGlCQUFpQlIsV0FBV00sTUFBTSxDQUFDLENBQUNILFlBQWNBLFVBQVVQLElBQUksS0FBSztZQUN6RTtZQUNBYixZQUFZcUI7UUFDaEIsT0FDSyxJQUFJdkIsSUFBSUcsUUFBUSxLQUFLLFFBQVE7WUFDOUIsTUFBTWdCLGFBQWEsTUFBTUMsUUFBUUMsR0FBRyxDQUFDckIsSUFBSW1CLFVBQVUsQ0FBQ1osR0FBRyxDQUFDLENBQUNlLFlBQWMsSUFBSSxDQUFDdkIsaUJBQWlCLENBQUN1QjtZQUM5RixNQUFNTSxVQUFVO2dCQUNabEIsTUFBTVYsSUFBSVcsRUFBRTtnQkFDWnRCLFlBQVlXLElBQUlYLFVBQVU7Z0JBQzFCdUIsVUFBVVosSUFBSVksUUFBUTtnQkFDdEJDLGlCQUFpQmIsSUFBSWEsZUFBZTtnQkFDcENDLHVCQUF1QmQsSUFBSWMscUJBQXFCO2dCQUNoRGI7Z0JBQ0FjLE1BQU1mLElBQUlHLFFBQVE7Z0JBQ2xCYSxZQUFZdkIsUUFBUWtCLEVBQUU7Z0JBQ3RCa0IsWUFBWTdCLElBQUlLLE1BQU0sQ0FBQ3lCLEtBQUs7Z0JBQzVCQyxRQUFRL0IsSUFBSWtCLE9BQU8sRUFBRWE7Z0JBQ3JCQyxRQUFRQyxLQUFLQyxTQUFTLENBQUNqQztnQkFDdkJ1QixnQkFBZ0JMLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7Z0JBQ3BFVyxrQkFBa0JQLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7Z0JBQ3RFWSxpQkFBaUJSLFdBQVdNLE1BQU0sQ0FBQyxDQUFDSCxZQUFjQSxVQUFVUCxJQUFJLEtBQUs7WUFDekU7WUFDQWIsWUFBWTBCO1FBQ2hCLE9BQ0s7WUFDRCxNQUFNLElBQUlPLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRW5DLElBQUlHLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZEO1FBQ0EsT0FBT0Q7SUFDWDtJQUNBLE1BQU1rQyxXQUFXcEMsR0FBRyxFQUFFO1FBQ2xCLElBQUlKO1FBQ0osSUFBSXlDO1FBQ0osSUFBSXJDLElBQUlHLFFBQVEsS0FBS21DLFdBQVc7WUFDNUJELFFBQVEsTUFBTSxJQUFJLENBQUN0QyxpQkFBaUIsQ0FBQ0M7UUFDekMsT0FDSztZQUNEcUMsUUFBUXJDO1FBQ1o7UUFDQSxJQUFJcUMsTUFBTXRCLElBQUksS0FBSyxPQUFPO1lBQ3RCbkIsV0FBVyxDQUFDLEVBQUUsSUFBSSxDQUFDQSxRQUFRLENBQUMsU0FBUyxDQUFDO1FBQzFDLE9BQ0ssSUFBSXlDLE1BQU10QixJQUFJLEtBQUssU0FBUztZQUM3Qm5CLFdBQVcsQ0FBQyxFQUFFLElBQUksQ0FBQ0EsUUFBUSxDQUFDLFdBQVcsQ0FBQztRQUM1QyxPQUNLO1lBQ0RBLFdBQVcsQ0FBQyxFQUFFLElBQUksQ0FBQ0EsUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUMzQztRQUNBLE1BQU1xQixXQUFXLE1BQU1zQixNQUFNM0MsVUFBVTtZQUNuQzRDLFFBQVE7WUFDUnZELFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCd0QsTUFBTVIsS0FBS0MsU0FBUyxDQUFDRztRQUN6QjtRQUNBLElBQUksQ0FBQ3BCLFNBQVN5QixFQUFFLEVBQUU7WUFDZEMsUUFBUUMsS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUUzQixTQUFTNEIsTUFBTSxDQUFDLENBQUMsRUFBRTVCLFNBQVM2QixVQUFVLENBQUMsQ0FBQztRQUNwRjtJQUNKO0lBQ0EsTUFBTXBELGVBQWVOLGFBQWEsRUFBRTtRQUNoQyxNQUFNUSxXQUFXLENBQUMsRUFBRSxJQUFJLENBQUNBLFFBQVEsQ0FBQyxTQUFTLENBQUM7UUFDNUMsTUFBTXFCLFdBQVcsTUFBTXNCLE1BQU0zQyxVQUFVO1lBQ25DNEMsUUFBUTtZQUNSdkQsU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckJ3RCxNQUFNUixLQUFLQyxTQUFTLENBQUM5QztRQUN6QjtRQUNBLElBQUksQ0FBQzZCLFNBQVN5QixFQUFFLEVBQUU7WUFDZEMsUUFBUUMsS0FBSyxDQUFDLENBQUMsMkJBQTJCLEVBQUUzQixTQUFTNEIsTUFBTSxDQUFDLENBQUMsRUFBRTVCLFNBQVM2QixVQUFVLENBQUMsd0JBQXdCLENBQUM7WUFDNUcsT0FBTztnQkFDSG5DLElBQUk7Z0JBQ0osR0FBR3ZCLGFBQWE7WUFDcEI7UUFDSjtRQUNBLE9BQU87WUFDSHVCLElBQUksQ0FBQyxNQUFNTSxTQUFTOEIsSUFBSSxFQUFDLEVBQUdwQyxFQUFFO1lBQzlCLEdBQUd2QixhQUFhO1FBQ3BCO0lBQ0o7SUFDQSxNQUFNUyx1QkFBdUJELFFBQVEsRUFBRTtRQUNuQyxNQUFNcUIsV0FBVyxNQUFNc0IsTUFBTTNDLFVBQVU7WUFDbkM0QyxRQUFRO1lBQ1J2RCxTQUFTLElBQUksQ0FBQ0EsT0FBTztRQUN6QjtRQUNBLElBQUkrRDtRQUNKLElBQUksQ0FBQy9CLFNBQVN5QixFQUFFLEVBQUU7WUFDZEMsUUFBUUMsS0FBSyxDQUFDLENBQUMsd0JBQXdCLEVBQUUzQixTQUFTNEIsTUFBTSxDQUFDLENBQUMsRUFBRTVCLFNBQVM2QixVQUFVLENBQUMsQ0FBQztZQUNqRkUsZ0JBQWdCO2dCQUNackMsSUFBSTtnQkFDSnRCLFlBQVlDLEtBQUtDLEdBQUc7WUFDeEI7WUFDQSxJQUFJLENBQUNFLE9BQU8sR0FBR3VEO1lBQ2YsT0FBT0E7UUFDWDtRQUNBLE1BQU1DLE9BQVEsTUFBTWhDLFNBQVM4QixJQUFJO1FBQ2pDLElBQUlFLEtBQUtDLE1BQU0sS0FBSyxHQUFHO1lBQ25CRixnQkFBZ0I7Z0JBQ1pyQyxJQUFJO2dCQUNKdEIsWUFBWUMsS0FBS0MsR0FBRztZQUN4QjtZQUNBLElBQUksQ0FBQ0UsT0FBTyxHQUFHdUQ7WUFDZixPQUFPQTtRQUNYO1FBQ0EsQ0FBQ0EsY0FBYyxHQUFHQztRQUNsQixJQUFJLENBQUN4RCxPQUFPLEdBQUd1RDtRQUNmLE9BQU9BO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluX3YxLmpzP2NjZDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgTGFuZ0NoYWluVHJhY2VyIGluc3RlYWQuICovXG5leHBvcnQgY2xhc3MgTGFuZ0NoYWluVHJhY2VyVjEgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZHBvaW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0VORFBPSU5UXCIpIHx8IFwiaHR0cDovL2xvY2FsaG9zdDoxOTg0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoYXBpS2V5KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbXCJ4LWFwaS1rZXlcIl0gPSBhcGlLZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV3U2Vzc2lvbihzZXNzaW9uTmFtZSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ3JlYXRlID0ge1xuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IHNlc3Npb25OYW1lLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5wZXJzaXN0U2Vzc2lvbihzZXNzaW9uQ3JlYXRlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIGFzeW5jIGxvYWRTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT0ke3Nlc3Npb25OYW1lfWA7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpO1xuICAgIH1cbiAgICBhc3luYyBsb2FkRGVmYXVsdFNlc3Npb24oKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT1kZWZhdWx0YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGNvbnZlcnRWMlJ1blRvUnVuKHJ1bikge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9uID8/IChhd2FpdCB0aGlzLmxvYWREZWZhdWx0U2Vzc2lvbigpKTtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHJ1bi5zZXJpYWxpemVkO1xuICAgICAgICBsZXQgcnVuUmVzdWx0O1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlID09PSBcImxsbVwiKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9tcHRzID0gcnVuLmlucHV0cy5wcm9tcHRzXG4gICAgICAgICAgICAgICAgPyBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA6IHJ1bi5pbnB1dHMubWVzc2FnZXMubWFwKCh4KSA9PiBnZXRCdWZmZXJTdHJpbmcoeCkpO1xuICAgICAgICAgICAgY29uc3QgbGxtUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBwcm9tcHRzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5SZXN1bHQgPSBsbG1SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCBjaGFpblJ1biA9IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHJ1bi5leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgICAgIG91dHB1dHM6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGNoYWluUnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bi5ydW5fdHlwZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCB0b29sUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICB0b29sX2lucHV0OiBydW4uaW5wdXRzLmlucHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dDogcnVuLm91dHB1dHM/Lm91dHB1dCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWQpLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IHRvb2xSdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcnVuIHR5cGU6ICR7cnVuLnJ1bl90eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4ocnVuKSB7XG4gICAgICAgIGxldCBlbmRwb2ludDtcbiAgICAgICAgbGV0IHYxUnVuO1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHYxUnVuID0gYXdhaXQgdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihydW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdjFSdW4gPSBydW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYxUnVuLnR5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vbGxtLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHYxUnVuLnR5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9jaGFpbi1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vdG9vbC1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodjFSdW4pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3QgcnVuOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9uc2A7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ3JlYXRlKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwZXJzaXN0IHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LCB1c2luZyBkZWZhdWx0IHNlc3Npb24uYCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuaWQsXG4gICAgICAgICAgICAuLi5zZXNzaW9uQ3JlYXRlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBfaGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0cmFjZXJTZXNzaW9uO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBzZXNzaW9uOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGlmIChyZXNwLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBbdHJhY2VyU2Vzc2lvbl0gPSByZXNwO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB0cmFjZXJTZXNzaW9uO1xuICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0QnVmZmVyU3RyaW5nIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkJhc2VUcmFjZXIiLCJMYW5nQ2hhaW5UcmFjZXJWMSIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFwaUtleSIsImhlYWRlcnMiLCJuZXdTZXNzaW9uIiwic2Vzc2lvbk5hbWUiLCJzZXNzaW9uQ3JlYXRlIiwic3RhcnRfdGltZSIsIkRhdGUiLCJub3ciLCJuYW1lIiwic2Vzc2lvbiIsInBlcnNpc3RTZXNzaW9uIiwibG9hZFNlc3Npb24iLCJlbmRwb2ludCIsIl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UiLCJsb2FkRGVmYXVsdFNlc3Npb24iLCJjb252ZXJ0VjJSdW5Ub1J1biIsInJ1biIsInNlcmlhbGl6ZWQiLCJydW5SZXN1bHQiLCJydW5fdHlwZSIsInByb21wdHMiLCJpbnB1dHMiLCJtZXNzYWdlcyIsIm1hcCIsIngiLCJsbG1SdW4iLCJ1dWlkIiwiaWQiLCJlbmRfdGltZSIsImV4ZWN1dGlvbl9vcmRlciIsImNoaWxkX2V4ZWN1dGlvbl9vcmRlciIsInR5cGUiLCJzZXNzaW9uX2lkIiwicmVzcG9uc2UiLCJvdXRwdXRzIiwiY2hpbGRfcnVucyIsIlByb21pc2UiLCJhbGwiLCJjaGlsZF9ydW4iLCJjaGFpblJ1biIsImNoaWxkX2xsbV9ydW5zIiwiZmlsdGVyIiwiY2hpbGRfY2hhaW5fcnVucyIsImNoaWxkX3Rvb2xfcnVucyIsInRvb2xSdW4iLCJ0b29sX2lucHV0IiwiaW5wdXQiLCJvdXRwdXQiLCJhY3Rpb24iLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJwZXJzaXN0UnVuIiwidjFSdW4iLCJ1bmRlZmluZWQiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJvayIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwidHJhY2VyU2Vzc2lvbiIsInJlc3AiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/async_caller.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9hc3luY19jYWxsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBQ0c7QUFDaEMsTUFBTUUsa0JBQWtCO0lBQ3BCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNIO0FBQ0QsOERBQThEO0FBQzlELE1BQU1DLDhCQUE4QixDQUFDQztJQUNqQyxJQUFJQSxNQUFNQyxPQUFPLENBQUNDLFVBQVUsQ0FBQyxhQUN6QkYsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsaUJBQ3pCRixNQUFNRyxJQUFJLEtBQUssY0FBYztRQUM3QixNQUFNSDtJQUNWO0lBQ0EsOERBQThEO0lBQzlELElBQUlBLE9BQU9JLFNBQVMsZ0JBQWdCO1FBQ2hDLE1BQU1KO0lBQ1Y7SUFDQSxNQUFNSyxTQUNOLDhEQUE4RDtJQUM5REwsT0FBT00sVUFBVUQsVUFBVUwsT0FBT0s7SUFDbEMsSUFBSUEsVUFBVVAsZ0JBQWdCUyxRQUFRLENBQUMsQ0FBQ0YsU0FBUztRQUM3QyxNQUFNTDtJQUNWO0lBQ0EsOERBQThEO0lBQzlELElBQUlBLE9BQU9BLE9BQU9JLFNBQVMsc0JBQXNCO1FBQzdDLE1BQU1JLE1BQU0sSUFBSUMsTUFBTVQsT0FBT0M7UUFDN0JPLElBQUlMLElBQUksR0FBRztRQUNYLE1BQU1LO0lBQ1Y7QUFDSjtBQUNBOzs7Ozs7Ozs7Ozs7Q0FZQyxHQUNNLE1BQU1FO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxjQUFjLEdBQUdQLE9BQU9PLGNBQWMsSUFBSUM7UUFDL0MsSUFBSSxDQUFDQyxVQUFVLEdBQUdULE9BQU9TLFVBQVUsSUFBSTtRQUN2QyxJQUFJLENBQUNDLGVBQWUsR0FDaEJWLE9BQU9VLGVBQWUsSUFBSXZCO1FBQzlCLE1BQU13QixTQUFTLEtBQXNCMUIsR0FBR0EsK0NBQWlCLEdBQUdBLG9DQUFTQTtRQUNyRSxJQUFJLENBQUM0QixLQUFLLEdBQUcsSUFBSUYsT0FBTztZQUFFRyxhQUFhLElBQUksQ0FBQ1AsY0FBYztRQUFDO0lBQy9EO0lBQ0EsOERBQThEO0lBQzlEUSxLQUFLQyxRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3BCLE9BQU8sSUFBSSxDQUFDSixLQUFLLENBQUNLLEdBQUcsQ0FBQyxJQUFNbEMsb0NBQU1BLENBQUMsSUFBTWdDLFlBQVlDLE1BQU1FLEtBQUssQ0FBQyxDQUFDL0I7b0JBQzlELHVEQUF1RDtvQkFDdkQsSUFBSUEsaUJBQWlCUyxPQUFPO3dCQUN4QixNQUFNVDtvQkFDVixPQUNLO3dCQUNELE1BQU0sSUFBSVMsTUFBTVQ7b0JBQ3BCO2dCQUNKLElBQUk7Z0JBQ0FzQixpQkFBaUIsSUFBSSxDQUFDQSxlQUFlO2dCQUNyQ1UsU0FBUyxJQUFJLENBQUNYLFVBQVU7Z0JBQ3hCWSxXQUFXO1lBR2YsSUFBSTtZQUFFQyxnQkFBZ0I7UUFBSztJQUMvQjtJQUNBLDhEQUE4RDtJQUM5REMsZ0JBQWdCQyxPQUFPLEVBQUVSLFFBQVEsRUFBRSxHQUFHQyxJQUFJLEVBQUU7UUFDeEMsbURBQW1EO1FBQ25ELHdFQUF3RTtRQUN4RSxJQUFJTyxRQUFRQyxNQUFNLEVBQUU7WUFDaEIsT0FBT0MsUUFBUUMsSUFBSSxDQUFDO2dCQUNoQixJQUFJLENBQUNaLElBQUksQ0FBQ0MsYUFBYUM7Z0JBQ3ZCLElBQUlTLFFBQVEsQ0FBQ0UsR0FBR0M7b0JBQ1pMLFFBQVFDLE1BQU0sRUFBRUssaUJBQWlCLFNBQVM7d0JBQ3RDRCxPQUFPLElBQUloQyxNQUFNO29CQUNyQjtnQkFDSjthQUNIO1FBQ0w7UUFDQSxPQUFPLElBQUksQ0FBQ2tCLElBQUksQ0FBQ0MsYUFBYUM7SUFDbEM7SUFDQWMsTUFBTSxHQUFHZCxJQUFJLEVBQUU7UUFDWCxPQUFPLElBQUksQ0FBQ0YsSUFBSSxDQUFDLElBQU1nQixTQUFTZCxNQUFNZSxJQUFJLENBQUMsQ0FBQ0MsTUFBU0EsSUFBSUMsRUFBRSxHQUFHRCxNQUFNUCxRQUFRRyxNQUFNLENBQUNJO0lBQ3ZGO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcz85M2Q3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmNvbnN0IFNUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMixcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8XG4gICAgICAgIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uY29kZSA9PT0gXCJFQ09OTkFCT1JURURcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdHVzID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlcnJvcj8ucmVzcG9uc2U/LnN0YXR1cyA/PyBlcnJvcj8uc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgJiYgU1RBVFVTX05PX1JFVFJZLmluY2x1ZGVzKCtzdGF0dXMpKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uZXJyb3I/LmNvZGUgPT09IFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgZXJyLm5hbWUgPSBcIkluc3VmZmljaWVudFF1b3RhRXJyb3JcIjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJxdWV1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9XG4gICAgICAgICAgICBwYXJhbXMub25GYWlsZWRBdHRlbXB0ID8/IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlcjtcbiAgICAgICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgICAgIHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5hZGQoKCkgPT4gcFJldHJ5KCgpID0+IGNhbGxhYmxlKC4uLmFyZ3MpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgLy8gSWYgbmVlZGVkIHdlIGNhbiBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdHMgaGVyZSxcbiAgICAgICAgICAgIC8vIGJ1dCB0aGV5J3JlIHF1aXRlIHNlbnNpYmxlLlxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gTm90ZSB0aGlzIGRvZXNuJ3QgY2FuY2VsIHRoZSB1bmRlcmx5aW5nIHJlcXVlc3QsXG4gICAgICAgIC8vIHdoZW4gYXZhaWxhYmxlIHByZWZlciB0byB1c2UgdGhlIHNpZ25hbCBvcHRpb24gb2YgdGhlIHVuZGVybHlpbmcgY2FsbFxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZmV0Y2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoKC4uLmFyZ3MpLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcyA6IFByb21pc2UucmVqZWN0KHJlcykpKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19OT19SRVRSWSIsImRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciIsImVycm9yIiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiaW5jbHVkZXMiLCJlcnIiLCJFcnJvciIsIkFzeW5jQ2FsbGVyIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWF4Q29uY3VycmVuY3kiLCJJbmZpbml0eSIsIm1heFJldHJpZXMiLCJvbkZhaWxlZEF0dGVtcHQiLCJQUXVldWUiLCJkZWZhdWx0IiwicXVldWUiLCJjb25jdXJyZW5jeSIsImNhbGwiLCJjYWxsYWJsZSIsImFyZ3MiLCJhZGQiLCJjYXRjaCIsInJldHJpZXMiLCJyYW5kb21pemUiLCJ0aHJvd09uVGltZW91dCIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaWduYWwiLCJQcm9taXNlIiwicmFjZSIsIl8iLCJyZWplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBTyxNQUFNQSxZQUFZLElBQU0sTUFBNkIsSUFBSSxDQUFzQyxDQUFDO0FBQ2hHLE1BQU1HLGNBQWMsSUFBTSxPQUFPQyxlQUFlLFlBQ25EQSxXQUFXQyxXQUFXLElBQ3RCRCxXQUFXQyxXQUFXLENBQUNDLElBQUksS0FBSyw2QkFBNkI7QUFDMUQsTUFBTUMsVUFBVSxJQUFNLE1BQTBELElBQ2xGLE9BQU9DLGNBQWMsZUFDakJBLENBQUFBLFVBQVVDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDLGNBQzFCRixVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxRQUFPLEVBQUk7QUFDcEQseURBQXlEO0FBQ3pELDZCQUE2QjtBQUN0QixNQUFNQyxTQUFTLElBQU0sT0FBT0MsU0FBUyxZQUFZO0FBQ3hELGdEQUFnRDtBQUN6QyxNQUFNQyxTQUFTLElBQU0sT0FBT0MsWUFBWSxlQUMzQyxPQUFPQSxRQUFRQyxRQUFRLEtBQUssZUFDNUIsT0FBT0QsUUFBUUMsUUFBUSxDQUFDQyxJQUFJLEtBQUssZUFDakMsQ0FBQ0wsU0FBUztBQUNQLE1BQU1NLFNBQVM7SUFDbEIsSUFBSUM7SUFDSixJQUFJbEIsYUFBYTtRQUNia0IsTUFBTTtJQUNWLE9BQ0ssSUFBSUwsVUFBVTtRQUNmSyxNQUFNO0lBQ1YsT0FDSyxJQUFJZixlQUFlO1FBQ3BCZSxNQUFNO0lBQ1YsT0FDSyxJQUFJWCxXQUFXO1FBQ2hCVyxNQUFNO0lBQ1YsT0FDSyxJQUFJUCxVQUFVO1FBQ2ZPLE1BQU07SUFDVixPQUNLO1FBQ0RBLE1BQU07SUFDVjtJQUNBLE9BQU9BO0FBQ1gsRUFBRTtBQUNGLElBQUlDO0FBQ0csZUFBZUM7SUFDbEIsSUFBSUQsdUJBQXVCRSxXQUFXO1FBQ2xDLE1BQU1ILE1BQU1EO1FBQ1pFLHFCQUFxQjtZQUNqQkcsU0FBUztZQUNUQyxTQUFTTDtRQUNiO0lBQ0o7SUFDQSxPQUFPQztBQUNYO0FBQ08sU0FBU0ssdUJBQXVCbEIsSUFBSTtJQUN2QyxxRkFBcUY7SUFDckYsMERBQTBEO0lBQzFELElBQUk7UUFDQSxPQUFPLE9BQU9RLFlBQVksY0FFbEJBLFFBQVFJLEdBQUcsRUFBRSxDQUFDWixLQUFLLEdBQ3JCZTtJQUNWLEVBQ0EsT0FBT0ksR0FBRztRQUNOLE9BQU9KO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzPzQxM2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzQnJvd3NlciA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlciA9ICgpID0+IHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3RvciAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuZXhwb3J0IGNvbnN0IGlzSnNEb20gPSAoKSA9PiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmFtZSA9PT0gXCJub2RlanNcIikgfHxcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk5vZGUuanNcIikgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJqc2RvbVwiKSkpO1xuLy8gU3VwYWJhc2UgRWRnZSBGdW5jdGlvbiBwcm92aWRlcyBhIGBEZW5vYCBnbG9iYWwgb2JqZWN0XG4vLyB3aXRob3V0IGB2ZXJzaW9uYCBwcm9wZXJ0eVxuZXhwb3J0IGNvbnN0IGlzRGVubyA9ICgpID0+IHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiO1xuLy8gTWFyayBub3QtYXMtbm9kZSBpZiBpbiBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAhaXNEZW5vKCk7XG5leHBvcnQgY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuICAgIGxldCBlbnY7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIGVudiA9IFwiYnJvd3NlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05vZGUoKSkge1xuICAgICAgICBlbnYgPSBcIm5vZGVcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICBlbnYgPSBcIndlYndvcmtlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pzRG9tKCkpIHtcbiAgICAgICAgZW52ID0gXCJqc2RvbVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICBlbnYgPSBcImRlbm9cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVudiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGVudjtcbn07XG5sZXQgcnVudGltZUVudmlyb25tZW50O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpIHtcbiAgICBpZiAocnVudGltZUVudmlyb25tZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZW52ID0gZ2V0RW52KCk7XG4gICAgICAgIHJ1bnRpbWVFbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICAgIGxpYnJhcnk6IFwibGFuZ2NoYWluLWpzXCIsXG4gICAgICAgICAgICBydW50aW1lOiBlbnYsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBydW50aW1lRW52aXJvbm1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQ2VydGFpbiBEZW5vIHNldHVwcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHlvdSB0cnkgdG8gYWNjZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5nY2hhaW4tYWkvbGFuZ2NoYWluanMvaXNzdWVzLzE0MTJcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LltuYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiaXNXZWJXb3JrZXIiLCJnbG9iYWxUaGlzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNKc0RvbSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNEZW5vIiwiRGVubyIsImlzTm9kZSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnZXRFbnYiLCJlbnYiLCJydW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJ1bmRlZmluZWQiLCJsaWJyYXJ5IiwicnVudGltZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QjtBQUNFO0FBQ3NHO0FBQ3RJOztDQUVDLEdBQ3FDO0FBQ2dHO0FBQ3RJLGlFQUFlO0lBQ1gsR0FBR00seUNBQUk7SUFDUCxhQUFhO0lBQ2JMLGNBQWNBLHlEQUFBQTtJQUNkRSxTQUFTQSx5REFBQUE7SUFDVEMsbUJBQW1CQSxrRUFBQUE7SUFDbkJDLHFCQUFxQkEsb0VBQUFBO0FBQ3pCLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzP2RlMjIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9kdXBsZXguanNcIjtcbmV4cG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbi8qKlxuICogRGVmYXVsdCBleHBvcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuaW1wb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC4uLmNvcmUsXG4gICAgLy8gLi4uZHVwbGV4LFxuICAgIEpzb25QYXRjaEVycm9yLFxuICAgIGRlZXBDbG9uZSxcbiAgICBlc2NhcGVQYXRoQ29tcG9uZW50LFxuICAgIHVuZXNjYXBlUGF0aENvbXBvbmVudCxcbn07XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIkpzb25QYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImRlZXBDbG9uZSIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJjb3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLGNBQWM7QUFDeUY7QUFDaEcsTUFBTUssaUJBQWlCTCxtREFBVUEsQ0FBQztBQUNsQyxNQUFNTSxZQUFZTCxtREFBVUEsQ0FBQztBQUNwQzs7Ozs7Q0FLQyxHQUNELDBDQUEwQyxHQUMxQyxNQUFNTSxTQUFTO0lBQ1hDLEtBQUssU0FBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDN0JGLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQ0UsS0FBSztRQUNyQixPQUFPO1lBQUVDLGFBQWFGO1FBQVM7SUFDbkM7SUFDQUcsUUFBUSxTQUFVTCxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsUUFBUTtRQUNoQyxJQUFJSSxVQUFVTixHQUFHLENBQUNDLElBQUk7UUFDdEIsT0FBT0QsR0FBRyxDQUFDQyxJQUFJO1FBQ2YsT0FBTztZQUFFRyxhQUFhRjtZQUFVSTtRQUFRO0lBQzVDO0lBQ0FDLFNBQVMsU0FBVVAsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDakMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCRCxHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtZQUFVSTtRQUFRO0lBQzVDO0lBQ0FFLE1BQU0sU0FBVVIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDOUI7O29DQUU0QixHQUM1QixJQUFJSSxVQUFVRyxrQkFBa0JQLFVBQVUsSUFBSSxDQUFDUSxJQUFJO1FBQ25ELElBQUlKLFNBQVM7WUFDVEEsVUFBVWQsdURBQVVBLENBQUNjO1FBQ3pCO1FBQ0EsTUFBTUssZ0JBQWdCQyxlQUFlVixVQUFVO1lBQzNDVyxJQUFJO1lBQ0pILE1B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QU1BO0FBQzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanM/YTgxOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSwgaXNJbnRlZ2VyLCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIGhhc1VuZGVmaW5lZCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5leHBvcnQgY29uc3QgSnNvblBhdGNoRXJyb3IgPSBQYXRjaEVycm9yO1xuZXhwb3J0IGNvbnN0IGRlZXBDbG9uZSA9IF9kZWVwQ2xvbmU7XG4vKiBXZSB1c2UgYSBKYXZhc2NyaXB0IGhhc2ggdG8gc3RvcmUgZWFjaFxuIGZ1bmN0aW9uLiBFYWNoIGhhc2ggZW50cnkgKHByb3BlcnR5KSB1c2VzXG4gdGhlIG9wZXJhdGlvbiBpZGVudGlmaWVycyBzcGVjaWZpZWQgaW4gcmZjNjkwMi5cbiBJbiB0aGlzIHdheSwgd2UgY2FuIG1hcCBlYWNoIHBhdGNoIG9wZXJhdGlvblxuIHRvIGl0cyBkZWRpY2F0ZWQgZnVuY3Rpb24gaW4gZWZmaWNpZW50IHdheS5cbiAqL1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBvYmplY3QgKi9cbmNvbnN0IG9iak9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICAvKiBpbiBjYXNlIG1vdmUgdGFyZ2V0IG92ZXJ3cml0ZXMgYW4gZXhpc3RpbmcgdmFsdWUsXG4gICAgICAgIHJldHVybiB0aGUgcmVtb3ZlZCB2YWx1ZSwgdGhpcyBjYW4gYmUgdGF4aW5nIHBlcmZvcm1hbmNlLXdpc2UsXG4gICAgICAgIGFuZCBpcyBwb3RlbnRpYWxseSB1bm5lZWRlZCAqL1xuICAgICAgICBsZXQgcmVtb3ZlZCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLnBhdGgpO1xuICAgICAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZCA9IF9kZWVwQ2xvbmUocmVtb3ZlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxWYWx1ZSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuZnJvbSxcbiAgICAgICAgfSkucmVtb3ZlZDtcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IG9yaWdpbmFsVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIGNvcHk6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdmFsdWVUb0NvcHkgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5mcm9tKTtcbiAgICAgICAgLy8gZW5mb3JjZSBjb3B5IGJ5IHZhbHVlIHNvIGZ1cnRoZXIgb3BlcmF0aW9ucyBkb24ndCBhZmZlY3Qgc291cmNlIChzZWUgaXNzdWUgIzE3NylcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUodmFsdWVUb0NvcHkpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICB0ZXN0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgdGVzdDogX2FyZUVxdWFscyhvYmpba2V5XSwgdGhpcy52YWx1ZSkgfTtcbiAgICB9LFxuICAgIF9nZXQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxufTtcbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gYXJyYXkuIE1hbnkgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgb2JqZWN0ICovXG52YXIgYXJyT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGlzSW50ZWdlcihpKSkge1xuICAgICAgICAgICAgYXJyLnNwbGljZShpLCAwLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5IHByb3BzXG4gICAgICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgbWF5IGJlIG5lZWRlZCB3aGVuIHVzaW5nICctJyBpbiBhbiBhcnJheVxuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIGluZGV4OiBpIH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkTGlzdCA9IGFyci5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZDogcmVtb3ZlZExpc3RbMF0gfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gYXJyW2ldO1xuICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IG9iak9wcy5tb3ZlLFxuICAgIGNvcHk6IG9iak9wcy5jb3B5LFxuICAgIHRlc3Q6IG9iak9wcy50ZXN0LFxuICAgIF9nZXQ6IG9iak9wcy5fZ2V0LFxufTtcbi8qKlxuICogUmV0cmlldmVzIGEgdmFsdWUgZnJvbSBhIEpTT04gZG9jdW1lbnQgYnkgYSBKU09OIHBvaW50ZXIuXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIGdldCB0aGUgdmFsdWUgZnJvbVxuICogQHBhcmFtIHBvaW50ZXIgYW4gZXNjYXBlZCBKU09OIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHJldHJpZXZlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHBvaW50ZXIpIHtcbiAgICBpZiAocG9pbnRlciA9PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgdmFyIGdldE9yaWdpbmFsRGVzdGluYXRpb24gPSB7IG9wOiBcIl9nZXRcIiwgcGF0aDogcG9pbnRlciB9O1xuICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBnZXRPcmlnaW5hbERlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbi52YWx1ZTtcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBvcGVyYXRpb24uXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBhbmQgYG9wZXJhdGlvbmAgb2JqZWN0cyAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKG9wZXJhdGlvbikpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBvcGVyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24sIHZhbGlkYXRlT3BlcmF0aW9uID0gZmFsc2UsIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUsIGluZGV4ID0gMCkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVPcGVyYXRpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgb3BlcmF0aW9uLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdG9yKG9wZXJhdGlvbiwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogUk9PVCBPUEVSQVRJT05TICovXG4gICAgaWYgKG9wZXJhdGlvbi5wYXRoID09PSBcIlwiKSB7XG4gICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50OyAvL2RvY3VtZW50IHdlIHJlbW92ZWRcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIC8vIGl0J3MgYSBtb3ZlIG9yIGNvcHkgdG8gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgb3BlcmF0aW9uLmZyb20pOyAvLyBnZXQgdGhlIHZhbHVlIGJ5IGpzb24tcG9pbnRlciBpbiBgZnJvbWAgZmllbGRcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlbW92ZWQgaXRlbVxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS50ZXN0ID0gX2FyZUVxdWFscyhkb2N1bWVudCwgb3BlcmF0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgLy8gYSByZW1vdmUgb24gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogYmFkIG9wZXJhdGlvbiAqL1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IC8qIEVORCBST09UIE9QRVJBVElPTlMgKi9cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gb3BlcmF0aW9uLnBhdGggfHwgXCJcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICBsZXQgb2JqID0gZG9jdW1lbnQ7XG4gICAgICAgIGxldCB0ID0gMTsgLy9za2lwIGVtcHR5IGVsZW1lbnQgLSBodHRwOi8vanNwZXJmLmNvbS90by1zaGlmdC1vci1ub3QtdG8tc2hpZnRcbiAgICAgICAgbGV0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBsZXQgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGxldCB2YWxpZGF0ZUZ1bmN0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRlT3BlcmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRvcjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAga2V5ID0ga2V5c1t0XTtcbiAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YoXCJ+XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdW5lc2NhcGVQYXRoQ29tcG9uZW50KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyAmJlxuICAgICAgICAgICAgICAgIChrZXkgPT0gXCJfX3Byb3RvX19cIiB8fFxuICAgICAgICAgICAgICAgICAgICAoa2V5ID09IFwicHJvdG90eXBlXCIgJiYgdCA+IDAgJiYga2V5c1t0IC0gMV0gPT0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSlNPTi1QYXRjaDogbW9kaWZ5aW5nIGBfX3Byb3RvX19gIG9yIGBjb25zdHJ1Y3Rvci9wcm90b3R5cGVgIHByb3AgaXMgYmFubmVkIGZvciBzZWN1cml0eSByZWFzb25zLCBpZiB0aGlzIHdhcyBvbiBwdXJwb3NlLCBwbGVhc2Ugc2V0IGBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zYCBmbGFnIGZhbHNlIGFuZCBwYXNzIGl0IHRvIHRoaXMgZnVuY3Rpb24uIE1vcmUgaW5mbyBpbiBmYXN0LWpzb24tcGF0Y2ggUkVBRE1FXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0ga2V5cy5zbGljZSgwLCB0KS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gb3BlcmF0aW9uLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IG9iai5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgIWlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJFeHBlY3RlZCBhbiB1bnNpZ25lZCBiYXNlLTEwIGludGVnZXIgdmFsdWUsIG1ha2luZyB0aGUgbmV3IHJlZmVyZW5jZWQgdmFsdWUgdGhlIGFycmF5IGVsZW1lbnQgd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleFwiLCBcIk9QRVJBVElPTl9QQVRIX0lMTEVHQUxfQVJSQVlfSU5ERVhcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIG9ubHkgcGFyc2Uga2V5IHdoZW4gaXQncyBhbiBpbnRlZ2VyIGZvciBgYXJyLnByb3BgIHRvIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IH5+a2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgb3BlcmF0aW9uLm9wID09PSBcImFkZFwiICYmIGtleSA+IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRoZSBzcGVjaWZpZWQgaW5kZXggTVVTVCBOT1QgYmUgZ3JlYXRlciB0aGFuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5XCIsIFwiT1BFUkFUSU9OX1ZBTFVFX09VVF9PRl9CT1VORFNcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gYXJyT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gb2JqT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vcmUga2V5cyBpbiB0aGUgcGF0aCwgYnV0IHRoZSBuZXh0IHZhbHVlIGlzbid0IGEgbm9uLW51bGwgb2JqZWN0LFxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFIGVycm9yIGluc3RlYWQgb2YgaXRlcmF0aW5nIGFnYWluLlxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIHQgPCBsZW4gJiYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IGEgZnVsbCBKU09OIFBhdGNoIGFycmF5IG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgcGF0Y2guXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBvYmplY3QgYW5kIGBwYXRjaGAgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5UGF0Y2goZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKHBhdGNoKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBwYXRjaCBUaGUgcGF0Y2ggdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIEFuIGFycmF5IG9mIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBwYXRjaFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYXRjaChkb2N1bWVudCwgcGF0Y2gsIHZhbGlkYXRlT3BlcmF0aW9uLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXRjaCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHBhdGNoLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHBhdGNoLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtdXRhdGVEb2N1bWVudCBhcmd1bWVudCBiZWNhdXNlIGlmIGl0IHdhcyB0cnVlLCB3ZSBhbHJlYWR5IGRlZXAgY2xvbmVkIHRoZSBvYmplY3QsIHdlJ2xsIGp1c3QgcGFzcyBgdHJ1ZWBcbiAgICAgICAgcmVzdWx0c1tpXSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBwYXRjaFtpXSwgdmFsaWRhdGVPcGVyYXRpb24sIHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMsIGkpO1xuICAgICAgICBkb2N1bWVudCA9IHJlc3VsdHNbaV0ubmV3RG9jdW1lbnQ7IC8vIGluIGNhc2Ugcm9vdCB3YXMgcmVwbGFjZWRcbiAgICB9XG4gICAgcmVzdWx0cy5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIGRvY3VtZW50LlxuICogU3VpdGFibGUgYXMgYSByZWR1Y2VyLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHJldHVybiBUaGUgdXBkYXRlZCBkb2N1bWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZWR1Y2VyKGRvY3VtZW50LCBvcGVyYXRpb24sIGluZGV4KSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uUmVzdWx0ID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbik7XG4gICAgaWYgKG9wZXJhdGlvblJlc3VsdC50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAvLyBmYWlsZWQgdGVzdFxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uUmVzdWx0Lm5ld0RvY3VtZW50O1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzaW5nbGUgb3BlcmF0aW9uLiBDYWxsZWQgZnJvbSBganNvbnBhdGNoLnZhbGlkYXRlYC4gVGhyb3dzIGBKc29uUGF0Y2hFcnJvcmAgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcGVyYXRpb24gLSBvcGVyYXRpb24gb2JqZWN0IChwYXRjaClcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIGluZGV4IG9mIG9wZXJhdGlvbiBpbiB0aGUgc2VxdWVuY2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZG9jdW1lbnRdIC0gb2JqZWN0IHdoZXJlIHRoZSBvcGVyYXRpb24gaXMgc3VwcG9zZWQgdG8gYmUgYXBwbGllZFxuICogQHBhcmFtIHtzdHJpbmd9IFtleGlzdGluZ1BhdGhGcmFnbWVudF0gLSBjb21lcyBhbG9uZyB3aXRoIGBkb2N1bWVudGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRvcihvcGVyYXRpb24sIGluZGV4LCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICBpZiAodHlwZW9mIG9wZXJhdGlvbiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICBvcGVyYXRpb24gPT09IG51bGwgfHxcbiAgICAgICAgQXJyYXkuaXNBcnJheShvcGVyYXRpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBpcyBub3QgYW4gb2JqZWN0XCIsIFwiT1BFUkFUSU9OX05PVF9BTl9PQkpFQ1RcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghb2JqT3BzW29wZXJhdGlvbi5vcF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBvcGVyYXRpb24ucGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IGlzIG5vdCBhIHN0cmluZ1wiLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24ucGF0aC5pbmRleE9mKFwiL1wiKSAhPT0gMCAmJiBvcGVyYXRpb24ucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHBhdGhzIHRoYXQgYXJlbid0IGVtcHR5IHN0cmluZyBzaG91bGQgc3RhcnQgd2l0aCBcIi9cIlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoJ09wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgbXVzdCBzdGFydCB3aXRoIFwiL1wiJywgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikgJiZcbiAgICAgICAgdHlwZW9mIG9wZXJhdGlvbi5mcm9tICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgZnJvbWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYG1vdmVgIGFuZCBgY29weWAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fRlJPTV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBvcGVyYXRpb24udmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgaGFzVW5kZWZpbmVkKG9wZXJhdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX0NBTk5PVF9DT05UQUlOX1VOREVGSU5FRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT0gXCJhZGRcIikge1xuICAgICAgICAgICAgdmFyIHBhdGhMZW4gPSBvcGVyYXRpb24ucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nUGF0aExlbiA9IGV4aXN0aW5nUGF0aEZyYWdtZW50LnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuICsgMSAmJiBwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBhbiBgYWRkYCBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX0NBTk5PVF9BRERcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXRoICE9PSBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gYXQgYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgb3A6IFwiX2dldFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IG9wZXJhdGlvbi5mcm9tLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGUoW2V4aXN0aW5nVmFsdWVdLCBkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gZnJvbSBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9GUk9NX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMuIElmIGBkb2N1bWVudGAgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGUgc2VxdWVuY2UgaXMgYWRkaXRpb25hbGx5IHZhbGlkYXRlZCBhZ2FpbnN0IHRoZSBvYmplY3QgZG9jdW1lbnQuXG4gKiBJZiBlcnJvciBpcyBlbmNvdW50ZXJlZCwgcmV0dXJucyBhIEpzb25QYXRjaEVycm9yIG9iamVjdFxuICogQHBhcmFtIHNlcXVlbmNlXG4gKiBAcGFyYW0gZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtKc29uUGF0Y2hFcnJvcnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZShzZXF1ZW5jZSwgZG9jdW1lbnQsIGV4dGVybmFsVmFsaWRhdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIC8vY2xvbmUgZG9jdW1lbnQgYW5kIHNlcXVlbmNlIHNvIHRoYXQgd2UgY2FuIHNhZmVseSB0cnkgYXBwbHlpbmcgb3BlcmF0aW9uc1xuICAgICAgICAgICAgYXBwbHlQYXRjaChfZGVlcENsb25lKGRvY3VtZW50KSwgX2RlZXBDbG9uZShzZXF1ZW5jZSksIGV4dGVybmFsVmFsaWRhdG9yIHx8IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3IgPSBleHRlcm5hbFZhbGlkYXRvciB8fCB2YWxpZGF0b3I7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3Ioc2VxdWVuY2VbaV0sIGksIGRvY3VtZW50LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgSnNvblBhdGNoRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9lcG9iZXJlemtpbi9mYXN0LWRlZXAtZXF1YWxcbi8vIE1JVCBMaWNlbnNlXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTcgRXZnZW55IFBvYmVyZXpraW5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuZXhwb3J0IGZ1bmN0aW9uIF9hcmVFcXVhbHMoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgYXJyQSA9IEFycmF5LmlzQXJyYXkoYSksIGFyckIgPSBBcnJheS5pc0FycmF5KGIpLCBpLCBsZW5ndGgsIGtleTtcbiAgICAgICAgaWYgKGFyckEgJiYgYXJyQikge1xuICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJBICE9IGFyckIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgIGlmICghYi5oYXNPd25Qcm9wZXJ0eShrZXlzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiaXNJbnRlZ2VyIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzVW5kZWZpbmVkIiwiSnNvblBhdGNoRXJyb3IiLCJkZWVwQ2xvbmUiLCJvYmpPcHMiLCJhZGQiLCJvYmoiLCJrZXkiLCJkb2N1bWVudCIsInZhbHVlIiwibmV3RG9jdW1lbnQiLCJyZW1vdmUiLCJyZW1vdmVkIiwicmVwbGFjZSIsIm1vdmUiLCJnZXRWYWx1ZUJ5UG9pbnRlciIsInBhdGgiLCJvcmlnaW5hbFZhbHVlIiwiYXBwbHlPcGVyYXRpb24iLCJvcCIsImZyb20iLCJjb3B5IiwidmFsdWVUb0NvcHkiLCJ0ZXN0IiwiX2FyZUVxdWFscyIsIl9nZXQiLCJhcnJPcHMiLCJhcnIiLCJpIiwic3BsaWNlIiwiaW5kZXgiLCJyZW1vdmVkTGlzdCIsInBvaW50ZXIiLCJnZXRPcmlnaW5hbERlc3RpbmF0aW9uIiwib3BlcmF0aW9uIiwidmFsaWRhdGVPcGVyYXRpb24iLCJtdXRhdGVEb2N1bWVudCIsImJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMiLCJ2YWxpZGF0b3IiLCJyZXR1cm5WYWx1ZSIsImtleXMiLCJzcGxpdCIsInQiLCJsZW4iLCJsZW5ndGgiLCJleGlzdGluZ1BhdGhGcmFnbWVudCIsInVuZGVmaW5lZCIsInZhbGlkYXRlRnVuY3Rpb24iLCJpbmRleE9mIiwiVHlwZUVycm9yIiwic2xpY2UiLCJqb2luIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbCIsImFwcGx5UGF0Y2giLCJwYXRjaCIsInJlc3VsdHMiLCJhcHBseVJlZHVjZXIiLCJvcGVyYXRpb25SZXN1bHQiLCJwYXRoTGVuIiwiZXhpc3RpbmdQYXRoTGVuIiwiZXhpc3RpbmdWYWx1ZSIsImVycm9yIiwidmFsaWRhdGUiLCJuYW1lIiwic2VxdWVuY2UiLCJleHRlcm5hbFZhbGlkYXRvciIsImUiLCJhIiwiYiIsImFyckEiLCJhcnJCIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2R1cGxleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDNEY7QUFDdEQ7QUFDdkMsSUFBSUssYUFBYSxJQUFJQztBQUNyQixNQUFNQztJQUNGQyxZQUFZQyxHQUFHLENBQUU7UUFDYkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxPQUFPO1lBQy9CQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLElBQUlDO1FBQ2Y7UUFDQU4sT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNOLEdBQUcsR0FBR0E7SUFDZjtBQUNKO0FBQ0EsTUFBTVE7SUFDRlQsWUFBWVUsUUFBUSxFQUFFQyxRQUFRLENBQUU7UUFDNUJULE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDRyxRQUFRLEdBQUdBO1FBQ2hCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQTtJQUNwQjtBQUNKO0FBQ0EsU0FBU0MsVUFBVVgsR0FBRztJQUNsQixPQUFPSixXQUFX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bW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvZHVwbGV4LmpzPzExY2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxMy0yMDIxIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZVxuICovXG5pbXBvcnQgeyBfZGVlcENsb25lLCBfb2JqZWN0S2V5cywgZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzT3duUHJvcGVydHksIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgYXBwbHlQYXRjaCB9IGZyb20gXCIuL2NvcmUuanNcIjtcbnZhciBiZWZvcmVEaWN0ID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIE1pcnJvciB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ialwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgfVxufVxuY2xhc3MgT2JzZXJ2ZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgb2JzZXJ2ZXIpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TWlycm9yKG9iaikge1xuICAgIHJldHVybiBiZWZvcmVEaWN0LmdldChvYmopO1xufVxuZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gbWlycm9yLm9ic2VydmVycy5nZXQoY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpIHtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlci5jYWxsYmFjayk7XG59XG4vKipcbiAqIERldGFjaCBhbiBvYnNlcnZlciBmcm9tIGFuIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5vYnNlcnZlKHJvb3QsIG9ic2VydmVyKSB7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlKCk7XG59XG4vKipcbiAqIE9ic2VydmVzIGNoYW5nZXMgbWFkZSB0byBhbiBvYmplY3QsIHdoaWNoIGNhbiB0aGVuIGJlIHJldHJpZXZlZCB1c2luZyBnZW5lcmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZShvYmosIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgdmFyIG1pcnJvciA9IGdldE1pcnJvcihvYmopO1xuICAgIGlmICghbWlycm9yKSB7XG4gICAgICAgIG1pcnJvciA9IG5ldyBNaXJyb3Iob2JqKTtcbiAgICAgICAgYmVmb3JlRGljdC5zZXQob2JqLCBtaXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJJbmZvID0gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spO1xuICAgICAgICBvYnNlcnZlciA9IG9ic2VydmVySW5mbyAmJiBvYnNlcnZlckluZm8ub2JzZXJ2ZXI7XG4gICAgfVxuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIG9ic2VydmVyID0ge307XG4gICAgbWlycm9yLnZhbHVlID0gX2RlZXBDbG9uZShvYmopO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBvYnNlcnZlci5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBvYnNlcnZlci5uZXh0ID0gbnVsbDtcbiAgICAgICAgdmFyIGRpcnR5Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmYXN0Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gc2V0VGltZW91dChkaXJ0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vbm90IE5vZGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnNlcnZlci5wYXRjaGVzID0gcGF0Y2hlcztcbiAgICBvYnNlcnZlci5vYmplY3QgPSBvYmo7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlID0gKCkgPT4ge1xuICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLnNldChjYWxsYmFjaywgbmV3IE9ic2VydmVySW5mbyhjYWxsYmFjaywgb2JzZXJ2ZXIpKTtcbiAgICByZXR1cm4gb2JzZXJ2ZXI7XG59XG4vKipcbiAqIEdlbmVyYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSBhbiBvYnNlcnZlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGUob2JzZXJ2ZXIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBtaXJyb3IgPSBiZWZvcmVEaWN0LmdldChvYnNlcnZlci5vYmplY3QpO1xuICAgIF9nZW5lcmF0ZShtaXJyb3IudmFsdWUsIG9ic2VydmVyLm9iamVjdCwgb2JzZXJ2ZXIucGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgaWYgKG9ic2VydmVyLnBhdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGFwcGx5UGF0Y2gobWlycm9yLnZhbHVlLCBvYnNlcnZlci5wYXRjaGVzKTtcbiAgICB9XG4gICAgdmFyIHRlbXAgPSBvYnNlcnZlci5wYXRjaGVzO1xuICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IFtdO1xuICAgICAgICBpZiAob2JzZXJ2ZXIuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNhbGxiYWNrKHRlbXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wO1xufVxuLy8gRGlydHkgY2hlY2sgaWYgb2JqIGlzIGRpZmZlcmVudCBmcm9tIG1pcnJvciwgZ2VuZXJhdGUgcGF0Y2hlcyBhbmQgdXBkYXRlIG1pcnJvclxuZnVuY3Rpb24gX2dlbmVyYXRlKG1pcnJvciwgb2JqLCBwYXRjaGVzLCBwYXRoLCBpbnZlcnRpYmxlKSB7XG4gICAgaWYgKG9iaiA9PT0gbWlycm9yKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmoudG9KU09OID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgIH1cbiAgICB2YXIgbmV3S2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgdmFyIG9sZEtleXMgPSBfb2JqZWN0S2V5cyhtaXJyb3IpO1xuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAvL2lmIGV2ZXIgXCJtb3ZlXCIgb3BlcmF0aW9uIGlzIGltcGxlbWVudGVkIGhlcmUsIG1ha2Ugc3VyZSB0aGlzIHRlc3QgcnVucyBPSzogXCJzaG91bGQgbm90IGdlbmVyYXRlIHRoZSBzYW1lIHBhdGNoIHR3aWNlIChtb3ZlKVwiXG4gICAgZm9yICh2YXIgdCA9IG9sZEtleXMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcbiAgICAgICAgdmFyIGtleSA9IG9sZEtleXNbdF07XG4gICAgICAgIHZhciBvbGRWYWwgPSBtaXJyb3Jba2V5XTtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwga2V5KSAmJlxuICAgICAgICAgICAgIShvYmpba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9iaikgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbGRWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5ld1ZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgbmV3VmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9sZFZhbCkgPT09IEFycmF5LmlzQXJyYXkobmV3VmFsKSkge1xuICAgICAgICAgICAgICAgIF9nZW5lcmF0ZShvbGRWYWwsIG5ld1ZhbCwgcGF0Y2hlcywgcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLCBpbnZlcnRpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG5ld1ZhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1pcnJvcikgPT09IEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTsgLy8gcHJvcGVydHkgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJ0ZXN0XCIsIHBhdGgsIHZhbHVlOiBtaXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJyZXBsYWNlXCIsIHBhdGgsIHZhbHVlOiBvYmogfSk7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWRlbGV0ZWQgJiYgbmV3S2V5cy5sZW5ndGggPT0gb2xkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG5ld0tleXMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgdmFyIGtleSA9IG5ld0tleXNbdF07XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobWlycm9yLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9ialtrZXldKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIHRoZSBkaWZmZXJlbmNlcyBpbiB0d28gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZSh0cmVlMSwgdHJlZTIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgX2dlbmVyYXRlKHRyZWUxLCB0cmVlMiwgcGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgcmV0dXJuIHBhdGNoZXM7XG59XG4iXSwibmFtZXMiOlsiX2RlZXBDbG9uZSIsIl9vYmplY3RLZXlzIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc093blByb3BlcnR5IiwiYXBwbHlQYXRjaCIsImJlZm9yZURpY3QiLCJXZWFrTWFwIiwiTWlycm9yIiwiY29uc3RydWN0b3IiLCJvYmoiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiTWFwIiwiT2JzZXJ2ZXJJbmZvIiwiY2FsbGJhY2siLCJvYnNlcnZlciIsImdldE1pcnJvciIsImdldCIsImdldE9ic2VydmVyRnJvbU1pcnJvciIsIm1pcnJvciIsIm9ic2VydmVycyIsInJlbW92ZU9ic2VydmVyRnJvbU1pcnJvciIsImRlbGV0ZSIsInVub2JzZXJ2ZSIsInJvb3QiLCJvYnNlcnZlIiwicGF0Y2hlcyIsInNldCIsIm9ic2VydmVySW5mbyIsIm5leHQiLCJkaXJ0eUNoZWNrIiwiZ2VuZXJhdGUiLCJmYXN0Q2hlY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9iamVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbnZlcnRpYmxlIiwiX2dlbmVyYXRlIiwibGVuZ3RoIiwidGVtcCIsInBhdGgiLCJ0b0pTT04iLCJuZXdLZXlzIiwib2xkS2V5cyIsImNoYW5nZWQiLCJkZWxldGVkIiwidCIsImtleSIsIm9sZFZhbCIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsIm5ld1ZhbCIsInB1c2giLCJvcCIsImNvbXBhcmUiLCJ0cmVlMSIsInRyZWUyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLGNBQWM7QUFDZCx1Q0FBdUM7QUFDdkM7Ozs7Q0FJQyxHQUNELE1BQU1BLGtCQUFrQkMsT0FBT0MsU0FBUyxDQUFDQyxjQUFjO0FBQ2hELFNBQVNBLGVBQWVDLEdBQUcsRUFBRUMsR0FBRztJQUNuQyxPQUFPTCxnQkFBZ0JNLElBQUksQ0FBQ0YsS0FBS0M7QUFDckM7QUFDTyxTQUFTRSxZQUFZSCxHQUFHO0lBQzNCLElBQUlJLE1BQU1DLE9BQU8sQ0FBQ0wsTUFBTTtRQUNwQixNQUFNTSxPQUFPLElBQUlGLE1BQU1KLElBQUlPLE1BQU07UUFDakMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLEtBQUtDLE1BQU0sRUFBRUMsSUFBSztZQUNsQ0YsSUFBSSxDQUFDRSxFQUFFLEdBQUcsS0FBS0E7UUFDbkI7UUFDQSxPQUFPRjtJQUNYO0lBQ0EsSUFBSVQsT0FBT1MsSUFBSSxFQUFFO1FBQ2IsT0FBT1QsT0FBT1MsSUFBSSxDQUFDTjtJQUN2QjtJQUNBLElBQUlNLE9BQU8sRUFBRTtJQUNiLElBQUssSUFBSUcsS0FBS1QsSUFBSztRQUNmLElBQUlELGVBQWVDLEtBQUtTLElBQUk7WUFDeEJILEtBQUtJLElBQUksQ0FBQ0Q7UUFDZDtJQUNKO0lBQ0EsT0FBT0g7QUFDWDtBQUNBOzs7OztDQUtDLEdBQ00sU0FBU0ssV0FBV1gsR0FBRztJQUMxQixPQUFRLE9BQU9BO1FBQ1gsS0FBSztZQUNELE9BQU9ZLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsU0FBUyxDQUFDZCxPQUFPLHFFQUFxRTtRQUNqSCxLQUFLO1lBQ0QsT0FBTyxNQUFNLG9EQUFvRDtRQUNyRTtZQUNJLE9BQU9BLEtBQUssNkJBQTZCO0lBQ2pEO0FBQ0o7QUFDQSx5Q0FBeUM7QUFDbEMsU0FBU2UsVUFBVUMsR0FBRztJQUN6QixJQUFJUCxJQUFJO0lBQ1IsTUFBTVEsTUFBTUQsSUFBSVQsTUFBTTtJQUN0QixJQUFJVztJQUNKLE1BQU9ULElBQUlRLElBQUs7UUFDWkMsV0FBV0YsSUFBSUcsVUFBVSxDQUFDVjtRQUMxQixJQUFJUyxZQUFZLE1BQU1BLFlBQVksSUFBSTtZQUNsQ1Q7WUFDQTtRQUNKO1FBQ0EsT0FBTztJQUNYO0lBQ0EsT0FBTztBQUNYO0FBQ0E7Ozs7Q0FJQyxHQUNNLFNBQVNXLG9CQUFvQkMsSUFBSTtJQUNwQyxJQUFJQSxLQUFLQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUtELEtBQUtDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FDbkQsT0FBT0Q7SUFDWCxPQUFPQSxLQUFLRSxPQUFPLENBQUMsTUFBTSxNQUFNQSxPQUFPLENBQUMsT0FBTztBQUNuRDtBQUNBOzs7O0NBSUMsR0FDTSxTQUFTQyxzQkFBc0JILElBQUk7SUFDdEMsT0FBT0EsS0FBS0UsT0FBTyxDQUFDLE9BQU8sS0FBS0EsT0FBTyxDQUFDLE9BQU87QUFDbkQ7QUFDTyxTQUFTRSxrQkFBa0JDLElBQUksRUFBRTFCLEdBQUc7SUFDdkMsSUFBSTJCO0lBQ0osSUFBSyxJQUFJMUIsT0FBT3lCLEtBQU07UUFDbEIsSUFBSTNCLGVBQWUyQixNQUFNekIsTUFBTTtZQUMzQixJQUFJeUIsSUFBSSxDQUFDekIsSUFBSSxLQUFLRCxLQUFLO2dCQUNuQixPQUFPb0Isb0JBQW9CbkIsT0FBTztZQUN0QyxPQUNLLElBQUksT0FBT3lCLElBQUksQ0FBQ3pCLElBQUksS0FBSyxVQUFVO2dCQUNwQzBCLFFBQVFGLGtCQUFrQkMsSUFBSSxDQUFDekIsSUFBSSxFQUFFRDtnQkFDckMsSUFBSTJCLFNBQVMsSUFBSTtvQkFDYixPQUFPUCxvQkFBb0JuQixPQUFPLE1BQU0wQjtnQkFDNUM7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO0FBQ1g7QUFDTyxTQUFTQyxRQUFRRixJQUFJLEVBQUUxQixHQUFHO0lBQzdCLElBQUkwQixTQUFTMUIsS0FBSztRQUNkLE9BQU87SUFDWDtJQUNBLE1BQU1xQixPQUFPSSxrQkFBa0JDLE1BQU0xQjtJQUNyQyxJQUFJcUIsU0FBUyxJQUFJO1FBQ2IsTUFBTSxJQUFJUSxNQUFNO0lBQ3BCO0lBQ0EsT0FBTyxDQUFDLENBQUMsRUFBRVIsS0FBSyxDQUFDO0FBQ3JCO0FBQ0E7O0NBRUMsR0FDTSxTQUFTUyxhQUFhOUIsR0FBRztJQUM1QixJQUFJQSxRQUFRK0IsV0FBVztRQUNuQixPQUFPO0lBQ1g7SUFDQSxJQUFJL0IsS0FBSztRQUNMLElBQUlJLE1BQU1DLE9BQU8sQ0FBQ0wsTUFBTTtZQUNwQixJQUFLLElBQUlTLElBQUksR0FBR1EsTUFBTWpCLElBQUlPLE1BQU0sRUFBRUUsSUFBSVEsS0FBS1IsSUFBSztnQkFDNUMsSUFBSXFCLGFBQWE5QixHQUFHLENBQUNTLEVBQUUsR0FBRztvQkFDdEIsT0FBTztnQkFDWDtZQUNKO1FBQ0osT0FDSyxJQUFJLE9BQU9ULFFBQVEsVUFBVTtZQUM5QixNQUFNZ0MsVUFBVTdCLFlBQVlIO1lBQzVCLE1BQU1pQyxnQkFBZ0JELFFBQVF6QixNQUFNO1lBQ3BDLElBQUssSUFBSUUsSUFBSSxHQUFHQSxJQUFJd0IsZUFBZXhCLElBQUs7Z0JBQ3BDLElBQUlxQixhQUFhOUIsR0FBRyxDQUFDZ0MsT0FBTyxDQUFDdkIsRUFBRSxDQUFDLEdBQUc7b0JBQy9CLE9BQU87Z0JBQ1g7WUFDSjtRQUNKO0lBQ0o7SUFDQSxPQUFPO0FBQ1g7QUFDQSxTQUFTeUIsMkJBQTJCQyxPQUFPLEVBQUVDLElBQUk7SUFDN0MsTUFBTUMsZUFBZTtRQUFDRjtLQUFRO0lBQzlCLElBQUssTUFBTWxDLE9BQU9tQyxLQUFNO1FBQ3BCLE1BQU1FLFFBQVEsT0FBT0YsSUFBSSxDQUFDbkMsSUFBSSxLQUFLLFdBQzdCVyxLQUFLRSxTQUFTLENBQUNzQixJQUFJLENBQUNuQyxJQUFJLEVBQUUsTUFBTSxLQUNoQ21DLElBQUksQ0FBQ25DLElBQUksRUFBRSxlQUFlO1FBQ2hDLElBQUksT0FBT3FDLFVBQVUsYUFBYTtZQUM5QkQsYUFBYTNCLElBQUksQ0FBQyxDQUFDLEVBQUVULElBQUksRUFBRSxFQUFFcUMsTUFBTSxDQUFDO1FBQ3hDO0lBQ0o7SUFDQSxPQUFPRCxhQUFhRSxJQUFJLENBQUM7QUFDN0I7QUFDTyxNQUFNQyxtQkFBbUJYO0lBQzVCWSxZQUFZTixPQUFPLEVBQUVPLElBQUksRUFBRUMsS0FBSyxFQUFFQyxTQUFTLEVBQUVDLElBQUksQ0FBRTtRQUMvQyxLQUFLLENBQUNYLDJCQUEyQkMsU0FBUztZQUFFTztZQUFNQztZQUFPQztZQUFXQztRQUFLO1FBQ3pFaEQsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT0k7UUFDWDtRQUNBN0MsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT0s7UUFDWDtRQUNBOUMsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT007UUFDWDtRQUNBL0MsT0FBT2lELGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVlgsT0FBT087UUFDWDtRQUNBaEQsT0FBT3FELGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBV3BELFNBQVMsR0FBRyxvRUFBb0U7UUFDdkgsSUFBSSxDQUFDcUMsT0FBTyxHQUFHRCwyQkFBMkJDLFNBQVM7WUFDL0NPO1lBQ0FDO1lBQ0FDO1lBQ0FDO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanM/ZjM2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDE3LTIwMjIgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlZFxuICovXG5jb25zdCBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfb2JqZWN0S2V5cyhvYmopIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgQXJyYXkob2JqLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAga2V5c1trXSA9IFwiXCIgKyBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuICAgIGxldCBrZXlzID0gW107XG4gICAgZm9yIChsZXQgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwgaSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbi8qKlxuICogRGVlcGx5IGNsb25lIHRoZSBvYmplY3QuXG4gKiBodHRwczovL2pzcGVyZi5jb20vZGVlcC1jb3B5LXZzLWpzb24tc3RyaW5naWZ5LWpzb24tcGFyc2UvMjUgKHJlY3Vyc2l2ZURlZXBDb3B5KVxuICogQHBhcmFtICB7YW55fSBvYmogdmFsdWUgdG8gY2xvbmVcbiAqIEByZXR1cm4ge2FueX0gY2xvbmVkIG9ialxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RlZXBDbG9uZShvYmopIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmopIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7IC8vRmFzdGVyIHRoYW4gRVM1IGNsb25lIC0gaHR0cDovL2pzcGVyZi5jb20vZGVlcC1jbG9uaW5nLW9mLW9iamVjdHMvNVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy90aGlzIGlzIGhvdyBKU09OLnN0cmluZ2lmeSBiZWhhdmVzIGZvciBhcnJheSBpdGVtc1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG9iajsgLy9ubyBuZWVkIHRvIGNsb25lIHByaW1pdGl2ZXNcbiAgICB9XG59XG4vLzN4IGZhc3RlciB0aGFuIGNhY2hlZCAvXlxcZCskLy50ZXN0KHN0cilcbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVnZXIoc3RyKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgbGV0IGNoYXJDb2RlO1xuICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgcmF3IHBvaW50ZXJcbiAqIEByZXR1cm4gdGhlIEVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgaWYgKHBhdGguaW5kZXhPZihcIi9cIikgPT09IC0xICYmIHBhdGguaW5kZXhPZihcIn5cIikgPT09IC0xKVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG59XG4vKipcbiAqIFVuZXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgZXNjYXBlZCBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSB1bmVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+MS9nLCBcIi9cIikucmVwbGFjZSgvfjAvZywgXCJ+XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaikge1xuICAgIGxldCBmb3VuZDtcbiAgICBmb3IgKGxldCBrZXkgaW4gcm9vdCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkocm9vdCwga2V5KSkge1xuICAgICAgICAgICAgaWYgKHJvb3Rba2V5XSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJvb3Rba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdFtrZXldLCBvYmopO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIiArIGZvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoKHJvb3QsIG9iaikge1xuICAgIGlmIChyb290ID09PSBvYmopIHtcbiAgICAgICAgcmV0dXJuIFwiL1wiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKTtcbiAgICBpZiAocGF0aCA9PT0gXCJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kIGluIHJvb3RcIik7XG4gICAgfVxuICAgIHJldHVybiBgLyR7cGF0aH1gO1xufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgd2hldGhlciBhbiBvYmplY3QgaGFzIGFueSB1bmRlZmluZWQgdmFsdWVzIGluc2lkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1VuZGVmaW5lZChvYmopIHtcbiAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvYmopIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzTGVuZ3RoID0gb2JqS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW29iaktleXNbaV1dKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgYXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2VQYXJ0cyA9IFttZXNzYWdlXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGFyZ3Nba2V5XSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShhcmdzW2tleV0sIG51bGwsIDIpXG4gICAgICAgICAgICA6IGFyZ3Nba2V5XTsgLy8gcHJldHR5IHByaW50XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJ0cy5wdXNoKGAke2tleX06ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VQYXJ0cy5qb2luKFwiXFxuXCIpO1xufVxuZXhwb3J0IGNsYXNzIFBhdGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSkge1xuICAgICAgICBzdXBlcihwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7IG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUgfSkpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZXJhdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3BlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cmVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOyAvLyByZXN0b3JlIHByb3RvdHlwZSBjaGFpbiwgc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODM0MjM1OVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICB0cmVlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX2hhc093blByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJjYWxsIiwiX29iamVjdEtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJrZXlzIiwibGVuZ3RoIiwiayIsImkiLCJwdXNoIiwiX2RlZXBDbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImlzSW50ZWdlciIsInN0ciIsImxlbiIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJwYXRoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJfZ2V0UGF0aFJlY3Vyc2l2ZSIsInJvb3QiLCJmb3VuZCIsImdldFBhdGgiLCJFcnJvciIsImhhc1VuZGVmaW5lZCIsInVuZGVmaW5lZCIsIm9iaktleXMiLCJvYmpLZXlzTGVuZ3RoIiwicGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIiLCJtZXNzYWdlIiwiYXJncyIsIm1lc3NhZ2VQYXJ0cyIsInZhbHVlIiwiam9pbiIsIlBhdGNoRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpbmRleCIsIm9wZXJhdGlvbiIsInRyZWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/json.js":
/*!********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/json.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9qc29uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sU0FBU0Esa0JBQWtCQyxDQUFDLEVBQUVDLFNBQVNDLGdCQUFnQjtJQUMxRCw2Q0FBNkM7SUFDN0NGLElBQUlBLEVBQUVHLElBQUk7SUFDVixNQUFNQyxRQUFRLHFCQUFxQkMsSUFBSSxDQUFDTDtJQUN4QyxJQUFJLENBQUNJLE9BQU87UUFDUixPQUFPSCxPQUFPRDtJQUNsQixPQUNLO1FBQ0QsT0FBT0MsT0FBT0csS0FBSyxDQUFDLEVBQUU7SUFDMUI7QUFDSjtBQUNBLDJIQUEySDtBQUMzSCxjQUFjO0FBQ1AsU0FBU0YsaUJBQWlCRixDQUFDO0lBQzlCLDhEQUE4RDtJQUM5RCxJQUFJLE9BQU9BLE1BQU0sYUFBYTtRQUMxQixPQUFPO0lBQ1g7SUFDQSxxQ0FBcUM7SUFDckMsSUFBSTtRQUNBLE9BQU9NLEtBQUtDLEtBQUssQ0FBQ1A7SUFDdEIsRUFDQSxPQUFPUSxPQUFPO0lBQ1YsT0FBTztJQUNYO0lBQ0Esd0JBQXdCO0lBQ3hCLElBQUlDLFFBQVE7SUFDWixNQUFNQyxRQUFRLEVBQUU7SUFDaEIsSUFBSUMsaUJBQWlCO0lBQ3JCLElBQUlDLFVBQVU7SUFDZCxzREFBc0Q7SUFDdEQsS0FBSyxJQUFJQyxRQUFRYixFQUFHO1FBQ2hCLElBQUlXLGdCQUFnQjtZQUNoQixJQUFJRSxTQUFTLE9BQU8sQ0FBQ0QsU0FBUztnQkFDMUJELGlCQUFpQjtZQUNyQixPQUNLLElBQUlFLFNBQVMsUUFBUSxDQUFDRCxTQUFTO2dCQUNoQ0MsT0FBTyxPQUFPLDBEQUEwRDtZQUM1RSxPQUNLLElBQUlBLFNBQVMsTUFBTTtnQkFDcEJELFVBQVUsQ0FBQ0E7WUFDZixPQUNLO2dCQUNEQSxVQUFVO1lBQ2Q7UUFDSixPQUNLO1lBQ0QsSUFBSUMsU0FBUyxLQUFLO2dCQUNkRixpQkFBaUI7Z0JBQ2pCQyxVQUFVO1lBQ2QsT0FDSyxJQUFJQyxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsS0FBSztnQkFDbkJILE1BQU1JLElBQUksQ0FBQztZQUNmLE9BQ0ssSUFBSUQsU0FBUyxPQUFPQSxTQUFTLEtBQUs7Z0JBQ25DLElBQUlILFNBQVNBLEtBQUssQ0FBQ0EsTUFBTUssTUFBTSxHQUFHLEVBQUUsS0FBS0YsTUFBTTtvQkFDM0NILE1BQU1NLEdBQUc7Z0JBQ2IsT0FDSztvQkFDRCx3REFBd0Q7b0JBQ3hELE9BQU87Z0JBQ1g7WUFDSjtRQUNKO1FBQ0Esb0RBQW9EO1FBQ3BEUCxTQUFTSTtJQUNiO0lBQ0EsMkRBQTJEO0lBQzNELCtCQUErQjtJQUMvQixJQUFJRixnQkFBZ0I7UUFDaEJGLFNBQVM7SUFDYjtJQUNBLGtGQUFrRjtJQUNsRixJQUFLLElBQUlRLElBQUlQLE1BQU1LLE1BQU0sR0FBRyxHQUFHRSxLQUFLLEdBQUdBLEtBQUssRUFBRztRQUMzQ1IsU0FBU0MsS0FBSyxDQUFDTyxFQUFFO0lBQ3JCO0lBQ0EsZ0RBQWdEO0lBQ2hELElBQUk7UUFDQSxPQUFPWCxLQUFLQyxLQUFLLENBQUNFO0lBQ3RCLEVBQ0EsT0FBT0QsT0FBTztRQUNWLCtFQUErRTtRQUMvRSxPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbi5qcz9hOWYxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25NYXJrZG93bihzLCBwYXJzZXIgPSBwYXJzZVBhcnRpYWxKc29uKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgcyA9IHMudHJpbSgpO1xuICAgIGNvbnN0IG1hdGNoID0gL2BgYChqc29uKT8oLiopYGBgL3MuZXhlYyhzKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIocyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcGFyc2VyKG1hdGNoWzJdKTtcbiAgICB9XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0tpbGxpYW5MdWNhcy9vcGVuLWludGVycHJldGVyL2Jsb2IvbWFpbi9pbnRlcnByZXRlci9jb3JlL2xsbS91dGlscy9wYXJzZV9wYXJ0aWFsX2pzb24ucHlcbi8vIE1JVCBMaWNlbnNlXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQYXJ0aWFsSnNvbihzKSB7XG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCwgcmV0dXJuIG51bGwgdG8gaW5kaWNhdGUgZmFpbHVyZS5cbiAgICBpZiAodHlwZW9mIHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdGhlIHN0cmluZyBhcy1pcy5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIFBhc3NcbiAgICB9XG4gICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXMuXG4gICAgbGV0IG5ld19zID0gXCJcIjtcbiAgICBjb25zdCBzdGFjayA9IFtdO1xuICAgIGxldCBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgIGxldCBlc2NhcGVkID0gZmFsc2U7XG4gICAgLy8gUHJvY2VzcyBlYWNoIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nIG9uZSBhdCBhIHRpbWUuXG4gICAgZm9yIChsZXQgY2hhciBvZiBzKSB7XG4gICAgICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJcXG5cIiAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIGNoYXIgPSBcIlxcXFxuXCI7IC8vIFJlcGxhY2UgdGhlIG5ld2xpbmUgY2hhcmFjdGVyIHdpdGggdGhlIGVzY2FwZSBzZXF1ZW5jZS5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICFlc2NhcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcbiAgICAgICAgICAgICAgICBpc0luc2lkZVN0cmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJ7XCIpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFwifVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiW1wiKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChcIl1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIn1cIiB8fCBjaGFyID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgIGlmIChzdGFjayAmJiBzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gY2hhcikge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1pc21hdGNoZWQgY2xvc2luZyBjaGFyYWN0ZXI7IHRoZSBpbnB1dCBpcyBtYWxmb3JtZWQuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBcHBlbmQgdGhlIHByb2Nlc3NlZCBjaGFyYWN0ZXIgdG8gdGhlIG5ldyBzdHJpbmcuXG4gICAgICAgIG5ld19zICs9IGNoYXI7XG4gICAgfVxuICAgIC8vIElmIHdlJ3JlIHN0aWxsIGluc2lkZSBhIHN0cmluZyBhdCB0aGUgZW5kIG9mIHByb2Nlc3NpbmcsXG4gICAgLy8gd2UgbmVlZCB0byBjbG9zZSB0aGUgc3RyaW5nLlxuICAgIGlmIChpc0luc2lkZVN0cmluZykge1xuICAgICAgICBuZXdfcyArPSAnXCInO1xuICAgIH1cbiAgICAvLyBDbG9zZSBhbnkgcmVtYWluaW5nIG9wZW4gc3RydWN0dXJlcyBpbiB0aGUgcmV2ZXJzZSBvcmRlciB0aGF0IHRoZXkgd2VyZSBvcGVuZWQuXG4gICAgZm9yIChsZXQgaSA9IHN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XG4gICAgICAgIG5ld19zICs9IHN0YWNrW2ldO1xuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBtb2RpZmllZCBzdHJpbmcgYXMgSlNPTi5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShuZXdfcyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJZiB3ZSBzdGlsbCBjYW4ndCBwYXJzZSB0aGUgc3RyaW5nIGFzIEpTT04sIHJldHVybiBudWxsIHRvIGluZGljYXRlIGZhaWx1cmUuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJwYXJzZUpzb25NYXJrZG93biIsInMiLCJwYXJzZXIiLCJwYXJzZVBhcnRpYWxKc29uIiwidHJpbSIsIm1hdGNoIiwiZXhlYyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwibmV3X3MiLCJzdGFjayIsImlzSW5zaWRlU3RyaW5nIiwiZXNjYXBlZCIsImNoYXIiLCJwdXNoIiwibGVuZ3RoIiwicG9wIiwiaSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/stream.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/stream.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(generator, startSetup){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = generator;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            this.firstResult = generator.next();\n            if (startSetup) {\n                this.firstResult.then(startSetup).then(resolve, reject);\n            } else {\n                this.firstResult.then((_result)=>resolve(undefined), reject);\n            }\n        });\n    }\n    async next(...args) {\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return this.generator.next(...args);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, ...args) {\n    const gen = new AsyncGeneratorWithSetup(generator, startSetup);\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9zdHJlYW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FDTSxNQUFNQSwrQkFBK0JDO0lBQ3hDQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0FDLGVBQWU7UUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDZCxJQUFJLENBQUNBLE1BQU0sR0FBRyxJQUFJLENBQUNDLFNBQVM7UUFDaEM7SUFDSjtJQUNBLE1BQU1DLE9BQU87UUFDVCxJQUFJLENBQUNILFlBQVk7UUFDakIsSUFBSTtZQUNBLE1BQU1JLFNBQVMsTUFBTSxJQUFJLENBQUNILE1BQU0sQ0FBQ0ksSUFBSTtZQUNyQyxJQUFJRCxPQUFPRSxJQUFJLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDTCxNQUFNLENBQUNNLFdBQVcsSUFBSSwwQ0FBMEM7Z0JBQ3JFLE9BQU87b0JBQ0hELE1BQU07b0JBQ05QLE9BQU9TO2dCQUNYO1lBQ0osT0FDSztnQkFDRCxPQUFPO29CQUNIRixNQUFNO29CQUNOUCxPQUFPSyxPQUFPTCxLQUFLO2dCQUN2QjtZQUNKO1FBQ0osRUFDQSxPQUFPVSxHQUFHO1lBQ04sSUFBSSxDQUFDUixNQUFNLENBQUNNLFdBQVcsSUFBSSwyQ0FBMkM7WUFDdEUsTUFBTUU7UUFDVjtJQUNKO0lBQ0EsTUFBTUMsU0FBUztRQUNYLElBQUksQ0FBQ1YsWUFBWTtRQUNqQix5REFBeUQ7UUFDekQsSUFBSSxJQUFJLENBQUNXLE1BQU0sRUFBRTtZQUNiLE1BQU1DLGdCQUFnQixJQUFJLENBQUNYLE1BQU0sQ0FBQ1ksTUFBTSxJQUFJLG9DQUFvQztZQUNoRixJQUFJLENB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M0UsTUFBTUksTUFBTSxJQUFJWix3QkFBd0J0QixXQUFXdUI7SUFDbkQsTUFBTUMsUUFBUSxNQUFNVSxJQUFJVixLQUFLO0lBQzdCLE9BQU87UUFBRVcsUUFBUUYsR0FBR0MsS0FBS1YsVUFBVU07UUFBT047SUFBTTtBQUNwRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzPzBjYTciXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFN1cHBvcnQgYXN5bmMgaXRlcmF0b3Igc3ludGF4IGZvciBSZWFkYWJsZVN0cmVhbXMgaW4gYWxsIGVudmlyb25tZW50cy5cbiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBjbGFzcyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIGV4dGVuZHMgUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWFkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5zdXJlUmVhZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IHRoaXMuZ2V0UmVhZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGVycm9yZWRcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICAvLyBJZiB3cmFwcGVkIGluIGEgTm9kZSBzdHJlYW0sIGNhbmNlbCBpcyBhbHJlYWR5IGNhbGxlZC5cbiAgICAgICAgaWYgKHRoaXMubG9ja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7IC8vIGNhbmNlbCBmaXJzdCwgYnV0IGRvbid0IGF3YWl0IHlldFxuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIGZpcnN0XG4gICAgICAgICAgICBhd2FpdCBjYW5jZWxQcm9taXNlOyAvLyBub3cgYXdhaXQgaXRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICAvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TdHJlYW1zX0FQSS9Vc2luZ19yZWFkYWJsZV9zdHJlYW1zI3JlYWRpbmdfdGhlX3N0cmVhbVxuICAgICAgICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwdW1wKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIHRoZSBuZXh0IGRhdGEgY2h1bmsgaW50byBvdXIgdGFyZ2V0IHN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21Bc3luY0dlbmVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIGFzeW5jIHB1bGwoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpeDogYGVsc2UgaWYgKHZhbHVlKWAgd2lsbCBoYW5nIHRoZSBzdHJlYW1pbmcgd2hlbiBudWxsaXNoIHZhbHVlIChlLmcuIGVtcHR5IHN0cmluZykgaXMgcHVsbGVkXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyBjYW5jZWwocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdG9yLnJldHVybihyZWFzb24pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGF0ZWUoaXRlciwgbGVuZ3RoID0gMikge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IFtdKTtcbiAgICByZXR1cm4gYnVmZmVycy5tYXAoYXN5bmMgZnVuY3Rpb24qIG1ha2VJdGVyKGJ1ZmZlcikge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpdGVyLm5leHQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVyWzBdLmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIHlpZWxkIGJ1ZmZlci5zaGlmdCgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KGZpcnN0LCBzZWNvbmQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmaXJzdCkgJiYgQXJyYXkuaXNBcnJheShzZWNvbmQpKSB7XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiAoZmlyc3QgKyBzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwiY29uY2F0XCIgaW4gZmlyc3QgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHlwZW9mIGZpcnN0LmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY2h1bmsgPSB7IC4uLmZpcnN0IH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNlY29uZCkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gY2h1bmsgJiYgIUFycmF5LmlzQXJyYXkoY2h1bmtba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBjaHVua1trZXldID0gY29uY2F0KGNodW5rW2tleV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb25jYXQgJHt0eXBlb2YgZmlyc3R9IGFuZCAke3R5cGVvZiBzZWNvbmR9YCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIHtcbiAgICBjb25zdHJ1Y3RvcihnZW5lcmF0b3IsIHN0YXJ0U2V0dXApIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2VuZXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHVwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0VXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgICAgICAvLyBzZXR1cCBpcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmx5IGFmdGVyIHRoZSBmaXJzdCBpdGVyYXRvciB2YWx1ZVxuICAgICAgICAvLyBpcyBhdmFpbGFibGUuIHRoaXMgaXMgdXNlZnVsIHdoZW4gc2V0dXAgb2Ygc2V2ZXJhbCBwaXBlZCBnZW5lcmF0b3JzXG4gICAgICAgIC8vIG5lZWRzIHRvIGhhcHBlbiBpbiBsb2dpY2FsIG9yZGVyLCBpZS4gaW4gdGhlIG9yZGVyIGluIHdoaWNoIGlucHV0IHRvXG4gICAgICAgIC8vIHRvIGVhY2ggZ2VuZXJhdG9yIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgdGhpcy5zZXR1cCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQgPSBnZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0U2V0dXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oc3RhcnRTZXR1cCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdC50aGVuKChfcmVzdWx0KSA9PiByZXNvbHZlKHVuZGVmaW5lZCksIHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBuZXh0KC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0UmVzdWx0VXNlZCkge1xuICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdFVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLm5leHQoLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJldHVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IucmV0dXJuKHZhbHVlKTtcbiAgICB9XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IudGhyb3coZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwaXBlR2VuZXJhdG9yV2l0aFNldHVwKHRvLCBnZW5lcmF0b3IsIHN0YXJ0U2V0dXAsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBnZW4gPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoZ2VuZXJhdG9yLCBzdGFydFNldHVwKTtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IGdlbi5zZXR1cDtcbiAgICByZXR1cm4geyBvdXRwdXQ6IHRvKGdlbiwgc2V0dXAsIC4uLmFyZ3MpLCBzZXR1cCB9O1xufVxuIl0sIm5hbWVzIjpbIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImVuc3VyZVJlYWRlciIsInJlYWRlciIsImdldFJlYWRlciIsIm5leHQiLCJyZXN1bHQiLCJyZWFkIiwiZG9uZSIsInJlbGVhc2VMb2NrIiwidW5kZWZpbmVkIiwiZSIsInJldHVybiIsImxvY2tlZCIsImNhbmNlbFByb21pc2UiLCJjYW5jZWwiLCJ0aHJvdyIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJzdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJwdW1wIiwidGhlbiIsImNsb3NlIiwiZW5xdWV1ZSIsImZyb21Bc3luY0dlbmVyYXRvciIsImdlbmVyYXRvciIsInB1bGwiLCJyZWFzb24iLCJhdGVlIiwiaXRlciIsImxlbmd0aCIsImJ1ZmZlcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJtYWtlSXRlciIsImJ1ZmZlciIsInB1c2giLCJzaGlmdCIsImNvbmNhdCIsImZpcnN0Iiwic2Vjb25kIiwiaXNBcnJheSIsImNodW5rIiwia2V5IiwiZW50cmllcyIsIkVycm9yIiwiQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAiLCJzdGFydFNldHVwIiwic2V0dXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZpcnN0UmVzdWx0IiwiX3Jlc3VsdCIsImFyZ3MiLCJmaXJzdFJlc3VsdFVzZWQiLCJwaXBlR2VuZXJhdG9yV2l0aFNldHVwIiwidG8iLCJnZW4iLCJvdXRwdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!************************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy90aWt0b2tlbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNFO0FBQ3RCO0FBQ2hELE1BQU1HLFFBQVEsQ0FBQztBQUNmLE1BQU1DLFNBQVMsYUFBYSxHQUFHLElBQUlGLHlEQUFXQSxDQUFDLENBQUM7QUFDekMsZUFBZUcsWUFBWUMsUUFBUTtJQUN0QyxJQUFJLENBQUVBLENBQUFBLFlBQVlILEtBQUksR0FBSTtRQUN0QkEsS0FBSyxDQUFDRyxTQUFTLEdBQUdGLE9BQ2JHLEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFRCxTQUFTLEtBQUssQ0FBQyxFQUN0REUsSUFBSSxDQUFDLENBQUNDLE1BQVFBLElBQUlDLElBQUksSUFDdEJGLElBQUksQ0FBQyxDQUFDRyxPQUFTLElBQUlYLHNEQUFRQSxDQUFDVyxPQUM1QkMsS0FBSyxDQUFDLENBQUNDO1lBQ1IsT0FBT1YsS0FBSyxDQUFDRyxTQUFTO1lBQ3RCLE1BQU1PO1FBQ1Y7SUFDSjtJQUNBLE9BQU8sTUFBTVYsS0FBSyxDQUFDRyxTQUFTO0FBQ2hDO0FBQ08sZUFBZVEsaUJBQWlCQyxLQUFLO0lBQ3hDLE9BQU9WLFlBQVlKLHlFQUF1QkEsQ0FBQ2M7QUFDL0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzP2EwZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCB9IGZyb20gXCJqcy10aWt0b2tlbi9saXRlXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuY29uc3QgY2FjaGUgPSB7fTtcbmNvbnN0IGNhbGxlciA9IC8qICNfX1BVUkVfXyAqLyBuZXcgQXN5bmNDYWxsZXIoe30pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nKSB7XG4gICAgaWYgKCEoZW5jb2RpbmcgaW4gY2FjaGUpKSB7XG4gICAgICAgIGNhY2hlW2VuY29kaW5nXSA9IGNhbGxlclxuICAgICAgICAgICAgLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYClcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gbmV3IFRpa3Rva2VuKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbZW5jb2RpbmddO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjYWNoZVtlbmNvZGluZ107XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jb2RpbmdGb3JNb2RlbChtb2RlbCkge1xuICAgIHJldHVybiBnZXRFbmNvZGluZyhnZXRFbmNvZGluZ05hbWVGb3JNb2RlbChtb2RlbCkpO1xufVxuIl0sIm5hbWVzIjpbIlRpa3Rva2VuIiwiZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwiLCJBc3luY0NhbGxlciIsImNhY2hlIiwiY2FsbGVyIiwiZ2V0RW5jb2RpbmciLCJlbmNvZGluZyIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY2F0Y2giLCJlIiwiZW5jb2RpbmdGb3JNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/documents.js":
/*!**************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/documents.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZG9jdW1lbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kb2N1bWVudHMuanM/YjE3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/env.js":
/*!**************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/utils/env.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGEtYm90Ly4vbm9kZV9tb2R1bGVzL2xhbmdjaGFpbi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcz9jMTAzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvZW52LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/tiktoken.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/langchain/node_modules/@langchain/core/utils/tiktoken.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.encodingForModel),\n/* harmony export */   getEncoding: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.getEncoding)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/tiktoken.js */ \"(rsc)/./node_modules/langchain/node_modules/@langchain/core/dist/utils/tiktoken.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0YS1ib3QvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdGlrdG9rZW4uanM/NjFmNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/node_modules/@langchain/core/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/langchain/text_splitter.js":
/*!*************************************************!*\
  !*** ./node_modules/langchain/text_splitter.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CharacterTextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.CharacterTextSplitter),\n/* harmony export */   LatexTextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.LatexTextSplitter),\n/* harmony export */   MarkdownTextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownTextSplitter),\n/* harmony export */   RecursiveCharacterTextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.RecursiveCharacterTextSplitter),\n/* harmony export */   SupportedTextSplitterLanguages: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.SupportedTextSplitterLanguages),\n/* harmony export */   TextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.TextSplitter),\n/* harmony export */   TokenTextSplitter: () => (/* reexport safe */ _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__.TokenTextSplitter)\n/* harmony export */ });\n/* harmony import */ var _dist_text_splitter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/text_splitter.js */ \"(rsc)/./node_modules/langchain/dist/text_splitter.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbGFuZ2NoYWluL3RleHRfc3BsaXR0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRhLWJvdC8uL25vZGVfbW9kdWxlcy9sYW5nY2hhaW4vdGV4dF9zcGxpdHRlci5qcz83ZWFjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC90ZXh0X3NwbGl0dGVyLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/langchain/text_splitter.js\n");

/***/ })

};
;